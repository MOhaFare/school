var uR=Object.defineProperty;var dR=(e,t,r)=>t in e?uR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Yw=(e,t,r)=>dR(e,typeof t!="symbol"?t+"":t,r);function hR(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var gc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ye(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dA={exports:{}},Am={},hA={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id=Symbol.for("react.element"),fR=Symbol.for("react.portal"),mR=Symbol.for("react.fragment"),pR=Symbol.for("react.strict_mode"),xR=Symbol.for("react.profiler"),gR=Symbol.for("react.provider"),yR=Symbol.for("react.context"),vR=Symbol.for("react.forward_ref"),bR=Symbol.for("react.suspense"),jR=Symbol.for("react.memo"),wR=Symbol.for("react.lazy"),Xw=Symbol.iterator;function NR(e){return e===null||typeof e!="object"?null:(e=Xw&&e[Xw]||e["@@iterator"],typeof e=="function"?e:null)}var fA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mA=Object.assign,pA={};function Cl(e,t,r){this.props=e,this.context=t,this.refs=pA,this.updater=r||fA}Cl.prototype.isReactComponent={};Cl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Cl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function xA(){}xA.prototype=Cl.prototype;function K0(e,t,r){this.props=e,this.context=t,this.refs=pA,this.updater=r||fA}var H0=K0.prototype=new xA;H0.constructor=K0;mA(H0,Cl.prototype);H0.isPureReactComponent=!0;var Jw=Array.isArray,gA=Object.prototype.hasOwnProperty,Y0={current:null},yA={key:!0,ref:!0,__self:!0,__source:!0};function vA(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)gA.call(t,n)&&!yA.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:id,type:e,key:i,ref:o,props:a,_owner:Y0.current}}function SR(e,t){return{$$typeof:id,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function X0(e){return typeof e=="object"&&e!==null&&e.$$typeof===id}function _R(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qw=/\/+/g;function ax(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_R(""+e.key):t.toString(36)}function Sh(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case id:case fR:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+ax(o,0):n,Jw(a)?(r="",e!=null&&(r=e.replace(Qw,"$&/")+"/"),Sh(a,t,r,"",function(u){return u})):a!=null&&(X0(a)&&(a=SR(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Qw,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Jw(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+ax(i,l);o+=Sh(i,t,r,c,a)}else if(c=NR(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+ax(i,l++),o+=Sh(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $d(e,t,r){if(e==null)return e;var n=[],a=0;return Sh(e,n,"","",function(i){return t.call(r,i,a++)}),n}function CR(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nr={current:null},_h={transition:null},kR={ReactCurrentDispatcher:Nr,ReactCurrentBatchConfig:_h,ReactCurrentOwner:Y0};function bA(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:$d,forEach:function(e,t,r){$d(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $d(e,function(){t++}),t},toArray:function(e){return $d(e,function(t){return t})||[]},only:function(e){if(!X0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Le.Component=Cl;Le.Fragment=mR;Le.Profiler=xR;Le.PureComponent=K0;Le.StrictMode=pR;Le.Suspense=bR;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kR;Le.act=bA;Le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=mA({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Y0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)gA.call(t,c)&&!yA.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:id,type:e.type,key:a,ref:i,props:n,_owner:o}};Le.createContext=function(e){return e={$$typeof:yR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gR,_context:e},e.Consumer=e};Le.createElement=vA;Le.createFactory=function(e){var t=vA.bind(null,e);return t.type=e,t};Le.createRef=function(){return{current:null}};Le.forwardRef=function(e){return{$$typeof:vR,render:e}};Le.isValidElement=X0;Le.lazy=function(e){return{$$typeof:wR,_payload:{_status:-1,_result:e},_init:CR}};Le.memo=function(e,t){return{$$typeof:jR,type:e,compare:t===void 0?null:t}};Le.startTransition=function(e){var t=_h.transition;_h.transition={};try{e()}finally{_h.transition=t}};Le.unstable_act=bA;Le.useCallback=function(e,t){return Nr.current.useCallback(e,t)};Le.useContext=function(e){return Nr.current.useContext(e)};Le.useDebugValue=function(){};Le.useDeferredValue=function(e){return Nr.current.useDeferredValue(e)};Le.useEffect=function(e,t){return Nr.current.useEffect(e,t)};Le.useId=function(){return Nr.current.useId()};Le.useImperativeHandle=function(e,t,r){return Nr.current.useImperativeHandle(e,t,r)};Le.useInsertionEffect=function(e,t){return Nr.current.useInsertionEffect(e,t)};Le.useLayoutEffect=function(e,t){return Nr.current.useLayoutEffect(e,t)};Le.useMemo=function(e,t){return Nr.current.useMemo(e,t)};Le.useReducer=function(e,t,r){return Nr.current.useReducer(e,t,r)};Le.useRef=function(e){return Nr.current.useRef(e)};Le.useState=function(e){return Nr.current.useState(e)};Le.useSyncExternalStore=function(e,t,r){return Nr.current.useSyncExternalStore(e,t,r)};Le.useTransition=function(){return Nr.current.useTransition()};Le.version="18.3.1";hA.exports=Le;var j=hA.exports;const G=Ye(j),AR=hR({__proto__:null,default:G},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR=j,ER=Symbol.for("react.element"),PR=Symbol.for("react.fragment"),TR=Object.prototype.hasOwnProperty,$R=OR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DR={key:!0,ref:!0,__self:!0,__source:!0};function jA(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)TR.call(t,n)&&!DR.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:ER,type:e,key:i,ref:o,props:a,_owner:$R.current}}Am.Fragment=PR;Am.jsx=jA;Am.jsxs=jA;dA.exports=Am;var s=dA.exports,wA={exports:{}},en={},NA={exports:{}},SA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,U){var X=$.length;$.push(U);e:for(;0<X;){var K=X-1>>>1,z=$[K];if(0<a(z,U))$[K]=U,$[X]=z,X=K;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var U=$[0],X=$.pop();if(X!==U){$[0]=X;e:for(var K=0,z=$.length,H=z>>>1;K<H;){var Q=2*(K+1)-1,se=$[Q],ue=Q+1,ye=$[ue];if(0>a(se,X))ue<z&&0>a(ye,se)?($[K]=ye,$[ue]=X,K=ue):($[K]=se,$[Q]=X,K=Q);else if(ue<z&&0>a(ye,X))$[K]=ye,$[ue]=X,K=ue;else break e}}return U}function a($,U){var X=$.sortIndex-U.sortIndex;return X!==0?X:$.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,b=!1,x=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=$)n(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(u)}}function S($){if(x=!1,v($),!b)if(r(c)!==null)b=!0,F(w);else{var U=r(u);U!==null&&q(S,U.startTime-$)}}function w($,U){b=!1,x&&(x=!1,y(C),C=-1),p=!0;var X=f;try{for(v(U),d=r(c);d!==null&&(!(d.expirationTime>U)||$&&!E());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var z=K(d.expirationTime<=U);U=e.unstable_now(),typeof z=="function"?d.callback=z:d===r(c)&&n(c),v(U)}else n(c);d=r(c)}if(d!==null)var H=!0;else{var Q=r(u);Q!==null&&q(S,Q.startTime-U),H=!1}return H}finally{d=null,f=X,p=!1}}var N=!1,_=null,C=-1,A=5,k=-1;function E(){return!(e.unstable_now()-k<A)}function O(){if(_!==null){var $=e.unstable_now();k=$;var U=!0;try{U=_(!0,$)}finally{U?P():(N=!1,_=null)}}else N=!1}var P;if(typeof m=="function")P=function(){m(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,T=M.port2;M.port1.onmessage=O,P=function(){T.postMessage(null)}}else P=function(){g(O,0)};function F($){_=$,N||(N=!0,P())}function q($,U){C=g(function(){$(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,F(w))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var X=f;f=U;try{return $()}finally{f=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,U){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=f;f=$;try{return U()}finally{f=X}},e.unstable_scheduleCallback=function($,U,X){var K=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?K+X:K):X=K,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=X+z,$={id:h++,callback:U,priorityLevel:$,startTime:X,expirationTime:z,sortIndex:-1},X>K?($.sortIndex=X,t(u,$),r(c)===null&&$===r(u)&&(x?(y(C),C=-1):x=!0,q(S,X-K))):($.sortIndex=z,t(c,$),b||p||(b=!0,F(w))),$},e.unstable_shouldYield=E,e.unstable_wrapCallback=function($){var U=f;return function(){var X=f;f=U;try{return $.apply(this,arguments)}finally{f=X}}}})(SA);NA.exports=SA;var MR=NA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR=j,Xr=MR;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _A=new Set,Yc={};function Ei(e,t){Fo(e,t),Fo(e+"Capture",t)}function Fo(e,t){for(Yc[e]=t,e=0;e<t.length;e++)_A.add(t[e])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wg=Object.prototype.hasOwnProperty,IR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zw={},e1={};function LR(e){return Wg.call(e1,e)?!0:Wg.call(Zw,e)?!1:IR.test(e)?e1[e]=!0:(Zw[e]=!0,!1)}function FR(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zR(e,t,r,n){if(t===null||typeof t>"u"||FR(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sr[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sr[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sr[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sr[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sr[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sr[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sr[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sr[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sr[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var J0=/[\-:]([a-z])/g;function Q0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(J0,Q0);sr[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(J0,Q0);sr[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(J0,Q0);sr[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});sr.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sr[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Z0(e,t,r,n){var a=sr.hasOwnProperty(t)?sr[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zR(t,r,a,n)&&(r=null),n||a===null?LR(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Is=RR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dd=Symbol.for("react.element"),so=Symbol.for("react.portal"),ao=Symbol.for("react.fragment"),eb=Symbol.for("react.strict_mode"),Gg=Symbol.for("react.profiler"),CA=Symbol.for("react.provider"),kA=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),Kg=Symbol.for("react.suspense"),Hg=Symbol.for("react.suspense_list"),rb=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),AA=Symbol.for("react.offscreen"),t1=Symbol.iterator;function Ql(e){return e===null||typeof e!="object"?null:(e=t1&&e[t1]||e["@@iterator"],typeof e=="function"?e:null)}var vt=Object.assign,ix;function yc(e){if(ix===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ix=t&&t[1]||""}return`
`+ix+e}var ox=!1;function lx(e,t){if(!e||ox)return"";ox=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{ox=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?yc(e):""}function BR(e){switch(e.tag){case 5:return yc(e.type);case 16:return yc("Lazy");case 13:return yc("Suspense");case 19:return yc("SuspenseList");case 0:case 2:case 15:return e=lx(e.type,!1),e;case 11:return e=lx(e.type.render,!1),e;case 1:return e=lx(e.type,!0),e;default:return""}}function Yg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ao:return"Fragment";case so:return"Portal";case Gg:return"Profiler";case eb:return"StrictMode";case Kg:return"Suspense";case Hg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kA:return(e.displayName||"Context")+".Consumer";case CA:return(e._context.displayName||"Context")+".Provider";case tb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rb:return t=e.displayName||null,t!==null?t:Yg(e.type)||"Memo";case Js:t=e._payload,e=e._init;try{return Yg(e(t))}catch{}}return null}function UR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yg(t);case 8:return t===eb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ja(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function OA(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qR(e){var t=OA(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Md(e){e._valueTracker||(e._valueTracker=qR(e))}function EA(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=OA(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xg(e,t){var r=t.checked;return vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function r1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ja(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function PA(e,t){t=t.checked,t!=null&&Z0(e,"checked",t,!1)}function Jg(e,t){PA(e,t);var r=ja(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Qg(e,t.type,ja(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function n1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Qg(e,t,r){(t!=="number"||Bh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var vc=Array.isArray;function Ao(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ja(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Zg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function s1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(oe(92));if(vc(r)){if(1<r.length)throw Error(oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ja(r)}}function TA(e,t){var r=ja(t.value),n=ja(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function a1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $A(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ey(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$A(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rd,DA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rd=Rd||document.createElement("div"),Rd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VR=["Webkit","ms","Moz","O"];Object.keys(kc).forEach(function(e){VR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kc[t]=kc[e]})});function MA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||kc.hasOwnProperty(e)&&kc[e]?(""+t).trim():t+"px"}function RA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=MA(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var WR=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ty(e,t){if(t){if(WR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function ry(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ny=null;function nb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sy=null,Oo=null,Eo=null;function i1(e){if(e=cd(e)){if(typeof sy!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=$m(t),sy(e.stateNode,e.type,t))}}function IA(e){Oo?Eo?Eo.push(e):Eo=[e]:Oo=e}function LA(){if(Oo){var e=Oo,t=Eo;if(Eo=Oo=null,i1(e),t)for(e=0;e<t.length;e++)i1(t[e])}}function FA(e,t){return e(t)}function zA(){}var cx=!1;function BA(e,t,r){if(cx)return e(t,r);cx=!0;try{return FA(e,t,r)}finally{cx=!1,(Oo!==null||Eo!==null)&&(zA(),LA())}}function Jc(e,t){var r=e.stateNode;if(r===null)return null;var n=$m(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(oe(231,t,typeof r));return r}var ay=!1;if(As)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){ay=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{ay=!1}function GR(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(h){this.onError(h)}}var Ac=!1,Uh=null,qh=!1,iy=null,KR={onError:function(e){Ac=!0,Uh=e}};function HR(e,t,r,n,a,i,o,l,c){Ac=!1,Uh=null,GR.apply(KR,arguments)}function YR(e,t,r,n,a,i,o,l,c){if(HR.apply(this,arguments),Ac){if(Ac){var u=Uh;Ac=!1,Uh=null}else throw Error(oe(198));qh||(qh=!0,iy=u)}}function Pi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function UA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function o1(e){if(Pi(e)!==e)throw Error(oe(188))}function XR(e){var t=e.alternate;if(!t){if(t=Pi(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return o1(a),e;if(i===n)return o1(a),t;i=i.sibling}throw Error(oe(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(oe(189))}}if(r.alternate!==n)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?e:t}function qA(e){return e=XR(e),e!==null?VA(e):null}function VA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=VA(e);if(t!==null)return t;e=e.sibling}return null}var WA=Xr.unstable_scheduleCallback,l1=Xr.unstable_cancelCallback,JR=Xr.unstable_shouldYield,QR=Xr.unstable_requestPaint,kt=Xr.unstable_now,ZR=Xr.unstable_getCurrentPriorityLevel,sb=Xr.unstable_ImmediatePriority,GA=Xr.unstable_UserBlockingPriority,Vh=Xr.unstable_NormalPriority,e6=Xr.unstable_LowPriority,KA=Xr.unstable_IdlePriority,Om=null,Qn=null;function t6(e){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(Om,e,void 0,(e.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:s6,r6=Math.log,n6=Math.LN2;function s6(e){return e>>>=0,e===0?32:31-(r6(e)/n6|0)|0}var Id=64,Ld=4194304;function bc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=bc(l):(i&=o,i!==0&&(n=bc(i)))}else o=r&~a,o!==0?n=bc(o):i!==0&&(n=bc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ln(t),a=1<<r,n|=e[r],t&=~a;return n}function a6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function i6(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ln(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=a6(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function oy(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function HA(){var e=Id;return Id<<=1,!(Id&4194240)&&(Id=64),e}function ux(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function od(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ln(t),e[t]=r}function o6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ln(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function ab(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ln(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var He=0;function YA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var XA,ib,JA,QA,ZA,ly=!1,Fd=[],da=null,ha=null,fa=null,Qc=new Map,Zc=new Map,ta=[],l6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function c1(e,t){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(t.pointerId)}}function ec(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=cd(t),t!==null&&ib(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function c6(e,t,r,n,a){switch(t){case"focusin":return da=ec(da,e,t,r,n,a),!0;case"dragenter":return ha=ec(ha,e,t,r,n,a),!0;case"mouseover":return fa=ec(fa,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Qc.set(i,ec(Qc.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Zc.set(i,ec(Zc.get(i)||null,e,t,r,n,a)),!0}return!1}function eO(e){var t=ti(e.target);if(t!==null){var r=Pi(t);if(r!==null){if(t=r.tag,t===13){if(t=UA(r),t!==null){e.blockedOn=t,ZA(e.priority,function(){JA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ch(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=cy(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);ny=n,r.target.dispatchEvent(n),ny=null}else return t=cd(r),t!==null&&ib(t),e.blockedOn=r,!1;t.shift()}return!0}function u1(e,t,r){Ch(e)&&r.delete(t)}function u6(){ly=!1,da!==null&&Ch(da)&&(da=null),ha!==null&&Ch(ha)&&(ha=null),fa!==null&&Ch(fa)&&(fa=null),Qc.forEach(u1),Zc.forEach(u1)}function tc(e,t){e.blockedOn===t&&(e.blockedOn=null,ly||(ly=!0,Xr.unstable_scheduleCallback(Xr.unstable_NormalPriority,u6)))}function eu(e){function t(a){return tc(a,e)}if(0<Fd.length){tc(Fd[0],e);for(var r=1;r<Fd.length;r++){var n=Fd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(da!==null&&tc(da,e),ha!==null&&tc(ha,e),fa!==null&&tc(fa,e),Qc.forEach(t),Zc.forEach(t),r=0;r<ta.length;r++)n=ta[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ta.length&&(r=ta[0],r.blockedOn===null);)eO(r),r.blockedOn===null&&ta.shift()}var Po=Is.ReactCurrentBatchConfig,Gh=!0;function d6(e,t,r,n){var a=He,i=Po.transition;Po.transition=null;try{He=1,ob(e,t,r,n)}finally{He=a,Po.transition=i}}function h6(e,t,r,n){var a=He,i=Po.transition;Po.transition=null;try{He=4,ob(e,t,r,n)}finally{He=a,Po.transition=i}}function ob(e,t,r,n){if(Gh){var a=cy(e,t,r,n);if(a===null)bx(e,t,n,Kh,r),c1(e,n);else if(c6(a,e,t,r,n))n.stopPropagation();else if(c1(e,n),t&4&&-1<l6.indexOf(e)){for(;a!==null;){var i=cd(a);if(i!==null&&XA(i),i=cy(e,t,r,n),i===null&&bx(e,t,n,Kh,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else bx(e,t,n,null,r)}}var Kh=null;function cy(e,t,r,n){if(Kh=null,e=nb(n),e=ti(e),e!==null)if(t=Pi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=UA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kh=e,null}function tO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZR()){case sb:return 1;case GA:return 4;case Vh:case e6:return 16;case KA:return 536870912;default:return 16}default:return 16}}var ia=null,lb=null,kh=null;function rO(){if(kh)return kh;var e,t=lb,r=t.length,n,a="value"in ia?ia.value:ia.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return kh=a.slice(e,1<n?1-n:void 0)}function Ah(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zd(){return!0}function d1(){return!1}function tn(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zd:d1,this.isPropagationStopped=d1,this}return vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),t}var kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cb=tn(kl),ld=vt({},kl,{view:0,detail:0}),f6=tn(ld),dx,hx,rc,Em=vt({},ld,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ub,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rc&&(rc&&e.type==="mousemove"?(dx=e.screenX-rc.screenX,hx=e.screenY-rc.screenY):hx=dx=0,rc=e),dx)},movementY:function(e){return"movementY"in e?e.movementY:hx}}),h1=tn(Em),m6=vt({},Em,{dataTransfer:0}),p6=tn(m6),x6=vt({},ld,{relatedTarget:0}),fx=tn(x6),g6=vt({},kl,{animationName:0,elapsedTime:0,pseudoElement:0}),y6=tn(g6),v6=vt({},kl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),b6=tn(v6),j6=vt({},kl,{data:0}),f1=tn(j6),w6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=S6[e])?!!t[e]:!1}function ub(){return _6}var C6=vt({},ld,{key:function(e){if(e.key){var t=w6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ah(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ub,charCode:function(e){return e.type==="keypress"?Ah(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ah(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),k6=tn(C6),A6=vt({},Em,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),m1=tn(A6),O6=vt({},ld,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ub}),E6=tn(O6),P6=vt({},kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),T6=tn(P6),$6=vt({},Em,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D6=tn($6),M6=[9,13,27,32],db=As&&"CompositionEvent"in window,Oc=null;As&&"documentMode"in document&&(Oc=document.documentMode);var R6=As&&"TextEvent"in window&&!Oc,nO=As&&(!db||Oc&&8<Oc&&11>=Oc),p1=" ",x1=!1;function sO(e,t){switch(e){case"keyup":return M6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var io=!1;function I6(e,t){switch(e){case"compositionend":return aO(t);case"keypress":return t.which!==32?null:(x1=!0,p1);case"textInput":return e=t.data,e===p1&&x1?null:e;default:return null}}function L6(e,t){if(io)return e==="compositionend"||!db&&sO(e,t)?(e=rO(),kh=lb=ia=null,io=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nO&&t.locale!=="ko"?null:t.data;default:return null}}var F6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F6[e.type]:t==="textarea"}function iO(e,t,r,n){IA(n),t=Hh(t,"onChange"),0<t.length&&(r=new cb("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ec=null,tu=null;function z6(e){gO(e,0)}function Pm(e){var t=co(e);if(EA(t))return e}function B6(e,t){if(e==="change")return t}var oO=!1;if(As){var mx;if(As){var px="oninput"in document;if(!px){var y1=document.createElement("div");y1.setAttribute("oninput","return;"),px=typeof y1.oninput=="function"}mx=px}else mx=!1;oO=mx&&(!document.documentMode||9<document.documentMode)}function v1(){Ec&&(Ec.detachEvent("onpropertychange",lO),tu=Ec=null)}function lO(e){if(e.propertyName==="value"&&Pm(tu)){var t=[];iO(t,tu,e,nb(e)),BA(z6,t)}}function U6(e,t,r){e==="focusin"?(v1(),Ec=t,tu=r,Ec.attachEvent("onpropertychange",lO)):e==="focusout"&&v1()}function q6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pm(tu)}function V6(e,t){if(e==="click")return Pm(t)}function W6(e,t){if(e==="input"||e==="change")return Pm(t)}function G6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bn=typeof Object.is=="function"?Object.is:G6;function ru(e,t){if(Bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Wg.call(t,a)||!Bn(e[a],t[a]))return!1}return!0}function b1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function j1(e,t){var r=b1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=b1(r)}}function cO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uO(){for(var e=window,t=Bh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bh(e.document)}return t}function hb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function K6(e){var t=uO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&cO(r.ownerDocument.documentElement,r)){if(n!==null&&hb(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=j1(r,i);var o=j1(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H6=As&&"documentMode"in document&&11>=document.documentMode,oo=null,uy=null,Pc=null,dy=!1;function w1(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dy||oo==null||oo!==Bh(n)||(n=oo,"selectionStart"in n&&hb(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pc&&ru(Pc,n)||(Pc=n,n=Hh(uy,"onSelect"),0<n.length&&(t=new cb("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=oo)))}function Bd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var lo={animationend:Bd("Animation","AnimationEnd"),animationiteration:Bd("Animation","AnimationIteration"),animationstart:Bd("Animation","AnimationStart"),transitionend:Bd("Transition","TransitionEnd")},xx={},dO={};As&&(dO=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function Tm(e){if(xx[e])return xx[e];if(!lo[e])return e;var t=lo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in dO)return xx[e]=t[r];return e}var hO=Tm("animationend"),fO=Tm("animationiteration"),mO=Tm("animationstart"),pO=Tm("transitionend"),xO=new Map,N1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(e,t){xO.set(e,t),Ei(t,[e])}for(var gx=0;gx<N1.length;gx++){var yx=N1[gx],Y6=yx.toLowerCase(),X6=yx[0].toUpperCase()+yx.slice(1);_a(Y6,"on"+X6)}_a(hO,"onAnimationEnd");_a(fO,"onAnimationIteration");_a(mO,"onAnimationStart");_a("dblclick","onDoubleClick");_a("focusin","onFocus");_a("focusout","onBlur");_a(pO,"onTransitionEnd");Fo("onMouseEnter",["mouseout","mouseover"]);Fo("onMouseLeave",["mouseout","mouseover"]);Fo("onPointerEnter",["pointerout","pointerover"]);Fo("onPointerLeave",["pointerout","pointerover"]);Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J6=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function S1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,YR(n,t,void 0,e),e.currentTarget=null}function gO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;S1(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;S1(a,l,u),i=c}}}if(qh)throw e=iy,qh=!1,iy=null,e}function st(e,t){var r=t[xy];r===void 0&&(r=t[xy]=new Set);var n=e+"__bubble";r.has(n)||(yO(t,e,2,!1),r.add(n))}function vx(e,t,r){var n=0;t&&(n|=4),yO(r,e,n,t)}var Ud="_reactListening"+Math.random().toString(36).slice(2);function nu(e){if(!e[Ud]){e[Ud]=!0,_A.forEach(function(r){r!=="selectionchange"&&(J6.has(r)||vx(r,!1,e),vx(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ud]||(t[Ud]=!0,vx("selectionchange",!1,t))}}function yO(e,t,r,n){switch(tO(t)){case 1:var a=d6;break;case 4:a=h6;break;default:a=ob}r=a.bind(null,t,r,e),a=void 0,!ay||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function bx(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ti(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}BA(function(){var u=i,h=nb(r),d=[];e:{var f=xO.get(e);if(f!==void 0){var p=cb,b=e;switch(e){case"keypress":if(Ah(r)===0)break e;case"keydown":case"keyup":p=k6;break;case"focusin":b="focus",p=fx;break;case"focusout":b="blur",p=fx;break;case"beforeblur":case"afterblur":p=fx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=h1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=p6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=E6;break;case hO:case fO:case mO:p=y6;break;case pO:p=T6;break;case"scroll":p=f6;break;case"wheel":p=D6;break;case"copy":case"cut":case"paste":p=b6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=m1}var x=(t&4)!==0,g=!x&&e==="scroll",y=x?f!==null?f+"Capture":null:f;x=[];for(var m=u,v;m!==null;){v=m;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,y!==null&&(S=Jc(m,y),S!=null&&x.push(su(m,S,v)))),g)break;m=m.return}0<x.length&&(f=new p(f,b,null,r,h),d.push({event:f,listeners:x}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&r!==ny&&(b=r.relatedTarget||r.fromElement)&&(ti(b)||b[Os]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=u,b=b?ti(b):null,b!==null&&(g=Pi(b),b!==g||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(x=h1,S="onMouseLeave",y="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=m1,S="onPointerLeave",y="onPointerEnter",m="pointer"),g=p==null?f:co(p),v=b==null?f:co(b),f=new x(S,m+"leave",p,r,h),f.target=g,f.relatedTarget=v,S=null,ti(h)===u&&(x=new x(y,m+"enter",b,r,h),x.target=v,x.relatedTarget=g,S=x),g=S,p&&b)t:{for(x=p,y=b,m=0,v=x;v;v=qi(v))m++;for(v=0,S=y;S;S=qi(S))v++;for(;0<m-v;)x=qi(x),m--;for(;0<v-m;)y=qi(y),v--;for(;m--;){if(x===y||y!==null&&x===y.alternate)break t;x=qi(x),y=qi(y)}x=null}else x=null;p!==null&&_1(d,f,p,x,!1),b!==null&&g!==null&&_1(d,g,b,x,!0)}}e:{if(f=u?co(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var w=B6;else if(g1(f))if(oO)w=W6;else{w=q6;var N=U6}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=V6);if(w&&(w=w(e,u))){iO(d,w,r,h);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Qg(f,"number",f.value)}switch(N=u?co(u):window,e){case"focusin":(g1(N)||N.contentEditable==="true")&&(oo=N,uy=u,Pc=null);break;case"focusout":Pc=uy=oo=null;break;case"mousedown":dy=!0;break;case"contextmenu":case"mouseup":case"dragend":dy=!1,w1(d,r,h);break;case"selectionchange":if(H6)break;case"keydown":case"keyup":w1(d,r,h)}var _;if(db)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else io?sO(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(nO&&r.locale!=="ko"&&(io||C!=="onCompositionStart"?C==="onCompositionEnd"&&io&&(_=rO()):(ia=h,lb="value"in ia?ia.value:ia.textContent,io=!0)),N=Hh(u,C),0<N.length&&(C=new f1(C,e,null,r,h),d.push({event:C,listeners:N}),_?C.data=_:(_=aO(r),_!==null&&(C.data=_)))),(_=R6?I6(e,r):L6(e,r))&&(u=Hh(u,"onBeforeInput"),0<u.length&&(h=new f1("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=_))}gO(d,t)})}function su(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hh(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Jc(e,r),i!=null&&n.unshift(su(e,i,a)),i=Jc(e,t),i!=null&&n.push(su(e,i,a))),e=e.return}return n}function qi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _1(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=Jc(r,i),c!=null&&o.unshift(su(r,c,l))):a||(c=Jc(r,i),c!=null&&o.push(su(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Q6=/\r\n?/g,Z6=/\u0000|\uFFFD/g;function C1(e){return(typeof e=="string"?e:""+e).replace(Q6,`
`).replace(Z6,"")}function qd(e,t,r){if(t=C1(t),C1(e)!==t&&r)throw Error(oe(425))}function Yh(){}var hy=null,fy=null;function my(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var py=typeof setTimeout=="function"?setTimeout:void 0,eI=typeof clearTimeout=="function"?clearTimeout:void 0,k1=typeof Promise=="function"?Promise:void 0,tI=typeof queueMicrotask=="function"?queueMicrotask:typeof k1<"u"?function(e){return k1.resolve(null).then(e).catch(rI)}:py;function rI(e){setTimeout(function(){throw e})}function jx(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),eu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);eu(t)}function ma(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function A1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Al=Math.random().toString(36).slice(2),Hn="__reactFiber$"+Al,au="__reactProps$"+Al,Os="__reactContainer$"+Al,xy="__reactEvents$"+Al,nI="__reactListeners$"+Al,sI="__reactHandles$"+Al;function ti(e){var t=e[Hn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Os]||r[Hn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=A1(e);e!==null;){if(r=e[Hn])return r;e=A1(e)}return t}e=r,r=e.parentNode}return null}function cd(e){return e=e[Hn]||e[Os],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function co(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function $m(e){return e[au]||null}var gy=[],uo=-1;function Ca(e){return{current:e}}function ot(e){0>uo||(e.current=gy[uo],gy[uo]=null,uo--)}function rt(e,t){uo++,gy[uo]=e.current,e.current=t}var wa={},mr=Ca(wa),Tr=Ca(!1),gi=wa;function zo(e,t){var r=e.type.contextTypes;if(!r)return wa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function $r(e){return e=e.childContextTypes,e!=null}function Xh(){ot(Tr),ot(mr)}function O1(e,t,r){if(mr.current!==wa)throw Error(oe(168));rt(mr,t),rt(Tr,r)}function vO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(oe(108,UR(e)||"Unknown",a));return vt({},r,n)}function Jh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wa,gi=mr.current,rt(mr,e),rt(Tr,Tr.current),!0}function E1(e,t,r){var n=e.stateNode;if(!n)throw Error(oe(169));r?(e=vO(e,t,gi),n.__reactInternalMemoizedMergedChildContext=e,ot(Tr),ot(mr),rt(mr,e)):ot(Tr),rt(Tr,r)}var xs=null,Dm=!1,wx=!1;function bO(e){xs===null?xs=[e]:xs.push(e)}function aI(e){Dm=!0,bO(e)}function ka(){if(!wx&&xs!==null){wx=!0;var e=0,t=He;try{var r=xs;for(He=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}xs=null,Dm=!1}catch(a){throw xs!==null&&(xs=xs.slice(e+1)),WA(sb,ka),a}finally{He=t,wx=!1}}return null}var ho=[],fo=0,Qh=null,Zh=0,un=[],dn=0,yi=null,gs=1,ys="";function Va(e,t){ho[fo++]=Zh,ho[fo++]=Qh,Qh=e,Zh=t}function jO(e,t,r){un[dn++]=gs,un[dn++]=ys,un[dn++]=yi,yi=e;var n=gs;e=ys;var a=32-Ln(n)-1;n&=~(1<<a),r+=1;var i=32-Ln(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,gs=1<<32-Ln(t)+a|r<<a|n,ys=i+e}else gs=1<<i|r<<a|n,ys=e}function fb(e){e.return!==null&&(Va(e,1),jO(e,1,0))}function mb(e){for(;e===Qh;)Qh=ho[--fo],ho[fo]=null,Zh=ho[--fo],ho[fo]=null;for(;e===yi;)yi=un[--dn],un[dn]=null,ys=un[--dn],un[dn]=null,gs=un[--dn],un[dn]=null}var Gr=null,Wr=null,ct=!1,Rn=null;function wO(e,t){var r=fn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function P1(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Gr=e,Wr=ma(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Gr=e,Wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yi!==null?{id:gs,overflow:ys}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Gr=e,Wr=null,!0):!1;default:return!1}}function yy(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vy(e){if(ct){var t=Wr;if(t){var r=t;if(!P1(e,t)){if(yy(e))throw Error(oe(418));t=ma(r.nextSibling);var n=Gr;t&&P1(e,t)?wO(n,r):(e.flags=e.flags&-4097|2,ct=!1,Gr=e)}}else{if(yy(e))throw Error(oe(418));e.flags=e.flags&-4097|2,ct=!1,Gr=e}}}function T1(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Gr=e}function Vd(e){if(e!==Gr)return!1;if(!ct)return T1(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!my(e.type,e.memoizedProps)),t&&(t=Wr)){if(yy(e))throw NO(),Error(oe(418));for(;t;)wO(e,t),t=ma(t.nextSibling)}if(T1(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Wr=ma(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Wr=null}}else Wr=Gr?ma(e.stateNode.nextSibling):null;return!0}function NO(){for(var e=Wr;e;)e=ma(e.nextSibling)}function Bo(){Wr=Gr=null,ct=!1}function pb(e){Rn===null?Rn=[e]:Rn.push(e)}var iI=Is.ReactCurrentBatchConfig;function nc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var n=r.stateNode}if(!n)throw Error(oe(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,e))}return e}function Wd(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $1(e){var t=e._init;return t(e._payload)}function SO(e){function t(y,m){if(e){var v=y.deletions;v===null?(y.deletions=[m],y.flags|=16):v.push(m)}}function r(y,m){if(!e)return null;for(;m!==null;)t(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function a(y,m){return y=ya(y,m),y.index=0,y.sibling=null,y}function i(y,m,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<m?(y.flags|=2,m):v):(y.flags|=2,m)):(y.flags|=1048576,m)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,m,v,S){return m===null||m.tag!==6?(m=Ox(v,y.mode,S),m.return=y,m):(m=a(m,v),m.return=y,m)}function c(y,m,v,S){var w=v.type;return w===ao?h(y,m,v.props.children,S,v.key):m!==null&&(m.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Js&&$1(w)===m.type)?(S=a(m,v.props),S.ref=nc(y,m,v),S.return=y,S):(S=Mh(v.type,v.key,v.props,null,y.mode,S),S.ref=nc(y,m,v),S.return=y,S)}function u(y,m,v,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Ex(v,y.mode,S),m.return=y,m):(m=a(m,v.children||[]),m.return=y,m)}function h(y,m,v,S,w){return m===null||m.tag!==7?(m=hi(v,y.mode,S,w),m.return=y,m):(m=a(m,v),m.return=y,m)}function d(y,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ox(""+m,y.mode,v),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Dd:return v=Mh(m.type,m.key,m.props,null,y.mode,v),v.ref=nc(y,null,m),v.return=y,v;case so:return m=Ex(m,y.mode,v),m.return=y,m;case Js:var S=m._init;return d(y,S(m._payload),v)}if(vc(m)||Ql(m))return m=hi(m,y.mode,v,null),m.return=y,m;Wd(y,m)}return null}function f(y,m,v,S){var w=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:l(y,m,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Dd:return v.key===w?c(y,m,v,S):null;case so:return v.key===w?u(y,m,v,S):null;case Js:return w=v._init,f(y,m,w(v._payload),S)}if(vc(v)||Ql(v))return w!==null?null:h(y,m,v,S,null);Wd(y,v)}return null}function p(y,m,v,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(v)||null,l(m,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dd:return y=y.get(S.key===null?v:S.key)||null,c(m,y,S,w);case so:return y=y.get(S.key===null?v:S.key)||null,u(m,y,S,w);case Js:var N=S._init;return p(y,m,v,N(S._payload),w)}if(vc(S)||Ql(S))return y=y.get(v)||null,h(m,y,S,w,null);Wd(m,S)}return null}function b(y,m,v,S){for(var w=null,N=null,_=m,C=m=0,A=null;_!==null&&C<v.length;C++){_.index>C?(A=_,_=null):A=_.sibling;var k=f(y,_,v[C],S);if(k===null){_===null&&(_=A);break}e&&_&&k.alternate===null&&t(y,_),m=i(k,m,C),N===null?w=k:N.sibling=k,N=k,_=A}if(C===v.length)return r(y,_),ct&&Va(y,C),w;if(_===null){for(;C<v.length;C++)_=d(y,v[C],S),_!==null&&(m=i(_,m,C),N===null?w=_:N.sibling=_,N=_);return ct&&Va(y,C),w}for(_=n(y,_);C<v.length;C++)A=p(_,y,C,v[C],S),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?C:A.key),m=i(A,m,C),N===null?w=A:N.sibling=A,N=A);return e&&_.forEach(function(E){return t(y,E)}),ct&&Va(y,C),w}function x(y,m,v,S){var w=Ql(v);if(typeof w!="function")throw Error(oe(150));if(v=w.call(v),v==null)throw Error(oe(151));for(var N=w=null,_=m,C=m=0,A=null,k=v.next();_!==null&&!k.done;C++,k=v.next()){_.index>C?(A=_,_=null):A=_.sibling;var E=f(y,_,k.value,S);if(E===null){_===null&&(_=A);break}e&&_&&E.alternate===null&&t(y,_),m=i(E,m,C),N===null?w=E:N.sibling=E,N=E,_=A}if(k.done)return r(y,_),ct&&Va(y,C),w;if(_===null){for(;!k.done;C++,k=v.next())k=d(y,k.value,S),k!==null&&(m=i(k,m,C),N===null?w=k:N.sibling=k,N=k);return ct&&Va(y,C),w}for(_=n(y,_);!k.done;C++,k=v.next())k=p(_,y,C,k.value,S),k!==null&&(e&&k.alternate!==null&&_.delete(k.key===null?C:k.key),m=i(k,m,C),N===null?w=k:N.sibling=k,N=k);return e&&_.forEach(function(O){return t(y,O)}),ct&&Va(y,C),w}function g(y,m,v,S){if(typeof v=="object"&&v!==null&&v.type===ao&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Dd:e:{for(var w=v.key,N=m;N!==null;){if(N.key===w){if(w=v.type,w===ao){if(N.tag===7){r(y,N.sibling),m=a(N,v.props.children),m.return=y,y=m;break e}}else if(N.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Js&&$1(w)===N.type){r(y,N.sibling),m=a(N,v.props),m.ref=nc(y,N,v),m.return=y,y=m;break e}r(y,N);break}else t(y,N);N=N.sibling}v.type===ao?(m=hi(v.props.children,y.mode,S,v.key),m.return=y,y=m):(S=Mh(v.type,v.key,v.props,null,y.mode,S),S.ref=nc(y,m,v),S.return=y,y=S)}return o(y);case so:e:{for(N=v.key;m!==null;){if(m.key===N)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(y,m.sibling),m=a(m,v.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else t(y,m);m=m.sibling}m=Ex(v,y.mode,S),m.return=y,y=m}return o(y);case Js:return N=v._init,g(y,m,N(v._payload),S)}if(vc(v))return b(y,m,v,S);if(Ql(v))return x(y,m,v,S);Wd(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(y,m.sibling),m=a(m,v),m.return=y,y=m):(r(y,m),m=Ox(v,y.mode,S),m.return=y,y=m),o(y)):r(y,m)}return g}var Uo=SO(!0),_O=SO(!1),ef=Ca(null),tf=null,mo=null,xb=null;function gb(){xb=mo=tf=null}function yb(e){var t=ef.current;ot(ef),e._currentValue=t}function by(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function To(e,t){tf=e,xb=mo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Or=!0),e.firstContext=null)}function yn(e){var t=e._currentValue;if(xb!==e)if(e={context:e,memoizedValue:t,next:null},mo===null){if(tf===null)throw Error(oe(308));mo=e,tf.dependencies={lanes:0,firstContext:e}}else mo=mo.next=e;return t}var ri=null;function vb(e){ri===null?ri=[e]:ri.push(e)}function CO(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,vb(t)):(r.next=a.next,a.next=r),t.interleaved=r,Es(e,n)}function Es(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Qs=!1;function bb(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function kO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ws(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pa(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ue&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Es(e,r)}return a=n.interleaved,a===null?(t.next=t,vb(n)):(t.next=a.next,a.next=t),n.interleaved=t,Es(e,r)}function Oh(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ab(e,r)}}function D1(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rf(e,t,r,n){var a=e.updateQueue;Qs=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=a.baseState;o=0,h=u=c=null,l=i;do{var f=l.lane,p=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,x=l;switch(f=t,p=r,x.tag){case 1:if(b=x.payload,typeof b=="function"){d=b.call(p,d,f);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,f=typeof b=="function"?b.call(p,d,f):b,f==null)break e;d=vt({},d,f);break e;case 2:Qs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=p,c=d):h=h.next=p,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(h===null&&(c=d),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=h,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);bi|=o,e.lanes=o,e.memoizedState=d}}function M1(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(oe(191,a));a.call(n)}}}var ud={},Zn=Ca(ud),iu=Ca(ud),ou=Ca(ud);function ni(e){if(e===ud)throw Error(oe(174));return e}function jb(e,t){switch(rt(ou,t),rt(iu,e),rt(Zn,ud),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ey(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ey(t,e)}ot(Zn),rt(Zn,t)}function qo(){ot(Zn),ot(iu),ot(ou)}function AO(e){ni(ou.current);var t=ni(Zn.current),r=ey(t,e.type);t!==r&&(rt(iu,e),rt(Zn,r))}function wb(e){iu.current===e&&(ot(Zn),ot(iu))}var mt=Ca(0);function nf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nx=[];function Nb(){for(var e=0;e<Nx.length;e++)Nx[e]._workInProgressVersionPrimary=null;Nx.length=0}var Eh=Is.ReactCurrentDispatcher,Sx=Is.ReactCurrentBatchConfig,vi=0,gt=null,Lt=null,Kt=null,sf=!1,Tc=!1,lu=0,oI=0;function ir(){throw Error(oe(321))}function Sb(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Bn(e[r],t[r]))return!1;return!0}function _b(e,t,r,n,a,i){if(vi=i,gt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eh.current=e===null||e.memoizedState===null?dI:hI,e=r(n,a),Tc){i=0;do{if(Tc=!1,lu=0,25<=i)throw Error(oe(301));i+=1,Kt=Lt=null,t.updateQueue=null,Eh.current=fI,e=r(n,a)}while(Tc)}if(Eh.current=af,t=Lt!==null&&Lt.next!==null,vi=0,Kt=Lt=gt=null,sf=!1,t)throw Error(oe(300));return e}function Cb(){var e=lu!==0;return lu=0,e}function Kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?gt.memoizedState=Kt=e:Kt=Kt.next=e,Kt}function vn(){if(Lt===null){var e=gt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var t=Kt===null?gt.memoizedState:Kt.next;if(t!==null)Kt=t,Lt=e;else{if(e===null)throw Error(oe(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},Kt===null?gt.memoizedState=Kt=e:Kt=Kt.next=e}return Kt}function cu(e,t){return typeof t=="function"?t(e):t}function _x(e){var t=vn(),r=t.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=e;var n=Lt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((vi&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,gt.lanes|=h,bi|=h}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Bn(n,t.memoizedState)||(Or=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,gt.lanes|=i,bi|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Cx(e){var t=vn(),r=t.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Bn(i,t.memoizedState)||(Or=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function OO(){}function EO(e,t){var r=gt,n=vn(),a=t(),i=!Bn(n.memoizedState,a);if(i&&(n.memoizedState=a,Or=!0),n=n.queue,kb($O.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Kt!==null&&Kt.memoizedState.tag&1){if(r.flags|=2048,uu(9,TO.bind(null,r,n,a,t),void 0,null),Yt===null)throw Error(oe(349));vi&30||PO(r,t,a)}return a}function PO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function TO(e,t,r,n){t.value=r,t.getSnapshot=n,DO(t)&&MO(e)}function $O(e,t,r){return r(function(){DO(t)&&MO(e)})}function DO(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Bn(e,r)}catch{return!0}}function MO(e){var t=Es(e,1);t!==null&&Fn(t,e,1,-1)}function R1(e){var t=Kn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cu,lastRenderedState:e},t.queue=e,e=e.dispatch=uI.bind(null,gt,e),[t.memoizedState,e]}function uu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=gt.updateQueue,t===null?(t={lastEffect:null,stores:null},gt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function RO(){return vn().memoizedState}function Ph(e,t,r,n){var a=Kn();gt.flags|=e,a.memoizedState=uu(1|t,r,void 0,n===void 0?null:n)}function Mm(e,t,r,n){var a=vn();n=n===void 0?null:n;var i=void 0;if(Lt!==null){var o=Lt.memoizedState;if(i=o.destroy,n!==null&&Sb(n,o.deps)){a.memoizedState=uu(t,r,i,n);return}}gt.flags|=e,a.memoizedState=uu(1|t,r,i,n)}function I1(e,t){return Ph(8390656,8,e,t)}function kb(e,t){return Mm(2048,8,e,t)}function IO(e,t){return Mm(4,2,e,t)}function LO(e,t){return Mm(4,4,e,t)}function FO(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zO(e,t,r){return r=r!=null?r.concat([e]):null,Mm(4,4,FO.bind(null,t,e),r)}function Ab(){}function BO(e,t){var r=vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sb(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function UO(e,t){var r=vn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sb(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function qO(e,t,r){return vi&21?(Bn(r,t)||(r=HA(),gt.lanes|=r,bi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Or=!0),e.memoizedState=r)}function lI(e,t){var r=He;He=r!==0&&4>r?r:4,e(!0);var n=Sx.transition;Sx.transition={};try{e(!1),t()}finally{He=r,Sx.transition=n}}function VO(){return vn().memoizedState}function cI(e,t,r){var n=ga(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},WO(e))GO(t,r);else if(r=CO(e,t,r,n),r!==null){var a=jr();Fn(r,e,n,a),KO(r,t,n)}}function uI(e,t,r){var n=ga(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(WO(e))GO(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Bn(l,o)){var c=t.interleaved;c===null?(a.next=a,vb(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=CO(e,t,a,n),r!==null&&(a=jr(),Fn(r,e,n,a),KO(r,t,n))}}function WO(e){var t=e.alternate;return e===gt||t!==null&&t===gt}function GO(e,t){Tc=sf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function KO(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ab(e,r)}}var af={readContext:yn,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},dI={readContext:yn,useCallback:function(e,t){return Kn().memoizedState=[e,t===void 0?null:t],e},useContext:yn,useEffect:I1,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ph(4194308,4,FO.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ph(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ph(4,2,e,t)},useMemo:function(e,t){var r=Kn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Kn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=cI.bind(null,gt,e),[n.memoizedState,e]},useRef:function(e){var t=Kn();return e={current:e},t.memoizedState=e},useState:R1,useDebugValue:Ab,useDeferredValue:function(e){return Kn().memoizedState=e},useTransition:function(){var e=R1(!1),t=e[0];return e=lI.bind(null,e[1]),Kn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=gt,a=Kn();if(ct){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=t(),Yt===null)throw Error(oe(349));vi&30||PO(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,I1($O.bind(null,n,i,e),[e]),n.flags|=2048,uu(9,TO.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Kn(),t=Yt.identifierPrefix;if(ct){var r=ys,n=gs;r=(n&~(1<<32-Ln(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=lu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=oI++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hI={readContext:yn,useCallback:BO,useContext:yn,useEffect:kb,useImperativeHandle:zO,useInsertionEffect:IO,useLayoutEffect:LO,useMemo:UO,useReducer:_x,useRef:RO,useState:function(){return _x(cu)},useDebugValue:Ab,useDeferredValue:function(e){var t=vn();return qO(t,Lt.memoizedState,e)},useTransition:function(){var e=_x(cu)[0],t=vn().memoizedState;return[e,t]},useMutableSource:OO,useSyncExternalStore:EO,useId:VO,unstable_isNewReconciler:!1},fI={readContext:yn,useCallback:BO,useContext:yn,useEffect:kb,useImperativeHandle:zO,useInsertionEffect:IO,useLayoutEffect:LO,useMemo:UO,useReducer:Cx,useRef:RO,useState:function(){return Cx(cu)},useDebugValue:Ab,useDeferredValue:function(e){var t=vn();return Lt===null?t.memoizedState=e:qO(t,Lt.memoizedState,e)},useTransition:function(){var e=Cx(cu)[0],t=vn().memoizedState;return[e,t]},useMutableSource:OO,useSyncExternalStore:EO,useId:VO,unstable_isNewReconciler:!1};function Pn(e,t){if(e&&e.defaultProps){t=vt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function jy(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:vt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Rm={isMounted:function(e){return(e=e._reactInternals)?Pi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=jr(),a=ga(e),i=ws(n,a);i.payload=t,r!=null&&(i.callback=r),t=pa(e,i,a),t!==null&&(Fn(t,e,a,n),Oh(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=jr(),a=ga(e),i=ws(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=pa(e,i,a),t!==null&&(Fn(t,e,a,n),Oh(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jr(),n=ga(e),a=ws(r,n);a.tag=2,t!=null&&(a.callback=t),t=pa(e,a,n),t!==null&&(Fn(t,e,n,r),Oh(t,e,n))}};function L1(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!ru(r,n)||!ru(a,i):!0}function HO(e,t,r){var n=!1,a=wa,i=t.contextType;return typeof i=="object"&&i!==null?i=yn(i):(a=$r(t)?gi:mr.current,n=t.contextTypes,i=(n=n!=null)?zo(e,a):wa),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rm,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function F1(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Rm.enqueueReplaceState(t,t.state,null)}function wy(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},bb(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=yn(i):(i=$r(t)?gi:mr.current,a.context=zo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(jy(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Rm.enqueueReplaceState(a,a.state,null),rf(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Vo(e,t){try{var r="",n=t;do r+=BR(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function kx(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ny(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mI=typeof WeakMap=="function"?WeakMap:Map;function YO(e,t,r){r=ws(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){lf||(lf=!0,$y=n),Ny(e,t)},r}function XO(e,t,r){r=ws(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Ny(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ny(e,t),typeof n!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function z1(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new mI;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=AI.bind(null,e,t,r),t.then(e,e))}function B1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function U1(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ws(-1,1),t.tag=2,pa(r,t,1))),r.lanes|=1),e)}var pI=Is.ReactCurrentOwner,Or=!1;function gr(e,t,r,n){t.child=e===null?_O(t,null,r,n):Uo(t,e.child,r,n)}function q1(e,t,r,n,a){r=r.render;var i=t.ref;return To(t,a),n=_b(e,t,r,n,i,a),r=Cb(),e!==null&&!Or?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ps(e,t,a)):(ct&&r&&fb(t),t.flags|=1,gr(e,t,n,a),t.child)}function V1(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Rb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,JO(e,t,i,n,a)):(e=Mh(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:ru,r(o,n)&&e.ref===t.ref)return Ps(e,t,a)}return t.flags|=1,e=ya(i,n),e.ref=t.ref,e.return=t,t.child=e}function JO(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(ru(i,n)&&e.ref===t.ref)if(Or=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Or=!0);else return t.lanes=e.lanes,Ps(e,t,a)}return Sy(e,t,r,n,a)}function QO(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(xo,zr),zr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(xo,zr),zr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,rt(xo,zr),zr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,rt(xo,zr),zr|=n;return gr(e,t,a,r),t.child}function ZO(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Sy(e,t,r,n,a){var i=$r(r)?gi:mr.current;return i=zo(t,i),To(t,a),r=_b(e,t,r,n,i,a),n=Cb(),e!==null&&!Or?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ps(e,t,a)):(ct&&n&&fb(t),t.flags|=1,gr(e,t,r,a),t.child)}function W1(e,t,r,n,a){if($r(r)){var i=!0;Jh(t)}else i=!1;if(To(t,a),t.stateNode===null)Th(e,t),HO(t,r,n),wy(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=yn(u):(u=$r(r)?gi:mr.current,u=zo(t,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&F1(t,o,n,u),Qs=!1;var f=t.memoizedState;o.state=f,rf(t,n,o,a),c=t.memoizedState,l!==n||f!==c||Tr.current||Qs?(typeof h=="function"&&(jy(t,r,h,n),c=t.memoizedState),(l=Qs||L1(t,r,l,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,kO(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pn(t.type,l),o.props=u,d=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=yn(c):(c=$r(r)?gi:mr.current,c=zo(t,c));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&F1(t,o,n,c),Qs=!1,f=t.memoizedState,o.state=f,rf(t,n,o,a);var b=t.memoizedState;l!==d||f!==b||Tr.current||Qs?(typeof p=="function"&&(jy(t,r,p,n),b=t.memoizedState),(u=Qs||L1(t,r,u,n,f,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return _y(e,t,r,n,i,a)}function _y(e,t,r,n,a,i){ZO(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&E1(t,r,!1),Ps(e,t,i);n=t.stateNode,pI.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Uo(t,e.child,null,i),t.child=Uo(t,null,l,i)):gr(e,t,l,i),t.memoizedState=n.state,a&&E1(t,r,!0),t.child}function eE(e){var t=e.stateNode;t.pendingContext?O1(e,t.pendingContext,t.pendingContext!==t.context):t.context&&O1(e,t.context,!1),jb(e,t.containerInfo)}function G1(e,t,r,n,a){return Bo(),pb(a),t.flags|=256,gr(e,t,r,n),t.child}var Cy={dehydrated:null,treeContext:null,retryLane:0};function ky(e){return{baseLanes:e,cachePool:null,transitions:null}}function tE(e,t,r){var n=t.pendingProps,a=mt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),rt(mt,a&1),e===null)return vy(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fm(o,n,0,null),e=hi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ky(r),t.memoizedState=Cy,e):Ob(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return xI(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ya(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ya(l,i):(i=hi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?ky(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Cy,n}return i=e.child,e=i.sibling,n=ya(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ob(e,t){return t=Fm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gd(e,t,r,n){return n!==null&&pb(n),Uo(t,e.child,null,r),e=Ob(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xI(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=kx(Error(oe(422))),Gd(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Fm({mode:"visible",children:n.children},a,0,null),i=hi(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Uo(t,e.child,null,o),t.child.memoizedState=ky(o),t.memoizedState=Cy,i);if(!(t.mode&1))return Gd(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(oe(419)),n=kx(i,n,void 0),Gd(e,t,o,n)}if(l=(o&e.childLanes)!==0,Or||l){if(n=Yt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Es(e,a),Fn(n,e,a,-1))}return Mb(),n=kx(Error(oe(421))),Gd(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=OI.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Wr=ma(a.nextSibling),Gr=t,ct=!0,Rn=null,e!==null&&(un[dn++]=gs,un[dn++]=ys,un[dn++]=yi,gs=e.id,ys=e.overflow,yi=t),t=Ob(t,n.children),t.flags|=4096,t)}function K1(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),by(e.return,t,r)}function Ax(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function rE(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(gr(e,t,n.children,r),n=mt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&K1(e,r,t);else if(e.tag===19)K1(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(rt(mt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&nf(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ax(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&nf(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ax(t,!0,r,null,i);break;case"together":Ax(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Th(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ps(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),bi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,r=ya(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ya(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gI(e,t,r){switch(t.tag){case 3:eE(t),Bo();break;case 5:AO(t);break;case 1:$r(t.type)&&Jh(t);break;case 4:jb(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;rt(ef,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(rt(mt,mt.current&1),t.flags|=128,null):r&t.child.childLanes?tE(e,t,r):(rt(mt,mt.current&1),e=Ps(e,t,r),e!==null?e.sibling:null);rt(mt,mt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return rE(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rt(mt,mt.current),n)break;return null;case 22:case 23:return t.lanes=0,QO(e,t,r)}return Ps(e,t,r)}var nE,Ay,sE,aE;nE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ay=function(){};sE=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ni(Zn.current);var i=null;switch(r){case"input":a=Xg(e,a),n=Xg(e,n),i=[];break;case"select":a=vt({},a,{value:void 0}),n=vt({},n,{value:void 0}),i=[];break;case"textarea":a=Zg(e,a),n=Zg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Yh)}ty(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&st("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};aE=function(e,t,r,n){r!==n&&(t.flags|=4)};function sc(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function or(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function yI(e,t,r){var n=t.pendingProps;switch(mb(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(t),null;case 1:return $r(t.type)&&Xh(),or(t),null;case 3:return n=t.stateNode,qo(),ot(Tr),ot(mr),Nb(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Vd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rn!==null&&(Ry(Rn),Rn=null))),Ay(e,t),or(t),null;case 5:wb(t);var a=ni(ou.current);if(r=t.type,e!==null&&t.stateNode!=null)sE(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(oe(166));return or(t),null}if(e=ni(Zn.current),Vd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Hn]=t,n[au]=i,e=(t.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(a=0;a<jc.length;a++)st(jc[a],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":r1(n,i),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},st("invalid",n);break;case"textarea":s1(n,i),st("invalid",n)}ty(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&qd(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qd(n.textContent,l,e),a=["children",""+l]):Yc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&st("scroll",n)}switch(r){case"input":Md(n),n1(n,i,!0);break;case"textarea":Md(n),a1(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Yh)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$A(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Hn]=t,e[au]=n,nE(e,t,!1,!1),t.stateNode=e;e:{switch(o=ry(r,n),r){case"dialog":st("cancel",e),st("close",e),a=n;break;case"iframe":case"object":case"embed":st("load",e),a=n;break;case"video":case"audio":for(a=0;a<jc.length;a++)st(jc[a],e);a=n;break;case"source":st("error",e),a=n;break;case"img":case"image":case"link":st("error",e),st("load",e),a=n;break;case"details":st("toggle",e),a=n;break;case"input":r1(e,n),a=Xg(e,n),st("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=vt({},n,{value:void 0}),st("invalid",e);break;case"textarea":s1(e,n),a=Zg(e,n),st("invalid",e);break;default:a=n}ty(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?RA(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&DA(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Xc(e,c):typeof c=="number"&&Xc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&st("scroll",e):c!=null&&Z0(e,i,c,o))}switch(r){case"input":Md(e),n1(e,n,!1);break;case"textarea":Md(e),a1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ja(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ao(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ao(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Yh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return or(t),null;case 6:if(e&&t.stateNode!=null)aE(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(oe(166));if(r=ni(ou.current),ni(Zn.current),Vd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Hn]=t,(i=n.nodeValue!==r)&&(e=Gr,e!==null))switch(e.tag){case 3:qd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qd(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Hn]=t,t.stateNode=n}return or(t),null;case 13:if(ot(mt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&Wr!==null&&t.mode&1&&!(t.flags&128))NO(),Bo(),t.flags|=98560,i=!1;else if(i=Vd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(oe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(oe(317));i[Hn]=t}else Bo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;or(t),i=!1}else Rn!==null&&(Ry(Rn),Rn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||mt.current&1?Bt===0&&(Bt=3):Mb())),t.updateQueue!==null&&(t.flags|=4),or(t),null);case 4:return qo(),Ay(e,t),e===null&&nu(t.stateNode.containerInfo),or(t),null;case 10:return yb(t.type._context),or(t),null;case 17:return $r(t.type)&&Xh(),or(t),null;case 19:if(ot(mt),i=t.memoizedState,i===null)return or(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)sc(i,!1);else{if(Bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=nf(e),o!==null){for(t.flags|=128,sc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rt(mt,mt.current&1|2),t.child}e=e.sibling}i.tail!==null&&kt()>Wo&&(t.flags|=128,n=!0,sc(i,!1),t.lanes=4194304)}else{if(!n)if(e=nf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),sc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ct)return or(t),null}else 2*kt()-i.renderingStartTime>Wo&&r!==1073741824&&(t.flags|=128,n=!0,sc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=kt(),t.sibling=null,r=mt.current,rt(mt,n?r&1|2:r&1),t):(or(t),null);case 22:case 23:return Db(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?zr&1073741824&&(or(t),t.subtreeFlags&6&&(t.flags|=8192)):or(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function vI(e,t){switch(mb(t),t.tag){case 1:return $r(t.type)&&Xh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qo(),ot(Tr),ot(mr),Nb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wb(t),null;case 13:if(ot(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));Bo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ot(mt),null;case 4:return qo(),null;case 10:return yb(t.type._context),null;case 22:case 23:return Db(),null;case 24:return null;default:return null}}var Kd=!1,dr=!1,bI=typeof WeakSet=="function"?WeakSet:Set,xe=null;function po(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Nt(e,t,n)}else r.current=null}function Oy(e,t,r){try{r()}catch(n){Nt(e,t,n)}}var H1=!1;function jI(e,t){if(hy=Gh,e=uO(),hb(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==r||a!==0&&d.nodeType!==3||(l=o+a),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===e)break t;if(f===r&&++u===a&&(l=o),f===i&&++h===n&&(c=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(fy={focusedElem:e,selectionRange:r},Gh=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,g=b.memoizedState,y=t.stateNode,m=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:Pn(t.type,x),g);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(S){Nt(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return b=H1,H1=!1,b}function $c(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Oy(t,r,i)}a=a.next}while(a!==n)}}function Im(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ey(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function iE(e){var t=e.alternate;t!==null&&(e.alternate=null,iE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hn],delete t[au],delete t[xy],delete t[nI],delete t[sI])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oE(e){return e.tag===5||e.tag===3||e.tag===4}function Y1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Py(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yh));else if(n!==4&&(e=e.child,e!==null))for(Py(e,t,r),e=e.sibling;e!==null;)Py(e,t,r),e=e.sibling}function Ty(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ty(e,t,r),e=e.sibling;e!==null;)Ty(e,t,r),e=e.sibling}var er=null,$n=!1;function Hs(e,t,r){for(r=r.child;r!==null;)lE(e,t,r),r=r.sibling}function lE(e,t,r){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(Om,r)}catch{}switch(r.tag){case 5:dr||po(r,t);case 6:var n=er,a=$n;er=null,Hs(e,t,r),er=n,$n=a,er!==null&&($n?(e=er,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):er.removeChild(r.stateNode));break;case 18:er!==null&&($n?(e=er,r=r.stateNode,e.nodeType===8?jx(e.parentNode,r):e.nodeType===1&&jx(e,r),eu(e)):jx(er,r.stateNode));break;case 4:n=er,a=$n,er=r.stateNode.containerInfo,$n=!0,Hs(e,t,r),er=n,$n=a;break;case 0:case 11:case 14:case 15:if(!dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Oy(r,t,o),a=a.next}while(a!==n)}Hs(e,t,r);break;case 1:if(!dr&&(po(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Nt(r,t,l)}Hs(e,t,r);break;case 21:Hs(e,t,r);break;case 22:r.mode&1?(dr=(n=dr)||r.memoizedState!==null,Hs(e,t,r),dr=n):Hs(e,t,r);break;default:Hs(e,t,r)}}function X1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bI),t.forEach(function(n){var a=EI.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Cn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:er=l.stateNode,$n=!1;break e;case 3:er=l.stateNode.containerInfo,$n=!0;break e;case 4:er=l.stateNode.containerInfo,$n=!0;break e}l=l.return}if(er===null)throw Error(oe(160));lE(i,o,a),er=null,$n=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Nt(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cE(t,e),t=t.sibling}function cE(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cn(t,e),Gn(e),n&4){try{$c(3,e,e.return),Im(3,e)}catch(x){Nt(e,e.return,x)}try{$c(5,e,e.return)}catch(x){Nt(e,e.return,x)}}break;case 1:Cn(t,e),Gn(e),n&512&&r!==null&&po(r,r.return);break;case 5:if(Cn(t,e),Gn(e),n&512&&r!==null&&po(r,r.return),e.flags&32){var a=e.stateNode;try{Xc(a,"")}catch(x){Nt(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&PA(a,i),ry(l,o);var u=ry(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?RA(a,d):h==="dangerouslySetInnerHTML"?DA(a,d):h==="children"?Xc(a,d):Z0(a,h,d,u)}switch(l){case"input":Jg(a,i);break;case"textarea":TA(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ao(a,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ao(a,!!i.multiple,i.defaultValue,!0):Ao(a,!!i.multiple,i.multiple?[]:"",!1))}a[au]=i}catch(x){Nt(e,e.return,x)}}break;case 6:if(Cn(t,e),Gn(e),n&4){if(e.stateNode===null)throw Error(oe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Nt(e,e.return,x)}}break;case 3:if(Cn(t,e),Gn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{eu(t.containerInfo)}catch(x){Nt(e,e.return,x)}break;case 4:Cn(t,e),Gn(e);break;case 13:Cn(t,e),Gn(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Tb=kt())),n&4&&X1(e);break;case 22:if(h=r!==null&&r.memoizedState!==null,e.mode&1?(dr=(u=dr)||h,Cn(t,e),dr=u):Cn(t,e),Gn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(xe=e,h=e.child;h!==null;){for(d=xe=h;xe!==null;){switch(f=xe,p=f.child,f.tag){case 0:case 11:case 14:case 15:$c(4,f,f.return);break;case 1:po(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(x){Nt(n,r,x)}}break;case 5:po(f,f.return);break;case 22:if(f.memoizedState!==null){Q1(d);continue}}p!==null?(p.return=f,xe=p):Q1(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{a=d.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=MA("display",o))}catch(x){Nt(e,e.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){Nt(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cn(t,e),Gn(e),n&4&&X1(e);break;case 21:break;default:Cn(t,e),Gn(e)}}function Gn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(oE(r)){var n=r;break e}r=r.return}throw Error(oe(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Xc(a,""),n.flags&=-33);var i=Y1(e);Ty(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Y1(e);Py(e,l,o);break;default:throw Error(oe(161))}}catch(c){Nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wI(e,t,r){xe=e,uE(e)}function uE(e,t,r){for(var n=(e.mode&1)!==0;xe!==null;){var a=xe,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Kd;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||dr;l=Kd;var u=dr;if(Kd=o,(dr=c)&&!u)for(xe=a;xe!==null;)o=xe,c=o.child,o.tag===22&&o.memoizedState!==null?Z1(a):c!==null?(c.return=o,xe=c):Z1(a);for(;i!==null;)xe=i,uE(i),i=i.sibling;xe=a,Kd=l,dr=u}J1(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,xe=i):J1(e)}}function J1(e){for(;xe!==null;){var t=xe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dr||Im(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!dr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Pn(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&M1(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}M1(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&eu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}dr||t.flags&512&&Ey(t)}catch(f){Nt(t,t.return,f)}}if(t===e){xe=null;break}if(r=t.sibling,r!==null){r.return=t.return,xe=r;break}xe=t.return}}function Q1(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,xe=r;break}xe=t.return}}function Z1(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Im(4,t)}catch(c){Nt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Nt(t,a,c)}}var i=t.return;try{Ey(t)}catch(c){Nt(t,i,c)}break;case 5:var o=t.return;try{Ey(t)}catch(c){Nt(t,o,c)}}}catch(c){Nt(t,t.return,c)}if(t===e){xe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,xe=l;break}xe=t.return}}var NI=Math.ceil,of=Is.ReactCurrentDispatcher,Eb=Is.ReactCurrentOwner,pn=Is.ReactCurrentBatchConfig,Ue=0,Yt=null,Tt=null,rr=0,zr=0,xo=Ca(0),Bt=0,du=null,bi=0,Lm=0,Pb=0,Dc=null,kr=null,Tb=0,Wo=1/0,fs=null,lf=!1,$y=null,xa=null,Hd=!1,oa=null,cf=0,Mc=0,Dy=null,$h=-1,Dh=0;function jr(){return Ue&6?kt():$h!==-1?$h:$h=kt()}function ga(e){return e.mode&1?Ue&2&&rr!==0?rr&-rr:iI.transition!==null?(Dh===0&&(Dh=HA()),Dh):(e=He,e!==0||(e=window.event,e=e===void 0?16:tO(e.type)),e):1}function Fn(e,t,r,n){if(50<Mc)throw Mc=0,Dy=null,Error(oe(185));od(e,r,n),(!(Ue&2)||e!==Yt)&&(e===Yt&&(!(Ue&2)&&(Lm|=r),Bt===4&&ra(e,rr)),Dr(e,n),r===1&&Ue===0&&!(t.mode&1)&&(Wo=kt()+500,Dm&&ka()))}function Dr(e,t){var r=e.callbackNode;i6(e,t);var n=Wh(e,e===Yt?rr:0);if(n===0)r!==null&&l1(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&l1(r),t===1)e.tag===0?aI(eN.bind(null,e)):bO(eN.bind(null,e)),tI(function(){!(Ue&6)&&ka()}),r=null;else{switch(YA(n)){case 1:r=sb;break;case 4:r=GA;break;case 16:r=Vh;break;case 536870912:r=KA;break;default:r=Vh}r=yE(r,dE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function dE(e,t){if($h=-1,Dh=0,Ue&6)throw Error(oe(327));var r=e.callbackNode;if($o()&&e.callbackNode!==r)return null;var n=Wh(e,e===Yt?rr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=uf(e,n);else{t=n;var a=Ue;Ue|=2;var i=fE();(Yt!==e||rr!==t)&&(fs=null,Wo=kt()+500,di(e,t));do try{CI();break}catch(l){hE(e,l)}while(!0);gb(),of.current=i,Ue=a,Tt!==null?t=0:(Yt=null,rr=0,t=Bt)}if(t!==0){if(t===2&&(a=oy(e),a!==0&&(n=a,t=My(e,a))),t===1)throw r=du,di(e,0),ra(e,n),Dr(e,kt()),r;if(t===6)ra(e,n);else{if(a=e.current.alternate,!(n&30)&&!SI(a)&&(t=uf(e,n),t===2&&(i=oy(e),i!==0&&(n=i,t=My(e,i))),t===1))throw r=du,di(e,0),ra(e,n),Dr(e,kt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(oe(345));case 2:Wa(e,kr,fs);break;case 3:if(ra(e,n),(n&130023424)===n&&(t=Tb+500-kt(),10<t)){if(Wh(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){jr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=py(Wa.bind(null,e,kr,fs),t);break}Wa(e,kr,fs);break;case 4:if(ra(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ln(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=kt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NI(n/1960))-n,10<n){e.timeoutHandle=py(Wa.bind(null,e,kr,fs),n);break}Wa(e,kr,fs);break;case 5:Wa(e,kr,fs);break;default:throw Error(oe(329))}}}return Dr(e,kt()),e.callbackNode===r?dE.bind(null,e):null}function My(e,t){var r=Dc;return e.current.memoizedState.isDehydrated&&(di(e,t).flags|=256),e=uf(e,t),e!==2&&(t=kr,kr=r,t!==null&&Ry(t)),e}function Ry(e){kr===null?kr=e:kr.push.apply(kr,e)}function SI(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Bn(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ra(e,t){for(t&=~Pb,t&=~Lm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ln(t),n=1<<r;e[r]=-1,t&=~n}}function eN(e){if(Ue&6)throw Error(oe(327));$o();var t=Wh(e,0);if(!(t&1))return Dr(e,kt()),null;var r=uf(e,t);if(e.tag!==0&&r===2){var n=oy(e);n!==0&&(t=n,r=My(e,n))}if(r===1)throw r=du,di(e,0),ra(e,t),Dr(e,kt()),r;if(r===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wa(e,kr,fs),Dr(e,kt()),null}function $b(e,t){var r=Ue;Ue|=1;try{return e(t)}finally{Ue=r,Ue===0&&(Wo=kt()+500,Dm&&ka())}}function ji(e){oa!==null&&oa.tag===0&&!(Ue&6)&&$o();var t=Ue;Ue|=1;var r=pn.transition,n=He;try{if(pn.transition=null,He=1,e)return e()}finally{He=n,pn.transition=r,Ue=t,!(Ue&6)&&ka()}}function Db(){zr=xo.current,ot(xo)}function di(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,eI(r)),Tt!==null)for(r=Tt.return;r!==null;){var n=r;switch(mb(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xh();break;case 3:qo(),ot(Tr),ot(mr),Nb();break;case 5:wb(n);break;case 4:qo();break;case 13:ot(mt);break;case 19:ot(mt);break;case 10:yb(n.type._context);break;case 22:case 23:Db()}r=r.return}if(Yt=e,Tt=e=ya(e.current,null),rr=zr=t,Bt=0,du=null,Pb=Lm=bi=0,kr=Dc=null,ri!==null){for(t=0;t<ri.length;t++)if(r=ri[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ri=null}return e}function hE(e,t){do{var r=Tt;try{if(gb(),Eh.current=af,sf){for(var n=gt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}sf=!1}if(vi=0,Kt=Lt=gt=null,Tc=!1,lu=0,Eb.current=null,r===null||r.return===null){Bt=1,du=t,Tt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=rr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=B1(o);if(p!==null){p.flags&=-257,U1(p,o,l,i,t),p.mode&1&&z1(i,u,t),t=p,c=u;var b=t.updateQueue;if(b===null){var x=new Set;x.add(c),t.updateQueue=x}else b.add(c);break e}else{if(!(t&1)){z1(i,u,t),Mb();break e}c=Error(oe(426))}}else if(ct&&l.mode&1){var g=B1(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),U1(g,o,l,i,t),pb(Vo(c,l));break e}}i=c=Vo(c,l),Bt!==4&&(Bt=2),Dc===null?Dc=[i]:Dc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=YO(i,c,t);D1(i,y);break e;case 1:l=c;var m=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(xa===null||!xa.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=XO(i,l,t);D1(i,S);break e}}i=i.return}while(i!==null)}pE(r)}catch(w){t=w,Tt===r&&r!==null&&(Tt=r=r.return);continue}break}while(!0)}function fE(){var e=of.current;return of.current=af,e===null?af:e}function Mb(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Yt===null||!(bi&268435455)&&!(Lm&268435455)||ra(Yt,rr)}function uf(e,t){var r=Ue;Ue|=2;var n=fE();(Yt!==e||rr!==t)&&(fs=null,di(e,t));do try{_I();break}catch(a){hE(e,a)}while(!0);if(gb(),Ue=r,of.current=n,Tt!==null)throw Error(oe(261));return Yt=null,rr=0,Bt}function _I(){for(;Tt!==null;)mE(Tt)}function CI(){for(;Tt!==null&&!JR();)mE(Tt)}function mE(e){var t=gE(e.alternate,e,zr);e.memoizedProps=e.pendingProps,t===null?pE(e):Tt=t,Eb.current=null}function pE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=vI(r,t),r!==null){r.flags&=32767,Tt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Bt=6,Tt=null;return}}else if(r=yI(r,t,zr),r!==null){Tt=r;return}if(t=t.sibling,t!==null){Tt=t;return}Tt=t=e}while(t!==null);Bt===0&&(Bt=5)}function Wa(e,t,r){var n=He,a=pn.transition;try{pn.transition=null,He=1,kI(e,t,r,n)}finally{pn.transition=a,He=n}return null}function kI(e,t,r,n){do $o();while(oa!==null);if(Ue&6)throw Error(oe(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(o6(e,i),e===Yt&&(Tt=Yt=null,rr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hd||(Hd=!0,yE(Vh,function(){return $o(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=pn.transition,pn.transition=null;var o=He;He=1;var l=Ue;Ue|=4,Eb.current=null,jI(e,r),cE(r,e),K6(fy),Gh=!!hy,fy=hy=null,e.current=r,wI(r),QR(),Ue=l,He=o,pn.transition=i}else e.current=r;if(Hd&&(Hd=!1,oa=e,cf=a),i=e.pendingLanes,i===0&&(xa=null),t6(r.stateNode),Dr(e,kt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(lf)throw lf=!1,e=$y,$y=null,e;return cf&1&&e.tag!==0&&$o(),i=e.pendingLanes,i&1?e===Dy?Mc++:(Mc=0,Dy=e):Mc=0,ka(),null}function $o(){if(oa!==null){var e=YA(cf),t=pn.transition,r=He;try{if(pn.transition=null,He=16>e?16:e,oa===null)var n=!1;else{if(e=oa,oa=null,cf=0,Ue&6)throw Error(oe(331));var a=Ue;for(Ue|=4,xe=e.current;xe!==null;){var i=xe,o=i.child;if(xe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(xe=u;xe!==null;){var h=xe;switch(h.tag){case 0:case 11:case 15:$c(8,h,i)}var d=h.child;if(d!==null)d.return=h,xe=d;else for(;xe!==null;){h=xe;var f=h.sibling,p=h.return;if(iE(h),h===u){xe=null;break}if(f!==null){f.return=p,xe=f;break}xe=p}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(x!==null)}}xe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,xe=o;else e:for(;xe!==null;){if(i=xe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$c(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,xe=y;break e}xe=i.return}}var m=e.current;for(xe=m;xe!==null;){o=xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,xe=v;else e:for(o=m;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Im(9,l)}}catch(w){Nt(l,l.return,w)}if(l===o){xe=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,xe=S;break e}xe=l.return}}if(Ue=a,ka(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(Om,e)}catch{}n=!0}return n}finally{He=r,pn.transition=t}}return!1}function tN(e,t,r){t=Vo(r,t),t=YO(e,t,1),e=pa(e,t,1),t=jr(),e!==null&&(od(e,1,t),Dr(e,t))}function Nt(e,t,r){if(e.tag===3)tN(e,e,r);else for(;t!==null;){if(t.tag===3){tN(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xa===null||!xa.has(n))){e=Vo(r,e),e=XO(t,e,1),t=pa(t,e,1),e=jr(),t!==null&&(od(t,1,e),Dr(t,e));break}}t=t.return}}function AI(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=jr(),e.pingedLanes|=e.suspendedLanes&r,Yt===e&&(rr&r)===r&&(Bt===4||Bt===3&&(rr&130023424)===rr&&500>kt()-Tb?di(e,0):Pb|=r),Dr(e,t)}function xE(e,t){t===0&&(e.mode&1?(t=Ld,Ld<<=1,!(Ld&130023424)&&(Ld=4194304)):t=1);var r=jr();e=Es(e,t),e!==null&&(od(e,t,r),Dr(e,r))}function OI(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),xE(e,r)}function EI(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(oe(314))}n!==null&&n.delete(t),xE(e,r)}var gE;gE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tr.current)Or=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Or=!1,gI(e,t,r);Or=!!(e.flags&131072)}else Or=!1,ct&&t.flags&1048576&&jO(t,Zh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Th(e,t),e=t.pendingProps;var a=zo(t,mr.current);To(t,r),a=_b(null,t,n,e,a,r);var i=Cb();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$r(n)?(i=!0,Jh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,bb(t),a.updater=Rm,t.stateNode=a,a._reactInternals=t,wy(t,n,e,r),t=_y(null,t,n,!0,i,r)):(t.tag=0,ct&&i&&fb(t),gr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Th(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=TI(n),e=Pn(n,e),a){case 0:t=Sy(null,t,n,e,r);break e;case 1:t=W1(null,t,n,e,r);break e;case 11:t=q1(null,t,n,e,r);break e;case 14:t=V1(null,t,n,Pn(n.type,e),r);break e}throw Error(oe(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),Sy(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),W1(e,t,n,a,r);case 3:e:{if(eE(t),e===null)throw Error(oe(387));n=t.pendingProps,i=t.memoizedState,a=i.element,kO(e,t),rf(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Vo(Error(oe(423)),t),t=G1(e,t,n,r,a);break e}else if(n!==a){a=Vo(Error(oe(424)),t),t=G1(e,t,n,r,a);break e}else for(Wr=ma(t.stateNode.containerInfo.firstChild),Gr=t,ct=!0,Rn=null,r=_O(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Bo(),n===a){t=Ps(e,t,r);break e}gr(e,t,n,r)}t=t.child}return t;case 5:return AO(t),e===null&&vy(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,my(n,a)?o=null:i!==null&&my(n,i)&&(t.flags|=32),ZO(e,t),gr(e,t,o,r),t.child;case 6:return e===null&&vy(t),null;case 13:return tE(e,t,r);case 4:return jb(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Uo(t,null,n,r):gr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),q1(e,t,n,a,r);case 7:return gr(e,t,t.pendingProps,r),t.child;case 8:return gr(e,t,t.pendingProps.children,r),t.child;case 12:return gr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,rt(ef,n._currentValue),n._currentValue=o,i!==null)if(Bn(i.value,o)){if(i.children===a.children&&!Tr.current){t=Ps(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ws(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),by(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(oe(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),by(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,To(t,r),a=yn(a),n=n(a),t.flags|=1,gr(e,t,n,r),t.child;case 14:return n=t.type,a=Pn(n,t.pendingProps),a=Pn(n.type,a),V1(e,t,n,a,r);case 15:return JO(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Pn(n,a),Th(e,t),t.tag=1,$r(n)?(e=!0,Jh(t)):e=!1,To(t,r),HO(t,n,a),wy(t,n,a,r),_y(null,t,n,!0,e,r);case 19:return rE(e,t,r);case 22:return QO(e,t,r)}throw Error(oe(156,t.tag))};function yE(e,t){return WA(e,t)}function PI(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(e,t,r,n){return new PI(e,t,r,n)}function Rb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function TI(e){if(typeof e=="function")return Rb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tb)return 11;if(e===rb)return 14}return 2}function ya(e,t){var r=e.alternate;return r===null?(r=fn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mh(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Rb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ao:return hi(r.children,a,i,t);case eb:o=8,a|=8;break;case Gg:return e=fn(12,r,t,a|2),e.elementType=Gg,e.lanes=i,e;case Kg:return e=fn(13,r,t,a),e.elementType=Kg,e.lanes=i,e;case Hg:return e=fn(19,r,t,a),e.elementType=Hg,e.lanes=i,e;case AA:return Fm(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CA:o=10;break e;case kA:o=9;break e;case tb:o=11;break e;case rb:o=14;break e;case Js:o=16,n=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=fn(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function hi(e,t,r,n){return e=fn(7,e,n,t),e.lanes=r,e}function Fm(e,t,r,n){return e=fn(22,e,n,t),e.elementType=AA,e.lanes=r,e.stateNode={isHidden:!1},e}function Ox(e,t,r){return e=fn(6,e,null,t),e.lanes=r,e}function Ex(e,t,r){return t=fn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $I(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ux(0),this.expirationTimes=ux(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ux(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ib(e,t,r,n,a,i,o,l,c){return e=new $I(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bb(i),e}function DI(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:so,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function vE(e){if(!e)return wa;e=e._reactInternals;e:{if(Pi(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($r(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var r=e.type;if($r(r))return vO(e,r,t)}return t}function bE(e,t,r,n,a,i,o,l,c){return e=Ib(r,n,!0,e,a,i,o,l,c),e.context=vE(null),r=e.current,n=jr(),a=ga(r),i=ws(n,a),i.callback=t??null,pa(r,i,a),e.current.lanes=a,od(e,a,n),Dr(e,n),e}function zm(e,t,r,n){var a=t.current,i=jr(),o=ga(a);return r=vE(r),t.context===null?t.context=r:t.pendingContext=r,t=ws(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=pa(a,t,o),e!==null&&(Fn(e,a,o,i),Oh(e,a,o)),o}function df(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Lb(e,t){rN(e,t),(e=e.alternate)&&rN(e,t)}function MI(){return null}var jE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fb(e){this._internalRoot=e}Bm.prototype.render=Fb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));zm(e,t,null,null)};Bm.prototype.unmount=Fb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ji(function(){zm(null,e,null,null)}),t[Os]=null}};function Bm(e){this._internalRoot=e}Bm.prototype.unstable_scheduleHydration=function(e){if(e){var t=QA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ta.length&&t!==0&&t<ta[r].priority;r++);ta.splice(r,0,e),r===0&&eO(e)}};function zb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Um(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nN(){}function RI(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=df(o);i.call(u)}}var o=bE(t,n,e,0,null,!1,!1,"",nN);return e._reactRootContainer=o,e[Os]=o.current,nu(e.nodeType===8?e.parentNode:e),ji(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=df(c);l.call(u)}}var c=Ib(e,0,!1,null,null,!1,!1,"",nN);return e._reactRootContainer=c,e[Os]=c.current,nu(e.nodeType===8?e.parentNode:e),ji(function(){zm(t,c,r,n)}),c}function qm(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=df(o);l.call(c)}}zm(t,o,e,a)}else o=RI(r,t,e,a,n);return df(o)}XA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bc(t.pendingLanes);r!==0&&(ab(t,r|1),Dr(t,kt()),!(Ue&6)&&(Wo=kt()+500,ka()))}break;case 13:ji(function(){var n=Es(e,1);if(n!==null){var a=jr();Fn(n,e,1,a)}}),Lb(e,1)}};ib=function(e){if(e.tag===13){var t=Es(e,134217728);if(t!==null){var r=jr();Fn(t,e,134217728,r)}Lb(e,134217728)}};JA=function(e){if(e.tag===13){var t=ga(e),r=Es(e,t);if(r!==null){var n=jr();Fn(r,e,t,n)}Lb(e,t)}};QA=function(){return He};ZA=function(e,t){var r=He;try{return He=e,t()}finally{He=r}};sy=function(e,t,r){switch(t){case"input":if(Jg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=$m(n);if(!a)throw Error(oe(90));EA(n),Jg(n,a)}}}break;case"textarea":TA(e,r);break;case"select":t=r.value,t!=null&&Ao(e,!!r.multiple,t,!1)}};FA=$b;zA=ji;var II={usingClientEntryPoint:!1,Events:[cd,co,$m,IA,LA,$b]},ac={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LI={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Is.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qA(e),e===null?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||MI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{Om=Yd.inject(LI),Qn=Yd}catch{}}en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=II;en.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zb(t))throw Error(oe(200));return DI(e,t,null,r)};en.createRoot=function(e,t){if(!zb(e))throw Error(oe(299));var r=!1,n="",a=jE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ib(e,1,!1,null,null,r,!1,n,a),e[Os]=t.current,nu(e.nodeType===8?e.parentNode:e),new Fb(t)};en.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=qA(t),e=e===null?null:e.stateNode,e};en.flushSync=function(e){return ji(e)};en.hydrate=function(e,t,r){if(!Um(t))throw Error(oe(200));return qm(null,e,t,!0,r)};en.hydrateRoot=function(e,t,r){if(!zb(e))throw Error(oe(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=jE;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=bE(t,null,e,1,r??null,a,!1,i,o),e[Os]=t.current,nu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Bm(t)};en.render=function(e,t,r){if(!Um(t))throw Error(oe(200));return qm(null,e,t,!1,r)};en.unmountComponentAtNode=function(e){if(!Um(e))throw Error(oe(40));return e._reactRootContainer?(ji(function(){qm(null,null,e,!1,function(){e._reactRootContainer=null,e[Os]=null})}),!0):!1};en.unstable_batchedUpdates=$b;en.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Um(r))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return qm(e,t,r,!1,n)};en.version="18.3.1-next-f1338f8080-20240426";function wE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wE)}catch(e){console.error(e)}}wE(),wA.exports=en;var NE=wA.exports,SE,sN=NE;SE=sN.createRoot,sN.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hu.apply(this,arguments)}var la;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(la||(la={}));const aN="popstate";function FI(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Iy("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:hf(a)}return BI(t,r,null,e)}function yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zI(){return Math.random().toString(36).substr(2,8)}function iN(e,t){return{usr:e.state,key:e.key,idx:t}}function Iy(e,t,r,n){return r===void 0&&(r=null),hu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ol(t):t,{state:r,key:t&&t.key||n||zI()})}function hf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ol(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function BI(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=la.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(hu({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=la.Pop;let g=h(),y=g==null?null:g-u;u=g,c&&c({action:l,location:x.location,delta:y})}function f(g,y){l=la.Push;let m=Iy(x.location,g,y);u=h()+1;let v=iN(m,u),S=x.createHref(m);try{o.pushState(v,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(S)}i&&c&&c({action:l,location:x.location,delta:1})}function p(g,y){l=la.Replace;let m=Iy(x.location,g,y);u=h();let v=iN(m,u),S=x.createHref(m);o.replaceState(v,"",S),i&&c&&c({action:l,location:x.location,delta:0})}function b(g){let y=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof g=="string"?g:hf(g);return m=m.replace(/ $/,"%20"),yt(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let x={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(aN,d),c=g,()=>{a.removeEventListener(aN,d),c=null}},createHref(g){return t(a,g)},createURL:b,encodeLocation(g){let y=b(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(g){return o.go(g)}};return x}var oN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oN||(oN={}));function UI(e,t,r){return r===void 0&&(r="/"),qI(e,t,r)}function qI(e,t,r,n){let a=typeof t=="string"?Ol(t):t,i=Go(a.pathname||"/",r);if(i==null)return null;let o=_E(e);VI(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=t5(i);l=ZI(o[c],u)}return l}function _E(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(yt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=va([n,c.relativePath]),h=r.concat(c);i.children&&i.children.length>0&&(yt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),_E(i.children,t,h,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:JI(u,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of CE(i.path))a(i,o,c)}),t}function CE(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=CE(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function VI(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:QI(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const WI=/^:[\w-]+$/,GI=3,KI=2,HI=1,YI=10,XI=-2,lN=e=>e==="*";function JI(e,t){let r=e.split("/"),n=r.length;return r.some(lN)&&(n+=XI),t&&(n+=KI),r.filter(a=>!lN(a)).reduce((a,i)=>a+(WI.test(i)?GI:i===""?HI:YI),n)}function QI(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function ZI(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",d=Ly({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d)return null;Object.assign(a,d.params),o.push({params:a,pathname:va([i,d.pathname]),pathnameBase:i5(va([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=va([i,d.pathnameBase]))}return o}function Ly(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=e5(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,h,d)=>{let{paramName:f,isOptional:p}=h;if(f==="*"){let x=l[d]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const b=l[d];return p&&!b?u[f]=void 0:u[f]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function e5(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Bb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function t5(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Go(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const r5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,n5=e=>r5.test(e);function s5(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Ol(e):e,i;if(r)if(n5(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Bb(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=cN(r.substring(1),"/"):i=cN(r,t)}else i=t;return{pathname:i,search:o5(n),hash:l5(a)}}function cN(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Px(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function a5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ub(e,t){let r=a5(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function qb(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Ol(e):(a=hu({},e),yt(!a.pathname||!a.pathname.includes("?"),Px("?","pathname","search",a)),yt(!a.pathname||!a.pathname.includes("#"),Px("#","pathname","hash",a)),yt(!a.search||!a.search.includes("#"),Px("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;a.pathname=f.join("/")}l=d>=0?t[d]:"/"}let c=s5(a,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const va=e=>e.join("/").replace(/\/\/+/g,"/"),i5=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),o5=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,l5=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function c5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const kE=["post","put","patch","delete"];new Set(kE);const u5=["get",...kE];new Set(u5);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fu.apply(this,arguments)}const Vm=j.createContext(null),AE=j.createContext(null),Ls=j.createContext(null),Wm=j.createContext(null),Aa=j.createContext({outlet:null,matches:[],isDataRoute:!1}),OE=j.createContext(null);function d5(e,t){let{relative:r}=t===void 0?{}:t;El()||yt(!1);let{basename:n,navigator:a}=j.useContext(Ls),{hash:i,pathname:o,search:l}=Gm(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:va([n,o])),a.createHref({pathname:c,search:l,hash:i})}function El(){return j.useContext(Wm)!=null}function os(){return El()||yt(!1),j.useContext(Wm).location}function EE(e){j.useContext(Ls).static||j.useLayoutEffect(e)}function Fs(){let{isDataRoute:e}=j.useContext(Aa);return e?S5():h5()}function h5(){El()||yt(!1);let e=j.useContext(Vm),{basename:t,future:r,navigator:n}=j.useContext(Ls),{matches:a}=j.useContext(Aa),{pathname:i}=os(),o=JSON.stringify(Ub(a,r.v7_relativeSplatPath)),l=j.useRef(!1);return EE(()=>{l.current=!0}),j.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=qb(u,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:va([t,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[t,n,o,i,e])}function Gm(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=j.useContext(Ls),{matches:a}=j.useContext(Aa),{pathname:i}=os(),o=JSON.stringify(Ub(a,n.v7_relativeSplatPath));return j.useMemo(()=>qb(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function f5(e,t){return m5(e,t)}function m5(e,t,r,n){El()||yt(!1);let{navigator:a}=j.useContext(Ls),{matches:i}=j.useContext(Aa),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=os(),h;if(t){var d;let g=typeof t=="string"?Ol(t):t;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||yt(!1),h=g}else h=u;let f=h.pathname||"/",p=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let b=UI(e,{pathname:p}),x=v5(b&&b.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:va([c,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:va([c,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,n);return t&&x?j.createElement(Wm.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:la.Pop}},x):x}function p5(){let e=N5(),t=c5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:a},r):null,null)}const x5=j.createElement(p5,null);class g5 extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(Aa.Provider,{value:this.props.routeContext},j.createElement(OE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y5(e){let{routeContext:t,match:r,children:n}=e,a=j.useContext(Vm);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(Aa.Provider,{value:t},n)}function v5(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||yt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:p}=r,b=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let p,b=!1,x=null,g=null;r&&(p=l&&d.route.id?l[d.route.id]:void 0,x=d.route.errorElement||x5,c&&(u<0&&f===0?(_5("route-fallback"),b=!0,g=null):u===f&&(b=!0,g=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),m=()=>{let v;return p?v=x:b?v=g:d.route.Component?v=j.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,j.createElement(y5,{match:d,routeContext:{outlet:h,matches:y,isDataRoute:r!=null},children:v})};return r&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?j.createElement(g5,{location:r.location,revalidation:r.revalidation,component:x,error:p,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var PE=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(PE||{}),TE=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(TE||{});function b5(e){let t=j.useContext(Vm);return t||yt(!1),t}function j5(e){let t=j.useContext(AE);return t||yt(!1),t}function w5(e){let t=j.useContext(Aa);return t||yt(!1),t}function $E(e){let t=w5(),r=t.matches[t.matches.length-1];return r.route.id||yt(!1),r.route.id}function N5(){var e;let t=j.useContext(OE),r=j5(),n=$E();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function S5(){let{router:e}=b5(PE.UseNavigateStable),t=$E(TE.UseNavigateStable),r=j.useRef(!1);return EE(()=>{r.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,fu({fromRouteId:t},i)))},[e,t])}const uN={};function _5(e,t,r){uN[e]||(uN[e]=!0)}function C5(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function An(e){let{to:t,replace:r,state:n,relative:a}=e;El()||yt(!1);let{future:i,static:o}=j.useContext(Ls),{matches:l}=j.useContext(Aa),{pathname:c}=os(),u=Fs(),h=qb(t,Ub(l,i.v7_relativeSplatPath),c,a==="path"),d=JSON.stringify(h);return j.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:a}),[u,d,a,r,n]),null}function pe(e){yt(!1)}function k5(e){let{basename:t="/",children:r=null,location:n,navigationType:a=la.Pop,navigator:i,static:o=!1,future:l}=e;El()&&yt(!1);let c=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:o,future:fu({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Ol(n));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:b="default"}=n,x=j.useMemo(()=>{let g=Go(h,c);return g==null?null:{location:{pathname:g,search:d,hash:f,state:p,key:b},navigationType:a}},[c,h,d,f,p,b,a]);return x==null?null:j.createElement(Ls.Provider,{value:u},j.createElement(Wm.Provider,{children:r,value:x}))}function dN(e){let{children:t,location:r}=e;return f5(Fy(t),r)}new Promise(()=>{});function Fy(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(n,a)=>{if(!j.isValidElement(n))return;let i=[...t,a];if(n.type===j.Fragment){r.push.apply(r,Fy(n.props.children,i));return}n.type!==pe&&yt(!1),!n.props.index||!n.props.children||yt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Fy(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ff.apply(this,arguments)}function DE(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function A5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O5(e,t){return e.button===0&&(!t||t==="_self")&&!A5(e)}function zy(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function E5(e,t){let r=zy(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const P5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T5=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],$5="6";try{window.__reactRouterVersion=$5}catch{}const D5=j.createContext({isTransitioning:!1}),M5="startTransition",hN=AR[M5];function R5(e){let{basename:t,children:r,future:n,window:a}=e,i=j.useRef();i.current==null&&(i.current=FI({window:a,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=j.useCallback(d=>{u&&hN?hN(()=>c(d)):c(d)},[c,u]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.useEffect(()=>C5(n),[n]),j.createElement(k5,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const I5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Km=j.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=t,f=DE(t,P5),{basename:p}=j.useContext(Ls),b,x=!1;if(typeof u=="string"&&L5.test(u)&&(b=u,I5))try{let v=new URL(window.location.href),S=u.startsWith("//")?new URL(v.protocol+u):new URL(u),w=Go(S.pathname,p);S.origin===v.origin&&w!=null?u=w+S.search+S.hash:x=!0}catch{}let g=d5(u,{relative:a}),y=z5(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:a,viewTransition:d});function m(v){n&&n(v),v.defaultPrevented||y(v)}return j.createElement("a",ff({},f,{href:b||g,onClick:x||i?n:m,ref:r,target:c}))}),Vi=j.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:h}=t,d=DE(t,T5),f=Gm(c,{relative:d.relative}),p=os(),b=j.useContext(AE),{navigator:x,basename:g}=j.useContext(Ls),y=b!=null&&U5(f)&&u===!0,m=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,v=p.pathname,S=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(v=v.toLowerCase(),S=S?S.toLowerCase():null,m=m.toLowerCase()),S&&g&&(S=Go(S,g)||S);const w=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let N=v===m||!o&&v.startsWith(m)&&v.charAt(w)==="/",_=S!=null&&(S===m||!o&&S.startsWith(m)&&S.charAt(m.length)==="/"),C={isActive:N,isPending:_,isTransitioning:y},A=N?n:void 0,k;typeof i=="function"?k=i(C):k=[i,N?"active":null,_?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let E=typeof l=="function"?l(C):l;return j.createElement(Km,ff({},d,{"aria-current":A,className:k,ref:r,style:E,to:c,viewTransition:u}),typeof h=="function"?h(C):h)});var By;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(By||(By={}));var fN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fN||(fN={}));function F5(e){let t=j.useContext(Vm);return t||yt(!1),t}function z5(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Fs(),u=os(),h=Gm(e,{relative:o});return j.useCallback(d=>{if(O5(d,r)){d.preventDefault();let f=n!==void 0?n:hf(u)===hf(h);c(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,n,a,r,e,i,o,l])}function B5(e){let t=j.useRef(zy(e)),r=j.useRef(!1),n=os(),a=j.useMemo(()=>E5(n.search,r.current?null:t.current),[n.search]),i=Fs(),o=j.useCallback((l,c)=>{const u=zy(typeof l=="function"?l(a):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,o]}function U5(e,t){t===void 0&&(t={});let r=j.useContext(D5);r==null&&yt(!1);let{basename:n}=F5(By.useViewTransitionState),a=Gm(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Go(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Go(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ly(a.pathname,o)!=null||Ly(a.pathname,i)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var q5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(e,t)=>{const r=j.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},h)=>j.createElement("svg",{ref:h,...q5,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${V5(e)}`,l].join(" "),...u},[...t.map(([d,f])=>j.createElement(d,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=ae("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=ae("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=ae("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=ae("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ae("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=ae("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=ae("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=ae("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=ae("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=ae("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=ae("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=ae("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ae("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=ae("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ae("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=ae("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=ae("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=ae("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ae("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ae("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=ae("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=ae("DownloadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m8 17 4 4 4-4",key:"1ul180"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=ae("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=ae("FilePieChart",[["path",{d:"M16 22h2a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"37hlfg"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4 11.5a6.02 6.02 0 1 0 8.5 8.5",key:"unkkko"}],["path",{d:"M14 16c0-3.3-2.7-6-6-6v6Z",key:"bym002"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=ae("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ae("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=ae("HandHeart",[["path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1ifwr1"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"17abbs"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",key:"1h3036"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=ae("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=ae("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=ae("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=ae("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ae("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=ae("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=ae("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=ae("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ae("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=ae("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=ae("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=ae("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=ae("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=ae("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=ae("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=ae("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=ae("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=ae("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=ae("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=ae("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=ae("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=ae("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=ae("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=ae("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xb=ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ae("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=ae("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=ae("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=ae("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ae("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=ae("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=ae("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=ae("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ae("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=ae("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Qb=j.createContext({});function Zb(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const ep=j.createContext(null),ej=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class A3 extends j.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function O3({children:e,isPresent:t}){const r=j.useId(),n=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=j.useContext(ej);return j.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u}=a.current;if(t||!n.current||!o||!l)return;n.current.dataset.motionPopId=r;const h=document.createElement("style");return i&&(h.nonce=i),document.head.appendChild(h),h.sheet&&h.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(h)}},[t]),s.jsx(A3,{isPresent:t,childRef:n,sizeRef:a,children:j.cloneElement(e,{ref:n})})}const E3=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=Zb(P3),c=j.useId(),u=j.useCallback(d=>{l.set(d,!0);for(const f of l.values())if(!f)return;n&&n()},[l,n]),h=j.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:u,register:d=>(l.set(d,!1),()=>l.delete(d))}),i?[Math.random(),u]:[r,u]);return j.useMemo(()=>{l.forEach((d,f)=>l.set(f,!1))},[r]),j.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(e=s.jsx(O3,{isPresent:r,children:e})),s.jsx(ep.Provider,{value:h,children:e})};function P3(){return new Map}function KE(e=!0){const t=j.useContext(ep);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=t,i=j.useId();j.useEffect(()=>{e&&a(i)},[e]);const o=j.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const Xd=e=>e.key||"";function pN(e){const t=[];return j.Children.forEach(e,r=>{j.isValidElement(r)&&t.push(r)}),t}const tj=typeof window<"u",HE=tj?j.useLayoutEffect:j.useEffect,Rc=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1})=>{const[l,c]=KE(o),u=j.useMemo(()=>pN(e),[e]),h=o&&!l?[]:u.map(Xd),d=j.useRef(!0),f=j.useRef(u),p=Zb(()=>new Map),[b,x]=j.useState(u),[g,y]=j.useState(u);HE(()=>{d.current=!1,f.current=u;for(let S=0;S<g.length;S++){const w=Xd(g[S]);h.includes(w)?p.delete(w):p.get(w)!==!0&&p.set(w,!1)}},[g,h.length,h.join("-")]);const m=[];if(u!==b){let S=[...u];for(let w=0;w<g.length;w++){const N=g[w],_=Xd(N);h.includes(_)||(S.splice(w,0,N),m.push(N))}i==="wait"&&m.length&&(S=m),y(pN(S)),x(u);return}const{forceRender:v}=j.useContext(Qb);return s.jsx(s.Fragment,{children:g.map(S=>{const w=Xd(S),N=o&&!l?!1:u===g||h.includes(w),_=()=>{if(p.has(w))p.set(w,!0);else return;let C=!0;p.forEach(A=>{A||(C=!1)}),C&&(v==null||v(),y(f.current),o&&(c==null||c()),n&&n())};return s.jsx(E3,{isPresent:N,initial:!d.current||r?void 0:!1,custom:N?void 0:t,presenceAffectsLayout:a,mode:i,onExitComplete:N?void 0:_,children:S},w)})})},Kr=e=>e;let YE=Kr;function rj(e){let t;return()=>(t===void 0&&(t=e()),t)}const Jo=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Ns=e=>e*1e3,Ss=e=>e/1e3,T3={useManualTiming:!1};function $3(e){let t=new Set,r=new Set,n=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){i.has(u)&&(c.schedule(u),e()),u(o)}const c={schedule:(u,h=!1,d=!1)=>{const p=d&&n?t:r;return h&&i.add(u),p.has(u)||p.add(u),u},cancel:u=>{r.delete(u),i.delete(u)},process:u=>{if(o=u,n){a=!0;return}n=!0,[t,r]=[r,t],t.forEach(l),t.clear(),n=!1,a&&(a=!1,c.process(u))}};return c}const Jd=["read","resolveKeyframes","update","preRender","render","postRender"],D3=40;function XE(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Jd.reduce((y,m)=>(y[m]=$3(i),y),{}),{read:l,resolveKeyframes:c,update:u,preRender:h,render:d,postRender:f}=o,p=()=>{const y=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(y-a.timestamp,D3),1),a.timestamp=y,a.isProcessing=!0,l.process(a),c.process(a),u.process(a),h.process(a),d.process(a),f.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(p))},b=()=>{r=!0,n=!0,a.isProcessing||e(p)};return{schedule:Jd.reduce((y,m)=>{const v=o[m];return y[m]=(S,w=!1,N=!1)=>(r||b(),v.schedule(S,w,N)),y},{}),cancel:y=>{for(let m=0;m<Jd.length;m++)o[Jd[m]].cancel(y)},state:a,steps:o}}const{schedule:lt,cancel:Na,state:tr,steps:Tx}=XE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Kr,!0),JE=j.createContext({strict:!1}),xN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qo={};for(const e in xN)Qo[e]={isEnabled:t=>xN[e].some(r=>!!t[r])};function M3(e){for(const t in e)Qo[t]={...Qo[t],...e[t]}}const R3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||R3.has(e)}let QE=e=>!mf(e);function I3(e){e&&(QE=t=>t.startsWith("on")?!mf(t):e(t))}try{I3(require("@emotion/is-prop-valid").default)}catch{}function L3(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(QE(a)||r===!0&&mf(a)||!t&&!mf(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function F3(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...n)=>e(...n);return new Proxy(r,{get:(n,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const tp=j.createContext({});function mu(e){return typeof e=="string"||Array.isArray(e)}function rp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const nj=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sj=["initial",...nj];function np(e){return rp(e.animate)||sj.some(t=>mu(e[t]))}function ZE(e){return!!(np(e)||e.variants)}function z3(e,t){if(np(e)){const{initial:r,animate:n}=e;return{initial:r===!1||mu(r)?r:void 0,animate:mu(n)?n:void 0}}return e.inherit!==!1?t:{}}function B3(e){const{initial:t,animate:r}=z3(e,j.useContext(tp));return j.useMemo(()=>({initial:t,animate:r}),[gN(t),gN(r)])}function gN(e){return Array.isArray(e)?e.join(" "):e}const U3=Symbol.for("motionComponentSymbol");function go(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function q3(e,t,r){return j.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):go(r)&&(r.current=n))},[t])}const aj=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),V3="framerAppearId",eP="data-"+aj(V3),{schedule:ij}=XE(queueMicrotask,!1),tP=j.createContext({});function W3(e,t,r,n,a){var i,o;const{visualElement:l}=j.useContext(tp),c=j.useContext(JE),u=j.useContext(ep),h=j.useContext(ej).reducedMotion,d=j.useRef(null);n=n||c.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:l,props:r,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const f=d.current,p=j.useContext(tP);f&&!f.projection&&a&&(f.type==="html"||f.type==="svg")&&G3(d.current,r,a,p);const b=j.useRef(!1);j.useInsertionEffect(()=>{f&&b.current&&f.update(r,u)});const x=r[eP],g=j.useRef(!!x&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return HE(()=>{f&&(b.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),ij.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),j.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,x)}),g.current=!1))}),f}function G3(e,t,r,n){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:rP(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&go(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function rP(e){if(e)return e.options.allowProjection!==!1?e.projection:rP(e.parent)}function K3({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){var i,o;e&&M3(e);function l(u,h){let d;const f={...j.useContext(ej),...u,layoutId:H3(u)},{isStatic:p}=f,b=B3(u),x=n(u,p);if(!p&&tj){Y3();const g=X3(f);d=g.MeasureLayout,b.visualElement=W3(a,x,f,t,g.ProjectionNode)}return s.jsxs(tp.Provider,{value:b,children:[d&&b.visualElement?s.jsx(d,{visualElement:b.visualElement,...f}):null,r(a,u,q3(x,b.visualElement,h),x,p,b.visualElement)]})}l.displayName=`motion.${typeof a=="string"?a:`create(${(o=(i=a.displayName)!==null&&i!==void 0?i:a.name)!==null&&o!==void 0?o:""})`}`;const c=j.forwardRef(l);return c[U3]=a,c}function H3({layoutId:e}){const t=j.useContext(Qb).id;return t&&e!==void 0?t+"-"+e:e}function Y3(e,t){j.useContext(JE).strict}function X3(e){const{drag:t,layout:r}=Qo;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const J3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oj(e){return typeof e!="string"||e.includes("-")?!1:!!(J3.indexOf(e)>-1||/[A-Z]/u.test(e))}function yN(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function lj(e,t,r,n){if(typeof t=="function"){const[a,i]=yN(n);t=t(r!==void 0?r:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=yN(n);t=t(r!==void 0?r:e.custom,a,i)}return t}const Wy=e=>Array.isArray(e),Q3=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Z3=e=>Wy(e)?e[e.length-1]||0:e,fr=e=>!!(e&&e.getVelocity);function Rh(e){const t=fr(e)?e.get():e;return Q3(t)?t.toValue():t}function eL({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,a,i){const o={latestValues:tL(n,a,i,e),renderState:t()};return r&&(o.onMount=l=>r({props:n,current:l,...o}),o.onUpdate=l=>r(l)),o}const nP=e=>(t,r)=>{const n=j.useContext(tp),a=j.useContext(ep),i=()=>eL(e,t,n,a);return r?i():Zb(i)};function tL(e,t,r,n){const a={},i=n(e,{});for(const f in i)a[f]=Rh(i[f]);let{initial:o,animate:l}=e;const c=np(e),u=ZE(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=r?r.initial===!1:!1;h=h||o===!1;const d=h?l:o;if(d&&typeof d!="boolean"&&!rp(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const b=lj(e,f[p]);if(b){const{transitionEnd:x,transition:g,...y}=b;for(const m in y){let v=y[m];if(Array.isArray(v)){const S=h?v.length-1:0;v=v[S]}v!==null&&(a[m]=v)}for(const m in x)a[m]=x[m]}}}return a}const Dl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Mi=new Set(Dl),sP=e=>t=>typeof t=="string"&&t.startsWith(e),aP=sP("--"),rL=sP("var(--"),cj=e=>rL(e)?nL.test(e.split("/*")[0].trim()):!1,nL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,iP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ts=(e,t,r)=>r>t?t:r<e?e:r,Ml={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},pu={...Ml,transform:e=>Ts(0,1,e)},Qd={...Ml,default:1},vd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ys=vd("deg"),es=vd("%"),ke=vd("px"),sL=vd("vh"),aL=vd("vw"),vN={...es,parse:e=>es.parse(e)/100,transform:e=>es.transform(e*100)},iL={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,backgroundPositionX:ke,backgroundPositionY:ke},oL={rotate:Ys,rotateX:Ys,rotateY:Ys,rotateZ:Ys,scale:Qd,scaleX:Qd,scaleY:Qd,scaleZ:Qd,skew:Ys,skewX:Ys,skewY:Ys,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:pu,originX:vN,originY:vN,originZ:ke},bN={...Ml,transform:Math.round},uj={...iL,...oL,zIndex:bN,size:ke,fillOpacity:pu,strokeOpacity:pu,numOctaves:bN},lL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cL=Dl.length;function uL(e,t,r){let n="",a=!0;for(let i=0;i<cL;i++){const o=Dl[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=iP(l,uj[o]);if(!c){a=!1;const h=lL[o]||o;n+=`${h}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function dj(e,t,r){const{style:n,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(Mi.has(c)){o=!0;continue}else if(aP(c)){a[c]=u;continue}else{const h=iP(u,uj[c]);c.startsWith("origin")?(l=!0,i[c]=h):n[c]=h}}if(t.transform||(o||r?n.transform=uL(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=i;n.transformOrigin=`${c} ${u} ${h}`}}const dL={offset:"stroke-dashoffset",array:"stroke-dasharray"},hL={offset:"strokeDashoffset",array:"strokeDasharray"};function fL(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?dL:hL;e[i.offset]=ke.transform(-n);const o=ke.transform(t),l=ke.transform(r);e[i.array]=`${o} ${l}`}function jN(e,t,r){return typeof e=="string"?e:ke.transform(t+r*e)}function mL(e,t,r){const n=jN(t,e.x,e.width),a=jN(r,e.y,e.height);return`${n} ${a}`}function hj(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},h,d){if(dj(e,u,d),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:b}=e;f.transform&&(b&&(p.transform=f.transform),delete f.transform),b&&(a!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=mL(b,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),o!==void 0&&fL(f,o,l,c,!1)}const fj=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),oP=()=>({...fj(),attrs:{}}),mj=e=>typeof e=="string"&&e.toLowerCase()==="svg";function lP(e,{style:t,vars:r},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const cP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function uP(e,t,r,n){lP(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(cP.has(a)?a:aj(a),t.attrs[a])}const pf={};function pL(e){Object.assign(pf,e)}function dP(e,{layout:t,layoutId:r}){return Mi.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!pf[e]||e==="opacity")}function pj(e,t,r){var n;const{style:a}=e,i={};for(const o in a)(fr(a[o])||t.style&&fr(t.style[o])||dP(o,e)||((n=r==null?void 0:r.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(i[o]=a[o]);return i}function hP(e,t,r){const n=pj(e,t,r);for(const a in e)if(fr(e[a])||fr(t[a])){const i=Dl.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=e[a]}return n}function xL(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const wN=["x","y","width","height","cx","cy","r"],gL={useVisualState:nP({scrapeMotionValuesFromProps:hP,createRenderState:oP,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:a})=>{if(!r)return;let i=!!e.drag;if(!i){for(const l in a)if(Mi.has(l)){i=!0;break}}if(!i)return;let o=!t;if(t)for(let l=0;l<wN.length;l++){const c=wN[l];e[c]!==t[c]&&(o=!0)}o&&lt.read(()=>{xL(r,n),lt.render(()=>{hj(n,a,mj(r.tagName),e.transformTemplate),uP(r,n)})})}})},yL={useVisualState:nP({scrapeMotionValuesFromProps:pj,createRenderState:fj})};function fP(e,t,r){for(const n in t)!fr(t[n])&&!dP(n,r)&&(e[n]=t[n])}function vL({transformTemplate:e},t){return j.useMemo(()=>{const r=fj();return dj(r,t,e),Object.assign({},r.vars,r.style)},[t])}function bL(e,t){const r=e.style||{},n={};return fP(n,r,e),Object.assign(n,vL(e,t)),n}function jL(e,t){const r={},n=bL(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}function wL(e,t,r,n){const a=j.useMemo(()=>{const i=oP();return hj(i,t,mj(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};fP(i,e.style,e),a.style={...i,...a.style}}return a}function NL(e=!1){return(r,n,a,{latestValues:i},o)=>{const c=(oj(r)?wL:jL)(n,i,o,r),u=L3(n,typeof r=="string",e),h=r!==j.Fragment?{...u,...c,ref:a}:{},{children:d}=n,f=j.useMemo(()=>fr(d)?d.get():d,[d]);return j.createElement(r,{...h,children:f})}}function SL(e,t){return function(n,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...oj(n)?gL:yL,preloadedFeatures:e,useRender:NL(a),createVisualElement:t,Component:n};return K3(o)}}function mP(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function sp(e,t,r){const n=e.getProps();return lj(n,t,r!==void 0?r:n.custom,e)}const _L=rj(()=>window.ScrollTimeline!==void 0);class CL{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,r){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=r}attachTimeline(t,r){const n=this.animations.map(a=>{if(_L()&&a.attachTimeline)return a.attachTimeline(t);if(typeof r=="function")return r(a)});return()=>{n.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class kL extends CL{then(t,r){return Promise.all(this.animations).then(t).catch(r)}}function xj(e,t){return e?e[t]||e.default||e:void 0}const Gy=2e4;function pP(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Gy;)t+=r,n=e.next(t);return t>=Gy?1/0:t}function gj(e){return typeof e=="function"}function NN(e,t){e.timeline=t,e.onfinish=null}const yj=e=>Array.isArray(e)&&typeof e[0]=="number",AL={linearEasing:void 0};function OL(e,t){const r=rj(e);return()=>{var n;return(n=AL[t])!==null&&n!==void 0?n:r()}}const xf=OL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),xP=(e,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let i=0;i<a;i++)n+=e(Jo(0,a-1,i))+", ";return`linear(${n.substring(0,n.length-2)})`};function gP(e){return!!(typeof e=="function"&&xf()||!e||typeof e=="string"&&(e in Ky||xf())||yj(e)||Array.isArray(e)&&e.every(gP))}const wc=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,Ky={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wc([0,.65,.55,1]),circOut:wc([.55,0,1,.45]),backIn:wc([.31,.01,.66,-.59]),backOut:wc([.33,1.53,.69,.99])};function yP(e,t){if(e)return typeof e=="function"&&xf()?xP(e,t):yj(e)?wc(e):Array.isArray(e)?e.map(r=>yP(r,t)||Ky.easeOut):Ky[e]}const En={x:!1,y:!1};function vP(){return En.x||En.y}function EL(e,t,r){var n;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const i=(n=void 0)!==null&&n!==void 0?n:a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function bP(e,t){const r=EL(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[r,a,()=>n.abort()]}function SN(e){return t=>{t.pointerType==="touch"||vP()||e(t)}}function PL(e,t,r={}){const[n,a,i]=bP(e,r),o=SN(l=>{const{target:c}=l,u=t(l);if(typeof u!="function"||!c)return;const h=SN(d=>{u(d),c.removeEventListener("pointerleave",h)});c.addEventListener("pointerleave",h,a)});return n.forEach(l=>{l.addEventListener("pointerenter",o,a)}),i}const jP=(e,t)=>t?e===t?!0:jP(e,t.parentElement):!1,vj=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,TL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $L(e){return TL.has(e.tagName)||e.tabIndex!==-1}const Nc=new WeakSet;function _N(e){return t=>{t.key==="Enter"&&e(t)}}function $x(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const DL=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=_N(()=>{if(Nc.has(r))return;$x(r,"down");const a=_N(()=>{$x(r,"up")}),i=()=>$x(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function CN(e){return vj(e)&&!vP()}function ML(e,t,r={}){const[n,a,i]=bP(e,r),o=l=>{const c=l.currentTarget;if(!CN(l)||Nc.has(c))return;Nc.add(c);const u=t(l),h=(p,b)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!CN(p)||!Nc.has(c))&&(Nc.delete(c),typeof u=="function"&&u(p,{success:b}))},d=p=>{h(p,r.useGlobalTarget||jP(c,p.target))},f=p=>{h(p,!1)};window.addEventListener("pointerup",d,a),window.addEventListener("pointercancel",f,a)};return n.forEach(l=>{!$L(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,a),l.addEventListener("focus",u=>DL(u,a),a)}),i}function RL(e){return e==="x"||e==="y"?En[e]?null:(En[e]=!0,()=>{En[e]=!1}):En.x||En.y?null:(En.x=En.y=!0,()=>{En.x=En.y=!1})}const wP=new Set(["width","height","top","left","right","bottom",...Dl]);let Ih;function IL(){Ih=void 0}const ts={now:()=>(Ih===void 0&&ts.set(tr.isProcessing||T3.useManualTiming?tr.timestamp:performance.now()),Ih),set:e=>{Ih=e,queueMicrotask(IL)}};function bj(e,t){e.indexOf(t)===-1&&e.push(t)}function jj(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class wj{constructor(){this.subscriptions=[]}add(t){return bj(this.subscriptions,t),()=>jj(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function NP(e,t){return t?e*(1e3/t):0}const kN=30,LL=e=>!isNaN(parseFloat(e));class FL{constructor(t,r={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,a=!0)=>{const i=ts.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=ts.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=LL(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new wj);const n=this.events[t].add(r);return t==="change"?()=>{n(),lt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ts.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>kN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,kN);return NP(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xu(e,t){return new FL(e,t)}function zL(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,xu(r))}function BL(e,t){const r=sp(e,t);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const o in i){const l=Z3(i[o]);zL(e,o,l)}}function UL(e){return!!(fr(e)&&e.add)}function Hy(e,t){const r=e.getValue("willChange");if(UL(r))return r.add(t)}function SP(e){return e.props[eP]}const _P=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,qL=1e-7,VL=12;function WL(e,t,r,n,a){let i,o,l=0;do o=t+(r-t)/2,i=_P(o,n,a)-e,i>0?r=o:t=o;while(Math.abs(i)>qL&&++l<VL);return o}function bd(e,t,r,n){if(e===t&&r===n)return Kr;const a=i=>WL(i,0,1,e,r);return i=>i===0||i===1?i:_P(a(i),t,n)}const CP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kP=e=>t=>1-e(1-t),AP=bd(.33,1.53,.69,.99),Nj=kP(AP),OP=CP(Nj),EP=e=>(e*=2)<1?.5*Nj(e):.5*(2-Math.pow(2,-10*(e-1))),Sj=e=>1-Math.sin(Math.acos(e)),PP=kP(Sj),TP=CP(Sj),$P=e=>/^0[^.\s]+$/u.test(e);function GL(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||$P(e):!0}const Ic=e=>Math.round(e*1e5)/1e5,_j=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KL(e){return e==null}const HL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cj=(e,t)=>r=>!!(typeof r=="string"&&HL.test(r)&&r.startsWith(e)||t&&!KL(r)&&Object.prototype.hasOwnProperty.call(r,t)),DP=(e,t,r)=>n=>{if(typeof n!="string")return n;const[a,i,o,l]=n.match(_j);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},YL=e=>Ts(0,255,e),Dx={...Ml,transform:e=>Math.round(YL(e))},si={test:Cj("rgb","red"),parse:DP("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Dx.transform(e)+", "+Dx.transform(t)+", "+Dx.transform(r)+", "+Ic(pu.transform(n))+")"};function XL(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const Yy={test:Cj("#"),parse:XL,transform:si.transform},yo={test:Cj("hsl","hue"),parse:DP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+es.transform(Ic(t))+", "+es.transform(Ic(r))+", "+Ic(pu.transform(n))+")"},cr={test:e=>si.test(e)||Yy.test(e)||yo.test(e),parse:e=>si.test(e)?si.parse(e):yo.test(e)?yo.parse(e):Yy.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?si.transform(e):yo.transform(e)},JL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function QL(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(_j))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(JL))===null||r===void 0?void 0:r.length)||0)>0}const MP="number",RP="color",ZL="var",eF="var(",AN="${}",tF=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gu(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(tF,c=>(cr.test(c)?(n.color.push(i),a.push(RP),r.push(cr.parse(c))):c.startsWith(eF)?(n.var.push(i),a.push(ZL),r.push(c)):(n.number.push(i),a.push(MP),r.push(parseFloat(c))),++i,AN)).split(AN);return{values:r,split:l,indexes:n,types:a}}function IP(e){return gu(e).values}function LP(e){const{split:t,types:r}=gu(e),n=t.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],a[o]!==void 0){const l=r[o];l===MP?i+=Ic(a[o]):l===RP?i+=cr.transform(a[o]):i+=a[o]}return i}}const rF=e=>typeof e=="number"?0:e;function nF(e){const t=IP(e);return LP(e)(t.map(rF))}const Sa={test:QL,parse:IP,createTransformer:LP,getAnimatableNone:nF},sF=new Set(["brightness","contrast","saturate","opacity"]);function aF(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(_j)||[];if(!n)return e;const a=r.replace(n,"");let i=sF.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const iF=/\b([a-z-]*)\(.*?\)/gu,Xy={...Sa,getAnimatableNone:e=>{const t=e.match(iF);return t?t.map(aF).join(" "):e}},oF={...uj,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:Xy,WebkitFilter:Xy},kj=e=>oF[e];function FP(e,t){let r=kj(e);return r!==Xy&&(r=Sa),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const lF=new Set(["auto","none","0"]);function cF(e,t,r){let n=0,a;for(;n<e.length&&!a;){const i=e[n];typeof i=="string"&&!lF.has(i)&&gu(i).values.length&&(a=e[n]),n++}if(a&&r)for(const i of t)e[i]=FP(r,a)}const ON=e=>e===Ml||e===ke,EN=(e,t)=>parseFloat(e.split(", ")[t]),PN=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/u);if(a)return EN(a[1],t);{const i=n.match(/^matrix\((.+)\)$/u);return i?EN(i[1],e):0}},uF=new Set(["x","y","z"]),dF=Dl.filter(e=>!uF.has(e));function hF(e){const t=[];return dF.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Zo={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:PN(4,13),y:PN(5,14)};Zo.translateX=Zo.x;Zo.translateY=Zo.y;const fi=new Set;let Jy=!1,Qy=!1;function zP(){if(Qy){const e=Array.from(fi).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=hF(n);a.length&&(r.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,o])=>{var l;(l=n.getValue(i))===null||l===void 0||l.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Qy=!1,Jy=!1,fi.forEach(e=>e.complete()),fi.clear()}function BP(){fi.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Qy=!0)})}function fF(){BP(),zP()}class Aj{constructor(t,r,n,a,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(fi.add(this),Jy||(Jy=!0,lt.read(BP),lt.resolveKeyframes(zP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&r){const c=n.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),fi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,fi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const UP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),mF=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pF(e){const t=mF.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function qP(e,t,r=1){const[n,a]=pF(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return UP(o)?parseFloat(o):o}return cj(a)?qP(a,t,r+1):a}const VP=e=>t=>t.test(e),xF={test:e=>e==="auto",parse:e=>e},WP=[Ml,ke,es,Ys,aL,sL,xF],TN=e=>WP.find(VP(e));class GP extends Aj{constructor(t,r,n,a,i){super(t,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),cj(u))){const h=qP(u,r.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!wP.has(n)||t.length!==2)return;const[a,i]=t,o=TN(a),l=TN(i);if(o!==l)if(ON(o)&&ON(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)GL(t[a])&&n.push(a);n.length&&cF(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Zo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:n,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=Zo[n](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{r.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const $N=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Sa.test(e)||e==="0")&&!e.startsWith("url("));function gF(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function yF(e,t,r,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=$N(a,t),l=$N(i,t);return!o||!l?!1:gF(e)||(r==="spring"||gj(r))&&n}const vF=e=>e!==null;function ap(e,{repeat:t,repeatType:r="loop"},n){const a=e.filter(vF),i=t&&r!=="loop"&&t%2===1?0:a.length-1;return!i||n===void 0?a[i]:n}const bF=40;class KP{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ts.now(),this.options={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>bF?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&fF(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=ts.now(),this.hasAttemptedResolve=!0;const{name:n,type:a,velocity:i,delay:o,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!yF(t,n,a,i))if(o)this.options.duration=0;else{c&&c(ap(t,this.options,r)),l&&l(),this.resolveFinishedPromise();return}const h=this.initPlayback(t,r);h!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...h},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const xt=(e,t,r)=>e+(t-e)*r;function Mx(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function jF({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=Mx(c,l,e+1/3),i=Mx(c,l,e),o=Mx(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function gf(e,t){return r=>r>0?t:e}const Rx=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},wF=[Yy,si,yo],NF=e=>wF.find(t=>t.test(e));function DN(e){const t=NF(e);if(!t)return!1;let r=t.parse(e);return t===yo&&(r=jF(r)),r}const MN=(e,t)=>{const r=DN(e),n=DN(t);if(!r||!n)return gf(e,t);const a={...r};return i=>(a.red=Rx(r.red,n.red,i),a.green=Rx(r.green,n.green,i),a.blue=Rx(r.blue,n.blue,i),a.alpha=xt(r.alpha,n.alpha,i),si.transform(a))},SF=(e,t)=>r=>t(e(r)),jd=(...e)=>e.reduce(SF),Zy=new Set(["none","hidden"]);function _F(e,t){return Zy.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function CF(e,t){return r=>xt(e,t,r)}function Oj(e){return typeof e=="number"?CF:typeof e=="string"?cj(e)?gf:cr.test(e)?MN:OF:Array.isArray(e)?HP:typeof e=="object"?cr.test(e)?MN:kF:gf}function HP(e,t){const r=[...e],n=r.length,a=e.map((i,o)=>Oj(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}}function kF(e,t){const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=Oj(e[a])(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function AF(e,t){var r;const n=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],l=e.indexes[o][a[o]],c=(r=e.values[l])!==null&&r!==void 0?r:0;n[i]=c,a[o]++}return n}const OF=(e,t)=>{const r=Sa.createTransformer(t),n=gu(e),a=gu(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?Zy.has(e)&&!a.values.length||Zy.has(t)&&!n.values.length?_F(e,t):jd(HP(AF(n,a),a.values),r):gf(e,t)};function YP(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?xt(e,t,r):Oj(e)(e,t)}const EF=5;function XP(e,t,r){const n=Math.max(t-EF,0);return NP(r-e(n),t-n)}const wt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ix=.001;function PF({duration:e=wt.duration,bounce:t=wt.bounce,velocity:r=wt.velocity,mass:n=wt.mass}){let a,i,o=1-t;o=Ts(wt.minDamping,wt.maxDamping,o),e=Ts(wt.minDuration,wt.maxDuration,Ss(e)),o<1?(a=u=>{const h=u*o,d=h*e,f=h-r,p=ev(u,o),b=Math.exp(-d);return Ix-f/p*b},i=u=>{const d=u*o*e,f=d*r+r,p=Math.pow(o,2)*Math.pow(u,2)*e,b=Math.exp(-d),x=ev(Math.pow(u,2),o);return(-a(u)+Ix>0?-1:1)*((f-p)*b)/x}):(a=u=>{const h=Math.exp(-u*e),d=(u-r)*e+1;return-Ix+h*d},i=u=>{const h=Math.exp(-u*e),d=(r-u)*(e*e);return h*d});const l=5/e,c=$F(a,i,l);if(e=Ns(e),isNaN(c))return{stiffness:wt.stiffness,damping:wt.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const TF=12;function $F(e,t,r){let n=r;for(let a=1;a<TF;a++)n=n-e(n)/t(n);return n}function ev(e,t){return e*Math.sqrt(1-t*t)}const DF=["duration","bounce"],MF=["stiffness","damping","mass"];function RN(e,t){return t.some(r=>e[r]!==void 0)}function RF(e){let t={velocity:wt.velocity,stiffness:wt.stiffness,damping:wt.damping,mass:wt.mass,isResolvedFromDuration:!1,...e};if(!RN(e,MF)&&RN(e,DF))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*Ts(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:wt.mass,stiffness:a,damping:i}}else{const r=PF(e);t={...t,...r,mass:wt.mass},t.isResolvedFromDuration=!0}return t}function JP(e=wt.visualDuration,t=wt.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:h,duration:d,velocity:f,isResolvedFromDuration:p}=RF({...r,velocity:-Ss(r.velocity||0)}),b=f||0,x=u/(2*Math.sqrt(c*h)),g=o-i,y=Ss(Math.sqrt(c/h)),m=Math.abs(g)<5;n||(n=m?wt.restSpeed.granular:wt.restSpeed.default),a||(a=m?wt.restDelta.granular:wt.restDelta.default);let v;if(x<1){const w=ev(y,x);v=N=>{const _=Math.exp(-x*y*N);return o-_*((b+x*y*g)/w*Math.sin(w*N)+g*Math.cos(w*N))}}else if(x===1)v=w=>o-Math.exp(-y*w)*(g+(b+y*g)*w);else{const w=y*Math.sqrt(x*x-1);v=N=>{const _=Math.exp(-x*y*N),C=Math.min(w*N,300);return o-_*((b+x*y*g)*Math.sinh(C)+w*g*Math.cosh(C))/w}}const S={calculatedDuration:p&&d||null,next:w=>{const N=v(w);if(p)l.done=w>=d;else{let _=0;x<1&&(_=w===0?Ns(b):XP(v,w,N));const C=Math.abs(_)<=n,A=Math.abs(o-N)<=a;l.done=C&&A}return l.value=l.done?o:N,l},toString:()=>{const w=Math.min(pP(S),Gy),N=xP(_=>S.next(w*_).value,w,30);return w+"ms "+N}};return S}function IN({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},p=C=>l!==void 0&&C<l||c!==void 0&&C>c,b=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let x=r*t;const g=d+x,y=o===void 0?g:o(g);y!==g&&(x=y-d);const m=C=>-x*Math.exp(-C/n),v=C=>y+m(C),S=C=>{const A=m(C),k=v(C);f.done=Math.abs(A)<=u,f.value=f.done?y:k};let w,N;const _=C=>{p(f.value)&&(w=C,N=JP({keyframes:[f.value,b(f.value)],velocity:XP(v,C,f.value),damping:a,stiffness:i,restDelta:u,restSpeed:h}))};return _(0),{calculatedDuration:null,next:C=>{let A=!1;return!N&&w===void 0&&(A=!0,S(C),_(C)),w!==void 0&&C>=w?N.next(C-w):(!A&&S(C),f)}}}const IF=bd(.42,0,1,1),LF=bd(0,0,.58,1),QP=bd(.42,0,.58,1),FF=e=>Array.isArray(e)&&typeof e[0]!="number",zF={linear:Kr,easeIn:IF,easeInOut:QP,easeOut:LF,circIn:Sj,circInOut:TP,circOut:PP,backIn:Nj,backInOut:OP,backOut:AP,anticipate:EP},LN=e=>{if(yj(e)){YE(e.length===4);const[t,r,n,a]=e;return bd(t,r,n,a)}else if(typeof e=="string")return zF[e];return e};function BF(e,t,r){const n=[],a=r||YP,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Kr:t;l=jd(c,l)}n.push(l)}return n}function UF(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(YE(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=BF(t,n,a),c=l.length,u=h=>{if(o&&h<e[0])return t[0];let d=0;if(c>1)for(;d<e.length-2&&!(h<e[d+1]);d++);const f=Jo(e[d],e[d+1],h);return l[d](f)};return r?h=>u(Ts(e[0],e[i-1],h)):u}function qF(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=Jo(0,t,n);e.push(xt(r,1,a))}}function VF(e){const t=[0];return qF(t,e.length-1),t}function WF(e,t){return e.map(r=>r*t)}function GF(e,t){return e.map(()=>t||QP).splice(0,e.length-1)}function yf({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=FF(n)?n.map(LN):LN(n),i={done:!1,value:t[0]},o=WF(r&&r.length===t.length?r:VF(t),e),l=UF(o,t,{ease:Array.isArray(a)?a:GF(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const KF=e=>{const t=({timestamp:r})=>e(r);return{start:()=>lt.update(t,!0),stop:()=>Na(t),now:()=>tr.isProcessing?tr.timestamp:ts.now()}},HF={decay:IN,inertia:IN,tween:yf,keyframes:yf,spring:JP},YF=e=>e/100;class Ej extends KP{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:n,element:a,keyframes:i}=this.options,o=(a==null?void 0:a.KeyframeResolver)||Aj,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(i,l,r,n,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=this.options,l=gj(r)?r:HF[r]||yf;let c,u;l!==yf&&typeof t[0]!="number"&&(c=jd(YF,YP(t[0],t[1])),t=[0,100]);const h=l({...this.options,keyframes:t});i==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),h.calculatedDuration===null&&(h.calculatedDuration=pP(h));const{calculatedDuration:d}=h,f=d+a,p=f*(n+1)-a;return{generator:h,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:n}=this;if(!n){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:h,resolvedDuration:d}=n;if(this.startTime===null)return i.next(0);const{delay:f,repeat:p,repeatType:b,repeatDelay:x,onUpdate:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-h/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),m=this.speed>=0?y<0:y>h;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=h);let v=this.currentTime,S=i;if(p){const C=Math.min(this.currentTime,h)/d;let A=Math.floor(C),k=C%1;!k&&C>=1&&(k=1),k===1&&A--,A=Math.min(A,p+1),!!(A%2)&&(b==="reverse"?(k=1-k,x&&(k-=x/d)):b==="mirror"&&(S=o)),v=Ts(0,1,k)*d}const w=m?{done:!1,value:c[0]}:S.next(v);l&&(w.value=l(w.value));let{done:N}=w;!m&&u!==null&&(N=this.speed>=0?this.currentTime>=h:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return _&&a!==void 0&&(w.value=ap(c,this.options,a)),g&&g(w.value),_&&this.finish(),w}get duration(){const{resolved:t}=this;return t?Ss(t.calculatedDuration):0}get time(){return Ss(this.currentTime)}set time(t){t=Ns(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Ss(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=KF,onPlay:r,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const XF=new Set(["opacity","clipPath","filter","transform"]);function JF(e,t,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const u={[t]:r};c&&(u.offset=c);const h=yP(l,a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:n,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}const QF=rj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),vf=10,ZF=2e4;function e8(e){return gj(e.type)||e.type==="spring"||!gP(e.ease)}function t8(e,t){const r=new Ej({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:e[0]};const a=[];let i=0;for(;!n.done&&i<ZF;)n=r.sample(i),a.push(n.value),i+=vf;return{times:void 0,keyframes:a,duration:i-vf,ease:"linear"}}const ZP={anticipate:EP,backInOut:OP,circInOut:TP};function r8(e){return e in ZP}class FN extends KP{constructor(t){super(t);const{name:r,motionValue:n,element:a,keyframes:i}=this.options;this.resolver=new GP(i,(o,l)=>this.onKeyframesResolved(o,l),r,n,a),this.resolver.scheduleResolve()}initPlayback(t,r){let{duration:n=300,times:a,ease:i,type:o,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&xf()&&r8(i)&&(i=ZP[i]),e8(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:b,...x}=this.options,g=t8(t,x);t=g.keyframes,t.length===1&&(t[1]=t[0]),n=g.duration,a=g.times,i=g.ease,o="keyframes"}const h=JF(l.owner.current,c,t,{...this.options,duration:n,times:a,ease:i});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(NN(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:d}=this.options;l.set(ap(t,this.options,r)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:n,times:a,type:o,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return Ss(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return Ss(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.currentTime=Ns(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:n}=r;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return Kr;const{animation:n}=r;NN(n,t)}return Kr}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:n,duration:a,type:i,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:h,onComplete:d,element:f,...p}=this.options,b=new Ej({...p,keyframes:n,duration:a,type:i,ease:o,times:l,isGenerator:!0}),x=Ns(this.time);u.setWithVelocity(b.sample(x-vf).value,b.sample(x).value,vf)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:n,repeatDelay:a,repeatType:i,damping:o,type:l}=t;if(!r||!r.owner||!(r.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=r.owner.getProps();return QF()&&n&&XF.has(n)&&!c&&!u&&!a&&i!=="mirror"&&o!==0&&l!=="inertia"}}const n8={type:"spring",stiffness:500,damping:25,restSpeed:10},s8=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),a8={type:"keyframes",duration:.8},i8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},o8=(e,{keyframes:t})=>t.length>2?a8:Mi.has(e)?e.startsWith("scale")?s8(t[1]):n8:i8;function l8({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const Pj=(e,t,r,n={},a,i)=>o=>{const l=xj(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Ns(c);let h={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};l8(l)||(h={...h,...o8(e,h)}),h.duration&&(h.duration=Ns(h.duration)),h.repeatDelay&&(h.repeatDelay=Ns(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),d&&!i&&t.get()!==void 0){const f=ap(h.keyframes,l);if(f!==void 0)return lt.update(()=>{h.onUpdate(f),h.onComplete()}),new kL([])}return!i&&FN.supports(h)?new FN(h):new Ej(h)};function c8({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function eT(e,t,{delay:r=0,transitionOverride:n,type:a}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;n&&(o=n);const u=[],h=a&&e.animationState&&e.animationState.getState()[a];for(const d in c){const f=e.getValue(d,(i=e.latestValues[d])!==null&&i!==void 0?i:null),p=c[d];if(p===void 0||h&&c8(h,d))continue;const b={delay:r,...xj(o||{},d)};let x=!1;if(window.MotionHandoffAnimation){const y=SP(e);if(y){const m=window.MotionHandoffAnimation(y,d,lt);m!==null&&(b.startTime=m,x=!0)}}Hy(e,d),f.start(Pj(d,f,p,e.shouldReduceMotion&&wP.has(d)?{type:!1}:b,e,x));const g=f.animation;g&&u.push(g)}return l&&Promise.all(u).then(()=>{lt.update(()=>{l&&BL(e,l)})}),u}function tv(e,t,r={}){var n;const a=sp(e,t,r.type==="exit"?(n=e.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const o=a?()=>Promise.all(eT(e,a,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:f}=i;return u8(e,t,h+u,d,f,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,h]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>h())}else return Promise.all([o(),l(r.delay)])}function u8(e,t,r=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=a===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(d8).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(tv(u,t,{...i,delay:r+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function d8(e,t){return e.sortNodePosition(t)}function h8(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>tv(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=tv(e,t,r);else{const a=typeof t=="function"?sp(e,t,r.custom):t;n=Promise.all(eT(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const f8=sj.length;function tT(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?tT(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<f8;r++){const n=sj[r],a=e.props[n];(mu(a)||a===!1)&&(t[n]=a)}return t}const m8=[...nj].reverse(),p8=nj.length;function x8(e){return t=>Promise.all(t.map(({animation:r,options:n})=>h8(e,r,n)))}function g8(e){let t=x8(e),r=zN(),n=!0;const a=c=>(u,h)=>{var d;const f=sp(e,h,c==="exit"?(d=e.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:b,...x}=f;u={...u,...x,...b}}return u};function i(c){t=c(e)}function o(c){const{props:u}=e,h=tT(e.parent)||{},d=[],f=new Set;let p={},b=1/0;for(let g=0;g<p8;g++){const y=m8[g],m=r[y],v=u[y]!==void 0?u[y]:h[y],S=mu(v),w=y===c?m.isActive:null;w===!1&&(b=g);let N=v===h[y]&&v!==u[y]&&S;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),m.protectedKeys={...p},!m.isActive&&w===null||!v&&!m.prevProp||rp(v)||typeof v=="boolean")continue;const _=y8(m.prevProp,v);let C=_||y===c&&m.isActive&&!N&&S||g>b&&S,A=!1;const k=Array.isArray(v)?v:[v];let E=k.reduce(a(y),{});w===!1&&(E={});const{prevResolvedValues:O={}}=m,P={...O,...E},M=q=>{C=!0,f.has(q)&&(A=!0,f.delete(q)),m.needsAnimating[q]=!0;const $=e.getValue(q);$&&($.liveStyle=!1)};for(const q in P){const $=E[q],U=O[q];if(p.hasOwnProperty(q))continue;let X=!1;Wy($)&&Wy(U)?X=!mP($,U):X=$!==U,X?$!=null?M(q):f.add(q):$!==void 0&&f.has(q)?M(q):m.protectedKeys[q]=!0}m.prevProp=v,m.prevResolvedValues=E,m.isActive&&(p={...p,...E}),n&&e.blockInitialAnimation&&(C=!1),C&&(!(N&&_)||A)&&d.push(...k.map(q=>({animation:q,options:{type:y}})))}if(f.size){const g={};f.forEach(y=>{const m=e.getBaseTarget(y),v=e.getValue(y);v&&(v.liveStyle=!0),g[y]=m??null}),d.push({animation:g})}let x=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),n=!1,x?t(d):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),r[c].isActive=u;const d=o(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=zN(),n=!0}}}function y8(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!mP(t,e):!1}function La(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function zN(){return{animate:La(!0),whileInView:La(),whileHover:La(),whileTap:La(),whileDrag:La(),whileFocus:La(),exit:La()}}class Pa{constructor(t){this.isMounted=!1,this.node=t}update(){}}class v8 extends Pa{constructor(t){super(t),t.animationState||(t.animationState=g8(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();rp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let b8=0;class j8 extends Pa{constructor(){super(...arguments),this.id=b8++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const w8={animation:{Feature:v8},exit:{Feature:j8}};function yu(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function wd(e){return{point:{x:e.pageX,y:e.pageY}}}const N8=e=>t=>vj(t)&&e(t,wd(t));function Lc(e,t,r,n){return yu(e,t,N8(r),n)}const BN=(e,t)=>Math.abs(e-t);function S8(e,t){const r=BN(e.x,t.x),n=BN(e.y,t.y);return Math.sqrt(r**2+n**2)}class rT{constructor(t,r,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Fx(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=S8(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:b}=d,{timestamp:x}=tr;this.history.push({...b,timestamp:x});const{onStart:g,onMove:y}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Lx(f,this.transformPagePoint),lt.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:b,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Fx(d.type==="pointercancel"?this.lastMoveEventInfo:Lx(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,g),b&&b(d,g)},!vj(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=a||window;const o=wd(t),l=Lx(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=tr;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=r;h&&h(t,Fx(l,this.history)),this.removeListeners=jd(Lc(this.contextWindow,"pointermove",this.handlePointerMove),Lc(this.contextWindow,"pointerup",this.handlePointerUp),Lc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Na(this.updatePoint)}}function Lx(e,t){return t?{point:t(e.point)}:e}function UN(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Fx({point:e},t){return{point:e,delta:UN(e,nT(t)),offset:UN(e,_8(t)),velocity:C8(t,.1)}}function _8(e){return e[0]}function nT(e){return e[e.length-1]}function C8(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=nT(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>Ns(t)));)r--;if(!n)return{x:0,y:0};const i=Ss(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const sT=1e-4,k8=1-sT,A8=1+sT,aT=.01,O8=0-aT,E8=0+aT;function Zr(e){return e.max-e.min}function P8(e,t,r){return Math.abs(e-t)<=r}function qN(e,t,r,n=.5){e.origin=n,e.originPoint=xt(t.min,t.max,e.origin),e.scale=Zr(r)/Zr(t),e.translate=xt(r.min,r.max,e.origin)-e.originPoint,(e.scale>=k8&&e.scale<=A8||isNaN(e.scale))&&(e.scale=1),(e.translate>=O8&&e.translate<=E8||isNaN(e.translate))&&(e.translate=0)}function Fc(e,t,r,n){qN(e.x,t.x,r.x,n?n.originX:void 0),qN(e.y,t.y,r.y,n?n.originY:void 0)}function VN(e,t,r){e.min=r.min+t.min,e.max=e.min+Zr(t)}function T8(e,t,r){VN(e.x,t.x,r.x),VN(e.y,t.y,r.y)}function WN(e,t,r){e.min=t.min-r.min,e.max=e.min+Zr(t)}function zc(e,t,r){WN(e.x,t.x,r.x),WN(e.y,t.y,r.y)}function $8(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?xt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?xt(r,e,n.max):Math.min(e,r)),e}function GN(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function D8(e,{top:t,left:r,bottom:n,right:a}){return{x:GN(e.x,r,a),y:GN(e.y,t,n)}}function KN(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function M8(e,t){return{x:KN(e.x,t.x),y:KN(e.y,t.y)}}function R8(e,t){let r=.5;const n=Zr(e),a=Zr(t);return a>n?r=Jo(t.min,t.max-n,e.min):n>a&&(r=Jo(e.min,e.max-a,t.min)),Ts(0,1,r)}function I8(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const rv=.35;function L8(e=rv){return e===!1?e=0:e===!0&&(e=rv),{x:HN(e,"left","right"),y:HN(e,"top","bottom")}}function HN(e,t,r){return{min:YN(e,t),max:YN(e,r)}}function YN(e,t){return typeof e=="number"?e:e[t]||0}const XN=()=>({translate:0,scale:1,origin:0,originPoint:0}),vo=()=>({x:XN(),y:XN()}),JN=()=>({min:0,max:0}),Ct=()=>({x:JN(),y:JN()});function cn(e){return[e("x"),e("y")]}function iT({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function F8({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function z8(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function zx(e){return e===void 0||e===1}function nv({scale:e,scaleX:t,scaleY:r}){return!zx(e)||!zx(t)||!zx(r)}function Ga(e){return nv(e)||oT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function oT(e){return QN(e.x)||QN(e.y)}function QN(e){return e&&e!=="0%"}function bf(e,t,r){const n=e-r,a=t*n;return r+a}function ZN(e,t,r,n,a){return a!==void 0&&(e=bf(e,a,n)),bf(e,r,n)+t}function sv(e,t=0,r=1,n,a){e.min=ZN(e.min,t,r,n,a),e.max=ZN(e.max,t,r,n,a)}function lT(e,{x:t,y:r}){sv(e.x,t.translate,t.scale,t.originPoint),sv(e.y,r.translate,r.scale,r.originPoint)}const eS=.999999999999,tS=1.0000000000001;function B8(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&jo(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,lT(e,o)),n&&Ga(i.latestValues)&&jo(e,i.latestValues))}t.x<tS&&t.x>eS&&(t.x=1),t.y<tS&&t.y>eS&&(t.y=1)}function bo(e,t){e.min=e.min+t,e.max=e.max+t}function rS(e,t,r,n,a=.5){const i=xt(e.min,e.max,a);sv(e,t,r,i,n)}function jo(e,t){rS(e.x,t.x,t.scaleX,t.scale,t.originX),rS(e.y,t.y,t.scaleY,t.scale,t.originY)}function cT(e,t){return iT(z8(e.getBoundingClientRect(),t))}function U8(e,t,r){const n=cT(e,r),{scroll:a}=t;return a&&(bo(n.x,a.offset.x),bo(n.y,a.offset.y)),n}const uT=({current:e})=>e?e.ownerDocument.defaultView:null,q8=new WeakMap;class V8{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ct(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(wd(h).point)},i=(h,d)=>{const{drag:f,dragPropagation:p,onDragStart:b}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RL(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cn(g=>{let y=this.getAxisMotionValue(g).get()||0;if(es.test(y)){const{projection:m}=this.visualElement;if(m&&m.layout){const v=m.layout.layoutBox[g];v&&(y=Zr(v)*(parseFloat(y)/100))}}this.originPoint[g]=y}),b&&lt.postRender(()=>b(h,d)),Hy(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:b,onDrag:x}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:g}=d;if(p&&this.currentDirection===null){this.currentDirection=W8(g),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),x&&x(h,d)},l=(h,d)=>this.stop(h,d),c=()=>cn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new rT(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:uT(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&lt.postRender(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!Zd(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=$8(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&go(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=D8(a.layoutBox,r):this.constraints=!1,this.elastic=L8(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&cn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=I8(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!go(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=U8(n,a.root,this.visualElement.getTransformPagePoint());let o=M8(a.layout.layoutBox,i);if(r){const l=r(F8(o));this.hasMutatedConstraints=!!l,l&&(o=iT(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=cn(h=>{if(!Zd(h,r,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=a?200:1e6,p=a?40:1e7,b={type:"inertia",velocity:n?t[h]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,b)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Hy(this.visualElement,t),n.start(Pj(t,n,0,r,this.visualElement,!1))}stopAnimation(){cn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cn(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cn(r=>{const{drag:n}=this.getProps();if(!Zd(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-xt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!go(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};cn(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=R8({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cn(o=>{if(!Zd(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(xt(c,u,a[o]))})}addListeners(){if(!this.visualElement.current)return;q8.set(this.visualElement,this);const t=this.visualElement.current,r=Lc(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();go(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),lt.read(n);const o=yu(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=rv,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Zd(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function W8(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class G8 extends Pa{constructor(t){super(t),this.removeGroupControls=Kr,this.removeListeners=Kr,this.controls=new V8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Kr}unmount(){this.removeGroupControls(),this.removeListeners()}}const nS=e=>(t,r)=>{e&&lt.postRender(()=>e(t,r))};class K8 extends Pa{constructor(){super(...arguments),this.removePointerDownListener=Kr}onPointerDown(t){this.session=new rT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:nS(t),onStart:nS(r),onMove:n,onEnd:(i,o)=>{delete this.session,a&&lt.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=Lc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Lh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ic={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ke.test(e))e=parseFloat(e);else return e;const r=sS(e,t.target.x),n=sS(e,t.target.y);return`${r}% ${n}%`}},H8={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=Sa.parse(e);if(a.length>5)return n;const i=Sa.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const u=xt(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=u),typeof a[3+o]=="number"&&(a[3+o]/=u),i(a)}};class Y8 extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;pL(X8),i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Lh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||lt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ij.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function dT(e){const[t,r]=KE(),n=j.useContext(Qb);return s.jsx(Y8,{...e,layoutGroup:n,switchLayoutGroup:j.useContext(tP),isPresent:t,safeToRemove:r})}const X8={borderRadius:{...ic,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ic,borderTopRightRadius:ic,borderBottomLeftRadius:ic,borderBottomRightRadius:ic,boxShadow:H8};function J8(e,t,r){const n=fr(e)?e:xu(e);return n.start(Pj("",n,t,r)),n.animation}function Q8(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Z8=(e,t)=>e.depth-t.depth;class ez{constructor(){this.children=[],this.isDirty=!1}add(t){bj(this.children,t),this.isDirty=!0}remove(t){jj(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Z8),this.isDirty=!1,this.children.forEach(t)}}function tz(e,t){const r=ts.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(Na(n),e(i-t))};return lt.read(n,!0),()=>Na(n)}const hT=["TopLeft","TopRight","BottomLeft","BottomRight"],rz=hT.length,aS=e=>typeof e=="string"?parseFloat(e):e,iS=e=>typeof e=="number"||ke.test(e);function nz(e,t,r,n,a,i){a?(e.opacity=xt(0,r.opacity!==void 0?r.opacity:1,sz(n)),e.opacityExit=xt(t.opacity!==void 0?t.opacity:1,0,az(n))):i&&(e.opacity=xt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<rz;o++){const l=`border${hT[o]}Radius`;let c=oS(t,l),u=oS(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||iS(c)===iS(u)?(e[l]=Math.max(xt(aS(c),aS(u),n),0),(es.test(u)||es.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=xt(t.rotate||0,r.rotate||0,n))}function oS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const sz=fT(0,.5,PP),az=fT(.5,.95,Kr);function fT(e,t,r){return n=>n<e?0:n>t?1:r(Jo(e,t,n))}function lS(e,t){e.min=t.min,e.max=t.max}function sn(e,t){lS(e.x,t.x),lS(e.y,t.y)}function cS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function uS(e,t,r,n,a){return e-=t,e=bf(e,1/r,n),a!==void 0&&(e=bf(e,1/a,n)),e}function iz(e,t=0,r=1,n=.5,a,i=e,o=e){if(es.test(t)&&(t=parseFloat(t),t=xt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=xt(i.min,i.max,n);e===i&&(l-=t),e.min=uS(e.min,t,r,l,a),e.max=uS(e.max,t,r,l,a)}function dS(e,t,[r,n,a],i,o){iz(e,t[r],t[n],t[a],t.scale,i,o)}const oz=["x","scaleX","originX"],lz=["y","scaleY","originY"];function hS(e,t,r,n){dS(e.x,t,oz,r?r.x:void 0,n?n.x:void 0),dS(e.y,t,lz,r?r.y:void 0,n?n.y:void 0)}function fS(e){return e.translate===0&&e.scale===1}function mT(e){return fS(e.x)&&fS(e.y)}function mS(e,t){return e.min===t.min&&e.max===t.max}function cz(e,t){return mS(e.x,t.x)&&mS(e.y,t.y)}function pS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pT(e,t){return pS(e.x,t.x)&&pS(e.y,t.y)}function xS(e){return Zr(e.x)/Zr(e.y)}function gS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class uz{constructor(){this.members=[]}add(t){bj(this.members,t),t.scheduleRender()}remove(t){if(jj(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dz(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:h,rotateX:d,rotateY:f,skewX:p,skewY:b}=r;u&&(n=`perspective(${u}px) ${n}`),h&&(n+=`rotate(${h}deg) `),d&&(n+=`rotateX(${d}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),b&&(n+=`skewY(${b}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Ka={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Sc=typeof window<"u"&&window.MotionDebug!==void 0,Bx=["","X","Y","Z"],hz={visibility:"hidden"},yS=1e3;let fz=0;function Ux(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function xT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=SP(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",lt,!(a||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&xT(n)}function gT({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=fz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Sc&&(Ka.totalNodes=Ka.resolvedTargetDeltas=Ka.recalculatedProjection=0),this.nodes.forEach(xz),this.nodes.forEach(jz),this.nodes.forEach(wz),this.nodes.forEach(gz),Sc&&window.MotionDebug.record(Ka)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new ez)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new wj),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Q8(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=tz(f,250),Lh.hasAnimatedSinceResize&&(Lh.hasAnimatedSinceResize=!1,this.nodes.forEach(bS))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||kz,{onLayoutAnimationStart:g,onLayoutAnimationComplete:y}=h.getProps(),m=!this.targetLayout||!pT(this.targetLayout,b)||p,v=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,v);const S={...xj(x,"layout"),onPlay:g,onComplete:y};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||bS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Na(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Nz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(vS);return}this.isUpdating||this.nodes.forEach(vz),this.isUpdating=!1,this.nodes.forEach(bz),this.nodes.forEach(mz),this.nodes.forEach(pz),this.clearAllSnapshots();const l=ts.now();tr.delta=Ts(0,1e3/60,l-tr.timestamp),tr.timestamp=l,tr.isProcessing=!0,Tx.update.process(tr),Tx.preRender.process(tr),Tx.render.process(tr),tr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ij.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yz),this.sharedNodes.forEach(Sz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,lt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){lt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!mT(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(l||Ga(this.latestValues)||h)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),Az(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Ct();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Oz))){const{scroll:h}=this.root;h&&(bo(c.x,h.offset.x),bo(c.y,h.offset.y))}return c}removeElementScroll(o){var l;const c=Ct();if(sn(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:d,options:f}=h;h!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&sn(c,o),bo(c.x,d.offset.x),bo(c.y,d.offset.y))}return c}applyTransform(o,l=!1){const c=Ct();sn(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&jo(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ga(h.latestValues)&&jo(c,h.latestValues)}return Ga(this.latestValues)&&jo(c,this.latestValues),c}removeTransform(o){const l=Ct();sn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ga(u.latestValues))continue;nv(u.latestValues)&&u.updateSnapshot();const h=Ct(),d=u.measurePageBox();sn(h,d),hS(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ga(this.latestValues)&&hS(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=tr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ct(),this.relativeTargetOrigin=Ct(),zc(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ct(),this.targetWithTransforms=Ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),T8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sn(this.target,this.layout.layoutBox),lT(this.target,this.targetDelta)):sn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ct(),this.relativeTargetOrigin=Ct(),zc(this.relativeTargetOrigin,this.target,p.target),sn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Sc&&Ka.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||nv(this.parent.latestValues)||oT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===tr.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;sn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;B8(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ct());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(cS(this.prevProjectionDelta.x,this.projectionDelta.x),cS(this.prevProjectionDelta.y,this.projectionDelta.y)),Fc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!gS(this.projectionDelta.x,this.prevProjectionDelta.x)||!gS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Sc&&Ka.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vo(),this.projectionDelta=vo(),this.projectionDeltaWithTransform=vo()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=vo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Ct(),p=c?c.source:void 0,b=this.layout?this.layout.source:void 0,x=p!==b,g=this.getStack(),y=!g||g.members.length<=1,m=!!(x&&!y&&this.options.crossfade===!0&&!this.path.some(Cz));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const w=S/1e3;jS(d.x,o.x,w),jS(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(zc(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_z(this.relativeTarget,this.relativeTargetOrigin,f,w),v&&cz(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Ct()),sn(v,this.relativeTarget)),x&&(this.animationValues=h,nz(h,u,this.latestValues,w,m,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Na(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=lt.update(()=>{Lh.hasAnimatedSinceResize=!0,this.currentAnimation=J8(0,yS,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&yT(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ct();const d=Zr(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=Zr(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}sn(l,c),jo(l,h),Fc(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uz),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Ux("z",o,u,this.animationValues);for(let h=0;h<Bx.length;h++)Ux(`rotate${Bx[h]}`,o,u,this.animationValues),Ux(`skew${Bx[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hz;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Rh(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Rh(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ga(this.latestValues)&&(x.transform=h?h({},""):"none",this.hasProjected=!1),x}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=dz(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:p,y:b}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${b.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const x in pf){if(f[x]===void 0)continue;const{correct:g,applyTo:y}=pf[x],m=u.transform==="none"?f[x]:g(f[x],d);if(y){const v=y.length;for(let S=0;S<v;S++)u[y[S]]=m}else u[x]=m}return this.options.layoutId&&(u.pointerEvents=d===this?Rh(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(vS),this.root.sharedNodes.clear()}}}function mz(e){e.updateLayout()}function pz(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?cn(d=>{const f=o?r.measuredBox[d]:r.layoutBox[d],p=Zr(f);f.min=n[d].min,f.max=f.min+p}):yT(i,r.layoutBox,n)&&cn(d=>{const f=o?r.measuredBox[d]:r.layoutBox[d],p=Zr(n[d]);f.max=f.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+p)});const l=vo();Fc(l,n,r.layoutBox);const c=vo();o?Fc(c,e.applyTransform(a,!0),r.measuredBox):Fc(c,n,r.layoutBox);const u=!mT(l);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const b=Ct();zc(b,r.layoutBox,f.layoutBox);const x=Ct();zc(x,n,p.layoutBox),pT(b,x)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=b,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function xz(e){Sc&&Ka.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function gz(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function yz(e){e.clearSnapshot()}function vS(e){e.clearMeasurements()}function vz(e){e.isLayoutDirty=!1}function bz(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function bS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function jz(e){e.resolveTargetDelta()}function wz(e){e.calcProjection()}function Nz(e){e.resetSkewAndRotation()}function Sz(e){e.removeLeadSnapshot()}function jS(e,t,r){e.translate=xt(t.translate,0,r),e.scale=xt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function wS(e,t,r,n){e.min=xt(t.min,r.min,n),e.max=xt(t.max,r.max,n)}function _z(e,t,r,n){wS(e.x,t.x,r.x,n),wS(e.y,t.y,r.y,n)}function Cz(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const kz={duration:.45,ease:[.4,0,.1,1]},NS=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),SS=NS("applewebkit/")&&!NS("chrome/")?Math.round:Kr;function _S(e){e.min=SS(e.min),e.max=SS(e.max)}function Az(e){_S(e.x),_S(e.y)}function yT(e,t,r){return e==="position"||e==="preserve-aspect"&&!P8(xS(t),xS(r),.2)}function Oz(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const Ez=gT({attachResizeListener:(e,t)=>yu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),qx={current:void 0},vT=gT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!qx.current){const e=new Ez({});e.mount(window),e.setOptions({layoutScroll:!0}),qx.current=e}return qx.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Pz={pan:{Feature:K8},drag:{Feature:G8,ProjectionNode:vT,MeasureLayout:dT}};function CS(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&lt.postRender(()=>i(t,wd(t)))}class Tz extends Pa{mount(){const{current:t}=this.node;t&&(this.unmount=PL(t,r=>(CS(this.node,r,"Start"),n=>CS(this.node,n,"End"))))}unmount(){}}class $z extends Pa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=jd(yu(this.node.current,"focus",()=>this.onFocus()),yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kS(e,t,r){const{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&lt.postRender(()=>i(t,wd(t)))}class Dz extends Pa{mount(){const{current:t}=this.node;t&&(this.unmount=ML(t,r=>(kS(this.node,r,"Start"),(n,{success:a})=>kS(this.node,n,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const av=new WeakMap,Vx=new WeakMap,Mz=e=>{const t=av.get(e.target);t&&t(e)},Rz=e=>{e.forEach(Mz)};function Iz({root:e,...t}){const r=e||document;Vx.has(r)||Vx.set(r,{});const n=Vx.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(Rz,{root:e,...t})),n[a]}function Lz(e,t,r){const n=Iz(t);return av.set(e,r),n.observe(e),()=>{av.delete(e),n.unobserve(e)}}const Fz={some:0,all:1};class zz extends Pa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:Fz[a]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return Lz(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Bz(t,r))&&this.startObserver()}unmount(){}}function Bz({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Uz={inView:{Feature:zz},tap:{Feature:Dz},focus:{Feature:$z},hover:{Feature:Tz}},qz={layout:{ProjectionNode:vT,MeasureLayout:dT}},iv={current:null},bT={current:!1};function Vz(){if(bT.current=!0,!!tj)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>iv.current=e.matches;e.addListener(t),t()}else iv.current=!1}const Wz=[...WP,cr,Sa],Gz=e=>Wz.find(VP(e)),AS=new WeakMap;function Kz(e,t,r){for(const n in t){const a=t[n],i=r[n];if(fr(a))e.addValue(n,a);else if(fr(i))e.addValue(n,xu(a,{owner:e}));else if(i!==a)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(n);e.addValue(n,xu(o!==void 0?o:a,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const OS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Hz{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Aj,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=ts.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,lt.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:h}=o;this.onUpdate=h,this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=np(r),this.isVariantNode=ZE(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const p in f){const b=f[p];c[p]!==void 0&&fr(b)&&b.set(c[p],!1)}}mount(t){this.current=t,AS.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),bT.current||Vz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){AS.delete(this.current),this.projection&&this.projection.unmount(),Na(this.notifyUpdate),Na(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Mi.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&lt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Qo){const r=Qo[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ct()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<OS.length;n++){const a=OS[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=Kz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=xu(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){var n;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(UP(a)||$P(a))?a=parseFloat(a):!Gz(a)&&Sa.test(r)&&(a=FP(t,r)),this.setBaseTarget(t,fr(a)?a.get():a)),fr(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props;let a;if(typeof n=="string"||typeof n=="object"){const o=lj(this.props,n,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!fr(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new wj),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class jT extends Hz{constructor(){super(...arguments),this.KeyframeResolver=GP}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;fr(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Yz(e){return window.getComputedStyle(e)}class Xz extends jT{constructor(){super(...arguments),this.type="html",this.renderInstance=lP}readValueFromInstance(t,r){if(Mi.has(r)){const n=kj(r);return n&&n.default||0}else{const n=Yz(t),a=(aP(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return cT(t,r)}build(t,r,n){dj(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return pj(t,r,n)}}class Jz extends jT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ct}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Mi.has(r)){const n=kj(r);return n&&n.default||0}return r=cP.has(r)?r:aj(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return hP(t,r,n)}build(t,r,n){hj(t,r,this.isSVGTag,n.transformTemplate)}renderInstance(t,r,n,a){uP(t,r,n,a)}mount(t){this.isSVGTag=mj(t.tagName),super.mount(t)}}const Qz=(e,t)=>oj(e)?new Jz(t):new Xz(t,{allowProjection:e!==j.Fragment}),Zz=SL({...w8,...Uz,...Pz,...qz},Qz),mi=F3(Zz);function ip(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function eB(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{u(n.next(h))}catch(d){o(d)}}function c(h){try{u(n.throw(h))}catch(d){o(d)}}function u(h){h.done?i(h.value):a(h.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}const tB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Tj extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class rB extends Tj{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ES extends Tj{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class PS extends Tj{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ov;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ov||(ov={}));class nB{constructor(t,{headers:r={},customFetch:n,region:a=ov.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=tB(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return eB(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:l,method:c,body:u,signal:h,timeout:d}=n;let f={},{region:p}=n;p||(p=this.region);const b=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,b.searchParams.set("forceFunctionRegion",p));let x;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(f["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(f["Content-Type"]="application/json",x=JSON.stringify(u)):x=u;let g=h;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),h?(g=o.signal,h.addEventListener("abort",()=>o.abort())):g=o.signal);const y=yield this.fetch(b.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:x,signal:g}).catch(w=>{throw new rB(w)}),m=y.headers.get("x-relay-error");if(m&&m==="true")throw new ES(y);if(!y.ok)throw new PS(y);let v=((a=y.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),S;return v==="application/json"?S=yield y.json():v==="application/octet-stream"||v==="application/pdf"?S=yield y.blob():v==="text/event-stream"?S=y:v==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof PS||l instanceof ES?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var sB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},aB=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,l=null,c=null,u=i.status,h=i.statusText;if(i.ok){var d,f;if(r.method!=="HEAD"){var p;const y=await i.text();y===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const x=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),g=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");x&&g&&g.length>1&&(c=parseInt(g[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(l)&&(l.length>1?(o={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,h="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var b;const x=await i.text();try{o=JSON.parse(x),Array.isArray(o)&&i.status===404&&(l=[],o=null,u=200,h="OK")}catch{i.status===404&&x===""?(u=204,h="No Content"):o={message:x}}if(o&&r.isMaybeSingle&&(!(o==null||(b=o.details)===null||b===void 0)&&b.includes("0 rows"))&&(o=null,u=200,h="OK"),o&&r.shouldThrowOnError)throw new sB(o)}return{error:o,data:l,count:c,status:u,statusText:h}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let l="";const c=i==null?void 0:i.cause;if(c){var u,h,d,f;const b=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",x=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";l=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${b}`,x&&(l+=` (${x})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var p;l=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},iB=class extends aB{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${c}"; options=${l};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const TS=new RegExp("[,()]");var to=class extends iB{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&TS.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&TS.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},oB=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new to({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const i=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(i.length>0){const o=[...new Set(i)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new to({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),n&&this.headers.append("Prefer",`count=${n}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new to({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new to({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new to({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},lB=class wT{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new oB(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new wT(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||a?(l=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{c.searchParams.append(d,f)})):(l="POST",u=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new to({method:l,url:c,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class cB{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const uB="2.88.0",dB=`realtime-js/${uB}`,NT="1.0.0",hB="2.0.0",$S=NT,lv=1e4,fB=1e3,mB=100;var Zs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zs||(Zs={}));var It;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(It||(It={}));var Dn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Dn||(Dn={}));var cv;(function(e){e.websocket="websocket"})(cv||(cv={}));var Qa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Qa||(Qa={}));class pB{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,l=(a=t.ref)!==null&&a!==void 0?a:"",c=(i=t.join_ref)!==null&&i!==void 0?i:"",u=t.payload.event,h=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let b=new DataView(p),x=0;b.setUint8(x++,this.KINDS.userBroadcastPush),b.setUint8(x++,c.length),b.setUint8(x++,l.length),b.setUint8(x++,o.length),b.setUint8(x++,u.length),b.setUint8(x++,d.length),b.setUint8(x++,r),Array.from(c,y=>b.setUint8(x++,y.charCodeAt(0))),Array.from(l,y=>b.setUint8(x++,y.charCodeAt(0))),Array.from(o,y=>b.setUint8(x++,y.charCodeAt(0))),Array.from(u,y=>b.setUint8(x++,y.charCodeAt(0))),Array.from(d,y=>b.setUint8(x++,y.charCodeAt(0)));var g=new Uint8Array(p.byteLength+n.byteLength);return g.set(new Uint8Array(p),0),g.set(new Uint8Array(n),p.byteLength),g.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,l,c]=n;return r({join_ref:a,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+a));c=c+a;const h=n.decode(t.slice(c,c+i));c=c+i;const d=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),p=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,b={type:this.BROADCAST_EVENT,event:h,payload:p};return o>0&&(b.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class ST{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ze||(Ze={}));const DS=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=xB(o,e,t,a),i),{}):{}},xB=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?_T(i,o):uv(o)},_T=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return bB(t,r)}switch(e){case Ze.bool:return gB(t);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return yB(t);case Ze.json:case Ze.jsonb:return vB(t);case Ze.timestamp:return jB(t);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return uv(t);default:return uv(t)}},uv=e=>e,gB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},vB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},bB=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>_T(t,l))}return e},jB=e=>typeof e=="string"?e.replace(" ","T"):e,CT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Wx{constructor(t,r,n={},a=lv){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var MS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(MS||(MS={}));class Bc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Bc.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Bc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Bc.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,h)=>{o[u]||(c[u]=h)}),this.map(o,(u,h)=>{const d=i[u];if(d){const f=h.map(g=>g.presence_ref),p=d.map(g=>g.presence_ref),b=h.filter(g=>p.indexOf(g.presence_ref)<0),x=d.filter(g=>f.indexOf(g.presence_ref)<0);b.length>0&&(l[u]=b),x.length>0&&(c[u]=x)}else l[u]=h}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const h=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),h.length>0){const d=t[l].map(p=>p.presence_ref),f=h.filter(p=>d.indexOf(p.presence_ref)<0);t[l].unshift(...f)}n(l,h,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var RS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(RS||(RS={}));var Uc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Uc||(Uc={}));var ms;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ms||(ms={}));class wo{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=It.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Wx(this,Dn.join,this.params,this.timeout),this.rejoinTimer=new ST(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=It.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=It.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=It.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Bc(this),this.broadcastEndpointURL=CT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==It.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[Uc.PRESENCE]&&this.bindings[Uc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(ms.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(ms.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){t==null||t(ms.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,g=(b=x==null?void 0:x.length)!==null&&b!==void 0?b:0,y=[];for(let m=0;m<g;m++){const v=x[m],{filter:{event:S,schema:w,table:N,filter:_}}=v,C=p&&p[m];if(C&&C.event===S&&wo.isFilterValueEqual(C.schema,w)&&wo.isFilterValueEqual(C.table,N)&&wo.isFilterValueEqual(C.filter,_))y.push(Object.assign(Object.assign({},v),{id:C.id}));else{this.unsubscribe(),this.state=It.errored,t==null||t(ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(ms.SUBSCRIBED);return}}).receive("error",p=>{this.state=It.errored,t==null||t(ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===It.joined&&t===Uc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=It.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Wx(this,Dn.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=It.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Wx(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>mB){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:h}=Dn;if(n&&[l,c,u,h].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var b,x,g;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((g=(x=p.filter)===null||x===void 0?void 0:x.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var b,x,g,y,m,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const S=p.id,w=(b=p.filter)===null||b===void 0?void 0:b.event;return S&&((x=r.ids)===null||x===void 0?void 0:x.includes(S))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const S=(m=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const b=f.data,{schema:x,table:g,commit_timestamp:y,type:m,errors:v}=b;f=Object.assign(Object.assign({},{schema:x,table:g,commit_timestamp:y,eventType:m,new:{},old:{},errors:v}),this._getPayloadRecords(b))}p.callback(f,n)})}_isClosed(){return this.state===It.closed}_isJoined(){return this.state===It.joined}_isJoining(){return this.state===It.joining}_isLeaving(){return this.state===It.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&wo.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Dn.close,{},t)}_onError(t){this._on(Dn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=It.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=DS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=DS(t.columns,t.old_record)),r}}const Gx=()=>{},eh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wB=[1e3,2e3,5e3,1e4],NB=1e4,SB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _B{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lv,this.transport=null,this.heartbeatIntervalMs=eh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gx,this.ref=0,this.reconnectTimer=null,this.vsn=$S,this.logger=Gx,this.conn=null,this.sendBuffer=[],this.serializer=new pB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${cv.websocket}`,this.httpEndpoint=CT(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=cB.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zs.connecting:return Qa.Connecting;case Zs.open:return Qa.Open;case Zs.closing:return Qa.Closing;default:return Qa.Closed}}isConnected(){return this.connectionState()===Qa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new wo(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(fB,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},eh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Zs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Zs.open||this.conn.readyState===Zs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Dn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([SB],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:dB};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(Dn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ST(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,h,d,f,p;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:lv,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:eh.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Gx,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:$S,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:b=>wB[b-1]||NB,this.vsn){case NT:this.encode=(h=t==null?void 0:t.encode)!==null&&h!==void 0?h:(b,x)=>x(JSON.stringify(b)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:(b,x)=>x(JSON.parse(b));break;case hB:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var vu=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function CB(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function kB(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function AB(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const l=CB(e.baseUrl,n,a),c=await kB(e.auth),u=await t(l,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...c,...o},body:i?JSON.stringify(i):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!u.ok){const p=d?f:void 0,b=p==null?void 0:p.error;throw new vu((b==null?void 0:b.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:p})}return{status:u.status,headers:u.headers,data:f}}}}function th(e){return e.join("")}var OB=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:th(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${th(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${th(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${th(e.namespace)}`}),!0}catch(t){if(t instanceof vu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof vu&&r.status===409)return;throw r}}};function Wi(e){return e.join("")}var EB=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof vu&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof vu&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},PB=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=AB({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new OB(this.client,t),this.tableOps=new EB(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},op=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ft(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var TB=class extends op{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},dv=class extends op{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const $j=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$B=()=>Response,hv=e=>{if(Array.isArray(e))return e.map(r=>hv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=hv(n)}),t},DB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MB=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function bu(e){"@babel/helpers - typeof";return bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bu(e)}function RB(e,t){if(bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IB(e){var t=RB(e,"string");return bu(t)=="symbol"?t:t+""}function LB(e,t,r){return(t=IB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){LB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Kx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},FB=async(e,t,r)=>{e instanceof await $B()&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const a=e.status||500,i=(n==null?void 0:n.statusCode)||a+"";t(new TB(Kx(n),a,i))}).catch(n=>{t(new dv(Kx(n),n))}):t(new dv(Kx(e),e))},zB=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(DB(n)?(a.headers=Ae({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Ae(Ae({},a),r))};async function Nd(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,zB(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>FB(c,l,n))})}async function ju(e,t,r,n){return Nd(e,"GET",t,r,n)}async function Tn(e,t,r,n,a){return Nd(e,"POST",t,n,a,r)}async function fv(e,t,r,n,a){return Nd(e,"PUT",t,n,a,r)}async function BB(e,t,r,n){return Nd(e,"HEAD",t,Ae(Ae({},r),{},{noResolveJson:!0}),n)}async function Dj(e,t,r,n,a){return Nd(e,"DELETE",t,n,a,r)}var UB=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}};let kT;kT=Symbol.toStringTag;var qB=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[kT]="BlobDownloadBuilder",this.promise=null}asStream(){return new UB(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(ft(t))return{data:null,error:t};throw t}}};const VB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},LS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var WB=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=$j(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,r,n){var a=this;try{let i;const o=Ae(Ae({},LS),n);let l=Ae(Ae({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",a.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=a.toBase64(a.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(l=Ae(Ae({},l),n.headers));const u=a._removeEmptyFolders(t),h=a._getFinalPath(u),d=await(e=="PUT"?fv:Tn)(a.fetch,`${a.url}/object/${h}`,i,Ae({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),l=new URL(a.url+`/object/upload/sign/${o}`);l.searchParams.set("token",t);try{let c;const u=Ae({upsert:LS.upsert},n),h=Ae(Ae({},a.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType),{data:{path:i,fullPath:(await fv(a.fetch,l.toString(),c,{headers:h})).Key},error:null}}catch(c){if(a.shouldThrowOnError)throw c;if(ft(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var r=this;try{let n=r._getFinalPath(e);const a=Ae({},r.headers);t!=null&&t.upsert&&(a["x-upsert"]="true");const i=await Tn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),l=o.searchParams.get("token");if(!l)throw new op("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;try{return{data:await Tn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}}async copy(e,t,r){var n=this;try{return{data:{path:(await Tn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}}async createSignedUrl(e,t,r){var n=this;try{let a=n._getFinalPath(e),i=await Tn(n.fetch,`${n.url}/object/sign/${a}`,Ae({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}}async createSignedUrls(e,t,r){var n=this;try{const a=await Tn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Ae(Ae({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}}download(e,t){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>ju(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new qB(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);try{return{data:hv(await ju(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await BB(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ft(n)&&n instanceof dv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});o!==""&&n.push(o);let l=n.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${l}`)}}}async remove(e){var t=this;try{return{data:await Dj(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async list(e,t,r){var n=this;try{const a=Ae(Ae(Ae({},VB),t),{},{prefix:e||""});return{data:await Tn(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ft(a))return{data:null,error:a};throw a}}async listV2(e,t){var r=this;try{const n=Ae({},e);return{data:await Tn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const AT="2.88.0",OT={"X-Client-Info":`storage-js/${AT}`};var GB=class{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Ae(Ae({},OT),t),this.fetch=$j(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const r=t.listBucketOptionsToQueryString(e);return{data:await ju(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await ju(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async createBucket(e,t={public:!1}){var r=this;try{return{data:await Tn(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async updateBucket(e,t){var r=this;try{return{data:await fv(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}}async emptyBucket(e){var t=this;try{return{data:await Tn(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Dj(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},KB=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ae(Ae({},OT),t),this.fetch=$j(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await Tn(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async listBuckets(e){var t=this;try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return{data:await ju(t.fetch,a,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await Dj(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}}from(e){var t=this;if(!MB(e))throw new op("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new PB({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...l)=>{try{return{data:await o.apply(a,l),error:null}}catch(c){if(n)throw c;return{data:null,error:c}}}}})}};const Mj={"X-Client-Info":`storage-js/${AT}`,"Content-Type":"application/json"};var ET=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Ur(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Hx=class extends ET{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},HB=class extends ET{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Rj=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},FS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XB=async(e,t,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,a=e;if(typeof a.json=="function")a.json().then(i=>{const o=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";t(new Hx(FS(i),n,o))}).catch(()=>{const i=n+"";t(new Hx(a.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";t(new Hx(a.statusText||`HTTP ${n} error`,n,i))}}else t(new HB(FS(e),e))},JB=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(YB(n)?(a.headers=Ae({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Ae(Ae({},a),r)):a};async function QB(e,t,r,n,a,i){return new Promise((o,l)=>{e(r,JB(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>XB(c,l,n))})}async function qr(e,t,r,n,a){return QB(e,"POST",t,n,a,r)}var ZB=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ae(Ae({},Mj),t),this.fetch=Rj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async getIndex(e,t){var r=this;try{return{data:await qr(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}}async listIndexes(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async deleteIndex(e,t){var r=this;try{return{data:await qr(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(Ur(n))return{data:null,error:n};throw n}}},eU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ae(Ae({},Mj),t),this.fetch=Rj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await qr(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async getVectors(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await qr(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async queryVectors(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await qr(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}},tU=class{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Ae(Ae({},Mj),t),this.fetch=Rj(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async getBucket(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async listBuckets(e={}){var t=this;try{return{data:await qr(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}async deleteBucket(e){var t=this;try{return{data:await qr(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ur(r))return{data:null,error:r};throw r}}},rU=class extends tU{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new nU(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},nU=class extends ZB{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new sU(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},sU=class extends eU{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,Ae(Ae({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},aU=class extends GB{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new WB(this.url,this.headers,e,this.fetch)}get vectors(){return new rU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new KB(this.url+"/iceberg",this.headers,this.fetch)}};const PT="2.88.0",ro=30*1e3,mv=3,Yx=mv*ro,iU="http://localhost:9999",oU="supabase.auth.token",lU={"X-Client-Info":`gotrue-js/${PT}`},pv="X-Supabase-Api-Version",TT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uU=10*60*1e3;class wu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class dU extends wu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function hU(e){return be(e)&&e.name==="AuthApiError"}class Za extends wu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Us extends wu{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Lr extends Us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fU(e){return be(e)&&e.name==="AuthSessionMissingError"}class Gi extends Us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rh extends Us{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class nh extends Us{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function mU(e){return be(e)&&e.name==="AuthImplicitGrantRedirectError"}class zS extends Us{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pU extends Us{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class xv extends Us{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Xx(e){return be(e)&&e.name==="AuthRetryableFetchError"}class BS extends Us{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class gv extends Us{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const jf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),US=` 	
\r=`.split(""),xU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<US.length;t+=1)e[US[t].charCodeAt(0)]=-2;for(let t=0;t<jf.length;t+=1)e[jf[t].charCodeAt(0)]=t;return e})();function qS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(jf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(jf[n]),t.queuedBits-=6}}function $T(e,t,r){const n=xU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function VS(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{vU(o,n,r)};for(let o=0;o<e.length;o+=1)$T(e.charCodeAt(o),a,i);return t.join("")}function gU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function yU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}gU(n,t)}}function vU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Do(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)$T(e.charCodeAt(a),r,n);return new Uint8Array(t)}function bU(e){const t=[];return yU(e,r=>t.push(r)),new Uint8Array(t)}function ai(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>qS(a,r,n)),qS(null,r,n),t.join("")}function jU(e){return Math.round(Date.now()/1e3)+e}function wU(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",Fa={tested:!1,writable:!1},DT=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Fa.tested)return Fa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fa.tested=!0,Fa.writable=!0}catch{Fa.tested=!0,Fa.writable=!1}return Fa.writable};function NU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const MT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),SU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",no=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},za=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Jt=async(e,t)=>{await e.removeItem(t)};class lp{constructor(){this.promise=new lp.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}lp.promiseConstructor=Promise;function Jx(e){const t=e.split(".");if(t.length!==3)throw new gv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!cU.test(t[n]))throw new gv("JWT not in base64url format");return{header:JSON.parse(VS(t[0])),payload:JSON.parse(VS(t[1])),signature:Do(t[2]),raw:{header:t[0],payload:t[1]}}}async function _U(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function CU(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function kU(e){return("0"+e.toString(16)).substr(-2)}function AU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,kU).join("")}async function OU(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function EU(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await OU(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ki(e,t,r=!1){const n=AU();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await no(e,`${t}-code-verifier`,a);const i=await EU(n);return[i,n===i?"plain":"s256"]}const PU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TU(e){const t=e.headers.get(pv);if(!t||!t.match(PU))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function $U(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function DU(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hi(e){if(!MU.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Qx(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function RU(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function WS(e){return JSON.parse(JSON.stringify(e))}const Ha=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),IU=[502,503,504];async function GS(e){var t;if(!SU(e))throw new xv(Ha(e),0);if(IU.includes(e.status))throw new xv(Ha(e),e.status);let r;try{r=await e.json()}catch(i){throw new Za(Ha(i),i)}let n;const a=TU(e);if(a&&a.getTime()>=TT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new BS(Ha(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Lr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new BS(Ha(r),e.status,r.weak_password.reasons);throw new dU(Ha(r),e.status||500,n)}const LU=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ce(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[pv]||(i[pv]=TT["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await FU(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function FU(e,t,r,n,a,i){const o=LU(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new xv(Ha(c),0)}if(l.ok||await GS(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await GS(c)}}function On(e){var t;let r=null;UU(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=jU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function KS(e){const t=On(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function na(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function zU(e){return{data:e,error:null}}function BU(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=ip(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function HS(e){return e}function UU(e){return e.access_token&&e.refresh_token&&e.expires_in}const Zx=["global","local","others"];class qU{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=MT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Zx[0]){if(Zx.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zx.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:na})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ip(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:BU,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(be(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:na})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:HS});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(b.split(";")[1].split("=")[1]);u[`${g}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Hi(t);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:na})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hi(t);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:na})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Hi(t);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:na})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Hi(t.userId);try{const{data:r,error:n}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hi(t.userId),Hi(t.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},h=await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:HS});if(h.error)throw h.error;const d=await h.json(),f=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const x=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(b.split(";")[1].split("=")[1]);u[`${g}Page`]=x}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(be(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(be(r))return{data:null,error:r};throw r}}}function YS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Yi={debug:!!(globalThis&&DT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class RT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class VU extends RT{}async function WU(e,t,r){Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Yi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new VU(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Yi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function GU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function IT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function KU(e){return parseInt(e,16)}function HU(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function YU(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:h,uri:d,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=IT(e.address),b=h?`${h}://${n}`:n,x=e.statement?`${e.statement}
`:"",g=`${b} wants you to sign in with your Ethereum account:
${p}

${x}`;let y=`URI: ${d}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(y+=`
Expiration Time: ${a.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let m=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);m+=`
- ${v}`}y+=m}return`${g}
${y}`}class Pt extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class wf extends Pt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function XU({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Pt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Pt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Pt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Pt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Pt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Pt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(LT(o)){if(i.rp.id!==o)return new Pt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Pt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function JU({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Pt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Pt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(LT(n)){if(r.rpId!==n)return new Pt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Pt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Pt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Pt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class QU{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const ZU=new QU;function e9(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=ip(e,["challenge","user","excludeCredentials"]),i=Do(t).buffer,o=Object.assign(Object.assign({},r),{id:Do(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Do(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function t9(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ip(e,["challenge","allowCredentials"]),a=Do(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Do(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function r9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ai(new Uint8Array(e.response.attestationObject)),clientDataJSON:ai(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function n9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ai(new Uint8Array(a.authenticatorData)),clientDataJSON:ai(new Uint8Array(a.clientDataJSON)),signature:ai(new Uint8Array(a.signature)),userHandle:a.userHandle?ai(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function LT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function XS(){var e,t;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function s9(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new wf("Browser returned unexpected credential type",t)}:{data:null,error:new wf("Empty credential response",t)}}catch(t){return{data:null,error:XU({error:t,options:e})}}}async function a9(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new wf("Browser returned unexpected credential type",t)}:{data:null,error:new wf("Empty credential response",t)}}catch(t){return{data:null,error:JU({error:t,options:e})}}}const i9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},o9={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Nf(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Nf(l,o):n[i]=Nf(o)}else n[i]=o}return n}function l9(e,t){return Nf(i9,e,t||{})}function c9(e,t){return Nf(o9,e,t||{})}class u9{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??ZU.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=l9(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:d}=await s9({publicKey:u,signal:c});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=c9(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:d}=await a9(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(o){return be(o)?{data:null,error:o}:{data:null,error:new Za("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new wu("rpId is required for WebAuthn authentication")};try{if(!XS())return{data:null,error:new Za("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return be(o)?{data:null,error:o}:{data:null,error:new Za("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new wu("rpId is required for WebAuthn registration")};try{if(!XS())return{data:null,error:new Za("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return be(o)?{data:null,error:o}:{data:null,error:new Za("Unexpected error in register",o)}}}}GU();const d9={url:iU,storageKey:oU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function JS(e,t,r){return await r()}const Xi={};class Nu{get jwks(){var t,r;return(r=(t=Xi[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Xi[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xi[this.storageKey]=Object.assign(Object.assign({},Xi[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},d9),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Nu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Nu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Qt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new qU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=MT(i.fetch),this.lock=i.lock||JS,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&Qt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=WU:this.lock=JS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new u9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:DT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=YS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=YS(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${PT}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Qt()&&(r=NU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Qt()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),mU(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return be(r)?this._returnResult({error:r}):this._returnResult({error:new Za("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:On}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:h,password:d,options:f}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Ki(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:b},xform:On})}else if("phone"in t){const{phone:h,password:d,options:f}=t;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:On})}else throw new rh("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return await Jt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:KS})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:KS})}else throw new rh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Gi;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,h,d,f;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:x,wallet:g,statement:y,options:m}=t;let v;if(Qt())if(typeof g=="object")v=g;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")v=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=g}const S=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),w=await v.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=IT(w[0]);let _=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!_){const A=await v.request({method:"eth_chainId"});_=KU(A)}const C={domain:S.host,address:N,statement:y,uri:S.href,version:"1",chainId:_,nonce:(a=m==null?void 0:m.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=m==null?void 0:m.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=YU(C),b=await v.request({method:"personal_sign",params:[HU(p),N]})}try{const{data:x,error:g}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:On});if(g)throw g;if(!x||!x.session||!x.user){const y=new Gi;return this._returnResult({data:{user:null,session:null},error:y})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:g})}catch(x){if(be(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,h,d,f,p;let b,x;if("message"in t)b=t.message,x=t.signature;else{const{chain:g,wallet:y,statement:m,options:v}=t;let S;if(Qt())if(typeof y=="object")S=y;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const w=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),m?{statement:m}:null));let _;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")_=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)_=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)b=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),x=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${w.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((d=(h=v==null?void 0:v.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...v.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=N}}try{const{data:g,error:y}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ai(x)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:On});if(y)throw y;if(!g||!g.session||!g.user){const m=new Gi;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(be(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(t){const r=await za(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new pU;const{data:i,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:On});if(await Jt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Gi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:On}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new Gi;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await Ki(this.storage,this.storageKey));const{error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:h}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new rh("You must provide either an email or phone number.")}catch(l){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:On});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await Ki(this.storage,this.storageKey));const u=await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:zU});return!((i=u.data)===null||i===void 0)&&i.url&&Qt()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Lr;const{error:a}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(be(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Ce(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new rh("You must provide either an email or phone number and a type")}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await za(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Yx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await za(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Qx()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=RU(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:na}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lr}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:na})})}catch(r){if(be(r))return fU(r)&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Lr;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ki(this.storage,this.storageKey));const{data:u,error:h}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:na});if(h)throw h;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Lr;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Jx(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(be(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Lr;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(be(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Qt())throw new nh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new nh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new zS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new zS("No code detected.");const{data:m,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new nh("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(l);let f=h+d;c&&(f=parseInt(c));const p=f-h;p*1e3<=ro&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const b=f-d;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,f,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,f,h);const{data:x,error:g}=await this._getUser(i);if(g)throw g;const y={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(be(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await za(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(hU(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Jt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=wU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ki(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,h;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return Qt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(be(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:h}=t,d=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:On}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Gi}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(a){if(await Jt(this.storage,`${this.storageKey}-code-verifier`),be(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await CU(async a=>(a>0&&await _U(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:On})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Xx(i)&&Date.now()+o-n<ro})}catch(n){if(this._debug(r,"error",n),be(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Qt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await za(this.storage,this.storageKey);if(a&&this.userStorage){let o=await za(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await no(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Qx()}else if(a&&!a.user&&!a.user){const o=await za(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Jt(this.storage,this.storageKey+"-user"),await no(this.storage,this.storageKey,a)):a.user=Qx()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Yx;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Yx}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Xx(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Lr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new lp;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Lr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),be(i)){const o={data:null,error:i};return Xx(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Jt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await no(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=WS(a);await no(this.storage,this.storageKey,i)}else{const a=WS(r);await no(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Jt(this.storage,this.storageKey),await Jt(this.storage,this.storageKey+"-code-verifier"),await Jt(this.storage,this.storageKey+"-user"),this.userStorage&&await Jt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ro);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/ro);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ro}ms, refresh threshold is ${mv} ticks`),a<=mv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof RT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ki(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ce(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?r9(t.webauthn.credential_response):n9(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Ce(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:e9(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:t9(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Jx(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Lr})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Lr});const o=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Lr});const o=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&Qt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Lr})})}catch(t){if(be(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Lr})})}catch(r){if(be(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+uU>a)return n;const{data:i,error:o}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Jx(n);r!=null&&r.allowExpired||$U(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const h=DU(a.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,bU(`${l}.${c}`)))throw new gv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(be(n))return this._returnResult({data:null,error:n});throw n}}}Nu.nextInstanceID={};const h9=Nu,f9="2.88.0";let _c="";typeof Deno<"u"?_c="deno":typeof document<"u"?_c="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_c="react-native":_c="node";const m9={"X-Client-Info":`supabase-js-${_c}/${f9}`},p9={headers:m9},x9={schema:"public"},g9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y9={};function Su(e){"@babel/helpers - typeof";return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(e)}function v9(e,t){if(Su(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b9(e){var t=v9(e,"string");return Su(t)=="symbol"?t:t+""}function j9(e,t,r){return(t=b9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(r),!0).forEach(function(n){j9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const w9=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),N9=()=>Headers,S9=(e,t,r)=>{const n=w9(r),a=N9();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,jt(jt({},o),{},{headers:u}))}};function _9(e){return e.endsWith("/")?e:e+"/"}function C9(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:h,global:d}=t,f={db:jt(jt({},c),a),auth:jt(jt({},u),i),realtime:jt(jt({},h),o),storage:{},global:jt(jt(jt({},d),l),{},{headers:jt(jt({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function k9(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_9(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var A9=class extends h9{constructor(e){super(e)}},O9=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=k9(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l={db:x9,realtime:y9,auth:jt(jt({},g9),{},{storageKey:o}),global:p9},c=C9(r??{},l);if(this.storageKey=(n=c.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=c.global.headers)!==null&&a!==void 0?a:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=S9(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(jt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new lB(new URL("rest/v1",i).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new aU(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new nB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:l,debug:c,throwOnError:u},h,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new A9({url:this.authUrl.href,headers:jt(jt({},f),h),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:l,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new _B(this.realtimeUrl.href,jt(jt({},e),{},{params:jt(jt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ij=(e,t,r)=>new O9(e,t,r);function E9(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}E9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const P9="https://cjtmcsehkdvwjgkrjqul.supabase.co",T9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqdG1jc2Voa2R2d2pna3JqcXVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NzM3OTcsImV4cCI6MjA3NzQ0OTc5N30.K8RlO--akFtbSXYRChekplr9ynNwKaGLxKWREi8MFWM",D=Ij(P9,T9);let $9={data:""},D9=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||$9},M9=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,R9=/\/\*[^]*?\*\/|  +/g,ZS=/\n+/g,sa=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?sa(o,i):i+"{"+sa(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=sa(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=sa.p?sa.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},us={},FT=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+FT(e[r]);return t}return e},I9=(e,t,r,n,a)=>{let i=FT(e),o=us[i]||(us[i]=(c=>{let u=0,h=11;for(;u<c.length;)h=101*h+c.charCodeAt(u++)>>>0;return"go"+h})(i));if(!us[o]){let c=i!==e?e:(u=>{let h,d,f=[{}];for(;h=M9.exec(u.replace(R9,""));)h[4]?f.shift():h[3]?(d=h[3].replace(ZS," ").trim(),f.unshift(f[0][d]=f[0][d]||{})):f[0][h[1]]=h[2].replace(ZS," ").trim();return f[0]})(e);us[o]=sa(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&us.g?us.g:null;return r&&(us.g=us[o]),((c,u,h,d)=>{d?u.data=u.data.replace(d,c):u.data.indexOf(c)===-1&&(u.data=h?c+u.data:u.data+c)})(us[o],t,n,l),o},L9=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":sa(l,""):l===!1?"":l}return n+a+(o??"")},"");function cp(e){let t=this||{},r=e.call?e(t.p):e;return I9(r.unshift?r.raw?L9(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,D9(t.target),t.g,t.o,t.k)}let zT,yv,vv;cp.bind({g:1});let $s=cp.bind({k:1});function F9(e,t,r,n){sa.p=t,zT=e,yv=r,vv=n}function Ta(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:yv&&yv()},l),r.o=/ *go\d+/.test(c),l.className=cp.apply(r,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),vv&&u[0]&&vv(l),zT(u,l)}return a}}var z9=e=>typeof e=="function",Sf=(e,t)=>z9(e)?e(t):e,B9=(()=>{let e=0;return()=>(++e).toString()})(),BT=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),U9=20,Lj="default",UT=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return UT(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Fh=[],qT={toasts:[],pausedAt:void 0,settings:{toastLimit:U9}},Yn={},VT=(e,t=Lj)=>{Yn[t]=UT(Yn[t]||qT,e),Fh.forEach(([r,n])=>{r===t&&n(Yn[t])})},WT=e=>Object.keys(Yn).forEach(t=>VT(e,t)),q9=e=>Object.keys(Yn).find(t=>Yn[t].toasts.some(r=>r.id===e)),up=(e=Lj)=>t=>{VT(t,e)},V9={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},W9=(e={},t=Lj)=>{let[r,n]=j.useState(Yn[t]||qT),a=j.useRef(Yn[t]);j.useEffect(()=>(a.current!==Yn[t]&&n(Yn[t]),Fh.push([t,n]),()=>{let o=Fh.findIndex(([l])=>l===t);o>-1&&Fh.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var l,c,u;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||V9[o.type],style:{...e.style,...(u=e[o.type])==null?void 0:u.style,...o.style}}});return{...r,toasts:i}},G9=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||B9()}),Sd=e=>(t,r)=>{let n=G9(t,e,r);return up(n.toasterId||q9(n.id))({type:2,toast:n}),n.id},Ft=(e,t)=>Sd("blank")(e,t);Ft.error=Sd("error");Ft.success=Sd("success");Ft.loading=Sd("loading");Ft.custom=Sd("custom");Ft.dismiss=(e,t)=>{let r={type:3,toastId:e};t?up(t)(r):WT(r)};Ft.dismissAll=e=>Ft.dismiss(void 0,e);Ft.remove=(e,t)=>{let r={type:4,toastId:e};t?up(t)(r):WT(r)};Ft.removeAll=e=>Ft.remove(void 0,e);Ft.promise=(e,t,r)=>{let n=Ft.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?Sf(t.success,a):void 0;return i?Ft.success(i,{id:n,...r,...r==null?void 0:r.success}):Ft.dismiss(n),a}).catch(a=>{let i=t.error?Sf(t.error,a):void 0;i?Ft.error(i,{id:n,...r,...r==null?void 0:r.error}):Ft.dismiss(n)}),e};var K9=1e3,H9=(e,t="default")=>{let{toasts:r,pausedAt:n}=W9(e,t),a=j.useRef(new Map).current,i=j.useCallback((d,f=K9)=>{if(a.has(d))return;let p=setTimeout(()=>{a.delete(d),o({type:4,toastId:d})},f);a.set(d,p)},[]);j.useEffect(()=>{if(n)return;let d=Date.now(),f=r.map(p=>{if(p.duration===1/0)return;let b=(p.duration||0)+p.pauseDuration-(d-p.createdAt);if(b<0){p.visible&&Ft.dismiss(p.id);return}return setTimeout(()=>Ft.dismiss(p.id,t),b)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[r,n,t]);let o=j.useCallback(up(t),[t]),l=j.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=j.useCallback((d,f)=>{o({type:1,toast:{id:d,height:f}})},[o]),u=j.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),h=j.useCallback((d,f)=>{let{reverseOrder:p=!1,gutter:b=8,defaultPosition:x}=f||{},g=r.filter(v=>(v.position||x)===(d.position||x)&&v.height),y=g.findIndex(v=>v.id===d.id),m=g.filter((v,S)=>S<y&&v.visible).length;return g.filter(v=>v.visible).slice(...p?[m+1]:[0,m]).reduce((v,S)=>v+(S.height||0)+b,0)},[r]);return j.useEffect(()=>{r.forEach(d=>{if(d.dismissed)i(d.id,d.removeDelay);else{let f=a.get(d.id);f&&(clearTimeout(f),a.delete(d.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:u,calculateOffset:h}}},Y9=$s`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,X9=$s`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,J9=$s`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Q9=Ta("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Y9} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${X9} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${J9} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Z9=$s`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,eq=Ta("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Z9} 1s linear infinite;
`,tq=$s`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,rq=$s`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,nq=Ta("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tq} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${rq} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,sq=Ta("div")`
  position: absolute;
`,aq=Ta("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,iq=$s`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oq=Ta("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${iq} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,lq=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?j.createElement(oq,null,t):t:r==="blank"?null:j.createElement(aq,null,j.createElement(eq,{...n}),r!=="loading"&&j.createElement(sq,null,r==="error"?j.createElement(Q9,{...n}):j.createElement(nq,{...n})))},cq=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,uq=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,dq="0%{opacity:0;} 100%{opacity:1;}",hq="0%{opacity:1;} 100%{opacity:0;}",fq=Ta("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,mq=Ta("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,pq=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=BT()?[dq,hq]:[cq(r),uq(r)];return{animation:t?`${$s(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${$s(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},xq=j.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?pq(e.position||t||"top-center",e.visible):{opacity:0},i=j.createElement(lq,{toast:e}),o=j.createElement(mq,{...e.ariaProps},Sf(e.message,e));return j.createElement(fq,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):j.createElement(j.Fragment,null,i,o))});F9(j.createElement);var gq=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=j.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return j.createElement("div",{ref:i,className:t,style:r},a)},yq=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:BT()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},vq=cp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,sh=16,bq=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:u}=H9(r,i);return j.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:sh,left:sh,right:sh,bottom:sh,pointerEvents:"none",...o},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(h=>{let d=h.position||t,f=u.calculateOffset(h,{reverseOrder:e,gutter:n,defaultPosition:t}),p=yq(d,f);return j.createElement(gq,{id:h.id,key:h.id,onHeightUpdate:u.updateHeight,className:h.visible?vq:"",style:p},h.type==="custom"?Sf(h.message,h):a?a(h):j.createElement(xq,{toast:h,position:d}))}))},I=Ft;const e_={en:{dashboard:"Dashboard",academics:"Academics",studentInfo:"Student Info",hr:"Human Resource",fees:"Fees Collection",finance:"Income & Expenses",attendance:"Attendance",exams:"Examinations",communicate:"Communicate",library:"Library",inventory:"Inventory",transport:"Transport",hostel:"Hostel",reports:"Reports",settings:"System Settings",search:"Search...",welcome:"Welcome back",signOut:"Sign Out",profile:"My Profile",darkMode:"Dark Mode",lightMode:"Light Mode",language:"Language",session:"Session"},am:{dashboard:"",academics:"",studentInfo:" ",hr:" ",fees:"",finance:"  ",attendance:"",exams:"",communicate:"",library:"-",inventory:"",transport:"",hostel:"",reports:"",settings:"",search:"...",welcome:"  ",signOut:"",profile:"",darkMode:"",lightMode:"",language:"",session:" "}},GT=j.createContext(void 0),jq=({children:e})=>{const[t,r]=j.useState(null),[n,a]=j.useState(null),[i,o]=j.useState(null),[l,c]=j.useState("SchoolMS"),[u,h]=j.useState(null),[d,f]=j.useState(""),[p,b]=j.useState(""),[x,g]=j.useState(""),[y,m]=j.useState(1200),[v,S]=j.useState("2024-2025"),[w,N]=j.useState([]),[_,C]=j.useState("en"),[A,k]=j.useState("light"),[E,O]=j.useState("2024-2025"),[P,M]=j.useState([]),[T,F]=j.useState(0),[q,$]=j.useState(!0);j.useEffect(()=>{A==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[A]);const U=L=>e_[_][L]||e_.en[L]||L,X=()=>{k(L=>L==="light"?"dark":"light")},K=j.useCallback(L=>(i==null?void 0:i.role)==="system_admin"||w.length===0?!0:w.includes(L),[i,w]),z=j.useCallback(async()=>{try{await D.auth.signOut()}catch(L){console.error("Error signing out:",L)}o(null),a(null),r(null),localStorage.clear()},[]),H=j.useCallback(async()=>{if(n)try{const{data:L,error:W}=await D.from("notifications").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}).limit(100);if(W)throw W;M(L||[]),F((L||[]).filter(Y=>!Y.read).length)}catch(L){console.error(`Failed to fetch notifications: ${L.message}`)}},[n]);j.useEffect(()=>{(async()=>{var Y,V;$(!0);try{const{data:{session:ee},error:Z}=await D.auth.getSession();if(Z)throw Z;r(ee),a((ee==null?void 0:ee.user)??null)}catch(ee){console.error("Auth initialization error:",ee),((Y=ee.message)!=null&&Y.includes("refresh_token_hmac_key")||ee.code==="unexpected_failure"||ee.status===500||(V=ee.message)!=null&&V.includes("Failed to fetch")||ee.name==="TypeError")&&(console.warn("Session corruption detected. Clearing storage to recover."),localStorage.clear(),r(null),a(null),o(null))}finally{$(!1)}})();const{data:{subscription:W}}=D.auth.onAuthStateChange((Y,V)=>{if(Y==="TOKEN_REFRESH_PASSWORD_REQUIRED"){z();return}r(V),a((V==null?void 0:V.user)??null),Y==="SIGNED_OUT"&&($(!1),o(null))});return()=>{W.unsubscribe()}},[z]),j.useEffect(()=>{if(n){const L=async(W=3)=>{var Y,V;try{const[ee,Z]=await Promise.all([D.from("profiles").select("id, name:full_name, role, avatar_url, school_id").eq("id",n.id).maybeSingle(),D.from("settings").select("*")]),{data:re,error:de}=ee;if(de){if((Y=de.message)!=null&&Y.includes("infinite recursion")){console.error("Infinite recursion detected in profile fetch. Check RLS policies."),o(null);return}throw new Error(de.message)}if(o(re),re!=null&&re.school_id&&console.log("Current School ID:",re.school_id),re!=null&&re.school_id){const{data:ce}=await D.from("schools").select("name, logo_url, address, phone, email, features").eq("id",re.school_id).single();ce&&(c(ce.name),h(ce.logo_url),f(ce.address||""),b(ce.phone||""),g(ce.email||""),ce.features&&N(ce.features))}const{data:Ne,error:ne}=Z;if(ne)throw new Error(ne.message);if(Ne){if(!(re!=null&&re.school_id)){const Ie=Ne.find(We=>We.key==="school_name");Ie&&c(Ie.value)}const ce=Ne.find(Ie=>Ie.key==="school_fee");ce&&m(Number(ce.value));const Se=Ne.find(Ie=>Ie.key==="academic_year");Se&&(S(Se.value),O(Se.value))}await H()}catch(ee){if(console.error("Error fetching user data:",ee),W>0&&((V=ee.message)!=null&&V.includes("Failed to fetch")||ee.name==="TypeError"||ee.status===500)){setTimeout(()=>L(W-1),1500);return}}};L()}else o(null),c("SchoolMS"),h(null),f(""),b(""),g(""),m(1200),S("2024-2025"),M([]),F(0),N([])},[n,H]);const me={session:t,user:n,profile:i,loading:q,signOut:z,schoolName:l,schoolLogo:u,schoolAddress:d,schoolPhone:p,schoolEmail:x,schoolFee:y,academicYear:v,updateSetting:async(L,W)=>{await I.promise((async()=>{const{error:Y}=await D.from("settings").upsert({key:L,value:String(W)},{onConflict:"key"});if(Y)throw Y;L==="school_name"&&c(String(W)),L==="academic_year"&&(S(String(W)),O(String(W))),L==="school_fee"&&(m(Number(W)),await D.from("fees").update({amount:Number(W)}).eq("description","Tuition Fee"))})(),{loading:"Saving settings...",success:"Settings saved!",error:Y=>`Failed to save: ${Y.message}`})},notifications:P,unreadCount:T,fetchNotifications:H,markNotificationAsRead:async L=>{try{const{error:W}=await D.from("notifications").update({read:!0}).eq("id",L);if(W)throw W;M(Y=>Y.map(V=>V.id===L?{...V,read:!0}:V)),F(Y=>Math.max(0,Y-1))}catch(W){I.error(`Failed to mark as read: ${W.message}`)}},markAllNotificationsAsRead:async()=>{if(n)try{const{error:L}=await D.from("notifications").update({read:!0}).eq("user_id",n.id).eq("read",!1);if(L)throw L;M(W=>W.map(Y=>({...Y,read:!0}))),F(0)}catch(L){I.error(`Failed to mark all as read: ${L.message}`)}},createNotification:async L=>{try{const{error:W}=await D.from("notifications").insert({...L,read:!1});if(W)throw W}catch(W){console.error(`Failed to create notification: ${W.message}`)}},language:_,setLanguage:C,theme:A,toggleTheme:X,t:U,selectedSession:E,setSelectedSession:O,schoolFeatures:w,isFeatureEnabled:K};return s.jsx(GT.Provider,{value:me,children:e})},fe=()=>{const e=j.useContext(GT);if(e===void 0)throw new Error("useGlobal must be used within a GlobalProvider");return e},nr=({className:e})=>s.jsxs("div",{className:`relative flex items-center justify-center ${e}`,children:[s.jsx(Hb,{className:"text-blue-600",size:36,strokeWidth:1.5}),s.jsx("span",{className:"absolute text-blue-600 text-sm font-bold",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"SP"})]}),wq=()=>{const[e,t]=j.useState(!1),{notifications:r,unreadCount:n,markNotificationAsRead:a,markAllNotificationsAsRead:i}=fe(),o=j.useRef(null),l=Fs();j.useEffect(()=>{const d=f=>{o.current&&!o.current.contains(f.target)&&t(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=d=>{d.read||a(d.id),d.link_to&&l(d.link_to),t(!1)},u=d=>{switch(d){case"grade":return s.jsx(wi,{className:"h-5 w-5 text-yellow-500"});case"fee":return s.jsx($t,{className:"h-5 w-5 text-green-500"});case"event":return s.jsx(hd,{className:"h-5 w-5 text-purple-500"});case"notice":return s.jsx(b3,{className:"h-5 w-5 text-blue-500"});default:return s.jsx(Uy,{className:"h-5 w-5 text-gray-500"})}},h=d=>{const f=Math.floor((new Date().getTime()-new Date(d).getTime())/1e3);let p=f/31536e3;return p>1?Math.floor(p)+"y ago":(p=f/2592e3,p>1?Math.floor(p)+"m ago":(p=f/86400,p>1?Math.floor(p)+"d ago":(p=f/3600,p>1?Math.floor(p)+"h ago":(p=f/60,p>1?Math.floor(p)+"min ago":Math.floor(f)+"s ago"))))};return s.jsxs("div",{className:"relative",ref:o,children:[s.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 rounded-full text-muted-foreground hover:bg-accent",children:[s.jsx(Uy,{size:20}),n>0&&s.jsx("span",{className:"absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-white text-xs font-bold",children:n})]}),s.jsx(Rc,{children:e&&s.jsxs(mi.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-80 sm:w-96 bg-white rounded-lg shadow-lg border z-50",children:[s.jsxs("div",{className:"p-3 flex items-center justify-between border-b",children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:"Notifications"}),s.jsxs("button",{onClick:i,className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[s.jsx(e3,{size:14})," Mark all as read"]})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto scrollbar-thin",children:r.length>0?r.map(d=>s.jsxs("div",{onClick:()=>c(d),className:`flex items-start gap-3 p-3 border-b cursor-pointer hover:bg-gray-50 ${d.read?"":"bg-blue-50"}`,children:[s.jsx("div",{className:"mt-1",children:u(d.type)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-800",children:d.title}),s.jsx("p",{className:"text-xs text-gray-600",children:d.message}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h(d.created_at)})]}),!d.read&&s.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-blue-500"})]},d.id)):s.jsx("div",{className:"p-8 text-center text-gray-500",children:s.jsx("p",{children:"No notifications yet."})})})]})})]})},Nq=[{title:"Overview",icon:Ea,path:"/super-admin"},{title:"Schools",icon:Ti,path:"/schools"},{title:"System Logs",icon:Yb,path:"/reports/logs"},{title:"Settings",icon:$l,path:"/settings"}],t_=[{title:"Dashboard",translationKey:"dashboard",icon:Ea,path:"/",featureKey:"dashboard"},{title:"Front Office",icon:Gb,path:"/front-office",featureKey:"front-office"},{title:"Student Information",translationKey:"studentInfo",icon:Jr,featureKey:"student-info",children:[{title:"Student Details",path:"/students"},{title:"Student Admission",path:"/students/admission"},{title:"Disabled Students",path:"/students/disabled"},{title:"Bulk Delete",path:"/students/bulk-delete"},{title:"Student Categories",path:"/students/categories"}]},{title:"Academics",translationKey:"academics",icon:qn,featureKey:"academics",children:[{title:"Class Timetable",path:"/timetable"},{title:"Teachers Timetable",path:"/teachers-timetable"},{title:"Assign Class Teacher",path:"/assign-teacher"},{title:"Promote Students",path:"/promote-students"},{title:"Subject Group",path:"/subject-groups"},{title:"Subjects",path:"/courses"},{title:"Class",path:"/classes"},{title:"Sections",path:"/sections"}]},{title:"Live Classes",icon:yd,path:"/live-classes",featureKey:"live-classes"},{title:"Lesson Plan",icon:hd,path:"/lesson-plan",featureKey:"lesson-plan"},{title:"Homework",icon:zs,path:"/homework",featureKey:"homework"},{title:"Download Center",icon:Xm,path:"/download-center",featureKey:"download-center"},{title:"Human Resource",translationKey:"hr",icon:Vt,featureKey:"hr",children:[{title:"Staff Directory",path:"/teachers"},{title:"Staff Attendance",path:"/staff-attendance"},{title:"Payroll",path:"/payroll"},{title:"Leaves",path:"/leaves"}]},{title:"Fees Collection",translationKey:"fees",icon:$t,featureKey:"fees",children:[{title:"Collect Fees",path:"/fees"},{title:"Search Fees Payment",path:"/fees/search"},{title:"Search Due Fees",path:"/fees/due"},{title:"Fees Master",path:"/fees/master"}]},{title:"Income & Expenses",translationKey:"finance",icon:ss,featureKey:"finance",children:[{title:"Income",path:"/incomes"},{title:"Add Income",path:"/incomes?action=add"},{title:"Expense",path:"/expenses"},{title:"Add Expense",path:"/expenses?action=add"}]},{title:"Attendance",translationKey:"attendance",icon:$i,featureKey:"attendance",children:[{title:"Student Attendance",path:"/attendance"},{title:"Attendance By Date",path:"/attendance/date"},{title:"Approve Leave",path:"/attendance/approve"}]},{title:"Examinations",translationKey:"exams",icon:Mr,featureKey:"exams",children:[{title:"Exam Group",path:"/exams"},{title:"Exam Schedule",path:"/exams/schedule"},{title:"Exam Result",path:"/results"},{title:"Transcript",path:"/transcript"},{title:"Design Admit Card",path:"/exams/admit-card"},{title:"Print Result",path:"/results"}]},{title:"Online Examinations",icon:UE,path:"/online-exam",featureKey:"online-exams"},{title:"Communicate",translationKey:"communicate",icon:gd,featureKey:"communicate",children:[{title:"Notice Board",path:"/noticeboard"},{title:"Send Email",path:"/email"},{title:"Events",path:"/events"}]},{title:"Library",translationKey:"library",icon:xd,featureKey:"library",children:[{title:"Book List",path:"/library"},{title:"Add Book",path:"/library?action=add"},{title:"Issue Return",path:"/library/issue"}]},{title:"Inventory",translationKey:"inventory",icon:Ym,featureKey:"inventory",children:[{title:"Item Stock",path:"/inventory"},{title:"Add Item",path:"/inventory/add"},{title:"Issue Item",path:"/inventory/issue"}]},{title:"Transport",translationKey:"transport",icon:Pl,featureKey:"transport",children:[{title:"Routes",path:"/transport"},{title:"Vehicles",path:"/transport"},{title:"Assign Vehicle",path:"/transport/assign"}]},{title:"Hostel",translationKey:"hostel",icon:Wb,featureKey:"hostel",children:[{title:"Hostel Rooms",path:"/hostel"},{title:"Room Type",path:"/hostel/room-type"}]},{title:"Certificate",icon:Vb,featureKey:"certificate",children:[{title:"Student ID Card",path:"/id-cards"},{title:"Generate Certificate",path:"/certificates"}]},{title:"Alumni",icon:Jr,path:"/alumni",featureKey:"alumni"},{title:"Reports",translationKey:"reports",icon:pd,featureKey:"reports",children:[{title:"Student Information",path:"/reports"},{title:"Finance",path:"/reports"},{title:"Attendance",path:"/reports"},{title:"Examinations",path:"/reports"},{title:"Human Resource",path:"/reports"},{title:"Library",path:"/reports"},{title:"Inventory",path:"/reports"},{title:"Transport",path:"/reports"},{title:"User Log",path:"/reports/logs"},{title:"Audit Trail Report",path:"/reports/audit"}]},{title:"System Settings",translationKey:"settings",icon:$l,featureKey:"settings",children:[{title:"General Settings",path:"/settings"},{title:"Session Settings",path:"/settings"},{title:"Departments",path:"/departments"}]}],Sq=[{title:"Dashboard",translationKey:"dashboard",icon:Ea,path:"/"},{title:"My Profile",translationKey:"profile",icon:qt,path:"/profile"},{title:"Students",translationKey:"studentInfo",icon:Jr,path:"/students"},{title:"My Classes",icon:xd,path:"/classes"},{title:"Live Classes",icon:yd,path:"/live-classes"},{title:"Lesson Plan",icon:hd,path:"/lesson-plan"},{title:"Homework",icon:zs,path:"/homework"},{title:"Download Center",icon:Xm,path:"/download-center"},{title:"Attendance",translationKey:"attendance",icon:$i,path:"/attendance"},{title:"Examinations",translationKey:"exams",icon:Mr,children:[{title:"Exams",path:"/exams"},{title:"Exam Schedule",path:"/exams/schedule"},{title:"Enter Marks",path:"/grades"},{title:"Results",path:"/results"}]},{title:"Communicate",translationKey:"communicate",icon:gd,children:[{title:"Notice Board",path:"/noticeboard"},{title:"Events",path:"/events"}]}],_q=[{title:"Dashboard",translationKey:"dashboard",icon:Ea,path:"/"},{title:"My Profile",translationKey:"profile",icon:qt,path:"/profile"},{title:"Homework",icon:zs,path:"/homework"},{title:"Download Center",icon:Xm,path:"/download-center"},{title:"Live Classes",icon:yd,path:"/live-classes"},{title:"Academics",translationKey:"academics",icon:qn,children:[{title:"Class Timetable",path:"/timetable"},{title:"Subjects",path:"/courses"}]},{title:"Examinations",translationKey:"exams",icon:wi,children:[{title:"Exam Schedule",path:"/exams/schedule"},{title:"Exam Result",path:"/results"},{title:"Transcript",path:"/transcript"},{title:"Online Exams",path:"/online-exam"}]},{title:"Attendance",translationKey:"attendance",icon:$i,path:"/attendance"},{title:"Fees",translationKey:"fees",icon:$t,path:"/fees"},{title:"Communicate",translationKey:"communicate",icon:gd,children:[{title:"Notice Board",path:"/noticeboard"},{title:"Events",path:"/events"}]}],Cq=[{title:"Dashboard",translationKey:"dashboard",icon:Ea,path:"/"},{title:"My Profile",translationKey:"profile",icon:qt,path:"/profile"},{title:"Fees Collection",translationKey:"fees",icon:$t,children:[{title:"Collect Fees",path:"/fees"},{title:"Search Fees Payment",path:"/fees/search"},{title:"Search Due Fees",path:"/fees/due"},{title:"Fees Master",path:"/fees/master"}]},{title:"Income & Expenses",translationKey:"finance",icon:ss,children:[{title:"Income",path:"/incomes"},{title:"Add Income",path:"/incomes?action=add"},{title:"Expense",path:"/expenses"},{title:"Add Expense",path:"/expenses?action=add"}]},{title:"Reports",translationKey:"reports",icon:pd,path:"/reports"}],kq=[{title:"Dashboard",translationKey:"dashboard",icon:Ea,path:"/"},{title:"My Profile",translationKey:"profile",icon:qt,path:"/profile"},{title:"My Children",icon:Vt,path:"/students"},{title:"Fees",translationKey:"fees",icon:$t,path:"/fees"},{title:"Homework",icon:zs,path:"/homework"},{title:"Attendance",translationKey:"attendance",icon:$i,path:"/attendance"},{title:"Examinations",translationKey:"exams",icon:wi,children:[{title:"Exam Schedule",path:"/exams/schedule"},{title:"Exam Result",path:"/results"}]},{title:"Notice Board",translationKey:"communicate",icon:gd,path:"/noticeboard"}],Aq=e=>{switch(e){case"system_admin":return Nq;case"teacher":return Sq;case"student":return _q;case"cashier":return Cq;case"parent":return kq;case"principal":return t_;case"admin":default:return t_}},Oq=({children:e})=>{const[t,r]=j.useState(!1),[n,a]=j.useState(!1),[i,o]=j.useState(!1),[l,c]=j.useState([]),{user:u,signOut:h,profile:d,schoolName:f,schoolLogo:p,language:b,setLanguage:x,theme:g,toggleTheme:y,t:m,selectedSession:v,setSelectedSession:S,academicYear:w,isFeatureEnabled:N}=fe(),_=Fs(),C=os(),A=j.useRef(null),E=Aq((d==null?void 0:d.role)||null).filter(K=>(d==null?void 0:d.role)==="system_admin"?!0:K.featureKey?N(K.featureKey):!0),O=d!=null&&d.role?d.role.charAt(0).toUpperCase()+d.role.slice(1).replace("_"," "):"User",P=(d==null?void 0:d.name)||(u==null?void 0:u.email);j.useEffect(()=>{const K=C.pathname;E.forEach(z=>{z.children&&z.children.some(Q=>Q.path.split("?")[0]===K)&&c(Q=>Q.includes(z.title)?Q:[...Q,z.title])})},[C.pathname,E]),j.useEffect(()=>{const K=z=>{A.current&&!A.current.contains(z.target)&&o(!1)};return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[]);const M=async()=>{await h(),_("/login")},T=K=>{n&&a(!1),c(z=>z.includes(K)?z.filter(H=>H!==K):[...z,K])},F=C.pathname.split("/").filter(Boolean),q=F.map((K,z)=>{const H=`/${F.slice(0,z+1).join("/")}`,Q=K.charAt(0).toUpperCase()+K.slice(1).replace(/-/g," ");return{path:H,label:Q}}),$=new Date().getFullYear(),U=[`${$-1}-${$}`,`${$}-${$+1}`,`${$+1}-${$+2}`];U.includes(w)||U.push(w);const X=({isCollapsed:K})=>s.jsxs("div",{className:"flex flex-col h-full bg-[#1e1e2d] text-[#a6a6a6] border-r border-slate-800 dark:border-slate-700",children:[s.jsxs("div",{className:`h-16 flex items-center ${K?"justify-center":"px-4"} border-b border-slate-700 bg-[#1a1a27]`,children:[p?s.jsx("img",{src:p,alt:"Logo",className:"h-8 w-8 object-contain rounded-md bg-white/10 p-0.5"}):s.jsx(nr,{className:"!text-white"}),!K&&s.jsx("span",{className:"ml-3 text-lg font-bold text-white truncate",children:(d==null?void 0:d.role)==="system_admin"?"System Admin":f})]}),s.jsx("nav",{className:"flex-1 px-2 py-4 space-y-1 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-700 scrollbar-track-transparent",children:E.map(z=>{var ue;const H=z.path===C.pathname||((ue=z.children)==null?void 0:ue.some(ye=>ye.path.split("?")[0]===C.pathname)),Q=l.includes(z.title),se=z.translationKey?m(z.translationKey):z.title;return s.jsx("div",{className:"mb-1",children:z.children?s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>T(z.title),className:`w-full flex items-center justify-between px-3 py-2.5 text-sm font-medium rounded-md transition-colors duration-200 
                      ${H?"text-white bg-slate-800":"hover:text-white hover:bg-slate-800"}
                      ${K?"justify-center":""}
                    `,title:K?se:void 0,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(z.icon,{className:`h-5 w-5 shrink-0 ${H?"text-orange-500":""}`}),!K&&s.jsx("span",{className:"ml-3",children:se})]}),!K&&s.jsx(r3,{className:`h-4 w-4 transition-transform duration-200 ${Q?"rotate-180":""}`})]}),s.jsx(Rc,{children:Q&&!K&&s.jsx(mi.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:s.jsx("div",{className:"mt-1 ml-2 pl-3 border-l border-slate-700 space-y-1",children:z.children.map(ye=>s.jsx(Vi,{to:ye.path,onClick:()=>t&&r(!1),className:({isActive:me})=>`flex items-center px-3 py-2 text-sm rounded-md transition-colors duration-200 group
                                ${me?"text-orange-500 bg-slate-800/50 font-medium":"text-[#a6a6a6] hover:text-white hover:bg-slate-800/30"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${C.pathname===ye.path.split("?")[0]?"bg-orange-500":"bg-slate-600 group-hover:bg-white"}`}),ye.title]})},ye.title))})})})]}):s.jsxs(Vi,{to:z.path,onClick:()=>t&&r(!1),className:({isActive:ye})=>`flex items-center px-3 py-2.5 text-sm font-medium rounded-md transition-colors duration-200
                    ${ye?"text-white bg-orange-600 shadow-md":"hover:text-white hover:bg-slate-800"} ${K?"justify-center":""}`,title:K?se:void 0,children:[s.jsx(z.icon,{className:`h-5 w-5 shrink-0 ${K?"":"mr-3"}`}),!K&&s.jsx("span",{children:se})]})},z.title)})}),s.jsx("div",{className:"p-4 border-t border-slate-700 bg-[#1a1a27]",children:s.jsxs("button",{onClick:()=>a(!K),className:`hidden lg:flex items-center w-full py-2 text-sm font-medium rounded-md transition-colors text-slate-400 hover:text-white hover:bg-slate-800 ${K?"justify-center":"px-2"}`,children:[s.jsx(RE,{className:`h-5 w-5 shrink-0 transition-transform duration-300 ${K?"rotate-180":""}`}),!K&&s.jsx("span",{className:"ml-3",children:"Collapse"})]})})]});return s.jsxs("div",{className:"min-h-screen font-sans text-slate-900 dark:text-slate-100 bg-slate-50 dark:bg-slate-900 transition-colors duration-200",children:[s.jsx("header",{className:`bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 fixed top-0 right-0 h-16 z-30 flex items-center shadow-sm transition-all duration-300 ease-in-out left-0 ${n?"lg:left-20":"lg:left-64"}`,children:s.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>r(!t),className:"lg:hidden p-2 rounded-md text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-700 focus:outline-none",children:t?s.jsx(Zm,{size:24}):s.jsx(d3,{size:24})}),s.jsxs("nav",{className:"hidden md:flex items-center text-sm text-slate-500 dark:text-slate-400",children:[s.jsx(Vi,{to:"/",className:"hover:text-slate-900 dark:hover:text-slate-200 transition-colors",children:"Home"}),q.map((K,z)=>s.jsxs(G.Fragment,{children:[s.jsx(IE,{size:14,className:"mx-2 text-slate-400"}),s.jsx(Vi,{to:K.path,className:`${z===q.length-1?"font-semibold text-slate-900 dark:text-slate-100":"hover:text-slate-900 dark:hover:text-slate-200"} transition-colors`,children:K.label})]},K.path))]})]}),s.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[s.jsxs("div",{className:"hidden lg:flex items-center gap-2 mr-2",children:[s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[s.jsx(wr,{size:14}),v]}),s.jsx("div",{className:"absolute right-0 mt-2 w-32 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-100 dark:border-slate-700 hidden group-hover:block z-50",children:U.map(K=>s.jsx("button",{onClick:()=>S(K),className:`block w-full text-left px-4 py-2 text-xs hover:bg-slate-50 dark:hover:bg-slate-700 ${v===K?"text-blue-600 font-bold":"text-slate-600 dark:text-slate-300"}`,children:K},K))})]}),s.jsxs("button",{onClick:()=>x(b==="en"?"am":"en"),className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",title:"Switch Language",children:[s.jsx(Vy,{size:18}),s.jsx("span",{className:"sr-only",children:"Switch Language"})]}),s.jsx("button",{onClick:y,className:"p-2 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-full transition-colors",title:"Toggle Theme",children:g==="light"?s.jsx(Ko,{size:18}):s.jsx(Yo,{size:18})})]}),s.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-700 hidden sm:block"}),s.jsx(wq,{}),s.jsxs("div",{className:"relative",ref:A,children:[s.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-3 p-1.5 rounded-full hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-200 dark:focus:ring-slate-600",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-orange-500 flex items-center justify-center text-white font-semibold overflow-hidden ring-2 ring-white dark:ring-slate-700 shadow-sm",children:d!=null&&d.avatar_url?s.jsx("img",{src:d.avatar_url,alt:P,className:"w-full h-full object-cover"}):(P==null?void 0:P.charAt(0).toUpperCase())||"U"}),s.jsxs("div",{className:"hidden md:block text-left",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100 leading-none",children:P}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5 font-medium",children:O})]})]}),s.jsx(Rc,{children:i&&s.jsxs(mi.div,{initial:{opacity:0,y:8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.95},transition:{duration:.1},className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 z-50 overflow-hidden",children:[s.jsxs("div",{className:"p-3 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-800/50",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:P}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:u==null?void 0:u.email})]}),s.jsxs("div",{className:"p-1.5",children:[s.jsxs(Vi,{to:"/profile",className:"flex items-center w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[s.jsx(qt,{className:"mr-2.5 h-4 w-4 text-slate-400"}),m("profile")]}),s.jsxs(Vi,{to:"/settings",className:"flex items-center w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[s.jsx($l,{className:"mr-2.5 h-4 w-4 text-slate-400"}),m("settings")]}),s.jsxs("div",{className:"lg:hidden border-t border-slate-100 dark:border-slate-700 my-1 pt-1",children:[s.jsxs("button",{onClick:()=>x(b==="en"?"am":"en"),className:"flex items-center w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:[s.jsx(Vy,{className:"mr-2.5 h-4 w-4 text-slate-400"})," ",m("language"),": ",b.toUpperCase()]}),s.jsxs("button",{onClick:y,className:"flex items-center w-full px-3 py-2 text-sm text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700",children:[g==="light"?s.jsx(Ko,{className:"mr-2.5 h-4 w-4 text-slate-400"}):s.jsx(Yo,{className:"mr-2.5 h-4 w-4 text-slate-400"}),m(g==="light"?"darkMode":"lightMode")]})]}),s.jsx("div",{className:"my-1 h-px bg-slate-100 dark:bg-slate-700"}),s.jsxs("button",{onClick:M,className:"flex items-center w-full px-3 py-2 text-sm text-rose-600 dark:text-rose-400 rounded-lg hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-colors",children:[s.jsx(u3,{className:"mr-2.5 h-4 w-4"}),m("signOut")]})]})]})})]})]})]})}),s.jsx(Rc,{children:t&&s.jsx(mi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-30 lg:hidden",onClick:()=>r(!1)})}),s.jsx("aside",{className:`fixed top-0 left-0 z-40 h-full transition-all duration-300 ease-in-out transform ${t?"translate-x-0":"-translate-x-full"} ${n?"lg:w-20":"lg:w-64"} lg:translate-x-0`,children:s.jsx(X,{isCollapsed:n})}),s.jsx("main",{className:`pt-20 pb-8 transition-all duration-300 ease-in-out ${n?"lg:pl-20":"lg:pl-64"}`,children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 max-w-[1600px] mx-auto",children:e})})]})},ve=({children:e,allowedRoles:t})=>{const{profile:r,loading:n}=fe(),a=os();if(n)return s.jsx("div",{className:"flex justify-center items-center h-screen bg-slate-50",children:s.jsx(Bs,{className:"animate-spin text-blue-600",size:48})});if(!r)return s.jsx(An,{to:"/login",state:{from:a},replace:!0});const i=r.role;return t.includes(i)||i==="system_admin"&&t.includes("admin")?s.jsx(s.Fragment,{children:e}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh] text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(VE,{className:"h-8 w-8 text-red-600"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-slate-500 max-w-md mb-6",children:"You do not have permission to view this page. If you believe this is an error, please contact your administrator."}),s.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-slate-200 text-slate-800 rounded-md hover:bg-slate-300 transition-colors",children:"Go Back"})]})},je=({className:e,...t})=>s.jsx("div",{className:`animate-pulse rounded-md bg-muted ${e}`,...t});function KT(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=KT(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Pe(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=KT(e))&&(n&&(n+=" "),n+=t);return n}var Eq=Array.isArray,Ir=Eq,Pq=typeof gc=="object"&&gc&&gc.Object===Object&&gc,HT=Pq,Tq=HT,$q=typeof self=="object"&&self&&self.Object===Object&&self,Dq=Tq||$q||Function("return this")(),ls=Dq,Mq=ls,Rq=Mq.Symbol,_d=Rq,r_=_d,YT=Object.prototype,Iq=YT.hasOwnProperty,Lq=YT.toString,oc=r_?r_.toStringTag:void 0;function Fq(e){var t=Iq.call(e,oc),r=e[oc];try{e[oc]=void 0;var n=!0}catch{}var a=Lq.call(e);return n&&(t?e[oc]=r:delete e[oc]),a}var zq=Fq,Bq=Object.prototype,Uq=Bq.toString;function qq(e){return Uq.call(e)}var Vq=qq,n_=_d,Wq=zq,Gq=Vq,Kq="[object Null]",Hq="[object Undefined]",s_=n_?n_.toStringTag:void 0;function Yq(e){return e==null?e===void 0?Hq:Kq:s_&&s_ in Object(e)?Wq(e):Gq(e)}var qs=Yq;function Xq(e){return e!=null&&typeof e=="object"}var Vs=Xq,Jq=qs,Qq=Vs,Zq="[object Symbol]";function e7(e){return typeof e=="symbol"||Qq(e)&&Jq(e)==Zq}var Rl=e7,t7=Ir,r7=Rl,n7=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s7=/^\w*$/;function a7(e,t){if(t7(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||r7(e)?!0:s7.test(e)||!n7.test(e)||t!=null&&e in Object(t)}var Fj=a7;function i7(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $a=i7;const Il=Ye($a);var o7=qs,l7=$a,c7="[object AsyncFunction]",u7="[object Function]",d7="[object GeneratorFunction]",h7="[object Proxy]";function f7(e){if(!l7(e))return!1;var t=o7(e);return t==u7||t==d7||t==c7||t==h7}var zj=f7;const Oe=Ye(zj);var m7=ls,p7=m7["__core-js_shared__"],x7=p7,eg=x7,a_=function(){var e=/[^.]+$/.exec(eg&&eg.keys&&eg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function g7(e){return!!a_&&a_ in e}var y7=g7,v7=Function.prototype,b7=v7.toString;function j7(e){if(e!=null){try{return b7.call(e)}catch{}try{return e+""}catch{}}return""}var XT=j7,w7=zj,N7=y7,S7=$a,_7=XT,C7=/[\\^$.*+?()[\]{}|]/g,k7=/^\[object .+?Constructor\]$/,A7=Function.prototype,O7=Object.prototype,E7=A7.toString,P7=O7.hasOwnProperty,T7=RegExp("^"+E7.call(P7).replace(C7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $7(e){if(!S7(e)||N7(e))return!1;var t=w7(e)?T7:k7;return t.test(_7(e))}var D7=$7;function M7(e,t){return e==null?void 0:e[t]}var R7=M7,I7=D7,L7=R7;function F7(e,t){var r=L7(e,t);return I7(r)?r:void 0}var Ri=F7,z7=Ri,B7=z7(Object,"create"),dp=B7,i_=dp;function U7(){this.__data__=i_?i_(null):{},this.size=0}var q7=U7;function V7(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var W7=V7,G7=dp,K7="__lodash_hash_undefined__",H7=Object.prototype,Y7=H7.hasOwnProperty;function X7(e){var t=this.__data__;if(G7){var r=t[e];return r===K7?void 0:r}return Y7.call(t,e)?t[e]:void 0}var J7=X7,Q7=dp,Z7=Object.prototype,eV=Z7.hasOwnProperty;function tV(e){var t=this.__data__;return Q7?t[e]!==void 0:eV.call(t,e)}var rV=tV,nV=dp,sV="__lodash_hash_undefined__";function aV(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=nV&&t===void 0?sV:t,this}var iV=aV,oV=q7,lV=W7,cV=J7,uV=rV,dV=iV;function Ll(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ll.prototype.clear=oV;Ll.prototype.delete=lV;Ll.prototype.get=cV;Ll.prototype.has=uV;Ll.prototype.set=dV;var hV=Ll;function fV(){this.__data__=[],this.size=0}var mV=fV;function pV(e,t){return e===t||e!==e&&t!==t}var Bj=pV,xV=Bj;function gV(e,t){for(var r=e.length;r--;)if(xV(e[r][0],t))return r;return-1}var hp=gV,yV=hp,vV=Array.prototype,bV=vV.splice;function jV(e){var t=this.__data__,r=yV(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():bV.call(t,r,1),--this.size,!0}var wV=jV,NV=hp;function SV(e){var t=this.__data__,r=NV(t,e);return r<0?void 0:t[r][1]}var _V=SV,CV=hp;function kV(e){return CV(this.__data__,e)>-1}var AV=kV,OV=hp;function EV(e,t){var r=this.__data__,n=OV(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var PV=EV,TV=mV,$V=wV,DV=_V,MV=AV,RV=PV;function Fl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fl.prototype.clear=TV;Fl.prototype.delete=$V;Fl.prototype.get=DV;Fl.prototype.has=MV;Fl.prototype.set=RV;var fp=Fl,IV=Ri,LV=ls,FV=IV(LV,"Map"),Uj=FV,o_=hV,zV=fp,BV=Uj;function UV(){this.size=0,this.__data__={hash:new o_,map:new(BV||zV),string:new o_}}var qV=UV;function VV(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var WV=VV,GV=WV;function KV(e,t){var r=e.__data__;return GV(t)?r[typeof t=="string"?"string":"hash"]:r.map}var mp=KV,HV=mp;function YV(e){var t=HV(this,e).delete(e);return this.size-=t?1:0,t}var XV=YV,JV=mp;function QV(e){return JV(this,e).get(e)}var ZV=QV,eW=mp;function tW(e){return eW(this,e).has(e)}var rW=tW,nW=mp;function sW(e,t){var r=nW(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var aW=sW,iW=qV,oW=XV,lW=ZV,cW=rW,uW=aW;function zl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}zl.prototype.clear=iW;zl.prototype.delete=oW;zl.prototype.get=lW;zl.prototype.has=cW;zl.prototype.set=uW;var qj=zl,JT=qj,dW="Expected a function";function Vj(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(dW);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Vj.Cache||JT),r}Vj.Cache=JT;var QT=Vj;const hW=Ye(QT);var fW=QT,mW=500;function pW(e){var t=fW(e,function(n){return r.size===mW&&r.clear(),n}),r=t.cache;return t}var xW=pW,gW=xW,yW=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vW=/\\(\\)?/g,bW=gW(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yW,function(r,n,a,i){t.push(a?i.replace(vW,"$1"):n||r)}),t}),jW=bW;function wW(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Wj=wW,l_=_d,NW=Wj,SW=Ir,_W=Rl,c_=l_?l_.prototype:void 0,u_=c_?c_.toString:void 0;function ZT(e){if(typeof e=="string")return e;if(SW(e))return NW(e,ZT)+"";if(_W(e))return u_?u_.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var CW=ZT,kW=CW;function AW(e){return e==null?"":kW(e)}var e$=AW,OW=Ir,EW=Fj,PW=jW,TW=e$;function $W(e,t){return OW(e)?e:EW(e,t)?[e]:PW(TW(e))}var t$=$W,DW=Rl;function MW(e){if(typeof e=="string"||DW(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var pp=MW,RW=t$,IW=pp;function LW(e,t){t=RW(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[IW(t[r++])];return r&&r==n?e:void 0}var Gj=LW,FW=Gj;function zW(e,t,r){var n=e==null?void 0:FW(e,t);return n===void 0?r:n}var r$=zW;const Hr=Ye(r$);function BW(e){return e==null}var UW=BW;const Ee=Ye(UW);var qW=qs,VW=Ir,WW=Vs,GW="[object String]";function KW(e){return typeof e=="string"||!VW(e)&&WW(e)&&qW(e)==GW}var HW=KW;const Si=Ye(HW);var n$={exports:{}},Xe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kj=Symbol.for("react.element"),Hj=Symbol.for("react.portal"),xp=Symbol.for("react.fragment"),gp=Symbol.for("react.strict_mode"),yp=Symbol.for("react.profiler"),vp=Symbol.for("react.provider"),bp=Symbol.for("react.context"),YW=Symbol.for("react.server_context"),jp=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),Np=Symbol.for("react.suspense_list"),Sp=Symbol.for("react.memo"),_p=Symbol.for("react.lazy"),XW=Symbol.for("react.offscreen"),s$;s$=Symbol.for("react.module.reference");function wn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Kj:switch(e=e.type,e){case xp:case yp:case gp:case wp:case Np:return e;default:switch(e=e&&e.$$typeof,e){case YW:case bp:case jp:case _p:case Sp:case vp:return e;default:return t}}case Hj:return t}}}Xe.ContextConsumer=bp;Xe.ContextProvider=vp;Xe.Element=Kj;Xe.ForwardRef=jp;Xe.Fragment=xp;Xe.Lazy=_p;Xe.Memo=Sp;Xe.Portal=Hj;Xe.Profiler=yp;Xe.StrictMode=gp;Xe.Suspense=wp;Xe.SuspenseList=Np;Xe.isAsyncMode=function(){return!1};Xe.isConcurrentMode=function(){return!1};Xe.isContextConsumer=function(e){return wn(e)===bp};Xe.isContextProvider=function(e){return wn(e)===vp};Xe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kj};Xe.isForwardRef=function(e){return wn(e)===jp};Xe.isFragment=function(e){return wn(e)===xp};Xe.isLazy=function(e){return wn(e)===_p};Xe.isMemo=function(e){return wn(e)===Sp};Xe.isPortal=function(e){return wn(e)===Hj};Xe.isProfiler=function(e){return wn(e)===yp};Xe.isStrictMode=function(e){return wn(e)===gp};Xe.isSuspense=function(e){return wn(e)===wp};Xe.isSuspenseList=function(e){return wn(e)===Np};Xe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===xp||e===yp||e===gp||e===wp||e===Np||e===XW||typeof e=="object"&&e!==null&&(e.$$typeof===_p||e.$$typeof===Sp||e.$$typeof===vp||e.$$typeof===bp||e.$$typeof===jp||e.$$typeof===s$||e.getModuleId!==void 0)};Xe.typeOf=wn;n$.exports=Xe;var JW=n$.exports,QW=qs,ZW=Vs,eG="[object Number]";function tG(e){return typeof e=="number"||ZW(e)&&QW(e)==eG}var a$=tG;const rG=Ye(a$);var nG=a$;function sG(e){return nG(e)&&e!=+e}var aG=sG;const Bl=Ye(aG);var yr=function(t){return t===0?0:t>0?1:-1},ii=function(t){return Si(t)&&t.indexOf("%")===t.length-1},ie=function(t){return rG(t)&&!Bl(t)},iG=function(t){return Ee(t)},Ut=function(t){return ie(t)||Si(t)},oG=0,Ul=function(t){var r=++oG;return"".concat(t||"").concat(r)},vr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ie(t)&&!Si(t))return n;var i;if(ii(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Bl(i)&&(i=n),a&&i>r&&(i=r),i},aa=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},lG=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},Ar=function(t,r){return ie(t)&&ie(r)?function(n){return t+n*(r-t)}:function(){return r}};function _f(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Hr(n,t))===r})}var cG=function(t,r){return ie(t)&&ie(r)?t-r:Si(t)&&Si(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Mo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}var uG=["viewBox","children"],dG=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],d_=["points","pathLength"],tg={svg:uG,polygon:d_,polyline:d_},Yj=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Cf=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(j.isValidElement(t)&&(n=t.props),!Il(n))return null;var a={};return Object.keys(n).forEach(function(i){Yj.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},hG=function(t,r,n){return function(a){return t(r,n,a),null}},_i=function(t,r,n){if(!Il(t)||bv(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];Yj.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=hG(o,r,n))}),a},fG=["children"],mG=["children"];function h_(e,t){if(e==null)return{};var r=pG(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}var f_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},_s=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},m_=null,rg=null,Xj=function e(t){if(t===m_&&Array.isArray(rg))return rg;var r=[];return j.Children.forEach(t,function(n){Ee(n)||(JW.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),rg=r,m_=t,r};function gn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return _s(a)}):n=[_s(t)],Xj(e).forEach(function(a){var i=Hr(a,"type.displayName")||Hr(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Br(e,t){var r=gn(e,t);return r&&r[0]}var p_=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!ie(n)||n<=0||!ie(a)||a<=0)},xG=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],gG=function(t){return t&&t.type&&Si(t.type)&&xG.indexOf(t.type)>=0},yG=function(t){return t&&jv(t)==="object"&&"clipDot"in t},vG=function(t,r,n,a){var i,o=(i=tg==null?void 0:tg[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Oe(t)&&(a&&o.includes(r)||dG.includes(r))||n&&Yj.includes(r)},we=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Il(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;vG((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},wv=function e(t,r){if(t===r)return!0;var n=j.Children.count(t);if(n!==j.Children.count(r))return!1;if(n===0)return!0;if(n===1)return x_(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!x_(i,o))return!1}return!0},x_=function(t,r){if(Ee(t)&&Ee(r))return!0;if(!Ee(t)&&!Ee(r)){var n=t.props||{},a=n.children,i=h_(n,fG),o=r.props||{},l=o.children,c=h_(o,mG);return a&&l?Mo(i,c)&&wv(a,l):!a&&!l?Mo(i,c):!1}return!1},g_=function(t,r){var n=[],a={};return Xj(t).forEach(function(i,o){if(gG(i))n.push(i);else if(i){var l=_s(i.type),c=r[l]||{},u=c.handler,h=c.once;if(u&&(!h||!a[l])){var d=u(i,l,o);n.push(d),a[l]=!0}}}),n},bG=function(t){var r=t&&t.type;return r&&f_[r]?f_[r]:null},jG=function(t,r){return Xj(r).indexOf(t)},wG=["children","width","height","viewBox","className","style","title","desc"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(this,arguments)}function NG(e,t){if(e==null)return{};var r=SG(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Sv(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=NG(e,wG),h=a||{width:r,height:n,x:0,y:0},d=Pe("recharts-surface",i);return G.createElement("svg",Nv({},we(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),G.createElement("title",null,l),G.createElement("desc",null,c),t)}var _G=["children","className"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(this,arguments)}function CG(e,t){if(e==null)return{};var r=kG(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Be=G.forwardRef(function(e,t){var r=e.children,n=e.className,a=CG(e,_G),i=Pe("recharts-layer",n);return G.createElement("g",_v({className:i},we(a,!0),{ref:t}),r)}),zn=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function AG(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var OG=AG,EG=OG;function PG(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:EG(e,t,r)}var TG=PG,$G="\\ud800-\\udfff",DG="\\u0300-\\u036f",MG="\\ufe20-\\ufe2f",RG="\\u20d0-\\u20ff",IG=DG+MG+RG,LG="\\ufe0e\\ufe0f",FG="\\u200d",zG=RegExp("["+FG+$G+IG+LG+"]");function BG(e){return zG.test(e)}var i$=BG;function UG(e){return e.split("")}var qG=UG,o$="\\ud800-\\udfff",VG="\\u0300-\\u036f",WG="\\ufe20-\\ufe2f",GG="\\u20d0-\\u20ff",KG=VG+WG+GG,HG="\\ufe0e\\ufe0f",YG="["+o$+"]",Cv="["+KG+"]",kv="\\ud83c[\\udffb-\\udfff]",XG="(?:"+Cv+"|"+kv+")",l$="[^"+o$+"]",c$="(?:\\ud83c[\\udde6-\\uddff]){2}",u$="[\\ud800-\\udbff][\\udc00-\\udfff]",JG="\\u200d",d$=XG+"?",h$="["+HG+"]?",QG="(?:"+JG+"(?:"+[l$,c$,u$].join("|")+")"+h$+d$+")*",ZG=h$+d$+QG,eK="(?:"+[l$+Cv+"?",Cv,c$,u$,YG].join("|")+")",tK=RegExp(kv+"(?="+kv+")|"+eK+ZG,"g");function rK(e){return e.match(tK)||[]}var nK=rK,sK=qG,aK=i$,iK=nK;function oK(e){return aK(e)?iK(e):sK(e)}var lK=oK,cK=TG,uK=i$,dK=lK,hK=e$;function fK(e){return function(t){t=hK(t);var r=uK(t)?dK(t):void 0,n=r?r[0]:t.charAt(0),a=r?cK(r,1).join(""):t.slice(1);return n[e]()+a}}var mK=fK,pK=mK,xK=pK("toUpperCase"),gK=xK;const Cp=Ye(gK);function tt(e){return function(){return e}}const f$=Math.cos,kf=Math.sin,Vn=Math.sqrt,Af=Math.PI,kp=2*Af,Av=Math.PI,Ov=2*Av,Ya=1e-6,yK=Ov-Ya;function m$(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function vK(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return m$;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class bK{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?m$:vK(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,h=o-t,d=l-r,f=h*h+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Ya)if(!(Math.abs(d*c-u*h)>Ya)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,b=a-l,x=c*c+u*u,g=p*p+b*b,y=Math.sqrt(x),m=Math.sqrt(f),v=i*Math.tan((Av-Math.acos((x+f-g)/(2*y*m)))/2),S=v/m,w=v/y;Math.abs(S-1)>Ya&&this._append`L${t+S*h},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*p>h*b)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,h=r+c,d=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Ya||Math.abs(this._y1-h)>Ya)&&this._append`L${u},${h}`,n&&(f<0&&(f=f%Ov+Ov),f>yK?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=h}`:f>Ya&&this._append`A${n},${n},0,${+(f>=Av)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Jj(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new bK(t)}function Qj(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function p$(e){this._context=e}p$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ap(e){return new p$(e)}function x$(e){return e[0]}function g$(e){return e[1]}function y$(e,t){var r=tt(!0),n=null,a=Ap,i=null,o=Jj(l);e=typeof e=="function"?e:e===void 0?x$:tt(e),t=typeof t=="function"?t:t===void 0?g$:tt(t);function l(c){var u,h=(c=Qj(c)).length,d,f=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=h;++u)!(u<h&&r(d=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(d,u,c),+t(d,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:tt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:tt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:tt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function ah(e,t,r){var n=null,a=tt(!0),i=null,o=Ap,l=null,c=Jj(u);e=typeof e=="function"?e:e===void 0?x$:tt(+e),t=typeof t=="function"?t:tt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?g$:tt(+r);function u(d){var f,p,b,x=(d=Qj(d)).length,g,y=!1,m,v=new Array(x),S=new Array(x);for(i==null&&(l=o(m=c())),f=0;f<=x;++f){if(!(f<x&&a(g=d[f],f,d))===y)if(y=!y)p=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=f-1;b>=p;--b)l.point(v[b],S[b]);l.lineEnd(),l.areaEnd()}y&&(v[f]=+e(g,f,d),S[f]=+t(g,f,d),l.point(n?+n(g,f,d):v[f],r?+r(g,f,d):S[f]))}if(m)return l=null,m+""||null}function h(){return y$().defined(a).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:tt(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:tt(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:tt(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:tt(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:tt(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:tt(+d),u):r},u.lineX0=u.lineY0=function(){return h().x(e).y(t)},u.lineY1=function(){return h().x(e).y(r)},u.lineX1=function(){return h().x(n).y(t)},u.defined=function(d){return arguments.length?(a=typeof d=="function"?d:tt(!!d),u):a},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class v${constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function jK(e){return new v$(e,!0)}function wK(e){return new v$(e,!1)}const Zj={draw(e,t){const r=Vn(t/Af);e.moveTo(r,0),e.arc(0,0,r,0,kp)}},NK={draw(e,t){const r=Vn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},b$=Vn(1/3),SK=b$*2,_K={draw(e,t){const r=Vn(t/SK),n=r*b$;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},CK={draw(e,t){const r=Vn(t),n=-r/2;e.rect(n,n,r,r)}},kK=.8908130915292852,j$=kf(Af/10)/kf(7*Af/10),AK=kf(kp/10)*j$,OK=-f$(kp/10)*j$,EK={draw(e,t){const r=Vn(t*kK),n=AK*r,a=OK*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=kp*i/5,l=f$(o),c=kf(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},ng=Vn(3),PK={draw(e,t){const r=-Vn(t/(ng*3));e.moveTo(0,r*2),e.lineTo(-ng*r,-r),e.lineTo(ng*r,-r),e.closePath()}},an=-.5,on=Vn(3)/2,Ev=1/Vn(12),TK=(Ev/2+1)*3,$K={draw(e,t){const r=Vn(t/TK),n=r/2,a=r*Ev,i=n,o=r*Ev+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(an*n-on*a,on*n+an*a),e.lineTo(an*i-on*o,on*i+an*o),e.lineTo(an*l-on*c,on*l+an*c),e.lineTo(an*n+on*a,an*a-on*n),e.lineTo(an*i+on*o,an*o-on*i),e.lineTo(an*l+on*c,an*c-on*l),e.closePath()}};function DK(e,t){let r=null,n=Jj(a);e=typeof e=="function"?e:tt(e||Zj),t=typeof t=="function"?t:tt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:tt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:tt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Of(){}function Ef(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function w$(e){this._context=e}w$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ef(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ef(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MK(e){return new w$(e)}function N$(e){this._context=e}N$.prototype={areaStart:Of,areaEnd:Of,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ef(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RK(e){return new N$(e)}function S$(e){this._context=e}S$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ef(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function IK(e){return new S$(e)}function _$(e){this._context=e}_$.prototype={areaStart:Of,areaEnd:Of,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function LK(e){return new _$(e)}function y_(e){return e<0?-1:1}function v_(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(y_(i)+y_(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function b_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function sg(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function Pf(e){this._context=e}Pf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:sg(this,this._t0,b_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,sg(this,b_(this,r=v_(this,e,t)),r);break;default:sg(this,this._t0,r=v_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function C$(e){this._context=new k$(e)}(C$.prototype=Object.create(Pf.prototype)).point=function(e,t){Pf.prototype.point.call(this,t,e)};function k$(e){this._context=e}k$.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function FK(e){return new Pf(e)}function zK(e){return new C$(e)}function A$(e){this._context=e}A$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=j_(e),a=j_(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function j_(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function BK(e){return new A$(e)}function Op(e,t){this._context=e,this._t=t}Op.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function UK(e){return new Op(e,.5)}function qK(e){return new Op(e,0)}function VK(e){return new Op(e,1)}function el(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Pv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function WK(e,t){return e[t]}function GK(e){const t=[];return t.key=e,t}function KK(){var e=tt([]),t=Pv,r=el,n=WK;function a(i){var o=Array.from(e.apply(this,arguments),GK),l,c=o.length,u=-1,h;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,i)]).data=d;for(l=0,h=Qj(t(o));l<c;++l)o[h[l]].index=l;return r(o,h),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:tt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:tt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Pv:typeof i=="function"?i:tt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??el,a):r},a}function HK(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}el(e,t)}}function YK(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}el(e,t)}}function XK(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var h=e[t[l]],d=h[n][1]||0,f=h[n-1][1]||0,p=(d-f)/2,b=0;b<l;++b){var x=e[t[b]],g=x[n][1]||0,y=x[n-1][1]||0;p+=g-y}c+=d,u+=p*d}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,el(e,t)}}function _u(e){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_u(e)}var JK=["type","size","sizeType"];function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tv.apply(this,arguments)}function w_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(r),!0).forEach(function(n){QK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QK(e,t,r){return t=ZK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZK(e){var t=eH(e,"string");return _u(t)=="symbol"?t:t+""}function eH(e,t){if(_u(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tH(e,t){if(e==null)return{};var r=rH(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var O$={symbolCircle:Zj,symbolCross:NK,symbolDiamond:_K,symbolSquare:CK,symbolStar:EK,symbolTriangle:PK,symbolWye:$K},nH=Math.PI/180,sH=function(t){var r="symbol".concat(Cp(t));return O$[r]||Zj},aH=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*nH;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},iH=function(t,r){O$["symbol".concat(Cp(t))]=r},ew=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=tH(t,JK),u=N_(N_({},c),{},{type:n,size:i,sizeType:l}),h=function(){var g=sH(n),y=DK().type(g).size(aH(i,l,n));return y()},d=u.className,f=u.cx,p=u.cy,b=we(u,!0);return f===+f&&p===+p&&i===+i?G.createElement("path",Tv({},b,{className:Pe("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(p,")"),d:h()})):null};ew.registerSymbol=iH;function tl(e){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(e)}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$v.apply(this,arguments)}function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(r),!0).forEach(function(n){Cu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P$(n.key),n)}}function uH(e,t,r){return t&&cH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dH(e,t,r){return t=Tf(t),hH(e,E$()?Reflect.construct(t,r||[],Tf(e).constructor):t.apply(e,r))}function hH(e,t){if(t&&(tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fH(e)}function fH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E$=function(){return!!e})()}function Tf(e){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tf(e)}function mH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dv(e,t)}function Dv(e,t){return Dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Dv(e,t)}function Cu(e,t,r){return t=P$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P$(e){var t=pH(e,"string");return tl(t)=="symbol"?t:t+""}function pH(e,t){if(tl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ln=32,tw=function(e){function t(){return lH(this,t),dH(this,t,arguments)}return mH(t,e),uH(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=ln/2,o=ln/6,l=ln/3,c=n.inactive?a:n.color;if(n.type==="plainline")return G.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:ln,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return G.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ln,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return G.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ln/8,"h").concat(ln,"v").concat(ln*3/4,"h").concat(-ln,"z"),className:"recharts-legend-icon"});if(G.isValidElement(n.legendIcon)){var u=oH({},n);return delete u.legendIcon,G.cloneElement(n.legendIcon,u)}return G.createElement(ew,{fill:c,cx:i,cy:i,size:ln,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,h={x:0,y:0,width:ln,height:ln},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,b){var x=p.formatter||c,g=Pe(Cu(Cu({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=Oe(p.value)?null:p.value;zn(!Oe(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var m=p.inactive?u:p.color;return G.createElement("li",$v({className:g,style:d,key:"legend-item-".concat(b)},_i(n.props,p,b)),G.createElement(Sv,{width:o,height:o,viewBox:h,style:f},n.renderIcon(p)),G.createElement("span",{className:"recharts-legend-item-text",style:{color:m}},x?x(y,p,b):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return G.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);Cu(tw,"displayName","Legend");Cu(tw,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var xH=fp;function gH(){this.__data__=new xH,this.size=0}var yH=gH;function vH(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var bH=vH;function jH(e){return this.__data__.get(e)}var wH=jH;function NH(e){return this.__data__.has(e)}var SH=NH,_H=fp,CH=Uj,kH=qj,AH=200;function OH(e,t){var r=this.__data__;if(r instanceof _H){var n=r.__data__;if(!CH||n.length<AH-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new kH(n)}return r.set(e,t),this.size=r.size,this}var EH=OH,PH=fp,TH=yH,$H=bH,DH=wH,MH=SH,RH=EH;function ql(e){var t=this.__data__=new PH(e);this.size=t.size}ql.prototype.clear=TH;ql.prototype.delete=$H;ql.prototype.get=DH;ql.prototype.has=MH;ql.prototype.set=RH;var T$=ql,IH="__lodash_hash_undefined__";function LH(e){return this.__data__.set(e,IH),this}var FH=LH;function zH(e){return this.__data__.has(e)}var BH=zH,UH=qj,qH=FH,VH=BH;function $f(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new UH;++t<r;)this.add(e[t])}$f.prototype.add=$f.prototype.push=qH;$f.prototype.has=VH;var $$=$f;function WH(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var D$=WH;function GH(e,t){return e.has(t)}var M$=GH,KH=$$,HH=D$,YH=M$,XH=1,JH=2;function QH(e,t,r,n,a,i){var o=r&XH,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),h=i.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=r&JH?new KH:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var b=e[d],x=t[d];if(n)var g=o?n(x,b,d,t,e,i):n(b,x,d,e,t,i);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!HH(t,function(y,m){if(!YH(p,m)&&(b===y||a(b,y,r,n,i)))return p.push(m)})){f=!1;break}}else if(!(b===x||a(b,x,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var R$=QH,ZH=ls,eY=ZH.Uint8Array,tY=eY;function rY(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var nY=rY;function sY(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var rw=sY,__=_d,C_=tY,aY=Bj,iY=R$,oY=nY,lY=rw,cY=1,uY=2,dY="[object Boolean]",hY="[object Date]",fY="[object Error]",mY="[object Map]",pY="[object Number]",xY="[object RegExp]",gY="[object Set]",yY="[object String]",vY="[object Symbol]",bY="[object ArrayBuffer]",jY="[object DataView]",k_=__?__.prototype:void 0,ag=k_?k_.valueOf:void 0;function wY(e,t,r,n,a,i,o){switch(r){case jY:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bY:return!(e.byteLength!=t.byteLength||!i(new C_(e),new C_(t)));case dY:case hY:case pY:return aY(+e,+t);case fY:return e.name==t.name&&e.message==t.message;case xY:case yY:return e==t+"";case mY:var l=oY;case gY:var c=n&cY;if(l||(l=lY),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=uY,o.set(e,t);var h=iY(l(e),l(t),n,a,i,o);return o.delete(e),h;case vY:if(ag)return ag.call(e)==ag.call(t)}return!1}var NY=wY;function SY(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var I$=SY,_Y=I$,CY=Ir;function kY(e,t,r){var n=t(e);return CY(e)?n:_Y(n,r(e))}var AY=kY;function OY(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var EY=OY;function PY(){return[]}var TY=PY,$Y=EY,DY=TY,MY=Object.prototype,RY=MY.propertyIsEnumerable,A_=Object.getOwnPropertySymbols,IY=A_?function(e){return e==null?[]:(e=Object(e),$Y(A_(e),function(t){return RY.call(e,t)}))}:DY,LY=IY;function FY(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var zY=FY,BY=qs,UY=Vs,qY="[object Arguments]";function VY(e){return UY(e)&&BY(e)==qY}var WY=VY,O_=WY,GY=Vs,L$=Object.prototype,KY=L$.hasOwnProperty,HY=L$.propertyIsEnumerable,YY=O_(function(){return arguments}())?O_:function(e){return GY(e)&&KY.call(e,"callee")&&!HY.call(e,"callee")},nw=YY,Df={exports:{}};function XY(){return!1}var JY=XY;Df.exports;(function(e,t){var r=ls,n=JY,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Df,Df.exports);var F$=Df.exports,QY=9007199254740991,ZY=/^(?:0|[1-9]\d*)$/;function eX(e,t){var r=typeof e;return t=t??QY,!!t&&(r=="number"||r!="symbol"&&ZY.test(e))&&e>-1&&e%1==0&&e<t}var sw=eX,tX=9007199254740991;function rX(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tX}var aw=rX,nX=qs,sX=aw,aX=Vs,iX="[object Arguments]",oX="[object Array]",lX="[object Boolean]",cX="[object Date]",uX="[object Error]",dX="[object Function]",hX="[object Map]",fX="[object Number]",mX="[object Object]",pX="[object RegExp]",xX="[object Set]",gX="[object String]",yX="[object WeakMap]",vX="[object ArrayBuffer]",bX="[object DataView]",jX="[object Float32Array]",wX="[object Float64Array]",NX="[object Int8Array]",SX="[object Int16Array]",_X="[object Int32Array]",CX="[object Uint8Array]",kX="[object Uint8ClampedArray]",AX="[object Uint16Array]",OX="[object Uint32Array]",at={};at[jX]=at[wX]=at[NX]=at[SX]=at[_X]=at[CX]=at[kX]=at[AX]=at[OX]=!0;at[iX]=at[oX]=at[vX]=at[lX]=at[bX]=at[cX]=at[uX]=at[dX]=at[hX]=at[fX]=at[mX]=at[pX]=at[xX]=at[gX]=at[yX]=!1;function EX(e){return aX(e)&&sX(e.length)&&!!at[nX(e)]}var PX=EX;function TX(e){return function(t){return e(t)}}var z$=TX,Mf={exports:{}};Mf.exports;(function(e,t){var r=HT,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Mf,Mf.exports);var $X=Mf.exports,DX=PX,MX=z$,E_=$X,P_=E_&&E_.isTypedArray,RX=P_?MX(P_):DX,B$=RX,IX=zY,LX=nw,FX=Ir,zX=F$,BX=sw,UX=B$,qX=Object.prototype,VX=qX.hasOwnProperty;function WX(e,t){var r=FX(e),n=!r&&LX(e),a=!r&&!n&&zX(e),i=!r&&!n&&!a&&UX(e),o=r||n||a||i,l=o?IX(e.length,String):[],c=l.length;for(var u in e)(t||VX.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||BX(u,c)))&&l.push(u);return l}var GX=WX,KX=Object.prototype;function HX(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||KX;return e===r}var YX=HX;function XX(e,t){return function(r){return e(t(r))}}var U$=XX,JX=U$,QX=JX(Object.keys,Object),ZX=QX,eJ=YX,tJ=ZX,rJ=Object.prototype,nJ=rJ.hasOwnProperty;function sJ(e){if(!eJ(e))return tJ(e);var t=[];for(var r in Object(e))nJ.call(e,r)&&r!="constructor"&&t.push(r);return t}var aJ=sJ,iJ=zj,oJ=aw;function lJ(e){return e!=null&&oJ(e.length)&&!iJ(e)}var Cd=lJ,cJ=GX,uJ=aJ,dJ=Cd;function hJ(e){return dJ(e)?cJ(e):uJ(e)}var Ep=hJ,fJ=AY,mJ=LY,pJ=Ep;function xJ(e){return fJ(e,pJ,mJ)}var gJ=xJ,T_=gJ,yJ=1,vJ=Object.prototype,bJ=vJ.hasOwnProperty;function jJ(e,t,r,n,a,i){var o=r&yJ,l=T_(e),c=l.length,u=T_(t),h=u.length;if(c!=h&&!o)return!1;for(var d=c;d--;){var f=l[d];if(!(o?f in t:bJ.call(t,f)))return!1}var p=i.get(e),b=i.get(t);if(p&&b)return p==t&&b==e;var x=!0;i.set(e,t),i.set(t,e);for(var g=o;++d<c;){f=l[d];var y=e[f],m=t[f];if(n)var v=o?n(m,y,f,t,e,i):n(y,m,f,e,t,i);if(!(v===void 0?y===m||a(y,m,r,n,i):v)){x=!1;break}g||(g=f=="constructor")}if(x&&!g){var S=e.constructor,w=t.constructor;S!=w&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(x=!1)}return i.delete(e),i.delete(t),x}var wJ=jJ,NJ=Ri,SJ=ls,_J=NJ(SJ,"DataView"),CJ=_J,kJ=Ri,AJ=ls,OJ=kJ(AJ,"Promise"),EJ=OJ,PJ=Ri,TJ=ls,$J=PJ(TJ,"Set"),q$=$J,DJ=Ri,MJ=ls,RJ=DJ(MJ,"WeakMap"),IJ=RJ,Mv=CJ,Rv=Uj,Iv=EJ,Lv=q$,Fv=IJ,V$=qs,Vl=XT,$_="[object Map]",LJ="[object Object]",D_="[object Promise]",M_="[object Set]",R_="[object WeakMap]",I_="[object DataView]",FJ=Vl(Mv),zJ=Vl(Rv),BJ=Vl(Iv),UJ=Vl(Lv),qJ=Vl(Fv),Xa=V$;(Mv&&Xa(new Mv(new ArrayBuffer(1)))!=I_||Rv&&Xa(new Rv)!=$_||Iv&&Xa(Iv.resolve())!=D_||Lv&&Xa(new Lv)!=M_||Fv&&Xa(new Fv)!=R_)&&(Xa=function(e){var t=V$(e),r=t==LJ?e.constructor:void 0,n=r?Vl(r):"";if(n)switch(n){case FJ:return I_;case zJ:return $_;case BJ:return D_;case UJ:return M_;case qJ:return R_}return t});var VJ=Xa,ig=T$,WJ=R$,GJ=NY,KJ=wJ,L_=VJ,F_=Ir,z_=F$,HJ=B$,YJ=1,B_="[object Arguments]",U_="[object Array]",ih="[object Object]",XJ=Object.prototype,q_=XJ.hasOwnProperty;function JJ(e,t,r,n,a,i){var o=F_(e),l=F_(t),c=o?U_:L_(e),u=l?U_:L_(t);c=c==B_?ih:c,u=u==B_?ih:u;var h=c==ih,d=u==ih,f=c==u;if(f&&z_(e)){if(!z_(t))return!1;o=!0,h=!1}if(f&&!h)return i||(i=new ig),o||HJ(e)?WJ(e,t,r,n,a,i):GJ(e,t,c,r,n,a,i);if(!(r&YJ)){var p=h&&q_.call(e,"__wrapped__"),b=d&&q_.call(t,"__wrapped__");if(p||b){var x=p?e.value():e,g=b?t.value():t;return i||(i=new ig),a(x,g,r,n,i)}}return f?(i||(i=new ig),KJ(e,t,r,n,a,i)):!1}var QJ=JJ,ZJ=QJ,V_=Vs;function W$(e,t,r,n,a){return e===t?!0:e==null||t==null||!V_(e)&&!V_(t)?e!==e&&t!==t:ZJ(e,t,r,n,W$,a)}var iw=W$,eQ=T$,tQ=iw,rQ=1,nQ=2;function sQ(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],h=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new eQ;if(n)var f=n(u,h,c,e,t,d);if(!(f===void 0?tQ(h,u,rQ|nQ,n,d):f))return!1}}return!0}var aQ=sQ,iQ=$a;function oQ(e){return e===e&&!iQ(e)}var G$=oQ,lQ=G$,cQ=Ep;function uQ(e){for(var t=cQ(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,lQ(a)]}return t}var dQ=uQ;function hQ(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var K$=hQ,fQ=aQ,mQ=dQ,pQ=K$;function xQ(e){var t=mQ(e);return t.length==1&&t[0][2]?pQ(t[0][0],t[0][1]):function(r){return r===e||fQ(r,e,t)}}var gQ=xQ;function yQ(e,t){return e!=null&&t in Object(e)}var vQ=yQ,bQ=t$,jQ=nw,wQ=Ir,NQ=sw,SQ=aw,_Q=pp;function CQ(e,t,r){t=bQ(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=_Q(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&SQ(a)&&NQ(o,a)&&(wQ(e)||jQ(e)))}var kQ=CQ,AQ=vQ,OQ=kQ;function EQ(e,t){return e!=null&&OQ(e,t,AQ)}var PQ=EQ,TQ=iw,$Q=r$,DQ=PQ,MQ=Fj,RQ=G$,IQ=K$,LQ=pp,FQ=1,zQ=2;function BQ(e,t){return MQ(e)&&RQ(t)?IQ(LQ(e),t):function(r){var n=$Q(r,e);return n===void 0&&n===t?DQ(r,e):TQ(t,n,FQ|zQ)}}var UQ=BQ;function qQ(e){return e}var Wl=qQ;function VQ(e){return function(t){return t==null?void 0:t[e]}}var WQ=VQ,GQ=Gj;function KQ(e){return function(t){return GQ(t,e)}}var HQ=KQ,YQ=WQ,XQ=HQ,JQ=Fj,QQ=pp;function ZQ(e){return JQ(e)?YQ(QQ(e)):XQ(e)}var eZ=ZQ,tZ=gQ,rZ=UQ,nZ=Wl,sZ=Ir,aZ=eZ;function iZ(e){return typeof e=="function"?e:e==null?nZ:typeof e=="object"?sZ(e)?rZ(e[0],e[1]):tZ(e):aZ(e)}var cs=iZ;function oZ(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var H$=oZ;function lZ(e){return e!==e}var cZ=lZ;function uZ(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var dZ=uZ,hZ=H$,fZ=cZ,mZ=dZ;function pZ(e,t,r){return t===t?mZ(e,t,r):hZ(e,fZ,r)}var xZ=pZ,gZ=xZ;function yZ(e,t){var r=e==null?0:e.length;return!!r&&gZ(e,t,0)>-1}var vZ=yZ;function bZ(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var jZ=bZ;function wZ(){}var NZ=wZ,og=q$,SZ=NZ,_Z=rw,CZ=1/0,kZ=og&&1/_Z(new og([,-0]))[1]==CZ?function(e){return new og(e)}:SZ,AZ=kZ,OZ=$$,EZ=vZ,PZ=jZ,TZ=M$,$Z=AZ,DZ=rw,MZ=200;function RZ(e,t,r){var n=-1,a=EZ,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=PZ;else if(i>=MZ){var u=t?null:$Z(e);if(u)return DZ(u);o=!1,a=TZ,c=new OZ}else c=t?[]:l;e:for(;++n<i;){var h=e[n],d=t?t(h):h;if(h=r||h!==0?h:0,o&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue e;t&&c.push(d),l.push(h)}else a(c,d,r)||(c!==l&&c.push(d),l.push(h))}return l}var IZ=RZ,LZ=cs,FZ=IZ;function zZ(e,t){return e&&e.length?FZ(e,LZ(t)):[]}var BZ=zZ;const W_=Ye(BZ);function Y$(e,t,r){return t===!0?W_(e,r):Oe(t)?W_(e,t):e}function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}var UZ=["ref"];function G_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ds(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(r),!0).forEach(function(n){Pp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J$(n.key),n)}}function VZ(e,t,r){return t&&K_(e.prototype,t),r&&K_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WZ(e,t,r){return t=Rf(t),GZ(e,X$()?Reflect.construct(t,r||[],Rf(e).constructor):t.apply(e,r))}function GZ(e,t){if(t&&(rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KZ(e)}function KZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X$(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X$=function(){return!!e})()}function Rf(e){return Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rf(e)}function HZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zv(e,t)}function zv(e,t){return zv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zv(e,t)}function Pp(e,t,r){return t=J$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J$(e){var t=YZ(e,"string");return rl(t)=="symbol"?t:t+""}function YZ(e,t){if(rl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function XZ(e,t){if(e==null)return{};var r=JZ(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function JZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function QZ(e){return e.value}function ZZ(e,t){if(G.isValidElement(e))return G.cloneElement(e,t);if(typeof e=="function")return G.createElement(e,t);t.ref;var r=XZ(t,UZ);return G.createElement(tw,r)}var H_=1,Yr=function(e){function t(){var r;qZ(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=WZ(this,t,[].concat(a)),Pp(r,"lastBoundingBox",{width:-1,height:-1}),r}return HZ(t,e),VZ(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>H_||Math.abs(a.height-this.lastBoundingBox.height)>H_)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ds({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,h=a.chartHeight,d,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();f={top:((h||0)-b.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ds(ds({},d),f)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,h=a.payload,d=ds(ds({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return G.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},ZZ(i,ds(ds({},this.props),{},{payload:Y$(h,u,QZ)})))}}],[{key:"getWithHeight",value:function(n,a){var i=ds(ds({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&ie(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(j.PureComponent);Pp(Yr,"displayName","Legend");Pp(Yr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Y_=_d,eee=nw,tee=Ir,X_=Y_?Y_.isConcatSpreadable:void 0;function ree(e){return tee(e)||eee(e)||!!(X_&&e&&e[X_])}var nee=ree,see=I$,aee=nee;function Q$(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=aee),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?Q$(l,t-1,r,n,a):see(a,l):n||(a[a.length]=l)}return a}var Z$=Q$;function iee(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var oee=iee,lee=oee,cee=lee(),uee=cee,dee=uee,hee=Ep;function fee(e,t){return e&&dee(e,t,hee)}var e4=fee,mee=Cd;function pee(e,t){return function(r,n){if(r==null)return r;if(!mee(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var xee=pee,gee=e4,yee=xee,vee=yee(gee),ow=vee,bee=ow,jee=Cd;function wee(e,t){var r=-1,n=jee(e)?Array(e.length):[];return bee(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var t4=wee;function Nee(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var See=Nee,J_=Rl;function _ee(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=J_(e),o=t!==void 0,l=t===null,c=t===t,u=J_(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var Cee=_ee,kee=Cee;function Aee(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=kee(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Oee=Aee,lg=Wj,Eee=Gj,Pee=cs,Tee=t4,$ee=See,Dee=z$,Mee=Oee,Ree=Wl,Iee=Ir;function Lee(e,t,r){t.length?t=lg(t,function(i){return Iee(i)?function(o){return Eee(o,i.length===1?i[0]:i)}:i}):t=[Ree];var n=-1;t=lg(t,Dee(Pee));var a=Tee(e,function(i,o,l){var c=lg(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return $ee(a,function(i,o){return Mee(i,o,r)})}var Fee=Lee;function zee(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Bee=zee,Uee=Bee,Q_=Math.max;function qee(e,t,r){return t=Q_(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Q_(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),Uee(e,this,l)}}var Vee=qee;function Wee(e){return function(){return e}}var Gee=Wee,Kee=Ri,Hee=function(){try{var e=Kee(Object,"defineProperty");return e({},"",{}),e}catch{}}(),r4=Hee,Yee=Gee,Z_=r4,Xee=Wl,Jee=Z_?function(e,t){return Z_(e,"toString",{configurable:!0,enumerable:!1,value:Yee(t),writable:!0})}:Xee,Qee=Jee,Zee=800,ete=16,tte=Date.now;function rte(e){var t=0,r=0;return function(){var n=tte(),a=ete-(n-r);if(r=n,a>0){if(++t>=Zee)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var nte=rte,ste=Qee,ate=nte,ite=ate(ste),ote=ite,lte=Wl,cte=Vee,ute=ote;function dte(e,t){return ute(cte(e,t,lte),e+"")}var hte=dte,fte=Bj,mte=Cd,pte=sw,xte=$a;function gte(e,t,r){if(!xte(r))return!1;var n=typeof t;return(n=="number"?mte(r)&&pte(t,r.length):n=="string"&&t in r)?fte(r[t],e):!1}var Tp=gte,yte=Z$,vte=Fee,bte=hte,e2=Tp,jte=bte(function(e,t){if(e==null)return[];var r=t.length;return r>1&&e2(e,t[0],t[1])?t=[]:r>2&&e2(t[0],t[1],t[2])&&(t=[t[0]]),vte(e,yte(t,1),[])}),wte=jte;const lw=Ye(wte);function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(this,arguments)}function Nte(e,t){return kte(e)||Cte(e,t)||_te(e,t)||Ste()}function Ste(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _te(e,t){if(e){if(typeof e=="string")return t2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t2(e,t)}}function t2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function kte(e){if(Array.isArray(e))return e}function r2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(r),!0).forEach(function(n){Ate(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ate(e,t,r){return t=Ote(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ote(e){var t=Ete(e,"string");return ku(t)=="symbol"?t:t+""}function Ete(e,t){if(ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pte(e){return Array.isArray(e)&&Ut(e[0])&&Ut(e[1])?e.join(" ~ "):e}var Tte=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,h=t.payload,d=t.formatter,f=t.itemSorter,p=t.wrapperClassName,b=t.labelClassName,x=t.label,g=t.labelFormatter,y=t.accessibilityLayer,m=y===void 0?!1:y,v=function(){if(h&&h.length){var O={padding:0,margin:0},P=(f?lw(h,f):h).map(function(M,T){if(M.type==="none")return null;var F=cg({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),q=M.formatter||d||Pte,$=M.value,U=M.name,X=$,K=U;if(q&&X!=null&&K!=null){var z=q($,U,M,T,h);if(Array.isArray(z)){var H=Nte(z,2);X=H[0],K=H[1]}else X=z}return G.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:F},Ut(K)?G.createElement("span",{className:"recharts-tooltip-item-name"},K):null,Ut(K)?G.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,G.createElement("span",{className:"recharts-tooltip-item-value"},X),G.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return G.createElement("ul",{className:"recharts-tooltip-item-list",style:O},P)}return null},S=cg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=cg({margin:0},u),N=!Ee(x),_=N?x:"",C=Pe("recharts-default-tooltip",p),A=Pe("recharts-tooltip-label",b);N&&g&&h!==void 0&&h!==null&&(_=g(x,h));var k=m?{role:"status","aria-live":"assertive"}:{};return G.createElement("div",Bv({className:C,style:S},k),G.createElement("p",{className:A,style:w},G.isValidElement(_)?_:"".concat(_)),v())};function Au(e){"@babel/helpers - typeof";return Au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Au(e)}function oh(e,t,r){return t=$te(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $te(e){var t=Dte(e,"string");return Au(t)=="symbol"?t:t+""}function Dte(e,t){if(Au(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lc="recharts-tooltip-wrapper",Mte={visibility:"hidden"};function Rte(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Pe(lc,oh(oh(oh(oh({},"".concat(lc,"-right"),ie(r)&&t&&ie(t.x)&&r>=t.x),"".concat(lc,"-left"),ie(r)&&t&&ie(t.x)&&r<t.x),"".concat(lc,"-bottom"),ie(n)&&t&&ie(t.y)&&n>=t.y),"".concat(lc,"-top"),ie(n)&&t&&ie(t.y)&&n<t.y))}function n2(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&ie(i[n]))return i[n];var h=r[n]-l-a,d=r[n]+a;if(t[n])return o[n]?h:d;if(o[n]){var f=h,p=c[n];return f<p?Math.max(d,c[n]):Math.max(h,c[n])}var b=d+l,x=c[n]+u;return b>x?Math.max(h,c[n]):Math.max(d,c[n])}function Ite(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Lte(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,h,d;return o.height>0&&o.width>0&&r?(h=n2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=n2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Ite({translateX:h,translateY:d,useTranslate3d:l})):u=Mte,{cssProperties:u,cssClasses:Rte({translateX:h,translateY:d,coordinate:r})}}function nl(e){"@babel/helpers - typeof";return nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nl(e)}function s2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(r),!0).forEach(function(n){qv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s4(n.key),n)}}function Bte(e,t,r){return t&&zte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ute(e,t,r){return t=If(t),qte(e,n4()?Reflect.construct(t,r||[],If(e).constructor):t.apply(e,r))}function qte(e,t){if(t&&(nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vte(e)}function Vte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n4=function(){return!!e})()}function If(e){return If=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},If(e)}function Wte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uv(e,t)}function Uv(e,t){return Uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Uv(e,t)}function qv(e,t,r){return t=s4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s4(e){var t=Gte(e,"string");return nl(t)=="symbol"?t:t+""}function Gte(e,t){if(nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var i2=1,Kte=function(e){function t(){var r;Fte(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Ute(this,t,[].concat(a)),qv(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),qv(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,h;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(h=r.props.coordinate)===null||h===void 0?void 0:h.y)!==null&&u!==void 0?u:0}})}}),r}return Wte(t,e),Bte(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>i2||Math.abs(n.height-this.state.lastBoundingBox.height)>i2)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,h=a.coordinate,d=a.hasPayload,f=a.isAnimationActive,p=a.offset,b=a.position,x=a.reverseDirection,g=a.useTranslate3d,y=a.viewBox,m=a.wrapperStyle,v=Lte({allowEscapeViewBox:o,coordinate:h,offsetTopLeft:p,position:b,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),S=v.cssClasses,w=v.cssProperties,N=a2(a2({transition:f&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},m);return G.createElement("div",{tabIndex:-1,className:S,style:N,ref:function(C){n.wrapperNode=C}},u)}}])}(j.PureComponent),Hte=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ii={isSsr:Hte()};function sl(e){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){cw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i4(n.key),n)}}function Jte(e,t,r){return t&&Xte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qte(e,t,r){return t=Lf(t),Zte(e,a4()?Reflect.construct(t,r||[],Lf(e).constructor):t.apply(e,r))}function Zte(e,t){if(t&&(sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ere(e)}function ere(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a4=function(){return!!e})()}function Lf(e){return Lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lf(e)}function tre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vv(e,t)}function Vv(e,t){return Vv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Vv(e,t)}function cw(e,t,r){return t=i4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i4(e){var t=rre(e,"string");return sl(t)=="symbol"?t:t+""}function rre(e,t){if(sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function nre(e){return e.dataKey}function sre(e,t){return G.isValidElement(e)?G.cloneElement(e,t):typeof e=="function"?G.createElement(e,t):G.createElement(Tte,t)}var pt=function(e){function t(){return Yte(this,t),Qte(this,t,arguments)}return tre(t,e),Jte(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,h=a.coordinate,d=a.filterNull,f=a.isAnimationActive,p=a.offset,b=a.payload,x=a.payloadUniqBy,g=a.position,y=a.reverseDirection,m=a.useTranslate3d,v=a.viewBox,S=a.wrapperStyle,w=b??[];d&&w.length&&(w=Y$(b.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),x,nre));var N=w.length>0;return G.createElement(Kte,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:i,coordinate:h,hasPayload:N,offset:p,position:g,reverseDirection:y,useTranslate3d:m,viewBox:v,wrapperStyle:S},sre(u,l2(l2({},this.props),{},{payload:w})))}}])}(j.PureComponent);cw(pt,"displayName","Tooltip");cw(pt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ii.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var are=ls,ire=function(){return are.Date.now()},ore=ire,lre=/\s/;function cre(e){for(var t=e.length;t--&&lre.test(e.charAt(t)););return t}var ure=cre,dre=ure,hre=/^\s+/;function fre(e){return e&&e.slice(0,dre(e)+1).replace(hre,"")}var mre=fre,pre=mre,c2=$a,xre=Rl,u2=NaN,gre=/^[-+]0x[0-9a-f]+$/i,yre=/^0b[01]+$/i,vre=/^0o[0-7]+$/i,bre=parseInt;function jre(e){if(typeof e=="number")return e;if(xre(e))return u2;if(c2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=c2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=pre(e);var r=yre.test(e);return r||vre.test(e)?bre(e.slice(2),r?2:8):gre.test(e)?u2:+e}var o4=jre,wre=$a,ug=ore,d2=o4,Nre="Expected a function",Sre=Math.max,_re=Math.min;function Cre(e,t,r){var n,a,i,o,l,c,u=0,h=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(Nre);t=d2(t)||0,wre(r)&&(h=!!r.leading,d="maxWait"in r,i=d?Sre(d2(r.maxWait)||0,t):i,f="trailing"in r?!!r.trailing:f);function p(N){var _=n,C=a;return n=a=void 0,u=N,o=e.apply(C,_),o}function b(N){return u=N,l=setTimeout(y,t),h?p(N):o}function x(N){var _=N-c,C=N-u,A=t-_;return d?_re(A,i-C):A}function g(N){var _=N-c,C=N-u;return c===void 0||_>=t||_<0||d&&C>=i}function y(){var N=ug();if(g(N))return m(N);l=setTimeout(y,x(N))}function m(N){return l=void 0,f&&n?p(N):(n=a=void 0,o)}function v(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function S(){return l===void 0?o:m(ug())}function w(){var N=ug(),_=g(N);if(n=arguments,a=this,c=N,_){if(l===void 0)return b(c);if(d)return clearTimeout(l),l=setTimeout(y,t),p(c)}return l===void 0&&(l=setTimeout(y,t)),o}return w.cancel=v,w.flush=S,w}var kre=Cre,Are=kre,Ore=$a,Ere="Expected a function";function Pre(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Ere);return Ore(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Are(e,t,{leading:n,maxWait:t,trailing:a})}var Tre=Pre;const l4=Ye(Tre);function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}function h2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h2(Object(r),!0).forEach(function(n){$re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $re(e,t,r){return t=Dre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dre(e){var t=Mre(e,"string");return Ou(t)=="symbol"?t:t+""}function Mre(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rre(e,t){return zre(e)||Fre(e,t)||Lre(e,t)||Ire()}function Ire(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lre(e,t){if(e){if(typeof e=="string")return f2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f2(e,t)}}function f2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function zre(e){if(Array.isArray(e))return e}var Rr=j.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,h=u===void 0?0:u,d=e.minHeight,f=e.maxHeight,p=e.children,b=e.debounce,x=b===void 0?0:b,g=e.id,y=e.className,m=e.onResize,v=e.style,S=v===void 0?{}:v,w=j.useRef(null),N=j.useRef();N.current=m,j.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=j.useState({containerWidth:a.width,containerHeight:a.height}),C=Rre(_,2),A=C[0],k=C[1],E=j.useCallback(function(P,M){k(function(T){var F=Math.round(P),q=Math.round(M);return T.containerWidth===F&&T.containerHeight===q?T:{containerWidth:F,containerHeight:q}})},[]);j.useEffect(function(){var P=function(U){var X,K=U[0].contentRect,z=K.width,H=K.height;E(z,H),(X=N.current)===null||X===void 0||X.call(N,z,H)};x>0&&(P=l4(P,x,{trailing:!0,leading:!1}));var M=new ResizeObserver(P),T=w.current.getBoundingClientRect(),F=T.width,q=T.height;return E(F,q),M.observe(w.current),function(){M.disconnect()}},[E,x]);var O=j.useMemo(function(){var P=A.containerWidth,M=A.containerHeight;if(P<0||M<0)return null;zn(ii(o)||ii(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),zn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=ii(o)?P:o,F=ii(c)?M:c;r&&r>0&&(T?F=T/r:F&&(T=F*r),f&&F>f&&(F=f)),zn(T>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,F,o,c,h,d,r);var q=!Array.isArray(p)&&_s(p.type).endsWith("Chart");return G.Children.map(p,function($){return G.isValidElement($)?j.cloneElement($,lh({width:T,height:F},q?{style:lh({height:"100%",width:"100%",maxHeight:F,maxWidth:T},$.props.style)}:{})):$})},[r,p,c,f,d,h,A,o]);return G.createElement("div",{id:g?"".concat(g):void 0,className:Pe("recharts-responsive-container",y),style:lh(lh({},S),{},{width:o,height:c,minWidth:h,minHeight:d,maxHeight:f}),ref:w},O)}),Gl=function(t){return null};Gl.displayName="Cell";function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){Bre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bre(e,t,r){return t=Ure(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ure(e){var t=qre(e,"string");return Eu(t)=="symbol"?t:t+""}function qre(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ji={widthCache:{},cacheCount:0},Vre=2e3,Wre={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},p2="recharts_measurement_span";function Gre(e){var t=Wv({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var qc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ii.isSsr)return{width:0,height:0};var n=Gre(r),a=JSON.stringify({text:t,copyStyle:n});if(Ji.widthCache[a])return Ji.widthCache[a];try{var i=document.getElementById(p2);i||(i=document.createElement("span"),i.setAttribute("id",p2),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Wv(Wv({},Wre),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Ji.widthCache[a]=c,++Ji.cacheCount>Vre&&(Ji.cacheCount=0,Ji.widthCache={}),c}catch{return{width:0,height:0}}},Kre=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function Ff(e,t){return Jre(e)||Xre(e,t)||Yre(e,t)||Hre()}function Hre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yre(e,t){if(e){if(typeof e=="string")return x2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x2(e,t)}}function x2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xre(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Jre(e){if(Array.isArray(e))return e}function Qre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ene(n.key),n)}}function Zre(e,t,r){return t&&g2(e.prototype,t),r&&g2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ene(e){var t=tne(e,"string");return Pu(t)=="symbol"?t:t+""}function tne(e,t){if(Pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var y2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,v2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rne=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nne=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,c4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sne=Object.keys(c4),No="NaN";function ane(e,t){return e*c4[t]}var ch=function(){function e(t,r){Qre(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!rne.test(r)&&(this.num=NaN,this.unit=""),sne.includes(r)&&(this.num=ane(t,r),this.unit="px")}return Zre(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=nne.exec(r))!==null&&n!==void 0?n:[],i=Ff(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function u4(e){if(e.includes(No))return No;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=y2.exec(t))!==null&&r!==void 0?r:[],a=Ff(n,4),i=a[1],o=a[2],l=a[3],c=ch.parse(i??""),u=ch.parse(l??""),h=o==="*"?c.multiply(u):c.divide(u);if(h.isNaN())return No;t=t.replace(y2,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,f=(d=v2.exec(t))!==null&&d!==void 0?d:[],p=Ff(f,4),b=p[1],x=p[2],g=p[3],y=ch.parse(b??""),m=ch.parse(g??""),v=x==="+"?y.add(m):y.subtract(m);if(v.isNaN())return No;t=t.replace(v2,v.toString())}return t}var b2=/\(([^()]*)\)/;function ine(e){for(var t=e;t.includes("(");){var r=b2.exec(t),n=Ff(r,2),a=n[1];t=t.replace(b2,u4(a))}return t}function one(e){var t=e.replace(/\s+/g,"");return t=ine(t),t=u4(t),t}function lne(e){try{return one(e)}catch{return No}}function dg(e){var t=lne(e.slice(5,-1));return t===No?"":t}var cne=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],une=["dx","dy","angle","className","breakAll"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(this,arguments)}function j2(e,t){if(e==null)return{};var r=dne(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function w2(e,t){return pne(e)||mne(e,t)||fne(e,t)||hne()}function hne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fne(e,t){if(e){if(typeof e=="string")return N2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N2(e,t)}}function N2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pne(e){if(Array.isArray(e))return e}var d4=/[ \f\n\r\t\v\u2028\u2029]+/,h4=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];Ee(r)||(n?i=r.toString().split(""):i=r.toString().split(d4));var o=i.map(function(c){return{word:c,width:qc(c,a).width}}),l=n?0:qc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},xne=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,h=ie(o),d=l,f=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(F,q){var $=q.word,U=q.width,X=F[F.length-1];if(X&&(a==null||i||X.width+U+n<Number(a)))X.words.push($),X.width+=U+n;else{var K={words:[$],width:U};F.push(K)}return F},[])},p=f(r),b=function(T){return T.reduce(function(F,q){return F.width>q.width?F:q})};if(!h)return p;for(var x="",g=function(T){var F=d.slice(0,T),q=h4({breakAll:u,style:c,children:F+x}).wordsWithComputedWidth,$=f(q),U=$.length>o||b($).width>Number(a);return[U,$]},y=0,m=d.length-1,v=0,S;y<=m&&v<=d.length-1;){var w=Math.floor((y+m)/2),N=w-1,_=g(N),C=w2(_,2),A=C[0],k=C[1],E=g(w),O=w2(E,1),P=O[0];if(!A&&!P&&(y=w+1),A&&P&&(m=w-1),!A&&P){S=k;break}v++}return S||p},S2=function(t){var r=Ee(t)?[]:t.toString().split(d4);return[{words:r}]},gne=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Ii.isSsr){var c,u,h=h4({breakAll:o,children:a,style:i});if(h){var d=h.wordsWithComputedWidth,f=h.spaceWidth;c=d,u=f}else return S2(a);return xne({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return S2(a)},_2="#808080",Ci=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,h=t.scaleToFit,d=h===void 0?!1:h,f=t.textAnchor,p=f===void 0?"start":f,b=t.verticalAnchor,x=b===void 0?"end":b,g=t.fill,y=g===void 0?_2:g,m=j2(t,cne),v=j.useMemo(function(){return gne({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:d,style:m.style,width:m.width})},[m.breakAll,m.children,m.maxLines,d,m.style,m.width]),S=m.dx,w=m.dy,N=m.angle,_=m.className,C=m.breakAll,A=j2(m,une);if(!Ut(n)||!Ut(i))return null;var k=n+(ie(S)?S:0),E=i+(ie(w)?w:0),O;switch(x){case"start":O=dg("calc(".concat(u,")"));break;case"middle":O=dg("calc(".concat((v.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=dg("calc(".concat(v.length-1," * -").concat(l,")"));break}var P=[];if(d){var M=v[0].width,T=m.width;P.push("scale(".concat((ie(T)?T/M:1)/M,")"))}return N&&P.push("rotate(".concat(N,", ").concat(k,", ").concat(E,")")),P.length&&(A.transform=P.join(" ")),G.createElement("text",Gv({},we(A,!0),{x:k,y:E,className:Pe("recharts-text",_),textAnchor:p,fill:y.includes("url")?_2:y}),v.map(function(F,q){var $=F.words.join(C?"":" ");return G.createElement("tspan",{x:k,dy:q===0?O:l,key:"".concat($,"-").concat(q)},$)}))};function ba(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yne(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uw(e){let t,r,n;e.length!==2?(t=ba,r=(l,c)=>ba(e(l),c),n=(l,c)=>e(l)-c):(t=e===ba||e===yne?e:vne,r=e,n=e);function a(l,c,u=0,h=l.length){if(u<h){if(t(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<0?u=d+1:h=d}while(u<h)}return u}function i(l,c,u=0,h=l.length){if(u<h){if(t(c,c)!==0)return h;do{const d=u+h>>>1;r(l[d],c)<=0?u=d+1:h=d}while(u<h)}return u}function o(l,c,u=0,h=l.length){const d=a(l,c,u,h-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:a,center:o,right:i}}function vne(){return 0}function f4(e){return e===null?NaN:+e}function*bne(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const jne=uw(ba),kd=jne.right;uw(f4).center;class C2 extends Map{constructor(t,r=Sne){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(k2(this,t))}has(t){return super.has(k2(this,t))}set(t,r){return super.set(wne(this,t),r)}delete(t){return super.delete(Nne(this,t))}}function k2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function wne({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Nne({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Sne(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _ne(e=ba){if(e===ba)return m4;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function m4(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Cne=Math.sqrt(50),kne=Math.sqrt(10),Ane=Math.sqrt(2);function zf(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Cne?10:i>=kne?5:i>=Ane?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?zf(e,t,r*2):[l,c,u]}function Kv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?zf(t,e,r):zf(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function Hv(e,t,r){return t=+t,e=+e,r=+r,zf(e,t,r)[2]}function Yv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Hv(t,e,r):Hv(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function A2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function O2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function p4(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?m4:_ne(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,h=Math.log(c),d=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/c+f)),b=Math.min(n,Math.floor(t+(c-u)*d/c+f));p4(e,t,p,b,a)}const i=e[t];let o=r,l=n;for(cc(e,r,t),a(e[n],i)>0&&cc(e,r,n);o<l;){for(cc(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?cc(e,r,l):(++l,cc(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function cc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function One(e,t,r){if(e=Float64Array.from(bne(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return O2(e);if(t>=1)return A2(e);var n,a=(n-1)*t,i=Math.floor(a),o=A2(p4(e,i).subarray(0,i+1)),l=O2(e.subarray(i+1));return o+(l-o)*(a-i)}}function Ene(e,t,r=f4){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Pne(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Nn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ws(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Xv=Symbol("implicit");function dw(){var e=new C2,t=[],r=[],n=Xv;function a(i){let o=e.get(i);if(o===void 0){if(n!==Xv)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new C2;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return dw(t,r).unknown(n)},Nn.apply(a,arguments),a}function Tu(){var e=dw().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,h=.5;delete e.unknown;function d(){var f=t().length,p=a<n,b=p?a:n,x=p?n:a;i=(x-b)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),b+=(x-b-i*(f-c))*h,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var g=Pne(f).map(function(y){return b+i*y});return r(p?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([n,a]=f,n=+n,a=+a,d()):[n,a]},e.rangeRound=function(f){return[n,a]=f,n=+n,a=+a,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,d()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),d()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),d()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),d()):h},e.copy=function(){return Tu(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(h)},Nn.apply(d(),arguments)}function x4(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return x4(t())},e}function Vc(){return x4(Tu.apply(null,arguments).paddingInner(1))}function hw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function g4(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ad(){}var $u=.7,Bf=1/$u,Ro="\\s*([+-]?\\d+)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tne=/^#([0-9a-f]{3,8})$/,$ne=new RegExp(`^rgb\\(${Ro},${Ro},${Ro}\\)$`),Dne=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),Mne=new RegExp(`^rgba\\(${Ro},${Ro},${Ro},${Du}\\)$`),Rne=new RegExp(`^rgba\\(${rs},${rs},${rs},${Du}\\)$`),Ine=new RegExp(`^hsl\\(${Du},${rs},${rs}\\)$`),Lne=new RegExp(`^hsla\\(${Du},${rs},${rs},${Du}\\)$`),E2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hw(Ad,Mu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:P2,formatHex:P2,formatHex8:Fne,formatHsl:zne,formatRgb:T2,toString:T2});function P2(){return this.rgb().formatHex()}function Fne(){return this.rgb().formatHex8()}function zne(){return y4(this).formatHsl()}function T2(){return this.rgb().formatRgb()}function Mu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Tne.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$2(t):r===3?new Er(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?uh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?uh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$ne.exec(e))?new Er(t[1],t[2],t[3],1):(t=Dne.exec(e))?new Er(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Mne.exec(e))?uh(t[1],t[2],t[3],t[4]):(t=Rne.exec(e))?uh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ine.exec(e))?R2(t[1],t[2]/100,t[3]/100,1):(t=Lne.exec(e))?R2(t[1],t[2]/100,t[3]/100,t[4]):E2.hasOwnProperty(e)?$2(E2[e]):e==="transparent"?new Er(NaN,NaN,NaN,0):null}function $2(e){return new Er(e>>16&255,e>>8&255,e&255,1)}function uh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Er(e,t,r,n)}function Bne(e){return e instanceof Ad||(e=Mu(e)),e?(e=e.rgb(),new Er(e.r,e.g,e.b,e.opacity)):new Er}function Jv(e,t,r,n){return arguments.length===1?Bne(e):new Er(e,t,r,n??1)}function Er(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}hw(Er,Jv,g4(Ad,{brighter(e){return e=e==null?Bf:Math.pow(Bf,e),new Er(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$u:Math.pow($u,e),new Er(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Er(pi(this.r),pi(this.g),pi(this.b),Uf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D2,formatHex:D2,formatHex8:Une,formatRgb:M2,toString:M2}));function D2(){return`#${oi(this.r)}${oi(this.g)}${oi(this.b)}`}function Une(){return`#${oi(this.r)}${oi(this.g)}${oi(this.b)}${oi((isNaN(this.opacity)?1:this.opacity)*255)}`}function M2(){const e=Uf(this.opacity);return`${e===1?"rgb(":"rgba("}${pi(this.r)}, ${pi(this.g)}, ${pi(this.b)}${e===1?")":`, ${e})`}`}function Uf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function oi(e){return e=pi(e),(e<16?"0":"")+e.toString(16)}function R2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new In(e,t,r,n)}function y4(e){if(e instanceof In)return new In(e.h,e.s,e.l,e.opacity);if(e instanceof Ad||(e=Mu(e)),!e)return new In;if(e instanceof In)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new In(o,l,c,e.opacity)}function qne(e,t,r,n){return arguments.length===1?y4(e):new In(e,t,r,n??1)}function In(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}hw(In,qne,g4(Ad,{brighter(e){return e=e==null?Bf:Math.pow(Bf,e),new In(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$u:Math.pow($u,e),new In(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Er(hg(e>=240?e-240:e+120,a,n),hg(e,a,n),hg(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new In(I2(this.h),dh(this.s),dh(this.l),Uf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uf(this.opacity);return`${e===1?"hsl(":"hsla("}${I2(this.h)}, ${dh(this.s)*100}%, ${dh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function I2(e){return e=(e||0)%360,e<0?e+360:e}function dh(e){return Math.max(0,Math.min(1,e||0))}function hg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const fw=e=>()=>e;function Vne(e,t){return function(r){return e+r*t}}function Wne(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Gne(e){return(e=+e)==1?v4:function(t,r){return r-t?Wne(t,r,e):fw(isNaN(t)?r:t)}}function v4(e,t){var r=t-e;return r?Vne(e,r):fw(isNaN(e)?t:e)}const L2=function e(t){var r=Gne(t);function n(a,i){var o=r((a=Jv(a)).r,(i=Jv(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=v4(a.opacity,i.opacity);return function(h){return a.r=o(h),a.g=l(h),a.b=c(h),a.opacity=u(h),a+""}}return n.gamma=e,n}(1);function Kne(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function Hne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Yne(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Kl(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function Xne(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function qf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Jne(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Kl(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var Qv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fg=new RegExp(Qv.source,"g");function Qne(e){return function(){return e}}function Zne(e){return function(t){return e(t)+""}}function ese(e,t){var r=Qv.lastIndex=fg.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Qv.exec(e))&&(a=fg.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:qf(n,a)})),r=fg.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Zne(c[0].x):Qne(t):(t=c.length,function(u){for(var h=0,d;h<t;++h)l[(d=c[h]).i]=d.x(u);return l.join("")})}function Kl(e,t){var r=typeof t,n;return t==null||r==="boolean"?fw(t):(r==="number"?qf:r==="string"?(n=Mu(t))?(t=n,L2):ese:t instanceof Mu?L2:t instanceof Date?Xne:Hne(t)?Kne:Array.isArray(t)?Yne:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Jne:qf)(e,t)}function mw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function tse(e,t){t===void 0&&(t=e,e=Kl);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function rse(e){return function(){return e}}function Vf(e){return+e}var F2=[0,1];function br(e){return e}function Zv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:rse(isNaN(t)?NaN:.5)}function nse(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function sse(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Zv(a,n),i=r(o,i)):(n=Zv(n,a),i=r(i,o)),function(l){return i(n(l))}}function ase(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Zv(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=kd(e,l,1,n)-1;return i[c](a[c](l))}}function Od(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $p(){var e=F2,t=F2,r=Kl,n,a,i,o=br,l,c,u;function h(){var f=Math.min(e.length,t.length);return o!==br&&(o=nse(e[0],e[f-1])),l=f>2?ase:sse,c=u=null,d}function d(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(n),t,r)))(n(o(f)))}return d.invert=function(f){return o(a((u||(u=l(t,e.map(n),qf)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,Vf),h()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),r=mw,h()},d.clamp=function(f){return arguments.length?(o=f?!0:br,h()):o!==br},d.interpolate=function(f){return arguments.length?(r=f,h()):r},d.unknown=function(f){return arguments.length?(i=f,d):i},function(f,p){return n=f,a=p,h()}}function pw(){return $p()(br,br)}function ise(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Wf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function al(e){return e=Wf(Math.abs(e)),e?e[1]:NaN}function ose(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function lse(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var cse=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ru(e){if(!(t=cse.exec(e)))throw new Error("invalid format: "+e);var t;return new xw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ru.prototype=xw.prototype;function xw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}xw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function use(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var b4;function dse(e,t){var r=Wf(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(b4=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Wf(e,Math.max(0,t+i-1))[0]}function z2(e,t){var r=Wf(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const B2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ise,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>z2(e*100,t),r:z2,s:dse,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function U2(e){return e}var q2=Array.prototype.map,V2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hse(e){var t=e.grouping===void 0||e.thousands===void 0?U2:ose(q2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?U2:lse(q2.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Ru(d);var f=d.fill,p=d.align,b=d.sign,x=d.symbol,g=d.zero,y=d.width,m=d.comma,v=d.precision,S=d.trim,w=d.type;w==="n"?(m=!0,w="g"):B2[w]||(v===void 0&&(v=12),S=!0,w="g"),(g||f==="0"&&p==="=")&&(g=!0,f="0",p="=");var N=x==="$"?r:x==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=x==="$"?n:/[%p]/.test(w)?o:"",C=B2[w],A=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function k(E){var O=N,P=_,M,T,F;if(w==="c")P=C(E)+P,E="";else{E=+E;var q=E<0||1/E<0;if(E=isNaN(E)?c:C(Math.abs(E),v),S&&(E=use(E)),q&&+E==0&&b!=="+"&&(q=!1),O=(q?b==="("?b:l:b==="-"||b==="("?"":b)+O,P=(w==="s"?V2[8+b4/3]:"")+P+(q&&b==="("?")":""),A){for(M=-1,T=E.length;++M<T;)if(F=E.charCodeAt(M),48>F||F>57){P=(F===46?a+E.slice(M+1):E.slice(M))+P,E=E.slice(0,M);break}}}m&&!g&&(E=t(E,1/0));var $=O.length+E.length+P.length,U=$<y?new Array(y-$+1).join(f):"";switch(m&&g&&(E=t(U+E,U.length?y-P.length:1/0),U=""),p){case"<":E=O+E+P+U;break;case"=":E=O+U+E+P;break;case"^":E=U.slice(0,$=U.length>>1)+O+E+P+U.slice($);break;default:E=U+O+E+P;break}return i(E)}return k.toString=function(){return d+""},k}function h(d,f){var p=u((d=Ru(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(al(f)/3)))*3,x=Math.pow(10,-b),g=V2[8+b/3];return function(y){return p(x*y)+g}}return{format:u,formatPrefix:h}}var hh,gw,j4;fse({thousands:",",grouping:[3],currency:["$",""]});function fse(e){return hh=hse(e),gw=hh.format,j4=hh.formatPrefix,hh}function mse(e){return Math.max(0,-al(Math.abs(e)))}function pse(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(al(t)/3)))*3-al(Math.abs(e)))}function xse(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,al(t)-al(e))+1}function w4(e,t,r,n){var a=Yv(e,t,r),i;switch(n=Ru(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=pse(a,o))&&(n.precision=i),j4(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=xse(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=mse(a))&&(n.precision=i-(n.type==="%")*2);break}}return gw(n)}function Da(e){var t=e.domain;return e.ticks=function(r){var n=t();return Kv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return w4(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,h=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);h-- >0;){if(u=Hv(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Gf(){var e=pw();return e.copy=function(){return Od(e,Gf())},Nn.apply(e,arguments),Da(e)}function N4(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Vf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return N4(e).unknown(t)},e=arguments.length?Array.from(e,Vf):[0,1],Da(r)}function S4(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function W2(e){return Math.log(e)}function G2(e){return Math.exp(e)}function gse(e){return-Math.log(-e)}function yse(e){return-Math.exp(-e)}function vse(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bse(e){return e===10?vse:e===Math.E?Math.exp:t=>Math.pow(e,t)}function jse(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function K2(e){return(t,r)=>-e(-t,r)}function yw(e){const t=e(W2,G2),r=t.domain;let n=10,a,i;function o(){return a=jse(n),i=bse(n),r()[0]<0?(a=K2(a),i=K2(i),e(gse,yse)):e(W2,G2),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],h=c[c.length-1];const d=h<u;d&&([u,h]=[h,u]);let f=a(u),p=a(h),b,x;const g=l==null?10:+l;let y=[];if(!(n%1)&&p-f<g){if(f=Math.floor(f),p=Math.ceil(p),u>0){for(;f<=p;++f)for(b=1;b<n;++b)if(x=f<0?b/i(-f):b*i(f),!(x<u)){if(x>h)break;y.push(x)}}else for(;f<=p;++f)for(b=n-1;b>=1;--b)if(x=f>0?b/i(-f):b*i(f),!(x<u)){if(x>h)break;y.push(x)}y.length*2<g&&(y=Kv(u,h,g))}else y=Kv(f,p,Math.min(p-f,g)).map(i);return d?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ru(c)).precision==null&&(c.trim=!0),c=gw(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return h=>{let d=h/i(Math.round(a(h)));return d*n<n-.5&&(d*=n),d<=u?c(h):""}},t.nice=()=>r(S4(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function _4(){const e=yw($p()).domain([1,10]);return e.copy=()=>Od(e,_4()).base(e.base()),Nn.apply(e,arguments),e}function H2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Y2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vw(e){var t=1,r=e(H2(t),Y2(t));return r.constant=function(n){return arguments.length?e(H2(t=+n),Y2(t)):t},Da(r)}function C4(){var e=vw($p());return e.copy=function(){return Od(e,C4()).constant(e.constant())},Nn.apply(e,arguments)}function X2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wse(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Nse(e){return e<0?-e*e:e*e}function bw(e){var t=e(br,br),r=1;function n(){return r===1?e(br,br):r===.5?e(wse,Nse):e(X2(r),X2(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Da(t)}function jw(){var e=bw($p());return e.copy=function(){return Od(e,jw()).exponent(e.exponent())},Nn.apply(e,arguments),e}function Sse(){return jw.apply(null,arguments).exponent(.5)}function J2(e){return Math.sign(e)*e*e}function _se(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function k4(){var e=pw(),t=[0,1],r=!1,n;function a(i){var o=_se(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(J2(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Vf)).map(J2)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return k4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Nn.apply(a,arguments),Da(a)}function A4(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Ene(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[kd(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ba),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return A4().domain(e).range(t).unknown(n)},Nn.apply(i,arguments)}function O4(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[kd(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return O4().domain([e,t]).range(a).unknown(i)},Nn.apply(Da(o),arguments)}function E4(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[kd(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return E4().domain(e).range(t).unknown(r)},Nn.apply(a,arguments)}const mg=new Date,pg=new Date;function Wt(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Wt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(mg.setTime(+i),pg.setTime(+o),e(mg),e(pg),Math.floor(r(mg,pg))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Kf=Wt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Kf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Kf);Kf.range;const vs=1e3,mn=vs*60,bs=mn*60,Ds=bs*24,ww=Ds*7,Q2=Ds*30,xg=Ds*365,li=Wt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*vs)},(e,t)=>(t-e)/vs,e=>e.getUTCSeconds());li.range;const Nw=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vs)},(e,t)=>{e.setTime(+e+t*mn)},(e,t)=>(t-e)/mn,e=>e.getMinutes());Nw.range;const Sw=Wt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*mn)},(e,t)=>(t-e)/mn,e=>e.getUTCMinutes());Sw.range;const _w=Wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*vs-e.getMinutes()*mn)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getHours());_w.range;const Cw=Wt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getUTCHours());Cw.range;const Ed=Wt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*mn)/Ds,e=>e.getDate()-1);Ed.range;const Dp=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ds,e=>e.getUTCDate()-1);Dp.range;const P4=Wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ds,e=>Math.floor(e/Ds));P4.range;function Li(e){return Wt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*mn)/ww)}const Mp=Li(0),Hf=Li(1),Cse=Li(2),kse=Li(3),il=Li(4),Ase=Li(5),Ose=Li(6);Mp.range;Hf.range;Cse.range;kse.range;il.range;Ase.range;Ose.range;function Fi(e){return Wt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ww)}const Rp=Fi(0),Yf=Fi(1),Ese=Fi(2),Pse=Fi(3),ol=Fi(4),Tse=Fi(5),$se=Fi(6);Rp.range;Yf.range;Ese.range;Pse.range;ol.range;Tse.range;$se.range;const kw=Wt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kw.range;const Aw=Wt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Aw.range;const Ms=Wt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ms.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Ms.range;const Rs=Wt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Rs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Rs.range;function T4(e,t,r,n,a,i){const o=[[li,1,vs],[li,5,5*vs],[li,15,15*vs],[li,30,30*vs],[i,1,mn],[i,5,5*mn],[i,15,15*mn],[i,30,30*mn],[a,1,bs],[a,3,3*bs],[a,6,6*bs],[a,12,12*bs],[n,1,Ds],[n,2,2*Ds],[r,1,ww],[t,1,Q2],[t,3,3*Q2],[e,1,xg]];function l(u,h,d){const f=h<u;f&&([u,h]=[h,u]);const p=d&&typeof d.range=="function"?d:c(u,h,d),b=p?p.range(u,+h+1):[];return f?b.reverse():b}function c(u,h,d){const f=Math.abs(h-u)/d,p=uw(([,,g])=>g).right(o,f);if(p===o.length)return e.every(Yv(u/xg,h/xg,d));if(p===0)return Kf.every(Math.max(Yv(u,h,d),1));const[b,x]=o[f/o[p-1][2]<o[p][2]/f?p-1:p];return b.every(x)}return[l,c]}const[Dse,Mse]=T4(Rs,Aw,Rp,P4,Cw,Sw),[Rse,Ise]=T4(Ms,kw,Mp,Ed,_w,Nw);function gg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Lse(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=dc(a),h=hc(a),d=dc(i),f=hc(i),p=dc(o),b=hc(o),x=dc(l),g=hc(l),y=dc(c),m=hc(c),v={a:q,A:$,b:U,B:X,c:null,d:sC,e:sC,f:oae,g:gae,G:vae,H:sae,I:aae,j:iae,L:$4,m:lae,M:cae,p:K,q:z,Q:oC,s:lC,S:uae,u:dae,U:hae,V:fae,w:mae,W:pae,x:null,X:null,y:xae,Y:yae,Z:bae,"%":iC},S={a:H,A:Q,b:se,B:ue,c:null,d:aC,e:aC,f:Sae,g:Dae,G:Rae,H:jae,I:wae,j:Nae,L:M4,m:_ae,M:Cae,p:ye,q:me,Q:oC,s:lC,S:kae,u:Aae,U:Oae,V:Eae,w:Pae,W:Tae,x:null,X:null,y:$ae,Y:Mae,Z:Iae,"%":iC},w={a:k,A:E,b:O,B:P,c:M,d:rC,e:rC,f:eae,g:tC,G:eC,H:nC,I:nC,j:Xse,L:Zse,m:Yse,M:Jse,p:A,q:Hse,Q:rae,s:nae,S:Qse,u:qse,U:Vse,V:Wse,w:Use,W:Gse,x:T,X:F,y:tC,Y:eC,Z:Kse,"%":tae};v.x=N(r,v),v.X=N(n,v),v.c=N(t,v),S.x=N(r,S),S.X=N(n,S),S.c=N(t,S);function N(L,W){return function(Y){var V=[],ee=-1,Z=0,re=L.length,de,Ne,ne;for(Y instanceof Date||(Y=new Date(+Y));++ee<re;)L.charCodeAt(ee)===37&&(V.push(L.slice(Z,ee)),(Ne=Z2[de=L.charAt(++ee)])!=null?de=L.charAt(++ee):Ne=de==="e"?" ":"0",(ne=W[de])&&(de=ne(Y,Ne)),V.push(de),Z=ee+1);return V.push(L.slice(Z,ee)),V.join("")}}function _(L,W){return function(Y){var V=uc(1900,void 0,1),ee=C(V,L,Y+="",0),Z,re;if(ee!=Y.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(W&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(Z=yg(uc(V.y,0,1)),re=Z.getUTCDay(),Z=re>4||re===0?Yf.ceil(Z):Yf(Z),Z=Dp.offset(Z,(V.V-1)*7),V.y=Z.getUTCFullYear(),V.m=Z.getUTCMonth(),V.d=Z.getUTCDate()+(V.w+6)%7):(Z=gg(uc(V.y,0,1)),re=Z.getDay(),Z=re>4||re===0?Hf.ceil(Z):Hf(Z),Z=Ed.offset(Z,(V.V-1)*7),V.y=Z.getFullYear(),V.m=Z.getMonth(),V.d=Z.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),re="Z"in V?yg(uc(V.y,0,1)).getUTCDay():gg(uc(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(re+5)%7:V.w+V.U*7-(re+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,yg(V)):gg(V)}}function C(L,W,Y,V){for(var ee=0,Z=W.length,re=Y.length,de,Ne;ee<Z;){if(V>=re)return-1;if(de=W.charCodeAt(ee++),de===37){if(de=W.charAt(ee++),Ne=w[de in Z2?W.charAt(ee++):de],!Ne||(V=Ne(L,Y,V))<0)return-1}else if(de!=Y.charCodeAt(V++))return-1}return V}function A(L,W,Y){var V=u.exec(W.slice(Y));return V?(L.p=h.get(V[0].toLowerCase()),Y+V[0].length):-1}function k(L,W,Y){var V=p.exec(W.slice(Y));return V?(L.w=b.get(V[0].toLowerCase()),Y+V[0].length):-1}function E(L,W,Y){var V=d.exec(W.slice(Y));return V?(L.w=f.get(V[0].toLowerCase()),Y+V[0].length):-1}function O(L,W,Y){var V=y.exec(W.slice(Y));return V?(L.m=m.get(V[0].toLowerCase()),Y+V[0].length):-1}function P(L,W,Y){var V=x.exec(W.slice(Y));return V?(L.m=g.get(V[0].toLowerCase()),Y+V[0].length):-1}function M(L,W,Y){return C(L,t,W,Y)}function T(L,W,Y){return C(L,r,W,Y)}function F(L,W,Y){return C(L,n,W,Y)}function q(L){return o[L.getDay()]}function $(L){return i[L.getDay()]}function U(L){return c[L.getMonth()]}function X(L){return l[L.getMonth()]}function K(L){return a[+(L.getHours()>=12)]}function z(L){return 1+~~(L.getMonth()/3)}function H(L){return o[L.getUTCDay()]}function Q(L){return i[L.getUTCDay()]}function se(L){return c[L.getUTCMonth()]}function ue(L){return l[L.getUTCMonth()]}function ye(L){return a[+(L.getUTCHours()>=12)]}function me(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var W=N(L+="",v);return W.toString=function(){return L},W},parse:function(L){var W=_(L+="",!1);return W.toString=function(){return L},W},utcFormat:function(L){var W=N(L+="",S);return W.toString=function(){return L},W},utcParse:function(L){var W=_(L+="",!0);return W.toString=function(){return L},W}}}var Z2={"-":"",_:" ",0:"0"},Xt=/^\s*\d+/,Fse=/^%/,zse=/[\\^$*+?|[\]().{}]/g;function Ve(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function Bse(e){return e.replace(zse,"\\$&")}function dc(e){return new RegExp("^(?:"+e.map(Bse).join("|")+")","i")}function hc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Use(e,t,r){var n=Xt.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function qse(e,t,r){var n=Xt.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Vse(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Wse(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Gse(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function eC(e,t,r){var n=Xt.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function tC(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Kse(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Hse(e,t,r){var n=Xt.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Yse(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function rC(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Xse(e,t,r){var n=Xt.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function nC(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Jse(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Qse(e,t,r){var n=Xt.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Zse(e,t,r){var n=Xt.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function eae(e,t,r){var n=Xt.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function tae(e,t,r){var n=Fse.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function rae(e,t,r){var n=Xt.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function nae(e,t,r){var n=Xt.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function sC(e,t){return Ve(e.getDate(),t,2)}function sae(e,t){return Ve(e.getHours(),t,2)}function aae(e,t){return Ve(e.getHours()%12||12,t,2)}function iae(e,t){return Ve(1+Ed.count(Ms(e),e),t,3)}function $4(e,t){return Ve(e.getMilliseconds(),t,3)}function oae(e,t){return $4(e,t)+"000"}function lae(e,t){return Ve(e.getMonth()+1,t,2)}function cae(e,t){return Ve(e.getMinutes(),t,2)}function uae(e,t){return Ve(e.getSeconds(),t,2)}function dae(e){var t=e.getDay();return t===0?7:t}function hae(e,t){return Ve(Mp.count(Ms(e)-1,e),t,2)}function D4(e){var t=e.getDay();return t>=4||t===0?il(e):il.ceil(e)}function fae(e,t){return e=D4(e),Ve(il.count(Ms(e),e)+(Ms(e).getDay()===4),t,2)}function mae(e){return e.getDay()}function pae(e,t){return Ve(Hf.count(Ms(e)-1,e),t,2)}function xae(e,t){return Ve(e.getFullYear()%100,t,2)}function gae(e,t){return e=D4(e),Ve(e.getFullYear()%100,t,2)}function yae(e,t){return Ve(e.getFullYear()%1e4,t,4)}function vae(e,t){var r=e.getDay();return e=r>=4||r===0?il(e):il.ceil(e),Ve(e.getFullYear()%1e4,t,4)}function bae(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ve(t/60|0,"0",2)+Ve(t%60,"0",2)}function aC(e,t){return Ve(e.getUTCDate(),t,2)}function jae(e,t){return Ve(e.getUTCHours(),t,2)}function wae(e,t){return Ve(e.getUTCHours()%12||12,t,2)}function Nae(e,t){return Ve(1+Dp.count(Rs(e),e),t,3)}function M4(e,t){return Ve(e.getUTCMilliseconds(),t,3)}function Sae(e,t){return M4(e,t)+"000"}function _ae(e,t){return Ve(e.getUTCMonth()+1,t,2)}function Cae(e,t){return Ve(e.getUTCMinutes(),t,2)}function kae(e,t){return Ve(e.getUTCSeconds(),t,2)}function Aae(e){var t=e.getUTCDay();return t===0?7:t}function Oae(e,t){return Ve(Rp.count(Rs(e)-1,e),t,2)}function R4(e){var t=e.getUTCDay();return t>=4||t===0?ol(e):ol.ceil(e)}function Eae(e,t){return e=R4(e),Ve(ol.count(Rs(e),e)+(Rs(e).getUTCDay()===4),t,2)}function Pae(e){return e.getUTCDay()}function Tae(e,t){return Ve(Yf.count(Rs(e)-1,e),t,2)}function $ae(e,t){return Ve(e.getUTCFullYear()%100,t,2)}function Dae(e,t){return e=R4(e),Ve(e.getUTCFullYear()%100,t,2)}function Mae(e,t){return Ve(e.getUTCFullYear()%1e4,t,4)}function Rae(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ol(e):ol.ceil(e),Ve(e.getUTCFullYear()%1e4,t,4)}function Iae(){return"+0000"}function iC(){return"%"}function oC(e){return+e}function lC(e){return Math.floor(+e/1e3)}var Qi,I4,L4;Lae({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Lae(e){return Qi=Lse(e),I4=Qi.format,Qi.parse,L4=Qi.utcFormat,Qi.utcParse,Qi}function Fae(e){return new Date(e)}function zae(e){return e instanceof Date?+e:+new Date(+e)}function Ow(e,t,r,n,a,i,o,l,c,u){var h=pw(),d=h.invert,f=h.domain,p=u(".%L"),b=u(":%S"),x=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),m=u("%b %d"),v=u("%B"),S=u("%Y");function w(N){return(c(N)<N?p:l(N)<N?b:o(N)<N?x:i(N)<N?g:n(N)<N?a(N)<N?y:m:r(N)<N?v:S)(N)}return h.invert=function(N){return new Date(d(N))},h.domain=function(N){return arguments.length?f(Array.from(N,zae)):f().map(Fae)},h.ticks=function(N){var _=f();return e(_[0],_[_.length-1],N??10)},h.tickFormat=function(N,_){return _==null?w:u(_)},h.nice=function(N){var _=f();return(!N||typeof N.range!="function")&&(N=t(_[0],_[_.length-1],N??10)),N?f(S4(_,N)):h},h.copy=function(){return Od(h,Ow(e,t,r,n,a,i,o,l,c,u))},h}function Bae(){return Nn.apply(Ow(Rse,Ise,Ms,kw,Mp,Ed,_w,Nw,li,I4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uae(){return Nn.apply(Ow(Dse,Mse,Rs,Aw,Rp,Dp,Cw,Sw,li,L4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ip(){var e=0,t=1,r,n,a,i,o=br,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(a===0?.5:(d=(i(d)-r)*a,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function h(d){return function(f){var p,b;return arguments.length?([p,b]=f,o=d(p,b),u):[o(0),o(1)]}}return u.range=h(Kl),u.rangeRound=h(mw),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),a=r===n?0:1/(n-r),u}}function Ma(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function F4(){var e=Da(Ip()(br));return e.copy=function(){return Ma(e,F4())},Ws.apply(e,arguments)}function z4(){var e=yw(Ip()).domain([1,10]);return e.copy=function(){return Ma(e,z4()).base(e.base())},Ws.apply(e,arguments)}function B4(){var e=vw(Ip());return e.copy=function(){return Ma(e,B4()).constant(e.constant())},Ws.apply(e,arguments)}function Ew(){var e=bw(Ip());return e.copy=function(){return Ma(e,Ew()).exponent(e.exponent())},Ws.apply(e,arguments)}function qae(){return Ew.apply(null,arguments).exponent(.5)}function U4(){var e=[],t=br;function r(n){if(n!=null&&!isNaN(n=+n))return t((kd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ba),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>One(e,i/n))},r.copy=function(){return U4(t).domain(e)},Ws.apply(r,arguments)}function Lp(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=br,h,d=!1,f;function p(x){return isNaN(x=+x)?f:(x=.5+((x=+h(x))-i)*(n*x<n*i?l:c),u(d?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,a=h(e=+e),i=h(t=+t),o=h(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(d=!!x,p):d},p.interpolator=function(x){return arguments.length?(u=x,p):u};function b(x){return function(g){var y,m,v;return arguments.length?([y,m,v]=g,u=tse(x,[y,m,v]),p):[u(0),u(.5),u(1)]}}return p.range=b(Kl),p.rangeRound=b(mw),p.unknown=function(x){return arguments.length?(f=x,p):f},function(x){return h=x,a=x(e),i=x(t),o=x(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function q4(){var e=Da(Lp()(br));return e.copy=function(){return Ma(e,q4())},Ws.apply(e,arguments)}function V4(){var e=yw(Lp()).domain([.1,1,10]);return e.copy=function(){return Ma(e,V4()).base(e.base())},Ws.apply(e,arguments)}function W4(){var e=vw(Lp());return e.copy=function(){return Ma(e,W4()).constant(e.constant())},Ws.apply(e,arguments)}function Pw(){var e=bw(Lp());return e.copy=function(){return Ma(e,Pw()).exponent(e.exponent())},Ws.apply(e,arguments)}function Vae(){return Pw.apply(null,arguments).exponent(.5)}const cC=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Tu,scaleDiverging:q4,scaleDivergingLog:V4,scaleDivergingPow:Pw,scaleDivergingSqrt:Vae,scaleDivergingSymlog:W4,scaleIdentity:N4,scaleImplicit:Xv,scaleLinear:Gf,scaleLog:_4,scaleOrdinal:dw,scalePoint:Vc,scalePow:jw,scaleQuantile:A4,scaleQuantize:O4,scaleRadial:k4,scaleSequential:F4,scaleSequentialLog:z4,scaleSequentialPow:Ew,scaleSequentialQuantile:U4,scaleSequentialSqrt:qae,scaleSequentialSymlog:B4,scaleSqrt:Sse,scaleSymlog:C4,scaleThreshold:E4,scaleTime:Bae,scaleUtc:Uae,tickFormat:w4},Symbol.toStringTag,{value:"Module"}));var Wae=Rl;function Gae(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!Wae(o):r(o,l)))var l=o,c=i}return c}var Fp=Gae;function Kae(e,t){return e>t}var G4=Kae,Hae=Fp,Yae=G4,Xae=Wl;function Jae(e){return e&&e.length?Hae(e,Xae,Yae):void 0}var Qae=Jae;const ca=Ye(Qae);function Zae(e,t){return e<t}var K4=Zae,eie=Fp,tie=K4,rie=Wl;function nie(e){return e&&e.length?eie(e,rie,tie):void 0}var sie=nie;const zp=Ye(sie);var aie=Wj,iie=cs,oie=t4,lie=Ir;function cie(e,t){var r=lie(e)?aie:oie;return r(e,iie(t))}var uie=cie,die=Z$,hie=uie;function fie(e,t){return die(hie(e,t),1)}var mie=fie;const pie=Ye(mie);var xie=iw;function gie(e,t){return xie(e,t)}var yie=gie;const ll=Ye(yie);var Hl=1e9,vie={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$w,ut=!0,bn="[DecimalError] ",xi=bn+"Invalid argument: ",Tw=bn+"Exponent out of range: ",Yl=Math.floor,Ja=Math.pow,bie=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vr,Gt=1e7,it=7,H4=9007199254740991,Xf=Yl(H4/it),ge={};ge.absoluteValue=ge.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ge.comparedTo=ge.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};ge.decimalPlaces=ge.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*it;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ge.dividedBy=ge.div=function(e){return Cs(this,new this.constructor(e))};ge.dividedToIntegerBy=ge.idiv=function(e){var t=this,r=t.constructor;return Qe(Cs(t,new r(e),0,1),r.precision)};ge.equals=ge.eq=function(e){return!this.cmp(e)};ge.exponent=function(){return Dt(this)};ge.greaterThan=ge.gt=function(e){return this.cmp(e)>0};ge.greaterThanOrEqualTo=ge.gte=function(e){return this.cmp(e)>=0};ge.isInteger=ge.isint=function(){return this.e>this.d.length-2};ge.isNegative=ge.isneg=function(){return this.s<0};ge.isPositive=ge.ispos=function(){return this.s>0};ge.isZero=function(){return this.s===0};ge.lessThan=ge.lt=function(e){return this.cmp(e)<0};ge.lessThanOrEqualTo=ge.lte=function(e){return this.cmp(e)<1};ge.logarithm=ge.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Vr))throw Error(bn+"NaN");if(r.s<1)throw Error(bn+(r.s?"NaN":"-Infinity"));return r.eq(Vr)?new n(0):(ut=!1,t=Cs(Iu(r,i),Iu(e,i),i),ut=!0,Qe(t,a))};ge.minus=ge.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?J4(t,e):Y4(t,(e.s=-e.s,e))};ge.modulo=ge.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(bn+"NaN");return r.s?(ut=!1,t=Cs(r,e,0,1).times(e),ut=!0,r.minus(t)):Qe(new n(r),a)};ge.naturalExponential=ge.exp=function(){return X4(this)};ge.naturalLogarithm=ge.ln=function(){return Iu(this)};ge.negated=ge.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ge.plus=ge.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y4(t,e):J4(t,(e.s=-e.s,e))};ge.precision=ge.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xi+e);if(t=Dt(a)+1,n=a.d.length-1,r=n*it+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ge.squareRoot=ge.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(bn+"NaN")}for(e=Dt(l),ut=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Xn(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Yl((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Cs(l,i,o+2)).times(.5),Xn(i.d).slice(0,o)===(t=Xn(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Qe(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return ut=!0,Qe(n,r)};ge.times=ge.mul=function(e){var t,r,n,a,i,o,l,c,u,h=this,d=h.constructor,f=h.d,p=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,r=h.e+e.e,c=f.length,u=p.length,c<u&&(i=f,f=p,p=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*f[a-n-1]+t,i[a--]=l%Gt|0,t=l/Gt|0;i[a]=(i[a]+t)%Gt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ut?Qe(e,d.precision):e};ge.toDecimalPlaces=ge.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(as(e,0,Hl),t===void 0?t=n.rounding:as(t,0,8),Qe(r,e+Dt(r)+1,t))};ge.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ki(n,!0):(as(e,0,Hl),t===void 0?t=a.rounding:as(t,0,8),n=Qe(new a(n),e+1,t),r=ki(n,!0,e+1)),r};ge.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?ki(a):(as(e,0,Hl),t===void 0?t=i.rounding:as(t,0,8),n=Qe(new i(a),e+Dt(a)+1,t),r=ki(n.abs(),!1,e+Dt(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ge.toInteger=ge.toint=function(){var e=this,t=e.constructor;return Qe(new t(e),Dt(e)+1,t.rounding)};ge.toNumber=function(){return+this};ge.toPower=ge.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,h=+(e=new c(e));if(!e.s)return new c(Vr);if(l=new c(l),!l.s){if(e.s<1)throw Error(bn+"Infinity");return l}if(l.eq(Vr))return l;if(n=c.precision,e.eq(Vr))return Qe(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=h<0?-h:h)<=H4){for(a=new c(Vr),t=Math.ceil(n/it+4),ut=!1;r%2&&(a=a.times(l),dC(a.d,t)),r=Yl(r/2),r!==0;)l=l.times(l),dC(l.d,t);return ut=!0,e.s<0?new c(Vr).div(a):Qe(a,n)}}else if(i<0)throw Error(bn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ut=!1,a=e.times(Iu(l,n+u)),ut=!0,a=X4(a),a.s=i,a};ge.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Dt(a),n=ki(a,r<=i.toExpNeg||r>=i.toExpPos)):(as(e,1,Hl),t===void 0?t=i.rounding:as(t,0,8),a=Qe(new i(a),e,t),r=Dt(a),n=ki(a,e<=r||r<=i.toExpNeg,e)),n};ge.toSignificantDigits=ge.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(as(e,1,Hl),t===void 0?t=n.rounding:as(t,0,8)),Qe(new n(r),e,t)};ge.toString=ge.valueOf=ge.val=ge.toJSON=ge[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Dt(e),r=e.constructor;return ki(e,t<=r.toExpNeg||t>=r.toExpPos)};function Y4(e,t){var r,n,a,i,o,l,c,u,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),ut?Qe(t,d):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(d/it),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Gt|0,c[i]%=Gt;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ut?Qe(t,d):t}function as(e,t,r){if(e!==~~e||e<t||e>r)throw Error(xi+e)}function Xn(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=it-n.length,r&&(i+=ea(r)),i+=n;o=e[t],n=o+"",r=it-n.length,r&&(i+=ea(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Cs=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%Gt|0,o=i/Gt|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Gt+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,h,d,f,p,b,x,g,y,m,v,S,w,N,_,C,A=n.constructor,k=n.s==a.s?1:-1,E=n.d,O=a.d;if(!n.s)return new A(n);if(!a.s)throw Error(bn+"Division by zero");for(c=n.e-a.e,_=O.length,w=E.length,p=new A(k),b=p.d=[],u=0;O[u]==(E[u]||0);)++u;if(O[u]>(E[u]||0)&&--c,i==null?m=i=A.precision:o?m=i+(Dt(n)-Dt(a))+1:m=i,m<0)return new A(0);if(m=m/it+2|0,u=0,_==1)for(h=0,O=O[0],m++;(u<w||h)&&m--;u++)v=h*Gt+(E[u]||0),b[u]=v/O|0,h=v%O|0;else{for(h=Gt/(O[0]+1)|0,h>1&&(O=e(O,h),E=e(E,h),_=O.length,w=E.length),S=_,x=E.slice(0,_),g=x.length;g<_;)x[g++]=0;C=O.slice(),C.unshift(0),N=O[0],O[1]>=Gt/2&&++N;do h=0,l=t(O,x,_,g),l<0?(y=x[0],_!=g&&(y=y*Gt+(x[1]||0)),h=y/N|0,h>1?(h>=Gt&&(h=Gt-1),d=e(O,h),f=d.length,g=x.length,l=t(d,x,f,g),l==1&&(h--,r(d,_<f?C:O,f))):(h==0&&(l=h=1),d=O.slice()),f=d.length,f<g&&d.unshift(0),r(x,d,g),l==-1&&(g=x.length,l=t(O,x,_,g),l<1&&(h++,r(x,_<g?C:O,g))),g=x.length):l===0&&(h++,x=[0]),b[u++]=h,l&&x[0]?x[g++]=E[S]||0:(x=[E[S]],g=1);while((S++<w||x[0]!==void 0)&&m--)}return b[0]||b.shift(),p.e=c,Qe(p,o?i+Dt(p)+1:i)}}();function X4(e,t){var r,n,a,i,o,l,c=0,u=0,h=e.constructor,d=h.precision;if(Dt(e)>16)throw Error(Tw+Dt(e));if(!e.s)return new h(Vr);for(ut=!1,l=d,o=new h(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Ja(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new h(Vr),h.precision=l;;){if(a=Qe(a.times(e),l),r=r.times(++c),o=i.plus(Cs(a,r,l)),Xn(o.d).slice(0,l)===Xn(i.d).slice(0,l)){for(;u--;)i=Qe(i.times(i),l);return h.precision=d,t==null?(ut=!0,Qe(i,d)):i}i=o}}function Dt(e){for(var t=e.e*it,r=e.d[0];r>=10;r/=10)t++;return t}function vg(e,t,r){if(t>e.LN10.sd())throw ut=!0,r&&(e.precision=r),Error(bn+"LN10 precision limit exceeded");return Qe(new e(e.LN10),t)}function ea(e){for(var t="";e--;)t+="0";return t}function Iu(e,t){var r,n,a,i,o,l,c,u,h,d=1,f=10,p=e,b=p.d,x=p.constructor,g=x.precision;if(p.s<1)throw Error(bn+(p.s?"NaN":"-Infinity"));if(p.eq(Vr))return new x(0);if(t==null?(ut=!1,u=g):u=t,p.eq(10))return t==null&&(ut=!0),vg(x,u);if(u+=f,x.precision=u,r=Xn(b),n=r.charAt(0),i=Dt(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Xn(p.d),n=r.charAt(0),d++;i=Dt(p),n>1?(p=new x("0."+r),i++):p=new x(n+"."+r.slice(1))}else return c=vg(x,u+2,g).times(i+""),p=Iu(new x(n+"."+r.slice(1)),u-f).plus(c),x.precision=g,t==null?(ut=!0,Qe(p,g)):p;for(l=o=p=Cs(p.minus(Vr),p.plus(Vr),u),h=Qe(p.times(p),u),a=3;;){if(o=Qe(o.times(h),u),c=l.plus(Cs(o,new x(a),u)),Xn(c.d).slice(0,u)===Xn(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(vg(x,u+2,g).times(i+""))),l=Cs(l,new x(d),u),x.precision=g,t==null?(ut=!0,Qe(l,g)):l;l=c,a+=2}}function uC(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Yl(r/it),e.d=[],n=(r+1)%it,r<0&&(n+=it),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=it;n<a;)e.d.push(+t.slice(n,n+=it));t=t.slice(n),n=it-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),ut&&(e.e>Xf||e.e<-Xf))throw Error(Tw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Qe(e,t,r){var n,a,i,o,l,c,u,h,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=it,a=t,u=d[h=0];else{if(h=Math.ceil((n+1)/it),i=d.length,h>=i)return e;for(u=i=d[h],o=1;i>=10;i/=10)o++;n%=it,a=n-it+o}if(r!==void 0&&(i=Ja(10,o-a-1),l=u/i%10|0,c=t<0||d[h+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Ja(10,o-a):0:d[h-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=Dt(e),d.length=1,t=t-i-1,d[0]=Ja(10,(it-t%it)%it),e.e=Yl(-t/it)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=h,i=1,h--):(d.length=h+1,i=Ja(10,it-n),d[h]=a>0?(u/Ja(10,o-a)%Ja(10,a)|0)*i:0),c)for(;;)if(h==0){(d[0]+=i)==Gt&&(d[0]=1,++e.e);break}else{if(d[h]+=i,d[h]!=Gt)break;d[h--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(ut&&(e.e>Xf||e.e<-Xf))throw Error(Tw+Dt(e));return e}function J4(e,t){var r,n,a,i,o,l,c,u,h,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),ut?Qe(t,p):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(h=o<0,h?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),a=Math.max(Math.ceil(p/it),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=d.length,h=a<l,h&&(l=a),a=0;a<l;a++)if(c[a]!=d[a]){h=c[a]<d[a];break}o=0}for(h&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,a=d.length-l;a>0;--a)c[l++]=0;for(a=d.length;a>o;){if(c[--a]<d[a]){for(i=a;i&&c[--i]===0;)c[i]=Gt-1;--c[i],c[a]+=Gt}c[a]-=d[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ut?Qe(t,p):t):new f(0)}function ki(e,t,r){var n,a=Dt(e),i=Xn(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ea(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+ea(-a-1)+i,r&&(n=r-o)>0&&(i+=ea(n))):a>=o?(i+=ea(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+ea(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=ea(n))),e.s<0?"-"+i:i}function dC(e,t){if(e.length>t)return e.length=t,!0}function Q4(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(xi+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return uC(o,i.toString())}else if(typeof i!="string")throw Error(xi+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,bie.test(i))uC(o,i);else throw Error(xi+i)}if(a.prototype=ge,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Q4,a.config=a.set=jie,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function jie(e){if(!e||typeof e!="object")throw Error(bn+"Object expected");var t,r,n,a=["precision",1,Hl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Yl(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(xi+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(xi+r+": "+n);return this}var $w=Q4(vie);Vr=new $w(1);const Je=$w;function wie(e){return Cie(e)||_ie(e)||Sie(e)||Nie()}function Nie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sie(e,t){if(e){if(typeof e=="string")return e0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e0(e,t)}}function _ie(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Cie(e){if(Array.isArray(e))return e0(e)}function e0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kie=function(t){return t},Z4={},eD=function(t){return t===Z4},hC=function(t){return function r(){return arguments.length===0||arguments.length===1&&eD(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Aie=function e(t,r){return t===1?r:hC(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==Z4}).length;return o>=t?r.apply(void 0,a):e(t-o,hC(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var h=a.map(function(d){return eD(d)?c.shift():d});return r.apply(void 0,wie(h).concat(c))}))})},Bp=function(t){return Aie(t.length,t)},t0=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},Oie=Bp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),Eie=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return kie;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},r0=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},tD=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function Pie(e){var t;return e===0?t=1:t=Math.floor(new Je(e).abs().log(10).toNumber())+1,t}function Tie(e,t,r){for(var n=new Je(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var $ie=Bp(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),Die=Bp(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),Mie=Bp(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Up={rangeStep:Tie,getDigitCount:Pie,interpolateNumber:$ie,uninterpolateNumber:Die,uninterpolateTruncation:Mie};function n0(e){return Lie(e)||Iie(e)||rD(e)||Rie()}function Rie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iie(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Lie(e){if(Array.isArray(e))return s0(e)}function Lu(e,t){return Bie(e)||zie(e,t)||rD(e,t)||Fie()}function Fie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rD(e,t){if(e){if(typeof e=="string")return s0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s0(e,t)}}function s0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zie(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function Bie(e){if(Array.isArray(e))return e}function nD(e){var t=Lu(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function sD(e,t,r){if(e.lte(0))return new Je(0);var n=Up.getDigitCount(e.toNumber()),a=new Je(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new Je(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Je(Math.ceil(c))}function Uie(e,t,r){var n=1,a=new Je(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Je(10).pow(Up.getDigitCount(e)-1),a=new Je(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Je(Math.floor(e)))}else e===0?a=new Je(Math.floor((t-1)/2)):r||(a=new Je(Math.floor(e)));var o=Math.floor((t-1)/2),l=Eie(Oie(function(c){return a.add(new Je(c-o).mul(n)).toNumber()}),t0);return l(0,t)}function aD(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Je(0),tickMin:new Je(0),tickMax:new Je(0)};var i=sD(new Je(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Je(0):(o=new Je(e).add(t).div(2),o=o.sub(new Je(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Je(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?aD(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Je(l).mul(i)),tickMax:o.add(new Je(c).mul(i))})}function qie(e){var t=Lu(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=nD([r,n]),c=Lu(l,2),u=c[0],h=c[1];if(u===-1/0||h===1/0){var d=h===1/0?[u].concat(n0(t0(0,a-1).map(function(){return 1/0}))):[].concat(n0(t0(0,a-1).map(function(){return-1/0})),[h]);return r>n?r0(d):d}if(u===h)return Uie(u,a,i);var f=aD(u,h,o,i),p=f.step,b=f.tickMin,x=f.tickMax,g=Up.rangeStep(b,x.add(new Je(.1).mul(p)),p);return r>n?r0(g):g}function Vie(e,t){var r=Lu(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=nD([n,a]),l=Lu(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var h=Math.max(t,2),d=sD(new Je(u).sub(c).div(h-1),i,0),f=[].concat(n0(Up.rangeStep(new Je(c),new Je(u).sub(new Je(.99).mul(d)),d)),[u]);return n>a?r0(f):f}var Wie=tD(qie),Gie=tD(Vie),Kie="Invariant failed";function Ai(e,t){throw new Error(Kie)}var Hie=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function cl(e){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jf.apply(this,arguments)}function Yie(e,t){return Zie(e)||Qie(e,t)||Jie(e,t)||Xie()}function Xie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jie(e,t){if(e){if(typeof e=="string")return fC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fC(e,t)}}function fC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Zie(e){if(Array.isArray(e))return e}function eoe(e,t){if(e==null)return{};var r=toe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function toe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function roe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function noe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lD(n.key),n)}}function soe(e,t,r){return t&&noe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function aoe(e,t,r){return t=Qf(t),ioe(e,iD()?Reflect.construct(t,r||[],Qf(e).constructor):t.apply(e,r))}function ioe(e,t){if(t&&(cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ooe(e)}function ooe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iD=function(){return!!e})()}function Qf(e){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qf(e)}function loe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a0(e,t)}function a0(e,t){return a0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},a0(e,t)}function oD(e,t,r){return t=lD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lD(e){var t=coe(e,"string");return cl(t)=="symbol"?t:t+""}function coe(e,t){if(cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var qp=function(e){function t(){return roe(this,t),aoe(this,t,arguments)}return loe(t,e),soe(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,h=n.xAxis,d=n.yAxis,f=eoe(n,Hie),p=we(f,!1);this.props.direction==="x"&&h.type!=="number"&&Ai();var b=c.map(function(x){var g=u(x,l),y=g.x,m=g.y,v=g.value,S=g.errorVal;if(!S)return null;var w=[],N,_;if(Array.isArray(S)){var C=Yie(S,2);N=C[0],_=C[1]}else N=_=S;if(i==="vertical"){var A=h.scale,k=m+a,E=k+o,O=k-o,P=A(v-N),M=A(v+_);w.push({x1:M,y1:E,x2:M,y2:O}),w.push({x1:P,y1:k,x2:M,y2:k}),w.push({x1:P,y1:E,x2:P,y2:O})}else if(i==="horizontal"){var T=d.scale,F=y+a,q=F-o,$=F+o,U=T(v-N),X=T(v+_);w.push({x1:q,y1:X,x2:$,y2:X}),w.push({x1:F,y1:U,x2:F,y2:X}),w.push({x1:q,y1:U,x2:$,y2:U})}return G.createElement(Be,Jf({className:"recharts-errorBar",key:"bar-".concat(w.map(function(K){return"".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))},p),w.map(function(K){return G.createElement("line",Jf({},K,{key:"line-".concat(K.x1,"-").concat(K.x2,"-").concat(K.y1,"-").concat(K.y2)}))}))});return G.createElement(Be,{className:"recharts-errorBars"},b)}}])}(G.Component);oD(qp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});oD(qp,"displayName","ErrorBar");function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){uoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uoe(e,t,r){return t=doe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function doe(e){var t=hoe(e,"string");return Fu(t)=="symbol"?t:t+""}function hoe(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cD=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Br(r,Yr);if(!o)return null;var l=Yr.defaultProps,c=l!==void 0?Ba(Ba({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(h,d){var f=d.item,p=d.props,b=p.sectors||p.data||[];return h.concat(b.map(function(x){return{type:o.props.iconType||f.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(n||[]).map(function(h){var d=h.item,f=d.type.defaultProps,p=f!==void 0?Ba(Ba({},f),d.props):{},b=p.dataKey,x=p.name,g=p.legendType,y=p.hide;return{inactive:y,dataKey:b,type:c.iconType||g||"square",color:Dw(d),value:x||b,payload:p}}),Ba(Ba(Ba({},c),Yr.getWithHeight(o,a)),{},{payload:u,item:o})};function zu(e){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}function pC(e){return xoe(e)||poe(e)||moe(e)||foe()}function foe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function moe(e,t){if(e){if(typeof e=="string")return i0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i0(e,t)}}function poe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xoe(e){if(Array.isArray(e))return i0(e)}function i0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){Io(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Io(e,t,r){return t=goe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function goe(e){var t=yoe(e,"string");return zu(t)=="symbol"?t:t+""}function yoe(e,t){if(zu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zt(e,t,r){return Ee(e)||Ee(t)?r:Ut(t)?Hr(e,t,r):Oe(t)?t(e):r}function Wc(e,t,r,n){var a=pie(e,function(l){return zt(l,t)});if(r==="number"){var i=a.filter(function(l){return ie(l)||parseFloat(l)});return i.length?[zp(i),ca(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Ee(l)}):a;return o.map(function(l){return Ut(l)||l instanceof Date?l:""})}var voe=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var h=u>0?a[u-1].coordinate:a[l-1].coordinate,d=a[u].coordinate,f=u>=l-1?a[0].coordinate:a[u+1].coordinate,p=void 0;if(yr(d-h)!==yr(f-d)){var b=[];if(yr(f-d)===yr(c[1]-c[0])){p=f;var x=d+c[1]-c[0];b[0]=Math.min(x,(x+h)/2),b[1]=Math.max(x,(x+h)/2)}else{p=h;var g=f+c[1]-c[0];b[0]=Math.min(d,(g+d)/2),b[1]=Math.max(d,(g+d)/2)}var y=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>y[0]&&t<=y[1]||t>=b[0]&&t<=b[1]){o=a[u].index;break}}else{var m=Math.min(h,f),v=Math.max(h,f);if(t>(m+d)/2&&t<=(v+d)/2){o=a[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},Dw=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?St(St({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},boe=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var h=i[l[c]].stackGroups,d=Object.keys(h),f=0,p=d.length;f<p;f++){var b=h[d[f]],x=b.items,g=b.cateAxisId,y=x.filter(function(_){return _s(_.type).indexOf("Bar")>=0});if(y&&y.length){var m=y[0].type.defaultProps,v=m!==void 0?St(St({},m),y[0].props):y[0].props,S=v.barSize,w=v[g];o[w]||(o[w]=[]);var N=Ee(S)?r:S;o[w].push({item:y[0],stackList:y.slice(1),barSize:Ee(N)?void 0:vr(N,n,0)})}}return o},joe=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=vr(r,a,0,!0),h,d=[];if(o[0].barSize===+o[0].barSize){var f=!1,p=a/c,b=o.reduce(function(S,w){return S+w.barSize||0},0);b+=(c-1)*u,b>=a&&(b-=(c-1)*u,u=0),b>=a&&p>0&&(f=!0,p*=.9,b=c*p);var x=(a-b)/2>>0,g={offset:x-u,size:0};h=o.reduce(function(S,w){var N={item:w.item,position:{offset:g.offset+g.size+u,size:f?p:w.barSize}},_=[].concat(pC(S),[N]);return g=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){_.push({item:C,position:g})}),_},d)}else{var y=vr(n,a,0,!0);a-2*y-(c-1)*u<=0&&(u=0);var m=(a-2*y-(c-1)*u)/c;m>1&&(m>>=0);var v=l===+l?Math.min(m,l):m;h=o.reduce(function(S,w,N){var _=[].concat(pC(S),[{item:w.item,position:{offset:y+(m+u)*N+(m-v)/2,size:v}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){_.push({item:C,position:_[_.length-1].position})}),_},d)}return h},woe=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=cD({children:i,legendWidth:c});if(u){var h=a||{},d=h.width,f=h.height,p=u.align,b=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&b==="middle")&&p!=="center"&&ie(t[p]))return St(St({},t),{},Io({},p,t[p]+(d||0)));if((x==="horizontal"||x==="vertical"&&p==="center")&&b!=="middle"&&ie(t[b]))return St(St({},t),{},Io({},b,t[b]+(f||0)))}return t},Noe=function(t,r,n){return Ee(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},uD=function(t,r,n,a,i){var o=r.props.children,l=gn(o,qp).filter(function(u){return Noe(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,h){var d=zt(h,n);if(Ee(d))return u;var f=Array.isArray(d)?[zp(d),ca(d)]:[d,d],p=c.reduce(function(b,x){var g=zt(h,x,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),m=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,b[0]),Math.max(m,b[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},Soe=function(t,r,n,a,i){var o=r.map(function(l){return uD(t,l,n,i,a)}).filter(function(l){return!Ee(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},dD=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&uD(t,c,u,a)||Wc(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var h=0,d=u.length;h<d;h++)l[u[h]]||(l[u[h]]=!0,c.push(u[h]));return c},[])},hD=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},fD=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},js=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?yr(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var h=(t.ticks||t.niceTicks).map(function(d){var f=i?i.indexOf(d):d;return{coordinate:a(f)+u,value:d,offset:u}});return h.filter(function(d){return!Bl(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,f){return{coordinate:a(d)+u,value:d,index:f,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(d){return{coordinate:a(d)+u,value:d,offset:u}}):a.domain().map(function(d,f){return{coordinate:a(d)+u,value:i?i[d]:d,index:f,offset:u}})},bg=new WeakMap,fh=function(t,r){if(typeof r!="function")return t;bg.has(t)||bg.set(t,new WeakMap);var n=bg.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},mD=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Tu(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Gf(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Vc(),realScaleType:"point"}:i==="category"?{scale:Tu(),realScaleType:"band"}:{scale:Gf(),realScaleType:"linear"};if(Si(a)){var c="scale".concat(Cp(a));return{scale:(cC[c]||Vc)(),realScaleType:cC[c]?c:"point"}}return Oe(a)?{scale:a}:{scale:Vc(),realScaleType:"point"}},gC=1e-4,pD=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-gC,o=Math.max(a[0],a[1])+gC,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},_oe=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},Coe=function(t,r){if(!r||r.length!==2||!ie(r[0])||!ie(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ie(t[0])||t[0]<n)&&(i[0]=n),(!ie(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},koe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Bl(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},Aoe=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Bl(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Ooe={sign:koe,expand:HK,none:el,silhouette:YK,wiggle:XK,positive:Aoe},Eoe=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=Ooe[n],o=KK().keys(a).value(function(l,c){return+zt(l,c,0)}).order(Pv).offset(i);return o(t)},Poe=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,f){var p,b=(p=f.type)!==null&&p!==void 0&&p.defaultProps?St(St({},f.type.defaultProps),f.props):f.props,x=b.stackId,g=b.hide;if(g)return d;var y=b[n],m=d[y]||{hasStack:!1,stackGroups:{}};if(Ut(x)){var v=m.stackGroups[x]||{numericAxisId:n,cateAxisId:a,items:[]};v.items.push(f),m.hasStack=!0,m.stackGroups[x]=v}else m.stackGroups[Ul("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[f]};return St(St({},d),{},Io({},y,m))},c),h={};return Object.keys(u).reduce(function(d,f){var p=u[f];if(p.hasStack){var b={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(x,g){var y=p.stackGroups[g];return St(St({},x),{},Io({},g,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:Eoe(t,y.items,i)}))},b)}return St(St({},d),{},Io({},f,p))},h)},xD=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var h=Wie(u,i,l);return t.domain([zp(h),ca(h)]),{niceTicks:h}}if(i&&a==="number"){var d=t.domain(),f=Gie(d,i,l);return{niceTicks:f}}return null};function yC(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ee(a[t.dataKey])){var l=_f(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=zt(a,Ee(o)?t.dataKey:o);return Ee(c)?null:t.scale(c)}var vC=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=zt(o,r.dataKey,r.domain[l]);return Ee(c)?null:r.scale(c)-i/2+a},Toe=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},$oe=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?St(St({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Ut(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Doe=function(t){return t.reduce(function(r,n){return[zp(n.concat([r[0]]).filter(ie)),ca(n.concat([r[1]]).filter(ie))]},[1/0,-1/0])},gD=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,h){var d=Doe(h.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},bC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,o0=function(t,r,n){if(Oe(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(ie(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(bC.test(t[0])){var i=+bC.exec(t[0])[1];a[0]=r[0]-i}else Oe(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(ie(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(jC.test(t[1])){var o=+jC.exec(t[1])[1];a[1]=r[1]+o}else Oe(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},Zf=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=lw(r,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],h=i[l-1];o=Math.min((u.coordinate||0)-(h.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},wC=function(t,r,n){return!t||!t.length||ll(t,Hr(n,"type.defaultProps.domain"))?r:t},yD=function(t,r){var n=t.type.defaultProps?St(St({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,h=n.hide;return St(St({},we(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:Dw(t),value:zt(r,a),type:c,payload:r,chartType:u,hide:h})};function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(n){vD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vD(e,t,r){return t=Moe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Moe(e){var t=Roe(e,"string");return Bu(t)=="symbol"?t:t+""}function Roe(e,t){if(Bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ioe(e,t){return Boe(e)||zoe(e,t)||Foe(e,t)||Loe()}function Loe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Foe(e,t){if(e){if(typeof e=="string")return SC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SC(e,t)}}function SC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zoe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Boe(e){if(Array.isArray(e))return e}var em=Math.PI/180,Uoe=function(t){return t*180/Math.PI},nt=function(t,r,n,a){return{x:t+Math.cos(-em*a)*n,y:r+Math.sin(-em*a)*n}},bD=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},qoe=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,h=vr(t.cx,o,o/2),d=vr(t.cy,l,l/2),f=bD(o,l,n),p=vr(t.innerRadius,f,0),b=vr(t.outerRadius,f,f*.8),x=Object.keys(r);return x.reduce(function(g,y){var m=r[y],v=m.domain,S=m.reversed,w;if(Ee(m.range))a==="angleAxis"?w=[c,u]:a==="radiusAxis"&&(w=[p,b]),S&&(w=[w[1],w[0]]);else{w=m.range;var N=w,_=Ioe(N,2);c=_[0],u=_[1]}var C=mD(m,i),A=C.realScaleType,k=C.scale;k.domain(v).range(w),pD(k);var E=xD(k,ps(ps({},m),{},{realScaleType:A})),O=ps(ps(ps({},m),E),{},{range:w,radius:b,realScaleType:A,scale:k,cx:h,cy:d,innerRadius:p,outerRadius:b,startAngle:c,endAngle:u});return ps(ps({},g),{},vD({},y,O))},{})},Voe=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Woe=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=Voe({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:Uoe(u),angleInRadian:u}},Goe=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},Koe=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},_C=function(t,r){var n=t.x,a=t.y,i=Woe({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var h=Goe(r),d=h.startAngle,f=h.endAngle,p=l,b;if(d<=f){for(;p>f;)p-=360;for(;p<d;)p+=360;b=p>=d&&p<=f}else{for(;p>d;)p-=360;for(;p<f;)p+=360;b=p>=f&&p<=d}return b?ps(ps({},r),{},{radius:o,angle:Koe(p,r)}):null},jD=function(t){return!j.isValidElement(t)&&!Oe(t)&&typeof t!="boolean"?t.className:""};function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}var Hoe=["offset"];function Yoe(e){return Zoe(e)||Qoe(e)||Joe(e)||Xoe()}function Xoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Joe(e,t){if(e){if(typeof e=="string")return l0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l0(e,t)}}function Qoe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zoe(e){if(Array.isArray(e))return l0(e)}function l0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ele(e,t){if(e==null)return{};var r=tle(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){rle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rle(e,t,r){return t=nle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nle(e){var t=sle(e,"string");return Uu(t)=="symbol"?t:t+""}function sle(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(this,arguments)}var ale=function(t){var r=t.value,n=t.formatter,a=Ee(t.children)?r:t.children;return Oe(n)?n(a):a},ile=function(t,r){var n=yr(r-t),a=Math.min(Math.abs(r-t),360);return n*a},ole=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,h=c.cy,d=c.innerRadius,f=c.outerRadius,p=c.startAngle,b=c.endAngle,x=c.clockWise,g=(d+f)/2,y=ile(p,b),m=y>=0?1:-1,v,S;a==="insideStart"?(v=p+m*o,S=x):a==="insideEnd"?(v=b-m*o,S=!x):a==="end"&&(v=b+m*o,S=x),S=y<=0?S:!S;var w=nt(u,h,g,v),N=nt(u,h,g,v+(S?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(S?0:1,`,
    `).concat(N.x,",").concat(N.y),C=Ee(t.id)?Ul("recharts-radial-line-"):t.id;return G.createElement("text",qu({},n,{dominantBaseline:"central",className:Pe("recharts-radial-bar-label",l)}),G.createElement("defs",null,G.createElement("path",{id:C,d:_})),G.createElement("textPath",{xlinkHref:"#".concat(C)},r))},lle=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,h=i.startAngle,d=i.endAngle,f=(h+d)/2;if(a==="outside"){var p=nt(o,l,u+n,f),b=p.x,x=p.y;return{x:b,y:x,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,y=nt(o,l,g,f),m=y.x,v=y.y;return{x:m,y:v,textAnchor:"middle",verticalAnchor:"middle"}},cle=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,h=o.height,d=h>=0?1:-1,f=d*a,p=d>0?"end":"start",b=d>0?"start":"end",x=u>=0?1:-1,g=x*a,y=x>0?"end":"start",m=x>0?"start":"end";if(i==="top"){var v={x:l+u/2,y:c-d*a,textAnchor:"middle",verticalAnchor:p};return Rt(Rt({},v),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:l+u/2,y:c+h+f,textAnchor:"middle",verticalAnchor:b};return Rt(Rt({},S),n?{height:Math.max(n.y+n.height-(c+h),0),width:u}:{})}if(i==="left"){var w={x:l-g,y:c+h/2,textAnchor:y,verticalAnchor:"middle"};return Rt(Rt({},w),n?{width:Math.max(w.x-n.x,0),height:h}:{})}if(i==="right"){var N={x:l+u+g,y:c+h/2,textAnchor:m,verticalAnchor:"middle"};return Rt(Rt({},N),n?{width:Math.max(n.x+n.width-N.x,0),height:h}:{})}var _=n?{width:u,height:h}:{};return i==="insideLeft"?Rt({x:l+g,y:c+h/2,textAnchor:m,verticalAnchor:"middle"},_):i==="insideRight"?Rt({x:l+u-g,y:c+h/2,textAnchor:y,verticalAnchor:"middle"},_):i==="insideTop"?Rt({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:b},_):i==="insideBottom"?Rt({x:l+u/2,y:c+h-f,textAnchor:"middle",verticalAnchor:p},_):i==="insideTopLeft"?Rt({x:l+g,y:c+f,textAnchor:m,verticalAnchor:b},_):i==="insideTopRight"?Rt({x:l+u-g,y:c+f,textAnchor:y,verticalAnchor:b},_):i==="insideBottomLeft"?Rt({x:l+g,y:c+h-f,textAnchor:m,verticalAnchor:p},_):i==="insideBottomRight"?Rt({x:l+u-g,y:c+h-f,textAnchor:y,verticalAnchor:p},_):Il(i)&&(ie(i.x)||ii(i.x))&&(ie(i.y)||ii(i.y))?Rt({x:l+vr(i.x,u),y:c+vr(i.y,h),textAnchor:"end",verticalAnchor:"end"},_):Rt({x:l+u/2,y:c+h/2,textAnchor:"middle",verticalAnchor:"middle"},_)},ule=function(t){return"cx"in t&&ie(t.cx)};function Ht(e){var t=e.offset,r=t===void 0?5:t,n=ele(e,Hoe),a=Rt({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,h=a.className,d=h===void 0?"":h,f=a.textBreakAll;if(!i||Ee(l)&&Ee(c)&&!j.isValidElement(u)&&!Oe(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var p;if(Oe(u)){if(p=j.createElement(u,a),j.isValidElement(p))return p}else p=ale(a);var b=ule(i),x=we(a,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return ole(a,p,x);var g=b?lle(a):cle(a);return G.createElement(Ci,qu({className:Pe("recharts-label",d)},x,g,{breakAll:f}),p)}Ht.displayName="Label";var wD=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,h=t.outerRadius,d=t.x,f=t.y,p=t.top,b=t.left,x=t.width,g=t.height,y=t.clockWise,m=t.labelViewBox;if(m)return m;if(ie(x)&&ie(g)){if(ie(d)&&ie(f))return{x:d,y:f,width:x,height:g};if(ie(p)&&ie(b))return{x:p,y:b,width:x,height:g}}return ie(d)&&ie(f)?{x:d,y:f,width:0,height:0}:ie(r)&&ie(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:h||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},dle=function(t,r){return t?t===!0?G.createElement(Ht,{key:"label-implicit",viewBox:r}):Ut(t)?G.createElement(Ht,{key:"label-implicit",viewBox:r,value:t}):j.isValidElement(t)?t.type===Ht?j.cloneElement(t,{key:"label-implicit",viewBox:r}):G.createElement(Ht,{key:"label-implicit",content:t,viewBox:r}):Oe(t)?G.createElement(Ht,{key:"label-implicit",content:t,viewBox:r}):Il(t)?G.createElement(Ht,qu({viewBox:r},t,{key:"label-implicit"})):null:null},hle=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=wD(t),o=gn(a,Ht).map(function(c,u){return j.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=dle(t.label,r||i);return[l].concat(Yoe(o))};Ht.parseViewBox=wD;Ht.renderCallByParent=hle;function fle(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var mle=fle;const ple=Ye(mle);function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}var xle=["valueAccessor"],gle=["data","dataKey","clockWise","id","textBreakAll"];function yle(e){return wle(e)||jle(e)||ble(e)||vle()}function vle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ble(e,t){if(e){if(typeof e=="string")return c0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c0(e,t)}}function jle(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wle(e){if(Array.isArray(e))return c0(e)}function c0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(this,arguments)}function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(n){Nle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nle(e,t,r){return t=Sle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sle(e){var t=_le(e,"string");return Vu(t)=="symbol"?t:t+""}function _le(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OC(e,t){if(e==null)return{};var r=Cle(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kle=function(t){return Array.isArray(t.value)?ple(t.value):t.value};function ks(e){var t=e.valueAccessor,r=t===void 0?kle:t,n=OC(e,xle),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=OC(n,gle);return!a||!a.length?null:G.createElement(Be,{className:"recharts-label-list"},a.map(function(h,d){var f=Ee(i)?r(h,d):zt(h&&h.payload,i),p=Ee(l)?{}:{id:"".concat(l,"-").concat(d)};return G.createElement(Ht,tm({},we(h,!0),u,p,{parentViewBox:h.parentViewBox,value:f,textBreakAll:c,viewBox:Ht.parseViewBox(Ee(o)?h:AC(AC({},h),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}ks.displayName="LabelList";function Ale(e,t){return e?e===!0?G.createElement(ks,{key:"labelList-implicit",data:t}):G.isValidElement(e)||Oe(e)?G.createElement(ks,{key:"labelList-implicit",data:t,content:e}):Il(e)?G.createElement(ks,tm({data:t},e,{key:"labelList-implicit"})):null:null}function Ole(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=gn(n,ks).map(function(o,l){return j.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=Ale(e.label,t);return[i].concat(yle(a))}ks.renderCallByParent=Ole;function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(this,arguments)}function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){Ele(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ele(e,t,r){return t=Ple(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ple(e){var t=Tle(e,"string");return Wu(t)=="symbol"?t:t+""}function Tle(e,t){if(Wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $le=function(t,r){var n=yr(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},mh=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,h=c*(l?1:-1)+a,d=Math.asin(c/h)/em,f=u?i:i+o*d,p=nt(r,n,h,f),b=nt(r,n,a,f),x=u?i-o*d:i,g=nt(r,n,h*Math.cos(d*em),x);return{center:p,circleTangency:b,lineTangency:g,theta:d}},ND=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=$le(o,l),u=o+c,h=nt(r,n,i,o),d=nt(r,n,i,u),f="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(a>0){var p=nt(r,n,a,o),b=nt(r,n,a,u);f+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},Dle=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,h=t.endAngle,d=yr(h-u),f=mh({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),p=f.circleTangency,b=f.lineTangency,x=f.theta,g=mh({cx:r,cy:n,radius:i,angle:h,sign:-d,cornerRadius:o,cornerIsExternal:c}),y=g.circleTangency,m=g.lineTangency,v=g.theta,S=c?Math.abs(u-h):Math.abs(u-h)-x-v;if(S<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):ND({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:h});var w="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(m.x,",").concat(m.y,`
  `);if(a>0){var N=mh({cx:r,cy:n,radius:a,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=N.circleTangency,C=N.lineTangency,A=N.theta,k=mh({cx:r,cy:n,radius:a,angle:h,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=k.circleTangency,O=k.lineTangency,P=k.theta,M=c?Math.abs(u-h):Math.abs(u-h)-A-P;if(M<0&&o===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(C.x,",").concat(C.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},Mle={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SD=function(t){var r=PC(PC({},Mle),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,h=r.startAngle,d=r.endAngle,f=r.className;if(o<i||h===d)return null;var p=Pe("recharts-sector",f),b=o-i,x=vr(l,b,0,!0),g;return x>0&&Math.abs(h-d)<360?g=Dle({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:d}):g=ND({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:h,endAngle:d}),G.createElement("path",u0({},we(r,!0),{className:p,d:g,role:"img"}))};function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d0.apply(this,arguments)}function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){Rle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rle(e,t,r){return t=Ile(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ile(e){var t=Lle(e,"string");return Gu(t)=="symbol"?t:t+""}function Lle(e,t){if(Gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DC={curveBasisClosed:RK,curveBasisOpen:IK,curveBasis:MK,curveBumpX:jK,curveBumpY:wK,curveLinearClosed:LK,curveLinear:Ap,curveMonotoneX:FK,curveMonotoneY:zK,curveNatural:BK,curveStep:UK,curveStepAfter:VK,curveStepBefore:qK},ph=function(t){return t.x===+t.x&&t.y===+t.y},fc=function(t){return t.x},mc=function(t){return t.y},Fle=function(t,r){if(Oe(t))return t;var n="curve".concat(Cp(t));return(n==="curveMonotone"||n==="curveBump")&&r?DC["".concat(n).concat(r==="vertical"?"Y":"X")]:DC[n]||Ap},zle=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,h=Fle(n,l),d=u?i.filter(function(x){return ph(x)}):i,f;if(Array.isArray(o)){var p=u?o.filter(function(x){return ph(x)}):o,b=d.map(function(x,g){return $C($C({},x),{},{base:p[g]})});return l==="vertical"?f=ah().y(mc).x1(fc).x0(function(x){return x.base.x}):f=ah().x(fc).y1(mc).y0(function(x){return x.base.y}),f.defined(ph).curve(h),f(b)}return l==="vertical"&&ie(o)?f=ah().y(mc).x1(fc).x0(o):ie(o)?f=ah().x(fc).y1(mc).y0(o):f=y$().x(fc).y(mc),f.defined(ph).curve(h),f(d)},Lo=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?zle(t):a;return j.createElement("path",d0({},we(t,!1),Cf(t),{className:Pe("recharts-curve",r),d:o,ref:i}))},_D={exports:{}},Ble="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ule=Ble,qle=Ule;function CD(){}function kD(){}kD.resetWarningCache=CD;var Vle=function(){function e(n,a,i,o,l,c){if(c!==qle){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kD,resetWarningCache:CD};return r.PropTypes=r,r};_D.exports=Vle();var Wle=_D.exports;const Ge=Ye(Wle),{getOwnPropertyNames:Gle,getOwnPropertySymbols:Kle}=Object,{hasOwnProperty:Hle}=Object.prototype;function jg(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function xh(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);const{cache:i}=a,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,a);return i.delete(r),i.delete(n),c}}function Yle(e){return e!=null?e[Symbol.toStringTag]:void 0}function MC(e){return Gle(e).concat(Kle(e))}const Xle=Object.hasOwn||((e,t)=>Hle.call(e,t));function zi(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Jle="__v",Qle="__o",Zle="_owner",{getOwnPropertyDescriptor:RC,keys:IC}=Object;function ece(e,t){return e.byteLength===t.byteLength&&rm(new Uint8Array(e),new Uint8Array(t))}function tce(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function rce(e,t){return e.byteLength===t.byteLength&&rm(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function nce(e,t){return zi(e.getTime(),t.getTime())}function sce(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function ace(e,t){return e===t}function LC(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let h=!1,d=0;for(;(l=u.next())&&!l.done;){if(a[d]){d++;continue}const f=o.value,p=l.value;if(r.equals(f[0],p[0],c,d,e,t,r)&&r.equals(f[1],p[1],f[0],p[0],e,t,r)){h=a[d]=!0;break}d++}if(!h)return!1;c++}return!0}const ice=zi;function oce(e,t,r){const n=IC(e);let a=n.length;if(IC(t).length!==a)return!1;for(;a-- >0;)if(!AD(e,t,r,n[a]))return!1;return!0}function pc(e,t,r){const n=MC(e);let a=n.length;if(MC(t).length!==a)return!1;let i,o,l;for(;a-- >0;)if(i=n[a],!AD(e,t,r,i)||(o=RC(e,i),l=RC(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function lce(e,t){return zi(e.valueOf(),t.valueOf())}function cce(e,t){return e.source===t.source&&e.flags===t.flags}function FC(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const a=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,h=0;for(;(l=c.next())&&!l.done;){if(!a[h]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[h]=!0;break}h++}if(!u)return!1}return!0}function rm(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function uce(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function AD(e,t,r,n){return(n===Zle||n===Qle||n===Jle)&&(e.$$typeof||t.$$typeof)?!0:Xle(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const dce="[object ArrayBuffer]",hce="[object Arguments]",fce="[object Boolean]",mce="[object DataView]",pce="[object Date]",xce="[object Error]",gce="[object Map]",yce="[object Number]",vce="[object Object]",bce="[object RegExp]",jce="[object Set]",wce="[object String]",Nce={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Sce="[object URL]",_ce=Object.prototype.toString;function Cce({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:h,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:b}){return function(g,y,m){if(g===y)return!0;if(g==null||y==null)return!1;const v=typeof g;if(v!==typeof y)return!1;if(v!=="object")return v==="number"?l(g,y,m):v==="function"?i(g,y,m):!1;const S=g.constructor;if(S!==y.constructor)return!1;if(S===Object)return c(g,y,m);if(Array.isArray(g))return t(g,y,m);if(S===Date)return n(g,y,m);if(S===RegExp)return h(g,y,m);if(S===Map)return o(g,y,m);if(S===Set)return d(g,y,m);const w=_ce.call(g);if(w===pce)return n(g,y,m);if(w===bce)return h(g,y,m);if(w===gce)return o(g,y,m);if(w===jce)return d(g,y,m);if(w===vce)return typeof g.then!="function"&&typeof y.then!="function"&&c(g,y,m);if(w===Sce)return p(g,y,m);if(w===xce)return a(g,y,m);if(w===hce)return c(g,y,m);if(Nce[w])return f(g,y,m);if(w===dce)return e(g,y,m);if(w===mce)return r(g,y,m);if(w===fce||w===yce||w===wce)return u(g,y,m);if(b){let N=b[w];if(!N){const _=Yle(g);_&&(N=b[_])}if(N)return N(g,y,m)}return!1}}function kce({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:ece,areArraysEqual:r?pc:tce,areDataViewsEqual:rce,areDatesEqual:nce,areErrorsEqual:sce,areFunctionsEqual:ace,areMapsEqual:r?jg(LC,pc):LC,areNumbersEqual:ice,areObjectsEqual:r?pc:oce,arePrimitiveWrappersEqual:lce,areRegExpsEqual:cce,areSetsEqual:r?jg(FC,pc):FC,areTypedArraysEqual:r?jg(rm,pc):rm,areUrlsEqual:uce,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const a=xh(n.areArraysEqual),i=xh(n.areMapsEqual),o=xh(n.areObjectsEqual),l=xh(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function Ace(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function Oce({circular:e,comparator:t,createState:r,equals:n,strict:a}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:h}=r();return t(l,c,{cache:u,equals:n,meta:h,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:a})};const i={cache:void 0,equals:n,meta:void 0,strict:a};return function(l,c){return t(l,c,i)}}const Ece=Ra();Ra({strict:!0});Ra({circular:!0});Ra({circular:!0,strict:!0});Ra({createInternalComparator:()=>zi});Ra({strict:!0,createInternalComparator:()=>zi});Ra({circular:!0,createInternalComparator:()=>zi});Ra({circular:!0,createInternalComparator:()=>zi,strict:!0});function Ra(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:a=!1}=e,i=kce(e),o=Cce(i),l=r?r(o):Ace(o);return Oce({circular:t,comparator:o,createState:n,equals:l,strict:a})}function Pce(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function zC(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):Pce(a)};requestAnimationFrame(n)}function h0(e){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h0(e)}function Tce(e){return Rce(e)||Mce(e)||Dce(e)||$ce()}function $ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dce(e,t){if(e){if(typeof e=="string")return BC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BC(e,t)}}function BC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rce(e){if(Array.isArray(e))return e}function Ice(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Tce(o),c=l[0],u=l.slice(1);if(typeof c=="number"){zC(a.bind(null,u),c);return}a(c),zC(a.bind(null,u));return}h0(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(n){OD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OD(e,t,r){return t=Lce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lce(e){var t=Fce(e,"string");return Ku(t)==="symbol"?t:String(t)}function Fce(e,t){if(Ku(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ku(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zce=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},Bce=function(t){return t},Uce=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Gc=function(t,r){return Object.keys(r).reduce(function(n,a){return qC(qC({},n),{},OD({},a,t(a,r[a])))},{})},VC=function(t,r,n){return t.map(function(a){return"".concat(Uce(a)," ").concat(r,"ms ").concat(n)}).join(",")};function qce(e,t){return Gce(e)||Wce(e,t)||ED(e,t)||Vce()}function Vce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wce(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Gce(e){if(Array.isArray(e))return e}function Kce(e){return Xce(e)||Yce(e)||ED(e)||Hce()}function Hce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ED(e,t){if(e){if(typeof e=="string")return f0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f0(e,t)}}function Yce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xce(e){if(Array.isArray(e))return f0(e)}function f0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nm=1e-4,PD=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},TD=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},WC=function(t,r){return function(n){var a=PD(t,r);return TD(a,n)}},Jce=function(t,r){return function(n){var a=PD(t,r),i=[].concat(Kce(a.map(function(o,l){return o*l}).slice(1)),[0]);return TD(i,n)}},GC=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),h=qce(u,4);a=h[0],i=h[1],o=h[2],l=h[3]}}}var d=WC(a,o),f=WC(i,l),p=Jce(a,o),b=function(y){return y>1?1:y<0?0:y},x=function(y){for(var m=y>1?1:y,v=m,S=0;S<8;++S){var w=d(v)-m,N=p(v);if(Math.abs(w-m)<nm||N<nm)return f(v);v=b(v-w/N)}return f(v)};return x.isStepper=!1,x},Qce=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(h,d,f){var p=-(h-d)*n,b=f*i,x=f+(p-b)*l/1e3,g=f*l/1e3+h;return Math.abs(g-d)<nm&&Math.abs(x)<nm?[d,0]:[g,x]};return c.isStepper=!0,c.dt=l,c},Zce=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GC(a);case"spring":return Qce();default:if(a.split("(")[0]==="cubic-bezier")return GC(a)}return typeof a=="function"?a:null};function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function KC(e){return rue(e)||tue(e)||$D(e)||eue()}function eue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rue(e){if(Array.isArray(e))return p0(e)}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(n){m0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m0(e,t,r){return t=nue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nue(e){var t=sue(e,"string");return Hu(t)==="symbol"?t:String(t)}function sue(e,t){if(Hu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aue(e,t){return lue(e)||oue(e,t)||$D(e,t)||iue()}function iue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $D(e,t){if(e){if(typeof e=="string")return p0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p0(e,t)}}function p0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function lue(e){if(Array.isArray(e))return e}var sm=function(t,r,n){return t+(r-t)*n},x0=function(t){var r=t.from,n=t.to;return r!==n},cue=function e(t,r,n){var a=Gc(function(i,o){if(x0(o)){var l=t(o.from,o.to,o.velocity),c=aue(l,2),u=c[0],h=c[1];return Zt(Zt({},o),{},{from:u,velocity:h})}return o},r);return n<1?Gc(function(i,o){return x0(o)?Zt(Zt({},o),{},{velocity:sm(o.velocity,a[i].velocity,n),from:sm(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const uue=function(e,t,r,n,a){var i=zce(e,t),o=i.reduce(function(g,y){return Zt(Zt({},g),{},m0({},y,[e[y],t[y]]))},{}),l=i.reduce(function(g,y){return Zt(Zt({},g),{},m0({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,h,d=function(){return null},f=function(){return Gc(function(y,m){return m.from},l)},p=function(){return!Object.values(l).filter(x0).length},b=function(y){u||(u=y);var m=y-u,v=m/r.dt;l=cue(r,l,v),a(Zt(Zt(Zt({},e),t),f())),u=y,p()||(c=requestAnimationFrame(d))},x=function(y){h||(h=y);var m=(y-h)/n,v=Gc(function(w,N){return sm.apply(void 0,KC(N).concat([r(m)]))},o);if(a(Zt(Zt(Zt({},e),t),v)),m<1)c=requestAnimationFrame(d);else{var S=Gc(function(w,N){return sm.apply(void 0,KC(N).concat([r(1)]))},o);a(Zt(Zt(Zt({},e),t),S))}};return d=r.isStepper?b:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function ul(e){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}var due=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function hue(e,t){if(e==null)return{};var r=fue(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fue(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function wg(e){return gue(e)||xue(e)||pue(e)||mue()}function mue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pue(e,t){if(e){if(typeof e=="string")return g0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g0(e,t)}}function xue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gue(e){if(Array.isArray(e))return g0(e)}function g0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YC(Object(r),!0).forEach(function(n){Cc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cc(e,t,r){return t=DD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DD(n.key),n)}}function bue(e,t,r){return t&&vue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function DD(e){var t=jue(e,"string");return ul(t)==="symbol"?t:String(t)}function jue(e,t){if(ul(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ul(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y0(e,t)}function y0(e,t){return y0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},y0(e,t)}function Nue(e){var t=Sue();return function(){var n=am(e),a;if(t){var i=am(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return v0(this,a)}}function v0(e,t){if(t&&(ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b0(e)}function b0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function am(e){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},am(e)}var is=function(e){wue(r,e);var t=Nue(r);function r(n,a){var i;yue(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,h=o.to,d=o.steps,f=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(b0(i)),i.changeStyle=i.changeStyle.bind(b0(i)),!l||p<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:h}),v0(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof f=="function")return i.state={style:u},v0(i);i.state={style:c?Cc({},c,u):u}}else i.state={style:{}};return i}return bue(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,h=i.to,d=i.from,f=this.state.style;if(l){if(!o){var p={style:c?Cc({},c,h):h};this.state&&f&&(c&&f[c]!==h||!c&&f!==h)&&this.setState(p);return}if(!(Ece(a.to,h)&&a.canBegin&&a.isActive)){var b=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=b||u?d:a.to;if(this.state&&f){var g={style:c?Cc({},c,x):x};(c&&f[c]!==x||!c&&f!==x)&&this.setState(g)}this.runAnimation(kn(kn({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,h=a.begin,d=a.onAnimationEnd,f=a.onAnimationStart,p=uue(o,l,Zce(u),c,this.changeStyle),b=function(){i.stopJSAnimation=p()};this.manager.start([f,h,b,c,d])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],h=u.style,d=u.duration,f=d===void 0?0:d,p=function(x,g,y){if(y===0)return x;var m=g.duration,v=g.easing,S=v===void 0?"ease":v,w=g.style,N=g.properties,_=g.onAnimationEnd,C=y>0?o[y-1]:g,A=N||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(wg(x),[i.runJSAnimation.bind(i,{from:C.style,to:w,duration:m,easing:S}),m]);var k=VC(A,m,S),E=kn(kn(kn({},C.style),w),{},{transition:k});return[].concat(wg(x),[E,m,_]).filter(Bce)};return this.manager.start([c].concat(wg(o.reduce(p,[h,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Ice());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,h=a.onAnimationStart,d=a.onAnimationEnd,f=a.steps,p=a.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var x=l?Cc({},l,c):c,g=VC(Object.keys(x),o,u);b.start([h,i,kn(kn({},x),{},{transition:g}),o,d])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=hue(a,due),u=j.Children.count(i),h=this.state.style;if(typeof i=="function")return i(h);if(!l||u===0||o<=0)return i;var d=function(p){var b=p.props,x=b.style,g=x===void 0?{}:x,y=b.className,m=j.cloneElement(p,kn(kn({},c),{},{style:kn(kn({},g),h),className:y}));return m};return u===1?d(j.Children.only(i)):G.createElement("div",null,j.Children.map(i,function(f){return d(f)}))}}]),r}(j.PureComponent);is.displayName="Animate";is.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};is.propTypes={from:Ge.oneOfType([Ge.object,Ge.string]),to:Ge.oneOfType([Ge.object,Ge.string]),attributeName:Ge.string,duration:Ge.number,begin:Ge.number,easing:Ge.oneOfType([Ge.string,Ge.func]),steps:Ge.arrayOf(Ge.shape({duration:Ge.number.isRequired,style:Ge.object.isRequired,easing:Ge.oneOfType([Ge.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ge.func]),properties:Ge.arrayOf("string"),onAnimationEnd:Ge.func})),children:Ge.oneOfType([Ge.node,Ge.func]),isActive:Ge.bool,canBegin:Ge.bool,onAnimationEnd:Ge.func,shouldReAnimate:Ge.bool,onAnimationStart:Ge.func,onAnimationReStart:Ge.func};function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(this,arguments)}function _ue(e,t){return Oue(e)||Aue(e,t)||kue(e,t)||Cue()}function Cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kue(e,t){if(e){if(typeof e=="string")return XC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XC(e,t)}}function XC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Aue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Oue(e){if(Array.isArray(e))return e}function JC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JC(Object(r),!0).forEach(function(n){Eue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eue(e,t,r){return t=Pue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pue(e){var t=Tue(e,"string");return Yu(t)=="symbol"?t:t+""}function Tue(e,t){if(Yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZC=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,h;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],f=0,p=4;f<p;f++)d[f]=i[f]>o?o:i[f];h="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(h+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),h+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(h+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),h+="L ".concat(t+n,",").concat(r+a-l*d[2]),d[2]>0&&(h+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+a)),h+="L ".concat(t+c*d[3],",").concat(r+a),d[3]>0&&(h+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*d[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);h="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+n-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*b,`
            L `).concat(t+n,",").concat(r+a-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-c*b,",").concat(r+a,`
            L `).concat(t+c*b,",").concat(r+a,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*b," Z")}else h="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return h},$ue=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),h=Math.max(i,i+l),d=Math.min(o,o+c),f=Math.max(o,o+c);return n>=u&&n<=h&&a>=d&&a<=f}return!1},Due={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Mw=function(t){var r=QC(QC({},Due),t),n=j.useRef(),a=j.useState(-1),i=_ue(a,2),o=i[0],l=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,h=r.width,d=r.height,f=r.radius,p=r.className,b=r.animationEasing,x=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,m=r.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||d!==+d||h===0||d===0)return null;var v=Pe("recharts-rectangle",p);return m?G.createElement(is,{canBegin:o>0,from:{width:h,height:d,x:c,y:u},to:{width:h,height:d,x:c,y:u},duration:x,animationEasing:b,isActive:m},function(S){var w=S.width,N=S.height,_=S.x,C=S.y;return G.createElement(is,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:x,isActive:y,easing:b},G.createElement("path",im({},we(r,!0),{className:v,d:ZC(_,C,w,N,f),ref:n})))}):G.createElement("path",im({},we(r,!0),{className:v,d:ZC(c,u,h,d,f)}))},Mue=["points","className","baseLinePoints","connectNulls"];function So(){return So=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},So.apply(this,arguments)}function Rue(e,t){if(e==null)return{};var r=Iue(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Iue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ek(e){return Bue(e)||zue(e)||Fue(e)||Lue()}function Lue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fue(e,t){if(e){if(typeof e=="string")return j0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j0(e,t)}}function zue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bue(e){if(Array.isArray(e))return j0(e)}function j0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tk=function(t){return t&&t.x===+t.x&&t.y===+t.y},Uue=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){tk(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),tk(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Kc=function(t,r){var n=Uue(t);r&&(n=[n.reduce(function(i,o){return[].concat(ek(i),ek(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},que=function(t,r,n){var a=Kc(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Kc(r.reverse(),n).slice(1))},Vue=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Rue(t,Mue);if(!r||!r.length)return null;var l=Pe("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=que(r,a,i);return G.createElement("g",{className:l},G.createElement("path",So({},we(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?G.createElement("path",So({},we(o,!0),{fill:"none",d:Kc(r,i)})):null,c?G.createElement("path",So({},we(o,!0),{fill:"none",d:Kc(a,i)})):null)}var h=Kc(r,i);return G.createElement("path",So({},we(o,!0),{fill:h.slice(-1)==="Z"?o.fill:"none",className:l,d:h}))};function w0(){return w0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w0.apply(this,arguments)}var Vp=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=Pe("recharts-dot",i);return r===+r&&n===+n&&a===+a?j.createElement("circle",w0({},we(t,!1),Cf(t),{className:o,cx:r,cy:n,r:a})):null};function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}var Wue=["x","y","top","left","width","height","className"];function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N0.apply(this,arguments)}function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(r),!0).forEach(function(n){Kue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kue(e,t,r){return t=Hue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hue(e){var t=Yue(e,"string");return Xu(t)=="symbol"?t:t+""}function Yue(e,t){if(Xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xue(e,t){if(e==null)return{};var r=Jue(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Que=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},Zue=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,h=t.width,d=h===void 0?0:h,f=t.height,p=f===void 0?0:f,b=t.className,x=Xue(t,Wue),g=Gue({x:n,y:i,top:l,left:u,width:d,height:p},x);return!ie(n)||!ie(i)||!ie(d)||!ie(p)||!ie(l)||!ie(u)?null:G.createElement("path",N0({},we(g,!0),{className:Pe("recharts-cross",b),d:Que(n,i,d,p,l,u)}))},ede=Fp,tde=G4,rde=cs;function nde(e,t){return e&&e.length?ede(e,rde(t),tde):void 0}var sde=nde;const ade=Ye(sde);var ide=Fp,ode=cs,lde=K4;function cde(e,t){return e&&e.length?ide(e,ode(t),lde):void 0}var ude=cde;const dde=Ye(ude);var hde=["cx","cy","angle","ticks","axisLine"],fde=["ticks","tick","angle","tickFormatter","stroke"];function dl(e){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dl(e)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hc.apply(this,arguments)}function nk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ua(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(r),!0).forEach(function(n){Wp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sk(e,t){if(e==null)return{};var r=mde(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RD(n.key),n)}}function xde(e,t,r){return t&&ak(e.prototype,t),r&&ak(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gde(e,t,r){return t=om(t),yde(e,MD()?Reflect.construct(t,r||[],om(e).constructor):t.apply(e,r))}function yde(e,t){if(t&&(dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vde(e)}function vde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MD=function(){return!!e})()}function om(e){return om=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},om(e)}function bde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S0(e,t)}function S0(e,t){return S0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},S0(e,t)}function Wp(e,t,r){return t=RD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RD(e){var t=jde(e,"string");return dl(t)=="symbol"?t:t+""}function jde(e,t){if(dl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gp=function(e){function t(){return pde(this,t),gde(this,t,arguments)}return bde(t,e),xde(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return nt(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=ade(l,function(h){return h.coordinate||0}),u=dde(l,function(h){return h.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=sk(n,hde),h=l.reduce(function(b,x){return[Math.min(b[0],x.coordinate),Math.max(b[1],x.coordinate)]},[1/0,-1/0]),d=nt(a,i,h[0],o),f=nt(a,i,h[1],o),p=Ua(Ua(Ua({},we(u,!1)),{},{fill:"none"},we(c,!1)),{},{x1:d.x,y1:d.y,x2:f.x,y2:f.y});return G.createElement("line",Hc({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,h=sk(a,fde),d=this.getTickTextAnchor(),f=we(h,!1),p=we(o,!1),b=i.map(function(x,g){var y=n.getTickValueCoord(x),m=Ua(Ua(Ua(Ua({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},f),{},{stroke:"none",fill:u},p),{},{index:g},y),{},{payload:x});return G.createElement(Be,Hc({className:Pe("recharts-polar-radius-axis-tick",jD(o)),key:"tick-".concat(x.coordinate)},_i(n.props,x,g)),t.renderTickItem(o,m,c?c(x.value,g):x.value))});return G.createElement(Be,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:G.createElement(Be,{className:Pe("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Ht.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return G.isValidElement(n)?o=G.cloneElement(n,a):Oe(n)?o=n(a):o=G.createElement(Ci,Hc({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(j.PureComponent);Wp(Gp,"displayName","PolarRadiusAxis");Wp(Gp,"axisType","radiusAxis");Wp(Gp,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ei.apply(this,arguments)}function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(r),!0).forEach(function(n){Kp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ok(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LD(n.key),n)}}function Nde(e,t,r){return t&&ok(e.prototype,t),r&&ok(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sde(e,t,r){return t=lm(t),_de(e,ID()?Reflect.construct(t,r||[],lm(e).constructor):t.apply(e,r))}function _de(e,t){if(t&&(hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cde(e)}function Cde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ID(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ID=function(){return!!e})()}function lm(e){return lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lm(e)}function kde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_0(e,t)}function _0(e,t){return _0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_0(e,t)}function Kp(e,t,r){return t=LD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LD(e){var t=Ade(e,"string");return hl(t)=="symbol"?t:t+""}function Ade(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ode=Math.PI/180,lk=1e-5,Hp=function(e){function t(){return wde(this,t),Sde(this,t,arguments)}return kde(t,e),Nde(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,h=u||8,d=nt(i,o,l,n.coordinate),f=nt(i,o,l+(c==="inner"?-1:1)*h,n.coordinate);return{x1:d.x,y1:d.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*Ode),o;return i>lk?o=a==="outer"?"start":"end":i<-lk?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=qa(qa({},we(this.props,!1)),{},{fill:"none"},we(l,!1));if(c==="circle")return G.createElement(Vp,ei({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var h=this.props.ticks,d=h.map(function(f){return nt(a,i,o,f.coordinate)});return G.createElement(Vue,ei({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,h=we(this.props,!1),d=we(o,!1),f=qa(qa({},h),{},{fill:"none"},we(l,!1)),p=i.map(function(b,x){var g=n.getTickLineCoord(b),y=n.getTickTextAnchor(b),m=qa(qa(qa({textAnchor:y},h),{},{stroke:"none",fill:u},d),{},{index:x,payload:b,x:g.x2,y:g.y2});return G.createElement(Be,ei({className:Pe("recharts-polar-angle-axis-tick",jD(o)),key:"tick-".concat(b.coordinate)},_i(n.props,b,x)),l&&G.createElement("line",ei({className:"recharts-polar-angle-axis-tick-line"},f,g)),o&&t.renderTickItem(o,m,c?c(b.value,x):b.value))});return G.createElement(Be,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:G.createElement(Be,{className:Pe("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return G.isValidElement(n)?o=G.cloneElement(n,a):Oe(n)?o=n(a):o=G.createElement(Ci,ei({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(j.PureComponent);Kp(Hp,"displayName","PolarAngleAxis");Kp(Hp,"axisType","angleAxis");Kp(Hp,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Ede=U$,Pde=Ede(Object.getPrototypeOf,Object),Tde=Pde,$de=qs,Dde=Tde,Mde=Vs,Rde="[object Object]",Ide=Function.prototype,Lde=Object.prototype,FD=Ide.toString,Fde=Lde.hasOwnProperty,zde=FD.call(Object);function Bde(e){if(!Mde(e)||$de(e)!=Rde)return!1;var t=Dde(e);if(t===null)return!0;var r=Fde.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&FD.call(r)==zde}var Ude=Bde;const qde=Ye(Ude);var Vde=qs,Wde=Vs,Gde="[object Boolean]";function Kde(e){return e===!0||e===!1||Wde(e)&&Vde(e)==Gde}var Hde=Kde;const Yde=Ye(Hde);function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function cm(){return cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cm.apply(this,arguments)}function Xde(e,t){return ehe(e)||Zde(e,t)||Qde(e,t)||Jde()}function Jde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qde(e,t){if(e){if(typeof e=="string")return ck(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ck(e,t)}}function ck(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zde(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ehe(e){if(Array.isArray(e))return e}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(n){the(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function the(e,t,r){return t=rhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rhe(e){var t=nhe(e,"string");return Ju(t)=="symbol"?t:t+""}function nhe(e,t){if(Ju(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hk=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},she={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ahe=function(t){var r=dk(dk({},she),t),n=j.useRef(),a=j.useState(-1),i=Xde(a,2),o=i[0],l=i[1];j.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&l(v)}catch{}},[]);var c=r.x,u=r.y,h=r.upperWidth,d=r.lowerWidth,f=r.height,p=r.className,b=r.animationEasing,x=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||h!==+h||d!==+d||f!==+f||h===0&&d===0||f===0)return null;var m=Pe("recharts-trapezoid",p);return y?G.createElement(is,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:h,lowerWidth:d,height:f,x:c,y:u},duration:x,animationEasing:b,isActive:y},function(v){var S=v.upperWidth,w=v.lowerWidth,N=v.height,_=v.x,C=v.y;return G.createElement(is,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:x,easing:b},G.createElement("path",cm({},we(r,!0),{className:m,d:hk(_,C,S,w,N),ref:n})))}):G.createElement("g",null,G.createElement("path",cm({},we(r,!0),{className:m,d:hk(c,u,h,d,f)})))},ihe=["option","shapeType","propTransformer","activeClassName","isActive"];function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function ohe(e,t){if(e==null)return{};var r=lhe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lhe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function um(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(r),!0).forEach(function(n){che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function che(e,t,r){return t=uhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uhe(e){var t=dhe(e,"string");return Qu(t)=="symbol"?t:t+""}function dhe(e,t){if(Qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hhe(e,t){return um(um({},t),e)}function fhe(e,t){return e==="symbols"}function mk(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return G.createElement(Mw,r);case"trapezoid":return G.createElement(ahe,r);case"sector":return G.createElement(SD,r);case"symbols":if(fhe(t))return G.createElement(ew,r);break;default:return null}}function mhe(e){return j.isValidElement(e)?e.props:e}function zD(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?hhe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=ohe(e,ihe),u;if(j.isValidElement(t))u=j.cloneElement(t,um(um({},c),mhe(t)));else if(Oe(t))u=t(c);else if(qde(t)&&!Yde(t)){var h=a(t,c);u=G.createElement(mk,{shapeType:r,elementProps:h})}else{var d=c;u=G.createElement(mk,{shapeType:r,elementProps:d})}return l?G.createElement(Be,{className:o},u):u}function Yp(e,t){return t!=null&&"trapezoids"in e.props}function Xp(e,t){return t!=null&&"sectors"in e.props}function Zu(e,t){return t!=null&&"points"in e.props}function phe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function xhe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function ghe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function yhe(e,t){var r;return Yp(e,t)?r=phe:Xp(e,t)?r=xhe:Zu(e,t)&&(r=ghe),r}function vhe(e,t){var r;return Yp(e,t)?r="trapezoids":Xp(e,t)?r="sectors":Zu(e,t)&&(r="points"),r}function bhe(e,t){if(Yp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Xp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Zu(e,t)?t.payload:{}}function jhe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=vhe(r,t),i=bhe(r,t),o=n.filter(function(c,u){var h=ll(i,c),d=r.props[a].filter(function(b){var x=yhe(r,t);return x(b,t)}),f=r.props[a].indexOf(d[d.length-1]),p=u===f;return h&&p}),l=n.indexOf(o[o.length-1]);return l}var zh;function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function _o(){return _o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_o.apply(this,arguments)}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(r),!0).forEach(function(n){hn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function whe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UD(n.key),n)}}function Nhe(e,t,r){return t&&xk(e.prototype,t),r&&xk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function She(e,t,r){return t=dm(t),_he(e,BD()?Reflect.construct(t,r||[],dm(e).constructor):t.apply(e,r))}function _he(e,t){if(t&&(fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Che(e)}function Che(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BD=function(){return!!e})()}function dm(e){return dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dm(e)}function khe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C0(e,t)}function C0(e,t){return C0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},C0(e,t)}function hn(e,t,r){return t=UD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UD(e){var t=Ahe(e,"string");return fl(t)=="symbol"?t:t+""}function Ahe(e,t){if(fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wn=function(e){function t(r){var n;return whe(this,t),n=She(this,t,[r]),hn(n,"pieRef",null),hn(n,"sectorRefs",[]),hn(n,"id",Ul("recharts-pie-")),hn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Oe(a)&&a()}),hn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Oe(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return khe(t,e),Nhe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,h=we(this.props,!1),d=we(o,!1),f=we(l,!1),p=o&&o.offsetRadius||20,b=n.map(function(x,g){var y=(x.startAngle+x.endAngle)/2,m=nt(x.cx,x.cy,x.outerRadius+p,y),v=et(et(et(et({},h),x),{},{stroke:"none"},d),{},{index:g,textAnchor:t.getTextAnchor(m.x,x.cx)},m),S=et(et(et(et({},h),x),{},{fill:"none",stroke:x.fill},f),{},{index:g,points:[nt(x.cx,x.cy,x.outerRadius,y),m]}),w=c;return Ee(c)&&Ee(u)?w="value":Ee(c)&&(w=u),G.createElement(Be,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,v,zt(x,w)))});return G.createElement(Be,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,h){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=a.isActiveIndex(h),f=c&&a.hasActiveIndex()?c:null,p=d?o:f,b=et(et({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return G.createElement(Be,_o({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},_i(a.props,u,h),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(h)}),G.createElement(zD,_o({option:p,isActive:d,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,h=a.animationId,d=this.state,f=d.prevSectors,p=d.prevIsAnimationActive;return G.createElement(is,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var x=b.t,g=[],y=i&&i[0],m=y.startAngle;return i.forEach(function(v,S){var w=f&&f[S],N=S>0?Hr(v,"paddingAngle",0):0;if(w){var _=Ar(w.endAngle-w.startAngle,v.endAngle-v.startAngle),C=et(et({},v),{},{startAngle:m+N,endAngle:m+_(x)+N});g.push(C),m=C.endAngle}else{var A=v.endAngle,k=v.startAngle,E=Ar(0,A-k),O=E(x),P=et(et({},v),{},{startAngle:m+N,endAngle:m+O+N});g.push(P),m=P.endAngle}}),G.createElement(Be,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!ll(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,h=a.cy,d=a.innerRadius,f=a.outerRadius,p=a.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!ie(u)||!ie(h)||!ie(d)||!ie(f))return null;var x=Pe("recharts-pie",l);return G.createElement(Be,{tabIndex:this.props.rootTabIndex,className:x,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),Ht.renderCallByParent(this.props,null,!1),(!p||b)&&ks.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(G.isValidElement(n))return G.cloneElement(n,a);if(Oe(n))return n(a);var o=Pe("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return G.createElement(Lo,_o({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(G.isValidElement(n))return G.cloneElement(n,a);var o=i;if(Oe(n)&&(o=n(a),G.isValidElement(o)))return o;var l=Pe("recharts-pie-label-text",typeof n!="boolean"&&!Oe(n)?n.className:"");return G.createElement(Ci,_o({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(j.PureComponent);zh=Wn;hn(Wn,"displayName","Pie");hn(Wn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ii.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});hn(Wn,"parseDeltaAngle",function(e,t){var r=yr(t-e),n=Math.min(Math.abs(t-e),360);return r*n});hn(Wn,"getRealPieData",function(e){var t=e.data,r=e.children,n=we(e,!1),a=gn(r,Gl);return t&&t.length?t.map(function(i,o){return et(et(et({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return et(et({},n),i.props)}):[]});hn(Wn,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=bD(a,i),l=n+vr(e.cx,a,a/2),c=r+vr(e.cy,i,i/2),u=vr(e.innerRadius,o,0),h=vr(e.outerRadius,o,o*.8),d=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:h,maxRadius:d}});hn(Wn,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?et(et({},t.type.defaultProps),t.props):t.props,a=zh.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,h=n.nameKey,d=n.valueKey,f=n.tooltipType,p=Math.abs(n.minAngle),b=zh.parseCoordinateOfPie(n,r),x=zh.parseDeltaAngle(o,l),g=Math.abs(x),y=u;Ee(u)&&Ee(d)?(zn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Ee(u)&&(zn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=d);var m=a.filter(function(C){return zt(C,y,0)!==0}).length,v=(g>=360?m:m-1)*c,S=g-m*p-v,w=a.reduce(function(C,A){var k=zt(A,y,0);return C+(ie(k)?k:0)},0),N;if(w>0){var _;N=a.map(function(C,A){var k=zt(C,y,0),E=zt(C,h,A),O=(ie(k)?k:0)/w,P;A?P=_.endAngle+yr(x)*c*(k!==0?1:0):P=o;var M=P+yr(x)*((k!==0?p:0)+O*S),T=(P+M)/2,F=(b.innerRadius+b.outerRadius)/2,q=[{name:E,value:k,payload:C,dataKey:y,type:f}],$=nt(b.cx,b.cy,F,T);return _=et(et(et({percent:O,cornerRadius:i,name:E,tooltipPayload:q,midAngle:T,middleRadius:F,tooltipPosition:$},C),b),{},{value:zt(C,y),startAngle:P,endAngle:M,payload:C,paddingAngle:yr(x)*c}),_})}return et(et({},b),{},{sectors:N,data:a})});var Ohe=Math.ceil,Ehe=Math.max;function Phe(e,t,r,n){for(var a=-1,i=Ehe(Ohe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var The=Phe,$he=o4,gk=1/0,Dhe=17976931348623157e292;function Mhe(e){if(!e)return e===0?e:0;if(e=$he(e),e===gk||e===-gk){var t=e<0?-1:1;return t*Dhe}return e===e?e:0}var qD=Mhe,Rhe=The,Ihe=Tp,Ng=qD;function Lhe(e){return function(t,r,n){return n&&typeof n!="number"&&Ihe(t,r,n)&&(r=n=void 0),t=Ng(t),r===void 0?(r=t,t=0):r=Ng(r),n=n===void 0?t<r?1:-1:Ng(n),Rhe(t,r,n,e)}}var Fhe=Lhe,zhe=Fhe,Bhe=zhe(),Uhe=Bhe;const hm=Ye(Uhe);function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(r),!0).forEach(function(n){VD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VD(e,t,r){return t=qhe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=Vhe(e,"string");return ed(t)=="symbol"?t:t+""}function Vhe(e,t){if(ed(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Whe=["Webkit","Moz","O","ms"],Ghe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=Whe.reduce(function(i,o){return vk(vk({},i),{},VD({},o+n,r))},{});return a[t]=r,a};function ml(e){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(this,arguments)}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Sg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(n){Fr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Khe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GD(n.key),n)}}function Hhe(e,t,r){return t&&jk(e.prototype,t),r&&jk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yhe(e,t,r){return t=mm(t),Xhe(e,WD()?Reflect.construct(t,r||[],mm(e).constructor):t.apply(e,r))}function Xhe(e,t){if(t&&(ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jhe(e)}function Jhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WD=function(){return!!e})()}function mm(e){return mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mm(e)}function Qhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k0(e,t)}function k0(e,t){return k0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},k0(e,t)}function Fr(e,t,r){return t=GD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GD(e){var t=Zhe(e,"string");return ml(t)=="symbol"?t:t+""}function Zhe(e,t){if(ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var efe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Vc().domain(hm(0,c)).range([i,i+o-l]),h=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:h}},wk=function(t){return t.changedTouches&&!!t.changedTouches.length},pl=function(e){function t(r){var n;return Khe(this,t),n=Yhe(this,t,[r]),Fr(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Fr(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Fr(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Fr(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Fr(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Fr(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Fr(n,"handleSlideDragStart",function(a){var i=wk(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Qhe(t,e),Hhe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,h=u.length-1,d=Math.min(a,i),f=Math.max(a,i),p=t.getIndexInRange(o,d),b=t.getIndexInRange(o,f);return{startIndex:p-p%c,endIndex:b===h?h:b-b%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=zt(i[n],l,n);return Oe(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,h=c.width,d=c.travellerWidth,f=c.startIndex,p=c.endIndex,b=c.onChange,x=n.pageX-i;x>0?x=Math.min(x,u+h-d-l,u+h-d-o):x<0&&(x=Math.max(x,u-o,u-l));var g=this.getIndex({startX:o+x,endX:l+x});(g.startIndex!==f||g.endIndex!==p)&&b&&b(g),this.setState({startX:o+x,endX:l+x,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=wk(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],h=this.props,d=h.x,f=h.width,p=h.travellerWidth,b=h.onChange,x=h.gap,g=h.data,y={startX:this.state.startX,endX:this.state.endX},m=n.pageX-i;m>0?m=Math.min(m,d+f-p-u):m<0&&(m=Math.max(m,d-u)),y[o]=u+m;var v=this.getIndex(y),S=v.startIndex,w=v.endIndex,N=function(){var C=g.length-1;return o==="startX"&&(l>c?S%x===0:w%x===0)||l<c&&w===C||o==="endX"&&(l>c?w%x===0:S%x===0)||l>c&&w===C};this.setState(Fr(Fr({},o,u+m),"brushMoveStartX",n.pageX),function(){b&&N()&&b(v)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,h=this.state[a],d=l.indexOf(h);if(d!==-1){var f=d+n;if(!(f===-1||f>=l.length)){var p=l[f];a==="startX"&&p>=u||a==="endX"&&p<=c||this.setState(Fr({},a,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return G.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,h=n.padding,d=j.Children.only(u);return d?G.cloneElement(d,{x:a,y:i,width:o,height:l,margin:h,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,h=c.travellerWidth,d=c.height,f=c.traveller,p=c.ariaLabel,b=c.data,x=c.startIndex,g=c.endIndex,y=Math.max(n,this.props.x),m=Sg(Sg({},we(this.props,!1)),{},{x:y,y:u,width:h,height:d}),v=p||"Min value: ".concat((i=b[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[g])===null||o===void 0?void 0:o.name);return G.createElement(Be,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,m))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,h=Math.min(n,a)+u,d=Math.max(Math.abs(a-n)-u,0);return G.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:h,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,h=this.state,d=h.startX,f=h.endX,p=5,b={pointerEvents:"none",fill:u};return G.createElement(Be,{className:"recharts-brush-texts"},G.createElement(Ci,fm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,f)-p,y:o+l/2},b),this.getTextOfTick(a)),G.createElement(Ci,fm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,f)+c+p,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,h=n.height,d=n.alwaysShowText,f=this.state,p=f.startX,b=f.endX,x=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,m=f.isTravellerFocused;if(!a||!a.length||!ie(l)||!ie(c)||!ie(u)||!ie(h)||u<=0||h<=0)return null;var v=Pe("recharts-brush",i),S=G.Children.count(o)===1,w=Ghe("userSelect","none");return G.createElement(Be,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,b),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(b,"endX"),(x||g||y||m||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return G.createElement(G.Fragment,null,G.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),G.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),G.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return G.isValidElement(n)?i=G.cloneElement(n,a):Oe(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,h=n.startIndex,d=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Sg({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?efe({data:i,width:o,x:l,travellerWidth:c,startIndex:h,endIndex:d}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var f=a.scale.domain().map(function(p){return a.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(j.PureComponent);Fr(pl,"displayName","Brush");Fr(pl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var tfe=ow;function rfe(e,t){var r;return tfe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var nfe=rfe,sfe=D$,afe=cs,ife=nfe,ofe=Ir,lfe=Tp;function cfe(e,t,r){var n=ofe(e)?sfe:ife;return r&&lfe(e,t,r)&&(t=void 0),n(e,afe(t))}var ufe=cfe;const dfe=Ye(ufe);var ns=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},Nk=r4;function hfe(e,t,r){t=="__proto__"&&Nk?Nk(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ffe=hfe,mfe=ffe,pfe=e4,xfe=cs;function gfe(e,t){var r={};return t=xfe(t),pfe(e,function(n,a,i){mfe(r,a,t(n,a,i))}),r}var yfe=gfe;const vfe=Ye(yfe);function bfe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var jfe=bfe,wfe=ow;function Nfe(e,t){var r=!0;return wfe(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var Sfe=Nfe,_fe=jfe,Cfe=Sfe,kfe=cs,Afe=Ir,Ofe=Tp;function Efe(e,t,r){var n=Afe(e)?_fe:Cfe;return r&&Ofe(e,t,r)&&(t=void 0),n(e,kfe(t))}var Pfe=Efe;const KD=Ye(Pfe);var Tfe=["x","y"];function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A0.apply(this,arguments)}function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(r),!0).forEach(function(n){$fe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $fe(e,t,r){return t=Dfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dfe(e){var t=Mfe(e,"string");return td(t)=="symbol"?t:t+""}function Mfe(e,t){if(td(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(td(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rfe(e,t){if(e==null)return{};var r=Ife(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ife(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lfe(e,t){var r=e.x,n=e.y,a=Rfe(e,Tfe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),h=parseInt(u,10),d="".concat(t.width||a.width),f=parseInt(d,10);return xc(xc(xc(xc(xc({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:h,width:f,name:t.name,radius:t.radius})}function _k(e){return G.createElement(zD,A0({shapeType:"rectangle",propTransformer:Lfe,activeClassName:"recharts-active-bar"},e))}var Ffe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=ie(n)||iG(n);return i?t(n,a):(i||Ai(),r)}},zfe=["value","background"],HD;function xl(e){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function Bfe(e,t){if(e==null)return{};var r=Ufe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ufe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pm.apply(this,arguments)}function Ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(r),!0).forEach(function(n){ua(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XD(n.key),n)}}function Vfe(e,t,r){return t&&kk(e.prototype,t),r&&kk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wfe(e,t,r){return t=xm(t),Gfe(e,YD()?Reflect.construct(t,r||[],xm(e).constructor):t.apply(e,r))}function Gfe(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kfe(e)}function Kfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YD=function(){return!!e})()}function xm(e){return xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xm(e)}function Hfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O0(e,t)}function O0(e,t){return O0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},O0(e,t)}function ua(e,t,r){return t=XD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XD(e){var t=Yfe(e,"string");return xl(t)=="symbol"?t:t+""}function Yfe(e,t){if(xl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var At=function(e){function t(){var r;qfe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Wfe(this,t,[].concat(a)),ua(r,"state",{isAnimationFinished:!1}),ua(r,"id",Ul("recharts-bar-")),ua(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),ua(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Hfe(t,e),Vfe(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,h=we(this.props,!1);return n&&n.map(function(d,f){var p=f===c,b=p?u:o,x=Et(Et(Et({},h),d),{},{isActive:p,option:b,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return G.createElement(Be,pm({className:"recharts-bar-rectangle"},_i(a.props,d,f),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(f)}),G.createElement(_k,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,h=a.animationEasing,d=a.animationId,f=this.state.prevData;return G.createElement(is,{begin:c,duration:u,isActive:l,easing:h,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var b=p.t,x=i.map(function(g,y){var m=f&&f[y];if(m){var v=Ar(m.x,g.x),S=Ar(m.y,g.y),w=Ar(m.width,g.width),N=Ar(m.height,g.height);return Et(Et({},g),{},{x:v(b),y:S(b),width:w(b),height:N(b)})}if(o==="horizontal"){var _=Ar(0,g.height),C=_(b);return Et(Et({},g),{},{y:g.y+g.height-C,height:C})}var A=Ar(0,g.width),k=A(b);return Et(Et({},g),{},{width:k})});return G.createElement(Be,null,n.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!ll(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=we(this.props.background,!1);return i.map(function(u,h){u.value;var d=u.background,f=Bfe(u,zfe);if(!d)return null;var p=Et(Et(Et(Et(Et({},f),{},{fill:"#eee"},d),c),_i(n.props,u,h)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:h,className:"recharts-bar-background-rectangle"});return G.createElement(_k,pm({key:"background-bar-".concat(h),option:n.props.background,isActive:h===l},p))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,h=i.children,d=gn(h,qp);if(!d)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,p=function(g,y){var m=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:m,errorVal:zt(g,y)}},b={clipPath:n?"url(#clipPath-".concat(a,")"):null};return G.createElement(Be,b,d.map(function(x){return G.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,h=n.top,d=n.width,f=n.height,p=n.isAnimationActive,b=n.background,x=n.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,y=Pe("recharts-bar",o),m=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,S=m||v,w=Ee(x)?this.id:x;return G.createElement(Be,{className:y},m||v?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(w)},G.createElement("rect",{x:m?u:u-d/2,y:v?h:h-f/2,width:m?d:d*2,height:v?f:f*2}))):null,G.createElement(Be,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!p||g)&&ks.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(j.PureComponent);HD=At;ua(At,"displayName","Bar");ua(At,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ii.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ua(At,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,h=e.dataStartIndex,d=e.displayedData,f=e.offset,p=_oe(n,r);if(!p)return null;var b=t.layout,x=r.type.defaultProps,g=x!==void 0?Et(Et({},x),r.props):r.props,y=g.dataKey,m=g.children,v=g.minPointSize,S=b==="horizontal"?o:i,w=u?S.scale.domain():null,N=Toe({numericAxis:S}),_=gn(m,Gl),C=d.map(function(A,k){var E,O,P,M,T,F;u?E=Coe(u[h+k],w):(E=zt(A,y),Array.isArray(E)||(E=[N,E]));var q=Ffe(v,HD.defaultProps.minPointSize)(E[1],k);if(b==="horizontal"){var $,U=[o.scale(E[0]),o.scale(E[1])],X=U[0],K=U[1];O=vC({axis:i,ticks:l,bandSize:a,offset:p.offset,entry:A,index:k}),P=($=K??X)!==null&&$!==void 0?$:void 0,M=p.size;var z=X-K;if(T=Number.isNaN(z)?0:z,F={x:O,y:o.y,width:M,height:o.height},Math.abs(q)>0&&Math.abs(T)<Math.abs(q)){var H=yr(T||q)*(Math.abs(q)-Math.abs(T));P-=H,T+=H}}else{var Q=[i.scale(E[0]),i.scale(E[1])],se=Q[0],ue=Q[1];if(O=se,P=vC({axis:o,ticks:c,bandSize:a,offset:p.offset,entry:A,index:k}),M=ue-se,T=p.size,F={x:i.x,y:P,width:i.width,height:T},Math.abs(q)>0&&Math.abs(M)<Math.abs(q)){var ye=yr(M||q)*(Math.abs(q)-Math.abs(M));M+=ye}}return Et(Et(Et({},A),{},{x:O,y:P,width:M,height:T,value:u?E:E[1],payload:A,background:F},_&&_[k]&&_[k].props),{},{tooltipPayload:[yD(r,A)],tooltipPosition:{x:O+M/2,y:P+T/2}})});return Et({data:C,layout:b},f)});function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function Xfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JD(n.key),n)}}function Jfe(e,t,r){return t&&Ak(e.prototype,t),r&&Ak(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(n){Jp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jp(e,t,r){return t=JD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JD(e){var t=Qfe(e,"string");return rd(t)=="symbol"?t:t+""}function Qfe(e,t){if(rd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QD=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,h=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!Br(u,At);return h.reduce(function(p,b){var x=r[b],g=x.orientation,y=x.domain,m=x.padding,v=m===void 0?{}:m,S=x.mirror,w=x.reversed,N="".concat(g).concat(S?"Mirror":""),_,C,A,k,E;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var O=y[1]-y[0],P=1/0,M=x.categoricalDomain.sort(cG);if(M.forEach(function(Q,se){se>0&&(P=Math.min((Q||0)-(M[se-1]||0),P))}),Number.isFinite(P)){var T=P/O,F=x.layout==="vertical"?n.height:n.width;if(x.padding==="gap"&&(_=T*F/2),x.padding==="no-gap"){var q=vr(t.barCategoryGap,T*F),$=T*F/2;_=$-q-($-q)/F*q}}}a==="xAxis"?C=[n.left+(v.left||0)+(_||0),n.left+n.width-(v.right||0)-(_||0)]:a==="yAxis"?C=c==="horizontal"?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(_||0),n.top+n.height-(v.bottom||0)-(_||0)]:C=x.range,w&&(C=[C[1],C[0]]);var U=mD(x,i,f),X=U.scale,K=U.realScaleType;X.domain(y).range(C),pD(X);var z=xD(X,Mn(Mn({},x),{},{realScaleType:K}));a==="xAxis"?(E=g==="top"&&!S||g==="bottom"&&S,A=n.left,k=d[N]-E*x.height):a==="yAxis"&&(E=g==="left"&&!S||g==="right"&&S,A=d[N]-E*x.width,k=n.top);var H=Mn(Mn(Mn({},x),z),{},{realScaleType:K,x:A,y:k,scale:X,width:a==="xAxis"?n.width:x.width,height:a==="yAxis"?n.height:x.height});return H.bandSize=Zf(H,z),!x.hide&&a==="xAxis"?d[N]+=(E?-1:1)*H.height:x.hide||(d[N]+=(E?-1:1)*H.width),Mn(Mn({},p),{},Jp({},b,H))},{})},ZD=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},Zfe=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return ZD({x:r,y:n},{x:a,y:i})},eM=function(){function e(t){Xfe(this,e),this.scale=t}return Jfe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();Jp(eM,"EPS",1e-4);var Rw=function(t){var r=Object.keys(t).reduce(function(n,a){return Mn(Mn({},n),{},Jp({},a,eM.create(t[a])))},{});return Mn(Mn({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return vfe(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return KD(a,function(i,o){return r[o].isInRange(i)})}})};function eme(e){return(e%180+180)%180}var tme=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=eme(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},rme=cs,nme=Cd,sme=Ep;function ame(e){return function(t,r,n){var a=Object(t);if(!nme(t)){var i=rme(r);t=sme(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var ime=ame,ome=qD;function lme(e){var t=ome(e),r=t%1;return t===t?r?t-r:t:0}var cme=lme,ume=H$,dme=cs,hme=cme,fme=Math.max;function mme(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:hme(r);return a<0&&(a=fme(n+a,0)),ume(e,dme(t),a)}var pme=mme,xme=ime,gme=pme,yme=xme(gme),vme=yme;const bme=Ye(vme);var jme=hW(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),Iw=j.createContext(void 0),Lw=j.createContext(void 0),tM=j.createContext(void 0),rM=j.createContext({}),nM=j.createContext(void 0),sM=j.createContext(0),aM=j.createContext(0),Ek=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,h=jme(i);return G.createElement(Iw.Provider,{value:n},G.createElement(Lw.Provider,{value:a},G.createElement(rM.Provider,{value:i},G.createElement(tM.Provider,{value:h},G.createElement(nM.Provider,{value:o},G.createElement(sM.Provider,{value:u},G.createElement(aM.Provider,{value:c},l)))))))},wme=function(){return j.useContext(nM)},iM=function(t){var r=j.useContext(Iw);r==null&&Ai();var n=r[t];return n==null&&Ai(),n},Nme=function(){var t=j.useContext(Iw);return aa(t)},Sme=function(){var t=j.useContext(Lw),r=bme(t,function(n){return KD(n.domain,Number.isFinite)});return r||aa(t)},oM=function(t){var r=j.useContext(Lw);r==null&&Ai();var n=r[t];return n==null&&Ai(),n},_me=function(){var t=j.useContext(tM);return t},Cme=function(){return j.useContext(rM)},Fw=function(){return j.useContext(aM)},zw=function(){return j.useContext(sM)};function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function kme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ame(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cM(n.key),n)}}function Ome(e,t,r){return t&&Ame(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eme(e,t,r){return t=gm(t),Pme(e,lM()?Reflect.construct(t,r||[],gm(e).constructor):t.apply(e,r))}function Pme(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tme(e)}function Tme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lM=function(){return!!e})()}function gm(e){return gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gm(e)}function $me(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E0(e,t)}function E0(e,t){return E0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},E0(e,t)}function Pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(r),!0).forEach(function(n){Bw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bw(e,t,r){return t=cM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cM(e){var t=Dme(e,"string");return gl(t)=="symbol"?t:t+""}function Dme(e,t){if(gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Mme(e,t){return Fme(e)||Lme(e,t)||Ime(e,t)||Rme()}function Rme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ime(e,t){if(e){if(typeof e=="string")return $k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $k(e,t)}}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Lme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Fme(e){if(Array.isArray(e))return e}function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P0.apply(this,arguments)}var zme=function(t,r){var n;return G.isValidElement(t)?n=G.cloneElement(t,r):Oe(t)?n=t(r):n=G.createElement("line",P0({},r,{className:"recharts-reference-line-line"})),n},Bme=function(t,r,n,a,i,o,l,c,u){var h=i.x,d=i.y,f=i.width,p=i.height;if(n){var b=u.y,x=t.y.apply(b,{position:o});if(ns(u,"discard")&&!t.y.isInRange(x))return null;var g=[{x:h+f,y:x},{x:h,y:x}];return c==="left"?g.reverse():g}if(r){var y=u.x,m=t.x.apply(y,{position:o});if(ns(u,"discard")&&!t.x.isInRange(m))return null;var v=[{x:m,y:d+p},{x:m,y:d}];return l==="top"?v.reverse():v}if(a){var S=u.segment,w=S.map(function(N){return t.apply(N,{position:o})});return ns(u,"discard")&&dfe(w,function(N){return!t.isInRange(N)})?null:w}return null};function Ume(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=wme(),h=iM(a),d=oM(i),f=_me();if(!u||!f)return null;zn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=Rw({x:h.scale,y:d.scale}),b=Ut(t),x=Ut(r),g=n&&n.length===2,y=Bme(p,b,x,g,f,e.position,h.orientation,d.orientation,e);if(!y)return null;var m=Mme(y,2),v=m[0],S=v.x,w=v.y,N=m[1],_=N.x,C=N.y,A=ns(e,"hidden")?"url(#".concat(u,")"):void 0,k=Tk(Tk({clipPath:A},we(e,!0)),{},{x1:S,y1:w,x2:_,y2:C});return G.createElement(Be,{className:Pe("recharts-reference-line",l)},zme(o,k),Ht.renderCallByParent(e,Zfe({x1:S,y1:w,x2:_,y2:C})))}var Uw=function(e){function t(){return kme(this,t),Eme(this,t,arguments)}return $me(t,e),Ome(t,[{key:"render",value:function(){return G.createElement(Ume,this.props)}}])}(G.Component);Bw(Uw,"displayName","ReferenceLine");Bw(Uw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T0.apply(this,arguments)}function yl(e){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(e)}function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){Qp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dM(n.key),n)}}function Wme(e,t,r){return t&&Vme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gme(e,t,r){return t=ym(t),Kme(e,uM()?Reflect.construct(t,r||[],ym(e).constructor):t.apply(e,r))}function Kme(e,t){if(t&&(yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hme(e)}function Hme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uM=function(){return!!e})()}function ym(e){return ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ym(e)}function Yme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$0(e,t)}function $0(e,t){return $0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},$0(e,t)}function Qp(e,t,r){return t=dM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dM(e){var t=Xme(e,"string");return yl(t)=="symbol"?t:t+""}function Xme(e,t){if(yl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Jme=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=Rw({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return ns(t,"discard")&&!o.isInRange(l)?null:l},Zp=function(e){function t(){return qme(this,t),Gme(this,t,arguments)}return Yme(t,e),Wme(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Ut(a),h=Ut(i);if(zn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!h)return null;var d=Jme(this.props);if(!d)return null;var f=d.x,p=d.y,b=this.props,x=b.shape,g=b.className,y=ns(this.props,"hidden")?"url(#".concat(c,")"):void 0,m=Mk(Mk({clipPath:y},we(this.props,!0)),{},{cx:f,cy:p});return G.createElement(Be,{className:Pe("recharts-reference-dot",g)},t.renderDot(x,m),Ht.renderCallByParent(this.props,{x:f-o,y:p-o,width:2*o,height:2*o}))}}])}(G.Component);Qp(Zp,"displayName","ReferenceDot");Qp(Zp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Qp(Zp,"renderDot",function(e,t){var r;return G.isValidElement(e)?r=G.cloneElement(e,t):Oe(e)?r=e(t):r=G.createElement(Vp,T0({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function D0(){return D0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D0.apply(this,arguments)}function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function Rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(r),!0).forEach(function(n){ex(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fM(n.key),n)}}function epe(e,t,r){return t&&Zme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tpe(e,t,r){return t=vm(t),rpe(e,hM()?Reflect.construct(t,r||[],vm(e).constructor):t.apply(e,r))}function rpe(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return npe(e)}function npe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hM=function(){return!!e})()}function vm(e){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vm(e)}function spe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M0(e,t)}function M0(e,t){return M0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},M0(e,t)}function ex(e,t,r){return t=fM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fM(e){var t=ape(e,"string");return vl(t)=="symbol"?t:t+""}function ape(e,t){if(vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ipe=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,h=i.xAxis,d=i.yAxis;if(!h||!d)return null;var f=Rw({x:h.scale,y:d.scale}),p={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},b={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(u,{position:"end"}):f.y.rangeMax};return ns(i,"discard")&&(!f.isInRange(p)||!f.isInRange(b))?null:ZD(p,b)},tx=function(e){function t(){return Qme(this,t),tpe(this,t,arguments)}return spe(t,e),epe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,h=n.clipPathId;zn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Ut(a),f=Ut(i),p=Ut(o),b=Ut(l),x=this.props.shape;if(!d&&!f&&!p&&!b&&!x)return null;var g=ipe(d,f,p,b,this.props);if(!g&&!x)return null;var y=ns(this.props,"hidden")?"url(#".concat(h,")"):void 0;return G.createElement(Be,{className:Pe("recharts-reference-area",c)},t.renderRect(x,Ik(Ik({clipPath:y},we(this.props,!0)),g)),Ht.renderCallByParent(this.props,g))}}])}(G.Component);ex(tx,"displayName","ReferenceArea");ex(tx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ex(tx,"renderRect",function(e,t){var r;return G.isValidElement(e)?r=G.cloneElement(e,t):Oe(e)?r=e(t):r=G.createElement(Mw,D0({},t,{className:"recharts-reference-area-rect"})),r});function mM(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function ope(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return tme(n,r)}function lpe(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function bm(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function cpe(e,t){return mM(e,t+1)}function upe(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,h=o,d=function(){var b=n==null?void 0:n[c];if(b===void 0)return{v:mM(n,u)};var x=c,g,y=function(){return g===void 0&&(g=r(b,x)),g},m=b.coordinate,v=c===0||bm(e,m,y,h,l);v||(c=0,h=o,u+=1),v&&(h=m+e*(y()/2+a),c+=u)},f;u<=i.length;)if(f=d(),f)return f.v;return[]}function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){dpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dpe(e,t,r){return t=hpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hpe(e){var t=fpe(e,"string");return nd(t)=="symbol"?t:t+""}function fpe(e,t){if(nd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mpe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(f){var p=i[f],b,x=function(){return b===void 0&&(b=r(p,f)),b};if(f===o-1){var g=e*(p.coordinate+e*x()/2-c);i[f]=p=ur(ur({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else i[f]=p=ur(ur({},p),{},{tickCoord:p.coordinate});var y=bm(e,p.tickCoord,x,l,c);y&&(c=p.tickCoord-e*(x()/2+a),i[f]=ur(ur({},p),{},{isShow:!0}))},h=o-1;h>=0;h--)u(h);return i}function ppe(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var h=n[l-1],d=r(h,l-1),f=e*(h.coordinate+e*d/2-u);o[l-1]=h=ur(ur({},h),{},{tickCoord:f>0?h.coordinate-f*e:h.coordinate});var p=bm(e,h.tickCoord,function(){return d},c,u);p&&(u=h.tickCoord-e*(d/2+a),o[l-1]=ur(ur({},h),{},{isShow:!0}))}for(var b=i?l-1:l,x=function(m){var v=o[m],S,w=function(){return S===void 0&&(S=r(v,m)),S};if(m===0){var N=e*(v.coordinate-e*w()/2-c);o[m]=v=ur(ur({},v),{},{tickCoord:N<0?v.coordinate-N*e:v.coordinate})}else o[m]=v=ur(ur({},v),{},{tickCoord:v.coordinate});var _=bm(e,v.tickCoord,w,c,u);_&&(c=v.tickCoord+e*(w()/2+a),o[m]=ur(ur({},v),{},{isShow:!0}))},g=0;g<b;g++)x(g);return o}function qw(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,h=e.unit,d=e.angle;if(!a||!a.length||!n)return[];if(ie(c)||Ii.isSsr)return cpe(a,typeof c=="number"&&ie(c)?c:0);var f=[],p=l==="top"||l==="bottom"?"width":"height",b=h&&p==="width"?qc(h,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=function(v,S){var w=Oe(u)?u(v.value,S):v.value;return p==="width"?ope(qc(w,{fontSize:t,letterSpacing:r}),b,d):qc(w,{fontSize:t,letterSpacing:r})[p]},g=a.length>=2?yr(a[1].coordinate-a[0].coordinate):1,y=lpe(i,g,p);return c==="equidistantPreserveStart"?upe(g,y,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?f=ppe(g,y,x,a,o,c==="preserveStartEnd"):f=mpe(g,y,x,a,o),f.filter(function(m){return m.isShow}))}var xpe=["viewBox"],gpe=["viewBox"],ype=["ticks"];function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}function Co(){return Co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Co.apply(this,arguments)}function Fk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(r),!0).forEach(function(n){Vw(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _g(e,t){if(e==null)return{};var r=vpe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vpe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xM(n.key),n)}}function jpe(e,t,r){return t&&zk(e.prototype,t),r&&zk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function wpe(e,t,r){return t=jm(t),Npe(e,pM()?Reflect.construct(t,r||[],jm(e).constructor):t.apply(e,r))}function Npe(e,t){if(t&&(bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Spe(e)}function Spe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pM=function(){return!!e})()}function jm(e){return jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jm(e)}function _pe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R0(e,t)}function R0(e,t){return R0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R0(e,t)}function Vw(e,t,r){return t=xM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xM(e){var t=Cpe(e,"string");return bl(t)=="symbol"?t:t+""}function Cpe(e,t){if(bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xl=function(e){function t(r){var n;return bpe(this,t),n=wpe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return _pe(t,e),jpe(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=_g(n,xpe),l=this.props,c=l.viewBox,u=_g(l,gpe);return!Mo(i,c)||!Mo(o,u)||!Mo(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,h=a.tickSize,d=a.mirror,f=a.tickMargin,p,b,x,g,y,m,v=d?-1:1,S=n.tickSize||h,w=ie(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=b=n.coordinate,g=o+ +!d*c,x=g-v*S,m=x-v*f,y=w;break;case"left":x=g=n.coordinate,b=i+ +!d*l,p=b-v*S,y=p-v*f,m=w;break;case"right":x=g=n.coordinate,b=i+ +d*l,p=b+v*S,y=p+v*f,m=w;break;default:p=b=n.coordinate,g=o+ +d*c,x=g+v*S,m=x+v*f,y=w;break}return{line:{x1:p,y1:x,x2:b,y2:g},tick:{x:y,y:m}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,h=n.axisLine,d=Mt(Mt(Mt({},we(this.props,!1)),we(h,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);d=Mt(Mt({},d),{},{x1:a,y1:i+f*l,x2:a+o,y2:i+f*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);d=Mt(Mt({},d),{},{x1:a+p*o,y1:i,x2:a+p*o,y2:i+l})}return G.createElement("line",Co({},d,{className:Pe("recharts-cartesian-axis-line",Hr(h,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,h=l.tick,d=l.tickFormatter,f=l.unit,p=qw(Mt(Mt({},this.props),{},{ticks:n}),a,i),b=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),g=we(this.props,!1),y=we(h,!1),m=Mt(Mt({},g),{},{fill:"none"},we(c,!1)),v=p.map(function(S,w){var N=o.getTickLineCoord(S),_=N.line,C=N.tick,A=Mt(Mt(Mt(Mt({textAnchor:b,verticalAnchor:x},g),{},{stroke:"none",fill:u},y),C),{},{index:w,payload:S,visibleTicksCount:p.length,tickFormatter:d});return G.createElement(Be,Co({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},_i(o.props,S,w)),c&&G.createElement("line",Co({},m,_,{className:Pe("recharts-cartesian-axis-tick-line",Hr(c,"className"))})),h&&t.renderTickItem(h,A,"".concat(Oe(d)?d(S.value,w):S.value).concat(f||"")))});return G.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,h=a.hide;if(h)return null;var d=this.props,f=d.ticks,p=_g(d,ype),b=f;return Oe(c)&&(b=f&&f.length>0?c(this.props):c(p)),o<=0||l<=0||!b||!b.length?null:G.createElement(Be,{className:Pe("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),Ht.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=Pe(a.className,"recharts-cartesian-axis-tick-value");return G.isValidElement(n)?o=G.cloneElement(n,Mt(Mt({},a),{},{className:l})):Oe(n)?o=n(Mt(Mt({},a),{},{className:l})):o=G.createElement(Ci,Co({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);Vw(Xl,"displayName","CartesianAxis");Vw(Xl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var kpe=["x1","y1","x2","y2","key"],Ape=["offset"];function Oi(e){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(e)}function Bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bk(Object(r),!0).forEach(function(n){Ope(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ope(e,t,r){return t=Epe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Epe(e){var t=Ppe(e,"string");return Oi(t)=="symbol"?t:t+""}function Ppe(e,t){if(Oi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ci(){return ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ci.apply(this,arguments)}function Uk(e,t){if(e==null)return{};var r=Tpe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tpe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $pe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return G.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function gM(e,t){var r;if(G.isValidElement(e))r=G.cloneElement(e,t);else if(Oe(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=Uk(t,kpe),u=we(c,!1);u.offset;var h=Uk(u,Ape);r=G.createElement("line",ci({},h,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function Dpe(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=hr(hr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return gM(a,u)});return G.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Mpe(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=hr(hr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return gM(a,u)});return G.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Rpe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var h=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,p){return f-p});a!==h[0]&&h.unshift(0);var d=h.map(function(f,p){var b=!h[p+1],x=b?a+o-f:h[p+1]-f;if(x<=0)return null;var g=p%t.length;return G.createElement("rect",{key:"react-".concat(p),y:f,x:n,height:x,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Ipe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var h=u.map(function(f){return Math.round(f+i-i)}).sort(function(f,p){return f-p});i!==h[0]&&h.unshift(0);var d=h.map(function(f,p){var b=!h[p+1],x=b?i+l-f:h[p+1]-f;if(x<=0)return null;var g=p%n.length;return G.createElement("rect",{key:"react-".concat(p),x:f,y:o,width:x,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return G.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Lpe=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return fD(qw(hr(hr(hr({},Xl.defaultProps),n),{},{ticks:js(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},Fpe=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return fD(qw(hr(hr(hr({},Xl.defaultProps),n),{},{ticks:js(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Zi={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Sn(e){var t,r,n,a,i,o,l=Fw(),c=zw(),u=Cme(),h=hr(hr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Zi.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Zi.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Zi.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Zi.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Zi.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Zi.verticalFill,x:ie(e.x)?e.x:u.left,y:ie(e.y)?e.y:u.top,width:ie(e.width)?e.width:u.width,height:ie(e.height)?e.height:u.height}),d=h.x,f=h.y,p=h.width,b=h.height,x=h.syncWithTicks,g=h.horizontalValues,y=h.verticalValues,m=Nme(),v=Sme();if(!ie(p)||p<=0||!ie(b)||b<=0||!ie(d)||d!==+d||!ie(f)||f!==+f)return null;var S=h.verticalCoordinatesGenerator||Lpe,w=h.horizontalCoordinatesGenerator||Fpe,N=h.horizontalPoints,_=h.verticalPoints;if((!N||!N.length)&&Oe(w)){var C=g&&g.length,A=w({yAxis:v?hr(hr({},v),{},{ticks:C?g:v.ticks}):void 0,width:l,height:c,offset:u},C?!0:x);zn(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Oi(A),"]")),Array.isArray(A)&&(N=A)}if((!_||!_.length)&&Oe(S)){var k=y&&y.length,E=S({xAxis:m?hr(hr({},m),{},{ticks:k?y:m.ticks}):void 0,width:l,height:c,offset:u},k?!0:x);zn(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Oi(E),"]")),Array.isArray(E)&&(_=E)}return G.createElement("g",{className:"recharts-cartesian-grid"},G.createElement($pe,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height,ry:h.ry}),G.createElement(Dpe,ci({},h,{offset:u,horizontalPoints:N,xAxis:m,yAxis:v})),G.createElement(Mpe,ci({},h,{offset:u,verticalPoints:_,xAxis:m,yAxis:v})),G.createElement(Rpe,ci({},h,{horizontalPoints:N})),G.createElement(Ipe,ci({},h,{verticalPoints:_})))}Sn.displayName="CartesianGrid";var zpe=["layout","type","stroke","connectNulls","isRange","ref"],Bpe=["key"],yM;function jl(e){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function vM(e,t){if(e==null)return{};var r=Upe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Upe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ui(){return ui=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ui.apply(this,arguments)}function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){Jn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jM(n.key),n)}}function Vpe(e,t,r){return t&&Vk(e.prototype,t),r&&Vk(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wpe(e,t,r){return t=wm(t),Gpe(e,bM()?Reflect.construct(t,r||[],wm(e).constructor):t.apply(e,r))}function Gpe(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kpe(e)}function Kpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bM=function(){return!!e})()}function wm(e){return wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wm(e)}function Hpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I0(e,t)}function I0(e,t){return I0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},I0(e,t)}function Jn(e,t,r){return t=jM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jM(e){var t=Ype(e,"string");return jl(t)=="symbol"?t:t+""}function Ype(e,t){if(jl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gs=function(e){function t(){var r;qpe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Wpe(this,t,[].concat(a)),Jn(r,"state",{isAnimationFinished:!0}),Jn(r,"id",Ul("recharts-area-")),Jn(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Oe(o)&&o()}),Jn(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Oe(o)&&o()}),r}return Hpe(t,e),Vpe(t,[{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,h=c.points,d=c.dataKey,f=we(this.props,!1),p=we(u,!0),b=h.map(function(g,y){var m=Xs(Xs(Xs({key:"dot-".concat(y),r:3},f),p),{},{index:y,cx:g.x,cy:g.y,dataKey:d,value:g.value,payload:g.payload,points:h});return t.renderDotItem(u,m)}),x={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return G.createElement(Be,ui({className:"recharts-area-dots"},x),b)}},{key:"renderHorizontalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,h=n*Math.abs(c-u),d=ca(o.map(function(f){return f.y||0}));return ie(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(ca(i.map(function(f){return f.y||0})),d)),ie(d)?G.createElement("rect",{x:c<u?c:c-h,y:0,width:h,height:Math.floor(d+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,h=n*Math.abs(c-u),d=ca(o.map(function(f){return f.x||0}));return ie(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(ca(i.map(function(f){return f.x||0})),d)),ie(d)?G.createElement("rect",{x:0,y:c<u?c:c-h,width:d+(l?parseInt("".concat(l),10):1),height:Math.floor(h)}):null}},{key:"renderClipRect",value:function(n){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,a,i,o){var l=this.props,c=l.layout,u=l.type,h=l.stroke,d=l.connectNulls,f=l.isRange;l.ref;var p=vM(l,zpe);return G.createElement(Be,{clipPath:i?"url(#clipPath-".concat(o,")"):null},G.createElement(Lo,ui({},we(p,!0),{points:n,connectNulls:d,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),h!=="none"&&G.createElement(Lo,ui({},we(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),h!=="none"&&f&&G.createElement(Lo,ui({},we(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,h=o.animationBegin,d=o.animationDuration,f=o.animationEasing,p=o.animationId,b=this.state,x=b.prevPoints,g=b.prevBaseLine;return G.createElement(is,{begin:h,duration:d,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(y){var m=y.t;if(x){var v=x.length/l.length,S=l.map(function(C,A){var k=Math.floor(A*v);if(x[k]){var E=x[k],O=Ar(E.x,C.x),P=Ar(E.y,C.y);return Xs(Xs({},C),{},{x:O(m),y:P(m)})}return C}),w;if(ie(c)&&typeof c=="number"){var N=Ar(g,c);w=N(m)}else if(Ee(c)||Bl(c)){var _=Ar(g,0);w=_(m)}else w=c.map(function(C,A){var k=Math.floor(A*v);if(g[k]){var E=g[k],O=Ar(E.x,C.x),P=Ar(E.y,C.y);return Xs(Xs({},C),{},{x:O(m),y:P(m)})}return C});return i.renderAreaStatically(S,w,n,a)}return G.createElement(Be,null,G.createElement("defs",null,G.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(m))),G.createElement(Be,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,n,a)))})}},{key:"renderArea",value:function(n,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,h=u.prevPoints,d=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!h&&f>0||!ll(h,o)||!ll(d,l))?this.renderAreaWithAnimation(n,a):this.renderAreaStatically(o,l,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,h=a.left,d=a.xAxis,f=a.yAxis,p=a.width,b=a.height,x=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,m=l.length===1,v=Pe("recharts-area",c),S=d&&d.allowDataOverflow,w=f&&f.allowDataOverflow,N=S||w,_=Ee(g)?this.id:g,C=(n=we(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=C.r,k=A===void 0?3:A,E=C.strokeWidth,O=E===void 0?2:E,P=yG(o)?o:{},M=P.clipDot,T=M===void 0?!0:M,F=k*2+O;return G.createElement(Be,{className:v},S||w?G.createElement("defs",null,G.createElement("clipPath",{id:"clipPath-".concat(_)},G.createElement("rect",{x:S?h:h-p/2,y:w?u:u-b/2,width:S?p:p*2,height:w?b:b*2})),!T&&G.createElement("clipPath",{id:"clipPath-dots-".concat(_)},G.createElement("rect",{x:h-F/2,y:u-F/2,width:p+F,height:b+F}))):null,m?null:this.renderArea(N,_),(o||m)&&this.renderDots(N,T,_),(!x||y)&&ks.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:n.points!==a.curPoints||n.baseLine!==a.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(j.PureComponent);yM=Gs;Jn(Gs,"displayName","Area");Jn(Gs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ii.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Jn(Gs,"getBaseValue",function(e,t,r,n){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(ie(l)&&typeof l=="number")return l;var c=a==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var h=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return l==="dataMin"?d:l==="dataMax"||h<0?h:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Jn(Gs,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,h=e.dataStartIndex,d=e.displayedData,f=e.offset,p=t.layout,b=u&&u.length,x=yM.getBaseValue(t,r,n,a),g=p==="horizontal",y=!1,m=d.map(function(S,w){var N;b?N=u[h+w]:(N=zt(S,c),Array.isArray(N)?y=!0:N=[x,N]);var _=N[1]==null||b&&zt(S,c)==null;return g?{x:yC({axis:n,ticks:i,bandSize:l,entry:S,index:w}),y:_?null:a.scale(N[1]),value:N,payload:S}:{x:_?null:n.scale(N[1]),y:yC({axis:a,ticks:o,bandSize:l,entry:S,index:w}),value:N,payload:S}}),v;return b||y?v=m.map(function(S){var w=Array.isArray(S.value)?S.value[0]:null;return g?{x:S.x,y:w!=null&&S.y!=null?a.scale(w):null}:{x:w!=null?n.scale(w):null,y:S.y}}):v=g?a.scale(x):n.scale(x),Xs({points:m,baseLine:v,layout:p,isRange:y},f)});Jn(Gs,"renderDotItem",function(e,t){var r;if(G.isValidElement(e))r=G.cloneElement(e,t);else if(Oe(e))r=e(t);else{var n=Pe("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=vM(t,Bpe);r=G.createElement(Vp,ui({},i,{key:a,className:n}))}return r});function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function Xpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jpe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SM(n.key),n)}}function Qpe(e,t,r){return t&&Jpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zpe(e,t,r){return t=Nm(t),exe(e,wM()?Reflect.construct(t,r||[],Nm(e).constructor):t.apply(e,r))}function exe(e,t){if(t&&(wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return txe(e)}function txe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wM=function(){return!!e})()}function Nm(e){return Nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nm(e)}function rxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L0(e,t)}function L0(e,t){return L0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},L0(e,t)}function NM(e,t,r){return t=SM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SM(e){var t=nxe(e,"string");return wl(t)=="symbol"?t:t+""}function nxe(e,t){if(wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function sxe(e){var t=e.xAxisId,r=Fw(),n=zw(),a=iM(t);return a==null?null:j.createElement(Xl,F0({},a,{className:Pe("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return js(o,!0)}}))}var _r=function(e){function t(){return Xpe(this,t),Zpe(this,t,arguments)}return rxe(t,e),Qpe(t,[{key:"render",value:function(){return j.createElement(sxe,this.props)}}])}(j.Component);NM(_r,"displayName","XAxis");NM(_r,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function axe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ixe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kM(n.key),n)}}function oxe(e,t,r){return t&&ixe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lxe(e,t,r){return t=Sm(t),cxe(e,_M()?Reflect.construct(t,r||[],Sm(e).constructor):t.apply(e,r))}function cxe(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uxe(e)}function uxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_M=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(e)}function dxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z0(e,t)}function z0(e,t){return z0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},z0(e,t)}function CM(e,t,r){return t=kM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kM(e){var t=hxe(e,"string");return Nl(t)=="symbol"?t:t+""}function hxe(e,t){if(Nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}var fxe=function(t){var r=t.yAxisId,n=Fw(),a=zw(),i=oM(r);return i==null?null:j.createElement(Xl,B0({},i,{className:Pe("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return js(l,!0)}}))},pr=function(e){function t(){return axe(this,t),lxe(this,t,arguments)}return dxe(t,e),oxe(t,[{key:"render",value:function(){return j.createElement(fxe,this.props)}}])}(j.Component);CM(pr,"displayName","YAxis");CM(pr,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Wk(e){return gxe(e)||xxe(e)||pxe(e)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pxe(e,t){if(e){if(typeof e=="string")return U0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U0(e,t)}}function xxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gxe(e){if(Array.isArray(e))return U0(e)}function U0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var q0=function(t,r,n,a,i){var o=gn(t,Uw),l=gn(t,Zp),c=[].concat(Wk(o),Wk(l)),u=gn(t,tx),h="".concat(a,"Id"),d=a[0],f=r;if(c.length&&(f=c.reduce(function(x,g){if(g.props[h]===n&&ns(g.props,"extendDomain")&&ie(g.props[d])){var y=g.props[d];return[Math.min(x[0],y),Math.max(x[1],y)]}return x},f)),u.length){var p="".concat(d,"1"),b="".concat(d,"2");f=u.reduce(function(x,g){if(g.props[h]===n&&ns(g.props,"extendDomain")&&ie(g.props[p])&&ie(g.props[b])){var y=g.props[p],m=g.props[b];return[Math.min(x[0],y,m),Math.max(x[1],y,m)]}return x},f)}return i&&i.length&&(f=i.reduce(function(x,g){return ie(g)?[Math.min(x[0],g),Math.max(x[1],g)]:x},f)),f},AM={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,h){this.fn=c,this.context=u,this.once=h||!1}function i(c,u,h,d,f){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new a(h,d||c,f),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],p]:c._events[b].push(p):(c._events[b]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],h,d;if(this._eventsCount===0)return u;for(d in h=this._events)t.call(h,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},l.prototype.listeners=function(u){var h=r?r+u:u,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,p=d.length,b=new Array(p);f<p;f++)b[f]=d[f].fn;return b},l.prototype.listenerCount=function(u){var h=r?r+u:u,d=this._events[h];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,h,d,f,p,b){var x=r?r+u:u;if(!this._events[x])return!1;var g=this._events[x],y=arguments.length,m,v;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,d),!0;case 4:return g.fn.call(g.context,h,d,f),!0;case 5:return g.fn.call(g.context,h,d,f,p),!0;case 6:return g.fn.call(g.context,h,d,f,p,b),!0}for(v=1,m=new Array(y-1);v<y;v++)m[v-1]=arguments[v];g.fn.apply(g.context,m)}else{var S=g.length,w;for(v=0;v<S;v++)switch(g[v].once&&this.removeListener(u,g[v].fn,void 0,!0),y){case 1:g[v].fn.call(g[v].context);break;case 2:g[v].fn.call(g[v].context,h);break;case 3:g[v].fn.call(g[v].context,h,d);break;case 4:g[v].fn.call(g[v].context,h,d,f);break;default:if(!m)for(w=1,m=new Array(y-1);w<y;w++)m[w-1]=arguments[w];g[v].fn.apply(g[v].context,m)}}return!0},l.prototype.on=function(u,h,d){return i(this,u,h,d,!1)},l.prototype.once=function(u,h,d){return i(this,u,h,d,!0)},l.prototype.removeListener=function(u,h,d,f){var p=r?r+u:u;if(!this._events[p])return this;if(!h)return o(this,p),this;var b=this._events[p];if(b.fn)b.fn===h&&(!f||b.once)&&(!d||b.context===d)&&o(this,p);else{for(var x=0,g=[],y=b.length;x<y;x++)(b[x].fn!==h||f&&!b[x].once||d&&b[x].context!==d)&&g.push(b[x]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(AM);var yxe=AM.exports;const vxe=Ye(yxe);var Cg=new vxe,kg="recharts.syncMouseEvents";function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function bxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OM(n.key),n)}}function wxe(e,t,r){return t&&jxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ag(e,t,r){return t=OM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OM(e){var t=Nxe(e,"string");return sd(t)=="symbol"?t:t+""}function Nxe(e,t){if(sd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sxe=function(){function e(){bxe(this,e),Ag(this,"activeIndex",0),Ag(this,"coordinateList",[]),Ag(this,"layout","horizontal")}return wxe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,h=r.offset,d=h===void 0?null:h,f=r.mouseHandlerCallback,p=f===void 0?null:f;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,h=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,f=o+this.offset.top+l/2+h;this.mouseHandlerCallback({pageX:d,pageY:f})}}}])}();function _xe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&ie(n)&&ie(a))return!0}return!1}function Cxe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function EM(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=nt(t,r,n,a),l=nt(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function kxe(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,h=t.outerRadius,d=t.angle,f=nt(l,c,u,d),p=nt(l,c,h,d);n=f.x,a=f.y,i=p.x,o=p.y}else return EM(t);return[{x:n,y:a},{x:i,y:o}]}function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function Gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(r),!0).forEach(function(n){Axe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Axe(e,t,r){return t=Oxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oxe(e){var t=Exe(e,"string");return ad(t)=="symbol"?t:t+""}function Exe(e,t){if(ad(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pxe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,h=e.tooltipAxisBandSize,d=e.layout,f=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||f!=="ScatterChart"&&a!=="axis")return null;var b,x=Lo;if(f==="ScatterChart")b=o,x=Zue;else if(f==="BarChart")b=Cxe(d,o,c,h),x=Mw;else if(d==="radial"){var g=EM(o),y=g.cx,m=g.cy,v=g.radius,S=g.startAngle,w=g.endAngle;b={cx:y,cy:m,startAngle:S,endAngle:w,innerRadius:v,outerRadius:v},x=SD}else b={points:kxe(d,o,c)},x=Lo;var N=gh(gh(gh(gh({stroke:"#ccc",pointerEvents:"none"},c),b),we(p,!1)),{},{payload:l,payloadIndex:u,className:Pe("recharts-tooltip-cursor",p.className)});return j.isValidElement(p)?j.cloneElement(p,N):j.createElement(x,N)}var Txe=["item"],$xe=["children","className","width","height","style","compact","title","desc"];function Sl(e){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ko.apply(this,arguments)}function Kk(e,t){return Rxe(e)||Mxe(e,t)||TM(e,t)||Dxe()}function Dxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mxe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(h){u=!0,a=h}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Rxe(e){if(Array.isArray(e))return e}function Hk(e,t){if(e==null)return{};var r=Ixe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ixe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$M(n.key),n)}}function zxe(e,t,r){return t&&Fxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bxe(e,t,r){return t=_m(t),Uxe(e,PM()?Reflect.construct(t,r||[],_m(e).constructor):t.apply(e,r))}function Uxe(e,t){if(t&&(Sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qxe(e)}function qxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PM=function(){return!!e})()}function _m(e){return _m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_m(e)}function Vxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V0(e,t)}function V0(e,t){return V0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},V0(e,t)}function _l(e){return Kxe(e)||Gxe(e)||TM(e)||Wxe()}function Wxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TM(e,t){if(e){if(typeof e=="string")return W0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W0(e,t)}}function Gxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kxe(e){if(Array.isArray(e))return W0(e)}function W0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(n){_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _e(e,t,r){return t=$M(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $M(e){var t=Hxe(e,"string");return Sl(t)=="symbol"?t:t+""}function Hxe(e,t){if(Sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yxe={xAxis:["bottom","top"],yAxis:["left","right"]},Xxe={width:"100%",height:"100%"},DM={x:0,y:0};function yh(e){return e}var Jxe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Qxe=function(t,r,n,a){var i=r.find(function(h){return h&&h.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return te(te(te({},a),nt(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return te(te(te({},a),nt(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return DM},rx=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(_l(l),_l(u)):l},[]);return o.length>0?o:t&&t.length&&ie(a)&&ie(i)?t.slice(a,i+1):[]};function MM(e){return e==="number"?[0,"auto"]:void 0}var G0=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=rx(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var h,d=(h=u.props.data)!==null&&h!==void 0?h:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?l:d;f=_f(p,o.dataKey,a)}else f=d&&d[n]||l[n];return f?[].concat(_l(c),[yD(u,f)]):c},[])},Xk=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=Jxe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,h=voe(o,l,u,c);if(h>=0&&u){var d=u[h]&&u[h].value,f=G0(t,r,h,d),p=Qxe(n,l,h,i);return{activeTooltipIndex:h,activeLabel:d,activePayload:f,activeCoordinate:p}}return null},Zxe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,h=t.layout,d=t.children,f=t.stackOffset,p=hD(h,i);return n.reduce(function(b,x){var g,y=x.type.defaultProps!==void 0?te(te({},x.type.defaultProps),x.props):x.props,m=y.type,v=y.dataKey,S=y.allowDataOverflow,w=y.allowDuplicatedCategory,N=y.scale,_=y.ticks,C=y.includeHidden,A=y[o];if(b[A])return b;var k=rx(t.data,{graphicalItems:a.filter(function(z){var H,Q=o in z.props?z.props[o]:(H=z.type.defaultProps)===null||H===void 0?void 0:H[o];return Q===A}),dataStartIndex:c,dataEndIndex:u}),E=k.length,O,P,M;_xe(y.domain,S,m)&&(O=o0(y.domain,null,S),p&&(m==="number"||N!=="auto")&&(M=Wc(k,v,"category")));var T=MM(m);if(!O||O.length===0){var F,q=(F=y.domain)!==null&&F!==void 0?F:T;if(v){if(O=Wc(k,v,m),m==="category"&&p){var $=lG(O);w&&$?(P=O,O=hm(0,E)):w||(O=wC(q,O,x).reduce(function(z,H){return z.indexOf(H)>=0?z:[].concat(_l(z),[H])},[]))}else if(m==="category")w?O=O.filter(function(z){return z!==""&&!Ee(z)}):O=wC(q,O,x).reduce(function(z,H){return z.indexOf(H)>=0||H===""||Ee(H)?z:[].concat(_l(z),[H])},[]);else if(m==="number"){var U=Soe(k,a.filter(function(z){var H,Q,se=o in z.props?z.props[o]:(H=z.type.defaultProps)===null||H===void 0?void 0:H[o],ue="hide"in z.props?z.props.hide:(Q=z.type.defaultProps)===null||Q===void 0?void 0:Q.hide;return se===A&&(C||!ue)}),v,i,h);U&&(O=U)}p&&(m==="number"||N!=="auto")&&(M=Wc(k,v,"category"))}else p?O=hm(0,E):l&&l[A]&&l[A].hasStack&&m==="number"?O=f==="expand"?[0,1]:gD(l[A].stackGroups,c,u):O=dD(k,a.filter(function(z){var H=o in z.props?z.props[o]:z.type.defaultProps[o],Q="hide"in z.props?z.props.hide:z.type.defaultProps.hide;return H===A&&(C||!Q)}),m,h,!0);if(m==="number")O=q0(d,O,A,i,_),q&&(O=o0(q,O,S));else if(m==="category"&&q){var X=q,K=O.every(function(z){return X.indexOf(z)>=0});K&&(O=X)}}return te(te({},b),{},_e({},A,te(te({},y),{},{axisType:i,domain:O,categoricalDomain:M,duplicateDomain:P,originalDomain:(g=y.domain)!==null&&g!==void 0?g:T,isCategorical:p,layout:h})))},{})},ege=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,h=t.layout,d=t.children,f=rx(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=f.length,b=hD(h,i),x=-1;return n.reduce(function(g,y){var m=y.type.defaultProps!==void 0?te(te({},y.type.defaultProps),y.props):y.props,v=m[o],S=MM("number");if(!g[v]){x++;var w;return b?w=hm(0,p):l&&l[v]&&l[v].hasStack?(w=gD(l[v].stackGroups,c,u),w=q0(d,w,v,i)):(w=o0(S,dD(f,n.filter(function(N){var _,C,A=o in N.props?N.props[o]:(_=N.type.defaultProps)===null||_===void 0?void 0:_[o],k="hide"in N.props?N.props.hide:(C=N.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===v&&!k}),"number",h),a.defaultProps.allowDataOverflow),w=q0(d,w,v,i)),te(te({},g),{},_e({},v,te(te({axisType:i},a.defaultProps),{},{hide:!0,orientation:Hr(Yxe,"".concat(i,".").concat(x%2),null),domain:w,originalDomain:S,isCategorical:b,layout:h})))}return g},{})},tge=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,h=t.children,d="".concat(a,"Id"),f=gn(h,i),p={};return f&&f.length?p=Zxe(t,{axes:f,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=ege(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},rge=function(t){var r=aa(t),n=js(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:lw(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Zf(r,n)}},Jk=function(t){var r=t.children,n=t.defaultShowTooltip,a=Br(r,pl),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},nge=function(t){return!t||!t.length?!1:t.some(function(r){var n=_s(r&&r.type);return n&&n.indexOf("Bar")>=0})},Qk=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},sge=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,h=n.height,d=n.children,f=n.margin||{},p=Br(d,pl),b=Br(d,Yr),x=Object.keys(c).reduce(function(w,N){var _=c[N],C=_.orientation;return!_.mirror&&!_.hide?te(te({},w),{},_e({},C,w[C]+_.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(w,N){var _=o[N],C=_.orientation;return!_.mirror&&!_.hide?te(te({},w),{},_e({},C,Hr(w,"".concat(C))+_.height)):w},{top:f.top||0,bottom:f.bottom||0}),y=te(te({},g),x),m=y.bottom;p&&(y.bottom+=p.props.height||pl.defaultProps.height),b&&r&&(y=woe(y,a,n,r));var v=u-y.left-y.right,S=h-y.top-y.bottom;return te(te({brushBottom:m},y),{},{width:Math.max(v,0),height:Math.max(S,0)})},age=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ww=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,h=t.formatAxisMap,d=t.defaultProps,f=function(y,m){var v=m.graphicalItems,S=m.stackGroups,w=m.offset,N=m.updateId,_=m.dataStartIndex,C=m.dataEndIndex,A=y.barSize,k=y.layout,E=y.barGap,O=y.barCategoryGap,P=y.maxBarSize,M=Qk(k),T=M.numericAxisName,F=M.cateAxisName,q=nge(v),$=[];return v.forEach(function(U,X){var K=rx(y.data,{graphicalItems:[U],dataStartIndex:_,dataEndIndex:C}),z=U.type.defaultProps!==void 0?te(te({},U.type.defaultProps),U.props):U.props,H=z.dataKey,Q=z.maxBarSize,se=z["".concat(T,"Id")],ue=z["".concat(F,"Id")],ye={},me=c.reduce(function(Ie,We){var dt=m["".concat(We.axisType,"Map")],qe=z["".concat(We.axisType,"Id")];dt&&dt[qe]||We.axisType==="zAxis"||Ai();var Ot=dt[qe];return te(te({},Ie),{},_e(_e({},We.axisType,Ot),"".concat(We.axisType,"Ticks"),js(Ot)))},ye),L=me[F],W=me["".concat(F,"Ticks")],Y=S&&S[se]&&S[se].hasStack&&$oe(U,S[se].stackGroups),V=_s(U.type).indexOf("Bar")>=0,ee=Zf(L,W),Z=[],re=q&&boe({barSize:A,stackGroups:S,totalSize:age(me,F)});if(V){var de,Ne,ne=Ee(Q)?P:Q,ce=(de=(Ne=Zf(L,W,!0))!==null&&Ne!==void 0?Ne:ne)!==null&&de!==void 0?de:0;Z=joe({barGap:E,barCategoryGap:O,bandSize:ce!==ee?ce:ee,sizeList:re[ue],maxBarSize:ne}),ce!==ee&&(Z=Z.map(function(Ie){return te(te({},Ie),{},{position:te(te({},Ie.position),{},{offset:Ie.position.offset-ce/2})})}))}var Se=U&&U.type&&U.type.getComposedData;Se&&$.push({props:te(te({},Se(te(te({},me),{},{displayedData:K,props:y,dataKey:H,item:U,bandSize:ee,barPosition:Z,offset:w,stackedData:Y,layout:k,dataStartIndex:_,dataEndIndex:C}))),{},_e(_e(_e({key:U.key||"item-".concat(X)},T,me[T]),F,me[F]),"animationId",N)),childIndex:jG(U,y.children),item:U})}),$},p=function(y,m){var v=y.props,S=y.dataStartIndex,w=y.dataEndIndex,N=y.updateId;if(!p_({props:v}))return null;var _=v.children,C=v.layout,A=v.stackOffset,k=v.data,E=v.reverseStackOrder,O=Qk(C),P=O.numericAxisName,M=O.cateAxisName,T=gn(_,n),F=Poe(k,T,"".concat(P,"Id"),"".concat(M,"Id"),A,E),q=c.reduce(function(z,H){var Q="".concat(H.axisType,"Map");return te(te({},z),{},_e({},Q,tge(v,te(te({},H),{},{graphicalItems:T,stackGroups:H.axisType===P&&F,dataStartIndex:S,dataEndIndex:w}))))},{}),$=sge(te(te({},q),{},{props:v,graphicalItems:T}),m==null?void 0:m.legendBBox);Object.keys(q).forEach(function(z){q[z]=h(v,q[z],$,z.replace("Map",""),r)});var U=q["".concat(M,"Map")],X=rge(U),K=f(v,te(te({},q),{},{dataStartIndex:S,dataEndIndex:w,updateId:N,graphicalItems:T,stackGroups:F,offset:$}));return te(te({formattedGraphicalItems:K,graphicalItems:T,offset:$,stackGroups:F},X),q)},b=function(g){function y(m){var v,S,w;return Lxe(this,y),w=Bxe(this,y,[m]),_e(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_e(w,"accessibilityManager",new Sxe),_e(w,"handleLegendBBoxUpdate",function(N){if(N){var _=w.state,C=_.dataStartIndex,A=_.dataEndIndex,k=_.updateId;w.setState(te({legendBBox:N},p({props:w.props,dataStartIndex:C,dataEndIndex:A,updateId:k},te(te({},w.state),{},{legendBBox:N}))))}}),_e(w,"handleReceiveSyncEvent",function(N,_,C){if(w.props.syncId===N){if(C===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),_e(w,"handleBrushChange",function(N){var _=N.startIndex,C=N.endIndex;if(_!==w.state.dataStartIndex||C!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return te({dataStartIndex:_,dataEndIndex:C},p({props:w.props,dataStartIndex:_,dataEndIndex:C,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:C})}}),_e(w,"handleMouseEnter",function(N){var _=w.getMouseInfo(N);if(_){var C=te(te({},_),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var A=w.props.onMouseEnter;Oe(A)&&A(C,N)}}),_e(w,"triggeredAfterMouseMove",function(N){var _=w.getMouseInfo(N),C=_?te(te({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var A=w.props.onMouseMove;Oe(A)&&A(C,N)}),_e(w,"handleItemMouseEnter",function(N){w.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),_e(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),_e(w,"handleMouseMove",function(N){N.persist(),w.throttleTriggeredAfterMouseMove(N)}),_e(w,"handleMouseLeave",function(N){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var C=w.props.onMouseLeave;Oe(C)&&C(_,N)}),_e(w,"handleOuterEvent",function(N){var _=bG(N),C=Hr(w.props,"".concat(_));if(_&&Oe(C)){var A,k;/.*touch.*/i.test(_)?k=w.getMouseInfo(N.changedTouches[0]):k=w.getMouseInfo(N),C((A=k)!==null&&A!==void 0?A:{},N)}}),_e(w,"handleClick",function(N){var _=w.getMouseInfo(N);if(_){var C=te(te({},_),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var A=w.props.onClick;Oe(A)&&A(C,N)}}),_e(w,"handleMouseDown",function(N){var _=w.props.onMouseDown;if(Oe(_)){var C=w.getMouseInfo(N);_(C,N)}}),_e(w,"handleMouseUp",function(N){var _=w.props.onMouseUp;if(Oe(_)){var C=w.getMouseInfo(N);_(C,N)}}),_e(w,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),_e(w,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.handleMouseDown(N.changedTouches[0])}),_e(w,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.handleMouseUp(N.changedTouches[0])}),_e(w,"handleDoubleClick",function(N){var _=w.props.onDoubleClick;if(Oe(_)){var C=w.getMouseInfo(N);_(C,N)}}),_e(w,"handleContextMenu",function(N){var _=w.props.onContextMenu;if(Oe(_)){var C=w.getMouseInfo(N);_(C,N)}}),_e(w,"triggerSyncEvent",function(N){w.props.syncId!==void 0&&Cg.emit(kg,w.props.syncId,N,w.eventEmitterSymbol)}),_e(w,"applySyncEvent",function(N){var _=w.props,C=_.layout,A=_.syncMethod,k=w.state.updateId,E=N.dataStartIndex,O=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)w.setState(te({dataStartIndex:E,dataEndIndex:O},p({props:w.props,dataStartIndex:E,dataEndIndex:O,updateId:k},w.state)));else if(N.activeTooltipIndex!==void 0){var P=N.chartX,M=N.chartY,T=N.activeTooltipIndex,F=w.state,q=F.offset,$=F.tooltipTicks;if(!q)return;if(typeof A=="function")T=A($,N);else if(A==="value"){T=-1;for(var U=0;U<$.length;U++)if($[U].value===N.activeLabel){T=U;break}}var X=te(te({},q),{},{x:q.left,y:q.top}),K=Math.min(P,X.x+X.width),z=Math.min(M,X.y+X.height),H=$[T]&&$[T].value,Q=G0(w.state,w.props.data,T),se=$[T]?{x:C==="horizontal"?$[T].coordinate:K,y:C==="horizontal"?z:$[T].coordinate}:DM;w.setState(te(te({},N),{},{activeLabel:H,activeCoordinate:se,activePayload:Q,activeTooltipIndex:T}))}else w.setState(N)}),_e(w,"renderCursor",function(N){var _,C=w.state,A=C.isTooltipActive,k=C.activeCoordinate,E=C.activePayload,O=C.offset,P=C.activeTooltipIndex,M=C.tooltipAxisBandSize,T=w.getTooltipEventType(),F=(_=N.props.active)!==null&&_!==void 0?_:A,q=w.props.layout,$=N.key||"_recharts-cursor";return G.createElement(Pxe,{key:$,activeCoordinate:k,activePayload:E,activeTooltipIndex:P,chartName:r,element:N,isActive:F,layout:q,offset:O,tooltipAxisBandSize:M,tooltipEventType:T})}),_e(w,"renderPolarAxis",function(N,_,C){var A=Hr(N,"type.axisType"),k=Hr(w.state,"".concat(A,"Map")),E=N.type.defaultProps,O=E!==void 0?te(te({},E),N.props):N.props,P=k&&k[O["".concat(A,"Id")]];return j.cloneElement(N,te(te({},P),{},{className:Pe(A,P.className),key:N.key||"".concat(_,"-").concat(C),ticks:js(P,!0)}))}),_e(w,"renderPolarGrid",function(N){var _=N.props,C=_.radialLines,A=_.polarAngles,k=_.polarRadius,E=w.state,O=E.radiusAxisMap,P=E.angleAxisMap,M=aa(O),T=aa(P),F=T.cx,q=T.cy,$=T.innerRadius,U=T.outerRadius;return j.cloneElement(N,{polarAngles:Array.isArray(A)?A:js(T,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(k)?k:js(M,!0).map(function(X){return X.coordinate}),cx:F,cy:q,innerRadius:$,outerRadius:U,key:N.key||"polar-grid",radialLines:C})}),_e(w,"renderLegend",function(){var N=w.state.formattedGraphicalItems,_=w.props,C=_.children,A=_.width,k=_.height,E=w.props.margin||{},O=A-(E.left||0)-(E.right||0),P=cD({children:C,formattedGraphicalItems:N,legendWidth:O,legendContent:u});if(!P)return null;var M=P.item,T=Hk(P,Txe);return j.cloneElement(M,te(te({},T),{},{chartWidth:A,chartHeight:k,margin:E,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),_e(w,"renderTooltip",function(){var N,_=w.props,C=_.children,A=_.accessibilityLayer,k=Br(C,pt);if(!k)return null;var E=w.state,O=E.isTooltipActive,P=E.activeCoordinate,M=E.activePayload,T=E.activeLabel,F=E.offset,q=(N=k.props.active)!==null&&N!==void 0?N:O;return j.cloneElement(k,{viewBox:te(te({},F),{},{x:F.left,y:F.top}),active:q,label:T,payload:q?M:[],coordinate:P,accessibilityLayer:A})}),_e(w,"renderBrush",function(N){var _=w.props,C=_.margin,A=_.data,k=w.state,E=k.offset,O=k.dataStartIndex,P=k.dataEndIndex,M=k.updateId;return j.cloneElement(N,{key:N.key||"_recharts-brush",onChange:fh(w.handleBrushChange,N.props.onChange),data:A,x:ie(N.props.x)?N.props.x:E.left,y:ie(N.props.y)?N.props.y:E.top+E.height+E.brushBottom-(C.bottom||0),width:ie(N.props.width)?N.props.width:E.width,startIndex:O,endIndex:P,updateId:"brush-".concat(M)})}),_e(w,"renderReferenceElement",function(N,_,C){if(!N)return null;var A=w,k=A.clipPathId,E=w.state,O=E.xAxisMap,P=E.yAxisMap,M=E.offset,T=N.type.defaultProps||{},F=N.props,q=F.xAxisId,$=q===void 0?T.xAxisId:q,U=F.yAxisId,X=U===void 0?T.yAxisId:U;return j.cloneElement(N,{key:N.key||"".concat(_,"-").concat(C),xAxis:O[$],yAxis:P[X],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:k})}),_e(w,"renderActivePoints",function(N){var _=N.item,C=N.activePoint,A=N.basePoint,k=N.childIndex,E=N.isRange,O=[],P=_.props.key,M=_.item.type.defaultProps!==void 0?te(te({},_.item.type.defaultProps),_.item.props):_.item.props,T=M.activeDot,F=M.dataKey,q=te(te({index:k,dataKey:F,cx:C.x,cy:C.y,r:4,fill:Dw(_.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},we(T,!1)),Cf(T));return O.push(y.renderActiveDot(T,q,"".concat(P,"-activePoint-").concat(k))),A?O.push(y.renderActiveDot(T,te(te({},q),{},{cx:A.x,cy:A.y}),"".concat(P,"-basePoint-").concat(k))):E&&O.push(null),O}),_e(w,"renderGraphicChild",function(N,_,C){var A=w.filterFormatItem(N,_,C);if(!A)return null;var k=w.getTooltipEventType(),E=w.state,O=E.isTooltipActive,P=E.tooltipAxis,M=E.activeTooltipIndex,T=E.activeLabel,F=w.props.children,q=Br(F,pt),$=A.props,U=$.points,X=$.isRange,K=$.baseLine,z=A.item.type.defaultProps!==void 0?te(te({},A.item.type.defaultProps),A.item.props):A.item.props,H=z.activeDot,Q=z.hide,se=z.activeBar,ue=z.activeShape,ye=!!(!Q&&O&&q&&(H||se||ue)),me={};k!=="axis"&&q&&q.props.trigger==="click"?me={onClick:fh(w.handleItemMouseEnter,N.props.onClick)}:k!=="axis"&&(me={onMouseLeave:fh(w.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:fh(w.handleItemMouseEnter,N.props.onMouseEnter)});var L=j.cloneElement(N,te(te({},A.props),me));function W(We){return typeof P.dataKey=="function"?P.dataKey(We.payload):null}if(ye)if(M>=0){var Y,V;if(P.dataKey&&!P.allowDuplicatedCategory){var ee=typeof P.dataKey=="function"?W:"payload.".concat(P.dataKey.toString());Y=_f(U,ee,T),V=X&&K&&_f(K,ee,T)}else Y=U==null?void 0:U[M],V=X&&K&&K[M];if(ue||se){var Z=N.props.activeIndex!==void 0?N.props.activeIndex:M;return[j.cloneElement(N,te(te(te({},A.props),me),{},{activeIndex:Z})),null,null]}if(!Ee(Y))return[L].concat(_l(w.renderActivePoints({item:A,activePoint:Y,basePoint:V,childIndex:M,isRange:X})))}else{var re,de=(re=w.getItemByXY(w.state.activeCoordinate))!==null&&re!==void 0?re:{graphicalItem:L},Ne=de.graphicalItem,ne=Ne.item,ce=ne===void 0?N:ne,Se=Ne.childIndex,Ie=te(te(te({},A.props),me),{},{activeIndex:Se});return[j.cloneElement(ce,Ie),null,null]}return X?[L,null,null]:[L,null]}),_e(w,"renderCustomized",function(N,_,C){return j.cloneElement(N,te(te({key:"recharts-customized-".concat(C)},w.props),w.state))}),_e(w,"renderMap",{CartesianGrid:{handler:yh,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:yh},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:yh},YAxis:{handler:yh},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((v=m.id)!==null&&v!==void 0?v:Ul("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=l4(w.triggeredAfterMouseMove,(S=m.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return Vxe(y,g),zxe(y,[{key:"componentDidMount",value:function(){var v,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,S=v.children,w=v.data,N=v.height,_=v.layout,C=Br(S,pt);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var k=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,E=G0(this.state,w,A,k),O=this.state.tooltipTicks[A].coordinate,P=(this.state.offset.top+N)/2,M=_==="horizontal",T=M?{x:O,y:P}:{y:O,x:P},F=this.state.formattedGraphicalItems.find(function($){var U=$.item;return U.type.name==="Scatter"});F&&(T=te(te({},T),F.props.points[A].tooltipPosition),E=F.props.points[A].tooltipPayload);var q={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:k,activePayload:E,activeCoordinate:T};this.setState(q),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var w,N;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(v){wv([Br(v.children,pt)],[Br(this.props.children,pt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=Br(this.props.children,pt);if(v&&typeof v.props.shared=="boolean"){var S=v.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),N=Kre(w),_={chartX:Math.round(v.pageX-N.left),chartY:Math.round(v.pageY-N.top)},C=w.width/S.offsetWidth||1,A=this.inRange(_.chartX,_.chartY,C);if(!A)return null;var k=this.state,E=k.xAxisMap,O=k.yAxisMap,P=this.getTooltipEventType(),M=Xk(this.state,this.props.data,this.props.layout,A);if(P!=="axis"&&E&&O){var T=aa(E).scale,F=aa(O).scale,q=T&&T.invert?T.invert(_.chartX):null,$=F&&F.invert?F.invert(_.chartY):null;return te(te({},_),{},{xValue:q,yValue:$},M)}return M?te(te({},_),M):null}},{key:"inRange",value:function(v,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,_=v/w,C=S/w;if(N==="horizontal"||N==="vertical"){var A=this.state.offset,k=_>=A.left&&_<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return k?{x:_,y:C}:null}var E=this.state,O=E.angleAxisMap,P=E.radiusAxisMap;if(O&&P){var M=aa(O);return _C({x:_,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,S=this.getTooltipEventType(),w=Br(v,pt),N={};w&&S==="axis"&&(w.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Cf(this.props,this.handleOuterEvent);return te(te({},_),N)}},{key:"addListener",value:function(){Cg.on(kg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Cg.removeListener(kg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,S,w){for(var N=this.state.formattedGraphicalItems,_=0,C=N.length;_<C;_++){var A=N[_];if(A.item===v||A.props.key===v.key||S===_s(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,S=this.state.offset,w=S.left,N=S.top,_=S.height,C=S.width;return G.createElement("defs",null,G.createElement("clipPath",{id:v},G.createElement("rect",{x:w,y:N,height:_,width:C})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(S,w){var N=Kk(w,2),_=N[0],C=N[1];return te(te({},S),{},_e({},_,C.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(S,w){var N=Kk(w,2),_=N[0],C=N[1];return te(te({},S),{},_e({},_,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(v){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(v){var S=this.state,w=S.formattedGraphicalItems,N=S.activeItem;if(w&&w.length)for(var _=0,C=w.length;_<C;_++){var A=w[_],k=A.props,E=A.item,O=E.type.defaultProps!==void 0?te(te({},E.type.defaultProps),E.props):E.props,P=_s(E.type);if(P==="Bar"){var M=(k.data||[]).find(function($){return $ue(v,$)});if(M)return{graphicalItem:A,payload:M}}else if(P==="RadialBar"){var T=(k.data||[]).find(function($){return _C(v,$)});if(T)return{graphicalItem:A,payload:T}}else if(Yp(A,N)||Xp(A,N)||Zu(A,N)){var F=jhe({graphicalItem:A,activeTooltipItem:N,itemData:O.data}),q=O.activeIndex===void 0?F:O.activeIndex;return{graphicalItem:te(te({},A),{},{childIndex:q}),payload:Zu(A,N)?O.data[F]:A.props.data[F]}}}return null}},{key:"render",value:function(){var v=this;if(!p_(this))return null;var S=this.props,w=S.children,N=S.className,_=S.width,C=S.height,A=S.style,k=S.compact,E=S.title,O=S.desc,P=Hk(S,$xe),M=we(P,!1);if(k)return G.createElement(Ek,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement(Sv,ko({},M,{width:_,height:C,title:E,desc:O}),this.renderClipPath(),g_(w,this.renderMap)));if(this.props.accessibilityLayer){var T,F;M.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,M.role=(F=this.props.role)!==null&&F!==void 0?F:"application",M.onKeyDown=function($){v.accessibilityManager.keyboardEvent($)},M.onFocus=function(){v.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return G.createElement(Ek,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},G.createElement("div",ko({className:Pe("recharts-wrapper",N),style:te({position:"relative",cursor:"default",width:_,height:C},A)},q,{ref:function(U){v.container=U}}),G.createElement(Sv,ko({},M,{width:_,height:C,title:E,desc:O,style:Xxe}),this.renderClipPath(),g_(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);_e(b,"displayName",r),_e(b,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),_e(b,"getDerivedStateFromProps",function(g,y){var m=g.dataKey,v=g.data,S=g.children,w=g.width,N=g.height,_=g.layout,C=g.stackOffset,A=g.margin,k=y.dataStartIndex,E=y.dataEndIndex;if(y.updateId===void 0){var O=Jk(g);return te(te(te({},O),{},{updateId:0},p(te(te({props:g},O),{},{updateId:0}),y)),{},{prevDataKey:m,prevData:v,prevWidth:w,prevHeight:N,prevLayout:_,prevStackOffset:C,prevMargin:A,prevChildren:S})}if(m!==y.prevDataKey||v!==y.prevData||w!==y.prevWidth||N!==y.prevHeight||_!==y.prevLayout||C!==y.prevStackOffset||!Mo(A,y.prevMargin)){var P=Jk(g),M={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},T=te(te({},Xk(y,v,_)),{},{updateId:y.updateId+1}),F=te(te(te({},P),M),T);return te(te(te({},F),p(te({props:g},F),y)),{},{prevDataKey:m,prevData:v,prevWidth:w,prevHeight:N,prevLayout:_,prevStackOffset:C,prevMargin:A,prevChildren:S})}if(!wv(S,y.prevChildren)){var q,$,U,X,K=Br(S,pl),z=K&&(q=($=K.props)===null||$===void 0?void 0:$.startIndex)!==null&&q!==void 0?q:k,H=K&&(U=(X=K.props)===null||X===void 0?void 0:X.endIndex)!==null&&U!==void 0?U:E,Q=z!==k||H!==E,se=!Ee(v),ue=se&&!Q?y.updateId:y.updateId+1;return te(te({updateId:ue},p(te(te({props:g},y),{},{updateId:ue,dataStartIndex:z,dataEndIndex:H}),y)),{},{prevChildren:S,dataStartIndex:z,dataEndIndex:H})}return null}),_e(b,"renderActiveDot",function(g,y,m){var v;return j.isValidElement(g)?v=j.cloneElement(g,y):Oe(g)?v=g(y):v=G.createElement(Vp,y),G.createElement(Be,{className:"recharts-active-dot",key:m},v)});var x=j.forwardRef(function(y,m){return G.createElement(b,ko({},y,{ref:m}))});return x.displayName=b.displayName,x},Ks=Ww({chartName:"BarChart",GraphicalChild:At,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:_r},{axisType:"yAxis",AxisComp:pr}],formatAxisMap:QD}),Gw=Ww({chartName:"PieChart",GraphicalChild:Wn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Hp},{axisType:"radiusAxis",AxisComp:Gp}],formatAxisMap:qoe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),RM=Ww({chartName:"AreaChart",GraphicalChild:Gs,axisComponents:[{axisType:"xAxis",AxisComp:_r},{axisType:"yAxis",AxisComp:pr}],formatAxisMap:QD});const $e=e=>new Intl.NumberFormat("en-ET",{style:"currency",currency:"ETB",minimumFractionDigits:2,maximumFractionDigits:2}).format(e).replace("ETB","Birr"),De=e=>{if(!e)return"N/A";const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)},_t=({children:e,variant:t="neutral",className:r=""})=>{const n={success:"bg-emerald-50 text-emerald-700 border-emerald-200",warning:"bg-amber-50 text-amber-700 border-amber-200",danger:"bg-rose-50 text-rose-700 border-rose-200",info:"bg-blue-50 text-blue-700 border-blue-200",neutral:"bg-slate-50 text-slate-600 border-slate-200"};return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${n[t]} ${r}`,children:e})},vh=({title:e,value:t,icon:r,color:n,loading:a,trend:i,trendUp:o})=>a?s.jsx(je,{className:"h-[140px] w-full rounded-xl"}):s.jsxs(mi.div,{className:"bg-white rounded-xl shadow-card p-6 border border-border relative overflow-hidden group",whileHover:{y:-4,transition:{duration:.2}},children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("h3",{className:"text-3xl font-bold text-slate-900 mt-2 tracking-tight",children:t})]}),s.jsx("div",{className:"p-3 rounded-xl bg-opacity-10",style:{backgroundColor:`${n}15`,color:n},children:s.jsx(r,{className:"h-6 w-6"})})]}),i&&s.jsxs("div",{className:"mt-4 flex items-center text-xs font-medium",children:[s.jsxs("span",{className:`flex items-center ${o?"text-emerald-600":"text-rose-600"}`,children:[o?s.jsx(ss,{className:"h-3 w-3 mr-1"}):s.jsx(Xo,{className:"h-3 w-3 mr-1"}),i]}),s.jsx("span",{className:"text-muted-foreground ml-2",children:"vs last month"})]}),s.jsx("div",{className:"absolute -bottom-4 -right-4 w-24 h-24 rounded-full opacity-5 transition-transform group-hover:scale-150 duration-500",style:{backgroundColor:n}})]}),ige=({data:e,loading:t})=>t?s.jsx(je,{className:"h-[400px] w-full rounded-xl"}):s.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-border h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Academic Performance"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Average student scores over time"})]}),s.jsxs("select",{className:"text-sm border-border rounded-lg text-slate-600 focus:ring-primary",children:[s.jsx("option",{children:"This Year"}),s.jsx("option",{children:"Last Year"})]})]}),s.jsx("div",{className:"h-80",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(RM,{data:e,margin:{top:10,right:10,left:-20,bottom:0},children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorPerf",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.1}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1,stroke:"#f1f5f9"}),s.jsx(_r,{dataKey:"name",tick:{fontSize:12,fill:"#64748b"},axisLine:!1,tickLine:!1,dy:10}),s.jsx(pr,{tick:{fontSize:12,fill:"#64748b"},axisLine:!1,tickLine:!1,domain:[0,100]}),s.jsx(pt,{contentStyle:{backgroundColor:"#fff",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"#1e293b",fontWeight:600}}),s.jsx(Gs,{type:"monotone",dataKey:"performance",stroke:"#3b82f6",strokeWidth:3,fillOpacity:1,fill:"url(#colorPerf)"})]})})})]}),oge=({students:e,loading:t})=>t?s.jsx(je,{className:"h-[400px] w-full rounded-xl"}):s.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 border border-border h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Admissions"}),s.jsxs("button",{className:"text-sm text-blue-600 font-medium hover:underline flex items-center",children:["View All ",s.jsx(Hm,{className:"h-3 w-3 ml-1"})]})]}),s.jsx("div",{className:"space-y-4 flex-grow",children:e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No recent admissions."}):e.map(r=>s.jsxs("div",{className:"flex items-center justify-between group p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 border border-slate-200 flex items-center justify-center font-bold text-slate-600 overflow-hidden shrink-0",children:r.avatar?s.jsx("img",{src:r.avatar,alt:r.name,className:"w-full h-full object-cover"}):r.name.charAt(0)}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-900 group-hover:text-blue-600 transition-colors",children:r.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Class ",r.class,"-",r.section]})]})]}),s.jsx(_t,{variant:"success",children:"Active"})]},r.id))})]}),lge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(null),[i,o]=j.useState([]),[l,c]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(!e||!e.school_id)){c(!0);try{const{data:h,error:d}=await D.rpc("get_admin_dashboard_stats",{p_school_id:e.school_id});d?console.error("Stats RPC failed, falling back:",d):h&&a({studentCount:h.studentCount||0,teacherCount:h.teacherCount||0,totalRevenue:h.totalRevenue||0,totalExpenses:h.totalExpenses||0});const{data:f,error:p}=await D.from("students").select("*").eq("school_id",e.school_id).order("created_at",{ascending:!1}).limit(5);if(p)throw p;r(f||[]);const{data:b,error:x}=await D.from("grades").select("created_at, marks_obtained, exams(total_marks)").eq("school_id",e.school_id).order("created_at",{ascending:!0}).limit(200);if(x)throw x;const g={};b&&b.forEach(S=>{var A;const N=new Date(S.created_at).toLocaleString("default",{month:"short"});g[N]||(g[N]={total:0,count:0});const _=((A=S.exams)==null?void 0:A.total_marks)??100,C=_>0?S.marks_obtained/_*100:0;g[N].total+=C,g[N].count+=1});const m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(S=>{const w=g[S];return{name:S,performance:w?Math.round(w.total/w.count):0}}).filter(S=>S.performance>0),v=m.length>0?m:[{name:"Jan",performance:0},{name:"Feb",performance:0},{name:"Mar",performance:0},{name:"Apr",performance:0},{name:"May",performance:0}];o(v)}catch(h){console.error("AdminDashboard Error:",h),I.error("Failed to refresh dashboard data.")}finally{c(!1)}}})()},[e]),s.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Dashboard Overview"}),s.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome back, ",(e==null?void 0:e.name)||"Admin",". Here's what's happening today."]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-lg border border-border shadow-sm",children:[s.jsx("button",{className:"px-3 py-1.5 text-sm font-medium bg-slate-100 text-slate-900 rounded-md shadow-sm",children:"Overview"}),s.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-slate-500 hover:text-slate-900",children:"Analytics"}),s.jsx("button",{className:"px-3 py-1.5 text-sm font-medium text-slate-500 hover:text-slate-900",children:"Reports"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(vh,{title:"Total Students",value:`${(n==null?void 0:n.studentCount)??0}`,icon:Jr,color:"#3b82f6",loading:l,trend:"12%",trendUp:!0}),s.jsx(vh,{title:"Total Teachers",value:`${(n==null?void 0:n.teacherCount)??0}`,icon:Vt,color:"#10b981",loading:l,trend:"4%",trendUp:!0}),s.jsx(vh,{title:"Total Revenue",value:$e((n==null?void 0:n.totalRevenue)??0),icon:$t,color:"#8b5cf6",loading:l,trend:"8%",trendUp:!0}),s.jsx(vh,{title:"Total Expenses",value:$e((n==null?void 0:n.totalExpenses)??0),icon:Xo,color:"#f59e0b",loading:l,trend:"2%",trendUp:!1})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx(ige,{data:i,loading:l})}),s.jsx("div",{children:s.jsx(oge,{students:t,loading:l})})]})]})},R=G.forwardRef(({className:e,variant:t="primary",size:r="default",loading:n=!1,children:a,...i},o)=>{const l="inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",c={primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",danger:"bg-red-600 text-white hover:bg-red-700",ghost:"hover:bg-accent hover:text-accent-foreground"},u={default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"};return s.jsx("button",{className:`${l} ${c[t]} ${u[r]} ${e}`,ref:o,disabled:n||i.disabled,...i,children:n?s.jsx(Bs,{className:"animate-spin h-5 w-5"}):a})});R.displayName="Button";const cge=()=>{const{profile:e,user:t}=fe(),[r,n]=j.useState(null),[a,i]=j.useState([]),[o,l]=j.useState([]),[c,u]=j.useState([]),[h,d]=j.useState(!0),[f,p]=j.useState(0);j.useEffect(()=>{(async()=>{if(!(!t||!(e!=null&&e.school_id))){d(!0);try{let{data:y}=await D.from("teachers").select("*").eq("user_id",t.id).eq("school_id",e.school_id).maybeSingle();if(!y&&t.email){const{data:C}=await D.from("teachers").select("*").eq("email",t.email).eq("school_id",e.school_id).maybeSingle();C&&(y=C,C.user_id||await D.from("teachers").update({user_id:t.id}).eq("id",C.id))}if(!y){console.warn("Teacher profile not found for user"),d(!1);return}n(y);const[m,v,S]=await Promise.all([D.from("classes").select("*, students(count)").eq("teacher_id",y.id).eq("school_id",e.school_id),D.from("exams").select("*").eq("status","upcoming").eq("school_id",e.school_id).order("date",{ascending:!0}).limit(5),D.from("timetables").select("*, classes(name), courses(name)").eq("teacher_id",y.id).eq("day_of_week",new Date().toLocaleDateString("en-US",{weekday:"long"})).order("start_time",{ascending:!0})]);if(m.error)throw m.error;const w=(m.data||[]).map(C=>{var A;return{...C,studentCount:((A=C.students[0])==null?void 0:A.count)||0,name:C.name.startsWith("Class ")?C.name:`Class ${C.name}`}});i(w);const N=new Set(w.map(C=>C.name.replace("Class ",""))),_=(v.data||[]).filter(C=>N.has(C.class));l(_),u(S.data||[])}catch(y){console.error("TeacherDashboard Error:",y),I.error("Failed to load dashboard data")}finally{d(!1)}}})()},[t,e,f]);const b=()=>{p(g=>g+1)};if(h)return s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{className:"h-10 w-1/3"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[s.jsx(je,{className:"h-32 w-full"}),s.jsx(je,{className:"h-32 w-full"}),s.jsx(je,{className:"h-32 w-full"})]}),s.jsx(je,{className:"h-64 w-full"})]});if(!r)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] bg-white rounded-xl border border-dashed border-slate-300 p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(jn,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Profile Not Linked"}),s.jsx("p",{className:"text-slate-500 mt-2 max-w-md mb-6",children:"Your user account is not currently linked to a teacher profile in the staff directory. Please contact the school administrator to ensure your email matches your staff record."}),s.jsxs(R,{onClick:b,variant:"secondary",children:[s.jsx(Qm,{size:18,className:"mr-2"})," Check Again"]})]});const x=a.reduce((g,y)=>g+y.studentCount,0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Teacher Dashboard"}),s.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome back, ",r.name,"!"]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-blue-100 rounded-full text-blue-600",children:s.jsx(xd,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Assigned Classes"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:a.length})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-green-100 rounded-full text-green-600",children:s.jsx(Vt,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Students"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:x})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4",children:[s.jsx("div",{className:"p-4 bg-yellow-100 rounded-full text-yellow-600",children:s.jsx(Mr,{className:"h-8 w-8"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Upcoming Exams"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900",children:o.length})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col h-full",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center",children:[s.jsx(rn,{className:"mr-2 h-5 w-5 text-blue-600"})," Today's Schedule"]}),s.jsx("div",{className:"space-y-3 flex-grow",children:c.length>0?c.map((g,y)=>{var m,v;return s.jsxs("div",{className:"flex items-center p-3 bg-slate-50 rounded-lg border border-slate-100",children:[s.jsxs("div",{className:"w-24 text-xs font-bold text-slate-500 text-center border-r border-slate-200 pr-3 mr-3",children:[g.start_time.slice(0,5)," ",s.jsx("br",{})," ",g.end_time.slice(0,5)]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800",children:((m=g.courses)==null?void 0:m.name)||"Subject"}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Class ",(v=g.classes)==null?void 0:v.name]})]})]},y)}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-400",children:[s.jsx(wr,{size:32,className:"mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No classes scheduled for today."})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col h-full",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center",children:[s.jsx(Mr,{className:"mr-2 h-5 w-5 text-orange-600"})," Upcoming Exams"]}),s.jsx("div",{className:"space-y-3 flex-grow",children:o.length>0?o.map(g=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800",children:g.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:[g.subject,"  Class ",g.class]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-bold text-orange-700",children:De(g.date)}),s.jsx("p",{className:"text-xs text-orange-600",children:g.duration})]})]},g.id)):s.jsxs("div",{className:"flex flex-col items-center justify-center h-40 text-slate-400",children:[s.jsx(Mr,{size:32,className:"mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No upcoming exams."})]})})]})]})]})},Pr=({title:e,value:t,icon:r,iconBgColor:n,trend:a,trendDirection:i})=>{const o=i==="up",l=o?"text-green-600":"text-red-600",c=o?Y5:G5;return s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-5 border border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("p",{className:"text-3xl font-bold text-primary mt-1",children:t}),s.jsxs("div",{className:`text-xs flex items-center mt-2 ${l}`,children:[s.jsx(c,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:a})]})]}),s.jsx("div",{className:`p-3 rounded-lg ${n}`,children:s.jsx(r,{className:"h-6 w-6 text-white"})})]})})},uge=()=>{const{user:e,profile:t}=fe(),[r,n]=j.useState(null),[a,i]=j.useState({attendanceRate:0,pendingFees:0,avgGpa:0,homeworkCount:0}),[o,l]=j.useState([]),[c,u]=j.useState([]),[h,d]=j.useState(!0);return j.useEffect(()=>{(async()=>{var p,b,x,g,y;if(!(!e||!(t!=null&&t.school_id))){d(!0);try{let{data:m,error:v}=await D.from("students").select("*").eq("user_id",e.id).eq("school_id",t.school_id).maybeSingle();if(!m){const{data:F}=await D.from("students").select("*").eq("email",e.email).eq("school_id",t.school_id).maybeSingle();F&&(m=F)}if(!m){console.error("Student profile not found linked to user"),d(!1);return}n(m);const[S,w,N,_,C,A]=await Promise.all([D.from("attendance").select("status").eq("student_id",m.id).eq("school_id",t.school_id),D.from("fees").select("amount").eq("student_id",m.id).eq("school_id",t.school_id).neq("status","paid"),D.from("grades").select("gpa").eq("student_id",m.id).eq("school_id",t.school_id),D.from("homework").select("id",{count:"exact"}).eq("class",m.class).eq("school_id",t.school_id).eq("status","active"),D.from("exams").select("*").eq("class",m.class).eq("school_id",t.school_id).eq("status","upcoming").order("date",{ascending:!0}).limit(3),D.from("timetables").select("*, courses(name), teachers(name)").eq("class_id",(p=(await D.from("classes").select("id").eq("name",`${m.class}-${m.section}`).eq("school_id",t.school_id).single()).data)==null?void 0:p.id).eq("day_of_week",new Date().toLocaleDateString("en-US",{weekday:"long"})).order("start_time",{ascending:!0})]),k=((b=S.data)==null?void 0:b.length)||0,E=((x=S.data)==null?void 0:x.filter(F=>F.status==="present").length)||0,O=k>0?Math.round(E/k*100):100,P=((g=w.data)==null?void 0:g.reduce((F,q)=>F+q.amount,0))||0,M=((y=N.data)==null?void 0:y.map(F=>F.gpa))||[],T=M.length>0?M.reduce((F,q)=>F+q,0)/M.length:0;i({attendanceRate:O,pendingFees:P,avgGpa:T,homeworkCount:_.count||0}),l(C.data||[]),u(A.data||[])}catch(m){console.error("Error fetching student dashboard:",m)}finally{d(!1)}}})()},[e,t]),h?s.jsxs("div",{className:"space-y-6",children:[s.jsx(je,{className:"h-10 w-1/3"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((f,p)=>s.jsx(je,{className:"h-32 w-full"},p))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(je,{className:"h-64 w-full"}),s.jsx(je,{className:"h-64 w-full"})]})]}):r?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Student Dashboard"}),s.jsxs("p",{className:"text-slate-500 mt-1",children:["Welcome back, ",r.name,"! Here is your daily overview."]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Pr,{title:"Attendance",value:`${a.attendanceRate}%`,icon:wr,iconBgColor:"bg-blue-500",trend:a.attendanceRate<75?"Low Attendance":"Good Standing",trendDirection:a.attendanceRate>=75?"up":"down"}),s.jsx(Pr,{title:"Pending Fees",value:$e(a.pendingFees),icon:$t,iconBgColor:"bg-red-500",trend:a.pendingFees>0?"Payment Due":"All Clear",trendDirection:a.pendingFees>0?"down":"up"}),s.jsx(Pr,{title:"Average GPA",value:a.avgGpa.toFixed(2),icon:Jr,iconBgColor:"bg-green-500",trend:"Current Term",trendDirection:"up"}),s.jsx(Pr,{title:"Homework",value:a.homeworkCount.toString(),icon:qn,iconBgColor:"bg-purple-500",trend:"Active Tasks",trendDirection:"up"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center",children:[s.jsx(rn,{className:"mr-2 h-5 w-5 text-blue-600"})," Today's Schedule"]}),s.jsx("div",{className:"space-y-3 flex-grow",children:c.length>0?c.map((f,p)=>{var b,x;return s.jsxs("div",{className:"flex items-center p-3 bg-slate-50 rounded-lg border border-slate-100",children:[s.jsxs("div",{className:"w-24 text-xs font-bold text-slate-500 text-center border-r border-slate-200 pr-3 mr-3",children:[f.start_time.slice(0,5)," ",s.jsx("br",{})," ",f.end_time.slice(0,5)]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800",children:((b=f.courses)==null?void 0:b.name)||"Subject"}),s.jsx("p",{className:"text-xs text-slate-500",children:((x=f.teachers)==null?void 0:x.name)||"Teacher"})]})]},p)}):s.jsx("p",{className:"text-sm text-slate-500 italic text-center py-8",children:"No classes scheduled for today."})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center",children:[s.jsx(ss,{className:"mr-2 h-5 w-5 text-orange-600"})," Upcoming Exams"]}),s.jsx("div",{className:"space-y-3 flex-grow",children:o.length>0?o.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-100",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-800",children:f.name}),s.jsx("p",{className:"text-xs text-slate-500",children:f.subject})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-bold text-orange-700",children:De(f.date)}),s.jsx("p",{className:"text-xs text-orange-600",children:f.duration})]})]},f.id)):s.jsx("p",{className:"text-sm text-slate-500 italic text-center py-8",children:"No upcoming exams."})})]})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-[50vh] bg-white rounded-xl border border-dashed border-slate-300 p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(jn,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Profile Not Linked"}),s.jsx("p",{className:"text-slate-500 mt-2 max-w-md",children:"Your user account is not currently linked to a student profile. Please contact the school administrator to link your account."})]})},dge=()=>{const{user:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(e!=null&&e.email){a(!0);try{const{data:o,error:l}=await D.from("students").select("*").eq("parent_email",e.email);if(l)throw l;r(o||[])}catch(o){console.error("Error fetching children:",o),I.error("Failed to load children data")}finally{a(!1)}}})()},[e]),n?s.jsx("div",{className:"p-6",children:s.jsx(je,{className:"h-64 w-full"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-primary",children:"Parent Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Welcome! Here is an overview of your children's progress."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(i=>s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-bold text-slate-500 overflow-hidden",children:i.avatar?s.jsx("img",{src:i.avatar,alt:i.name,className:"w-full h-full object-cover"}):i.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:i.name}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Class ",i.class,"-",i.section]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[s.jsx(qn,{size:16,className:"text-blue-500"})," Grade"]}),s.jsx("span",{className:"font-bold text-slate-900",children:i.grade})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-slate-700",children:[s.jsx(Vt,{size:16,className:"text-green-500"})," Roll No"]}),s.jsx("span",{className:"font-bold text-slate-900",children:i.rollNumber})]})]})]},i.id)),t.length===0&&s.jsxs("div",{className:"col-span-full text-center py-12 bg-white rounded-xl border border-dashed border-slate-300",children:[s.jsxs("p",{className:"text-slate-500",children:["No children linked to your account email (",e==null?void 0:e.email,")."]}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Please contact the school administrator to update your email in student records."})]})]})]})},hge=()=>{const[e,t]=j.useState({totalFees:0,pendingFees:0,todayCollection:0}),[r,n]=j.useState(!0);return j.useEffect(()=>{(async()=>{var f,p,b;n(!0);const i=new Date().toISOString().split("T")[0],[o,l,c]=await Promise.all([D.from("fees").select("amount").eq("status","paid"),D.from("fees").select("amount").neq("status","paid"),D.from("fees").select("amount").eq("status","paid").eq("payment_date",i)]),u=((f=o.data)==null?void 0:f.reduce((x,g)=>x+g.amount,0))||0,h=((p=l.data)==null?void 0:p.reduce((x,g)=>x+g.amount,0))||0,d=((b=c.data)==null?void 0:b.reduce((x,g)=>x+g.amount,0))||0;t({totalFees:u,pendingFees:h,todayCollection:d}),n(!1)})()},[]),r?s.jsx("div",{className:"p-6",children:s.jsx(je,{className:"h-64 w-full"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-primary",children:"Cashier Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Financial overview and fee collection status."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[s.jsx(Pr,{title:"Today's Collection",value:$e(e.todayCollection),icon:$t,iconBgColor:"bg-green-500",trend:"Daily",trendDirection:"up"}),s.jsx(Pr,{title:"Total Collected",value:$e(e.totalFees),icon:ss,iconBgColor:"bg-blue-500",trend:"Lifetime",trendDirection:"up"}),s.jsx(Pr,{title:"Pending Fees",value:$e(e.pendingFees),icon:Xo,iconBgColor:"bg-red-500",trend:"Outstanding",trendDirection:"down"})]})]})},fge=()=>{const{profile:e,loading:t}=fe();if(t)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(Bs,{className:"animate-spin text-blue-600",size:48})});switch(e==null?void 0:e.role){case"admin":case"principal":return s.jsx(lge,{});case"teacher":return s.jsx(cge,{});case"student":return s.jsx(uge,{});case"parent":return s.jsx(dge,{});case"cashier":return s.jsx(hge,{});default:return s.jsxs("div",{className:"flex flex-col justify-center items-center h-96 text-center p-6",children:[s.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-4",children:s.jsx(dd,{className:"h-8 w-8 text-red-500"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Unable to Load Dashboard"}),s.jsx("p",{className:"text-slate-500 max-w-md mb-6",children:"We couldn't retrieve your profile information. This might be due to a network issue or missing permissions."}),s.jsx(R,{onClick:()=>window.location.reload(),children:"Reload Page"})]})}},he=({isOpen:e,onClose:t,title:r,children:n,footer:a,size:i="2xl"})=>{const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl",full:"max-w-[95vw]"};return s.jsx(Rc,{children:e&&s.jsx(mi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",onClick:t,children:s.jsxs(mi.div,{initial:{y:-30,opacity:0},animate:{y:0,opacity:1},exit:{y:-30,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:`bg-white rounded-xl shadow-2xl w-full ${o[i]} max-h-[90vh] flex flex-col`,onClick:l=>l.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-100",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:r}),s.jsx("button",{onClick:t,className:"p-2 rounded-full text-slate-400 hover:bg-slate-100 hover:text-slate-600 transition-colors",children:s.jsx(Zm,{size:20})})]}),s.jsx("div",{className:"p-6 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200",children:n}),a&&s.jsx("div",{className:"flex items-center justify-end p-5 border-t border-gray-100 gap-3 bg-slate-50 rounded-b-xl",children:a})]})})})},J=G.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,ref:n,...r}));J.displayName="Input";const B=G.forwardRef(({className:e,...t},r)=>s.jsx("label",{ref:r,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...t}));B.displayName="Label";const le=G.forwardRef(({className:e,children:t,...r},n)=>s.jsx("select",{ref:n,className:`flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${e}`,...r,children:t}));le.displayName="Select";const nx=({onFileChange:e,initialPreviewUrl:t})=>{const[r,n]=j.useState(null),a=j.useRef(null);j.useEffect(()=>{n(t||null)},[t]);const i=c=>{var h;const u=(h=c.target.files)==null?void 0:h[0];if(u){const d=new FileReader;d.onloadend=()=>{n(d.result)},d.readAsDataURL(u),e(u)}},o=()=>{n(null),e(null),a.current&&(a.current.value="")},l=()=>{var c;(c=a.current)==null||c.click()};return s.jsxs("div",{className:"space-y-2",children:[r?s.jsxs("div",{className:"relative group w-32 h-32 rounded-full mx-auto",children:[s.jsx("img",{src:r,alt:"Preview",className:"w-full h-full object-cover rounded-full"}),s.jsx("button",{type:"button",onClick:o,className:"absolute top-0 right-0 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Zm,{size:16})})]}):s.jsxs("div",{onClick:l,className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-500 hover:border-blue-500 hover:text-blue-500 cursor-pointer transition-colors",children:[s.jsx(WE,{size:32}),s.jsx("p",{className:"mt-2 text-sm",children:"Click or drag to upload"}),s.jsx("p",{className:"text-xs",children:"PNG, JPG up to 10MB"})]}),s.jsx("input",{type:"file",ref:a,onChange:i,accept:"image/png, image/jpeg",className:"hidden"})]})},mge=["Mathematics","Physics","Chemistry","Biology","English","History","Geography","Computer Science"],IM=j.forwardRef(({teacher:e,onSubmit:t},r)=>{var b;const{profile:n}=fe(),[a,i]=j.useState({name:"",email:"",subject:"Mathematics",phone:"",joinDate:new Date().toISOString().split("T")[0],dob:"",salary:3e4,status:"active",user_id:null,shift:"Morning",school_id:(n==null?void 0:n.school_id)||""}),[o,l]=j.useState(null),[c,u]=j.useState([]),[h,d]=j.useState([]);j.useEffect(()=>{(async()=>{const{data:g,error:y}=await D.rpc("get_unlinked_users",{role_name:"teacher"});y?console.error("Error fetching unlinked users:",y):u(g||[])})(),(n==null?void 0:n.role)==="system_admin"&&(async()=>{const{data:y}=await D.from("schools").select("id, name").eq("is_active",!0).order("name");y&&d(y)})()},[n]),j.useEffect(()=>{e?(i({name:e.name,email:e.email,subject:e.subject,phone:e.phone,joinDate:e.joinDate,dob:e.dob,salary:e.salary,status:e.status,user_id:e.user_id||null,shift:e.shift||"Morning",school_id:e.school_id||(n==null?void 0:n.school_id)||""}),l(null)):(i({name:"",email:"",subject:"Mathematics",phone:"",joinDate:new Date().toISOString().split("T")[0],dob:"",salary:3e4,status:"active",user_id:null,shift:"Morning",school_id:(n==null?void 0:n.school_id)||""}),l(null))},[e,n]);const f=x=>{const{name:g,value:y,type:m}=x.target,v=m==="number"?parseFloat(y):y==="null"?null:y;i(S=>({...S,[g]:v}))},p=x=>{x.preventDefault(),t({formData:{...a,id:e==null?void 0:e.id},imageFile:o})};return s.jsxs("form",{ref:r,onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Profile Picture"}),s.jsx(nx,{onFileChange:l,initialPreviewUrl:(b=e==null?void 0:e.avatar)!=null&&b.startsWith("blob:")?e.avatar:null})]}),(n==null?void 0:n.role)==="system_admin"&&s.jsxs("div",{className:"space-y-2 bg-blue-50 p-3 rounded-md border border-blue-100",children:[s.jsx(B,{htmlFor:"school_id",className:"text-blue-800",children:"Assign School"}),s.jsxs(le,{id:"school_id",name:"school_id",value:a.school_id,onChange:f,required:!0,children:[s.jsx("option",{value:"",children:"Select School"}),h.map(x=>s.jsx("option",{value:x.id,children:x.name},x.id))]}),s.jsx("p",{className:"text-xs text-blue-600",children:"This teacher will belong to the selected school."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"name",children:"Full Name"}),s.jsx(J,{id:"name",name:"name",value:a.name,onChange:f,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",name:"email",type:"email",value:a.email,onChange:f,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"subject",children:"Subject"}),s.jsx(le,{id:"subject",name:"subject",value:a.subject,onChange:f,children:mge.map(x=>s.jsx("option",{value:x,children:x},x))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"phone",children:"Phone"}),s.jsx(J,{id:"phone",name:"phone",type:"tel",value:a.phone,onChange:f})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(J,{id:"dob",name:"dob",type:"date",value:a.dob,onChange:f,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"joinDate",children:"Join Date"}),s.jsx(J,{id:"joinDate",name:"joinDate",type:"date",value:a.joinDate,onChange:f,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"salary",children:"Salary"}),s.jsx(J,{id:"salary",name:"salary",type:"number",value:a.salary,onChange:f,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"shift",children:"Shift"}),s.jsxs(le,{id:"shift",name:"shift",value:a.shift,onChange:f,children:[s.jsx("option",{value:"Morning",children:"Morning"}),s.jsx("option",{value:"Afternoon",children:"Afternoon"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:a.status,onChange:f,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"user_id",children:"Link to User Account"}),s.jsxs(le,{id:"user_id",name:"user_id",value:a.user_id||"null",onChange:f,children:[s.jsx("option",{value:"null",children:"-- Not Linked --"}),e&&e.user_id&&s.jsx("option",{value:e.user_id,children:"Current User"}),c.map(x=>s.jsx("option",{value:x.id,children:x.email},x.id))]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Link this teacher profile to a login account."})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});IM.displayName="TeacherForm";const LM=({email:e,name:t,role:r,schoolId:n,onClose:a,onSuccess:i})=>{const{profile:o}=fe(),[l,c]=j.useState(""),[u,h]=j.useState(!1),[d,f]=j.useState(""),[p,b]=j.useState(!1),x=n||(o==null?void 0:o.school_id);j.useEffect(()=>{(async()=>{if(x){b(!0);const{data:m}=await D.from("schools").select("name").eq("id",x).single();m&&f(m.name),b(!1)}})()},[x]);const g=async y=>{if(y.preventDefault(),!x){I.error("Cannot create user: No School ID assigned to this record.");return}h(!0);try{const m=Ij("https://cjtmcsehkdvwjgkrjqul.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqdG1jc2Voa2R2d2pna3JqcXVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NzM3OTcsImV4cCI6MjA3NzQ0OTc5N30.K8RlO--akFtbSXYRChekplr9ynNwKaGLxKWREi8MFWM",{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),{data:v,error:S}=await m.auth.signUp({email:e,password:l,options:{data:{role:r,full_name:t,school_id:x}}});if(S)throw S;v.user&&(I.success(`Login created for ${t}!`),setTimeout(()=>{i(),a()},1500))}catch(m){console.error("User creation error:",m),I.error(`Failed to create user: ${m.message}`)}finally{h(!1)}};return s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Jb,{className:"h-5 w-5 text-blue-600 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"Create Login Credentials"}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Creating login for ",s.jsx("strong",{children:t})," (",e,")."]})]})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200 flex items-center gap-2 text-xs text-blue-800",children:[s.jsx(Kb,{size:14}),p?s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Bs,{size:10,className:"animate-spin"})," Verifying school..."]}):d?s.jsxs("span",{children:["Assigning to: ",s.jsx("strong",{children:d})]}):s.jsxs("span",{className:"text-red-600 font-bold flex items-center gap-1",children:[s.jsx(jn,{size:12})," Warning: No School Assigned"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"password",children:"Set Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ni,{className:"h-4 w-4 text-gray-400"})}),s.jsx(J,{id:"password",type:"password",value:l,onChange:y=>c(y.target.value),className:"pl-10",placeholder:"Enter a secure password",required:!0,minLength:6})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Must be at least 6 characters."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(R,{type:"button",variant:"secondary",onClick:a,children:"Cancel"}),s.jsx(R,{type:"submit",loading:u,disabled:!x||p,children:"Create Login"})]})]})},Bi=({title:e,cardCount:t=3})=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx(je,{className:"h-8 w-48 mb-2"}),s.jsx(je,{className:"h-4 w-64"})]}),s.jsx(je,{className:"h-10 w-36"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsx(je,{className:"h-10 w-full"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:t}).map((r,n)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-4",children:[s.jsx(je,{className:"h-6 w-3/4"}),s.jsx(je,{className:"h-4 w-1/2"}),s.jsx(je,{className:"h-4 w-full"}),s.jsx(je,{className:"h-4 w-full"}),s.jsx("div",{className:"pt-4 border-t mt-4",children:s.jsx(je,{className:"h-8 w-1/4 ml-auto"})})]},n))})]}),Og=e=>{var t;return{id:e.id,created_at:e.created_at,name:e.name,email:e.email,subject:e.subject,phone:e.phone,joinDate:e.join_date,issuedDate:e.issued_date,expiryDate:e.expiry_date,dob:e.dob,salary:e.salary,status:e.status,avatar:e.avatar,user_id:e.user_id,shift:e.shift,school_id:e.school_id,school_name:(t=e.schools)==null?void 0:t.name}},pge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(!1),[d,f]=j.useState(!1),[p,b]=j.useState(!1),[x,g]=j.useState(null),[y,m]=j.useState(!1),v=j.useRef(null),S=async()=>{if(e){a(!0);try{let T=D.from("teachers").select("*, schools(name)").order("created_at",{ascending:!1});e.role!=="system_admin"&&e.school_id&&(T=T.eq("school_id",e.school_id));const{data:F,error:q}=await T;if(q)throw new Error(q.message);r(F.map(Og))}catch(T){const F=(T==null?void 0:T.message)||(typeof T=="object"?JSON.stringify(T):String(T));I.error(`Failed to fetch teachers: ${F}`)}finally{a(!1)}}};j.useEffect(()=>{S()},[e]);const w=t.filter(T=>T.name.toLowerCase().includes(i.toLowerCase())||T.subject.toLowerCase().includes(i.toLowerCase())||T.email.toLowerCase().includes(i.toLowerCase())||T.school_name&&T.school_name.toLowerCase().includes(i.toLowerCase())),N=()=>{g(null),c(!0)},_=T=>{g(T),c(!0)},C=T=>{g(T),h(!0)},A=T=>{g(T),f(!0)},k=T=>{if(T.user_id){I.error("This teacher already has a login account.");return}g(T),b(!0)},E=async(T,F)=>{const q=T.name.split(".").pop(),$=`${F}-${Date.now()}.${q}`,{error:U}=await D.storage.from("avatars").upload($,T);if(U)return I.error(`Avatar upload failed: ${U.message}`),null;const{data:X}=D.storage.from("avatars").getPublicUrl($);return X.publicUrl},O=async({formData:T,imageFile:F})=>{m(!0);try{const q=(e==null?void 0:e.role)==="system_admin"?T.school_id:e==null?void 0:e.school_id;if(!q)throw new Error("School ID is missing. Please refresh the page and try again.");const $=T.joinDate,U=$,X=new Date($);X.setFullYear(X.getFullYear()+4);const K={name:T.name,email:T.email,subject:T.subject,phone:T.phone,join_date:$,issued_date:U,expiry_date:X.toISOString().split("T")[0],dob:T.dob,salary:T.salary,status:T.status,user_id:T.user_id,shift:T.shift,school_id:q,avatar:x==null?void 0:x.avatar},z=T.id||`temp-${Date.now()}`;if(F){const H=await E(F,z);H&&(K.avatar=H)}if(T.id){const{data:H,error:Q}=await D.from("teachers").update(K).eq("id",T.id).select("*, schools(name)").single();if(Q)throw new Error(Q.message);const se=Og(H);r(ue=>ue.map(ye=>ye.id===T.id?se:ye)),I.success("Teacher updated successfully!")}else{const{data:H,error:Q}=await D.from("teachers").insert(K).select("*, schools(name)").single();if(Q)throw new Error(Q.message);const se=Og(H);r(ue=>[se,...ue]),I.success("Teacher added successfully!")}c(!1),g(null)}catch(q){const $=(q==null?void 0:q.message)||(typeof q=="object"?JSON.stringify(q):String(q));I.error(`Failed to save teacher: ${$}`)}finally{m(!1)}},P=async()=>{if(x){m(!0);try{const{error:T}=await D.from("teachers").delete().eq("id",x.id);if(T)throw new Error(T.message);r(F=>F.filter(q=>q.id!==x.id)),I.success("Teacher deleted successfully!"),f(!1),g(null)}catch(T){const F=(T==null?void 0:T.message)||(typeof T=="object"?JSON.stringify(T):String(T));I.error(`Failed to delete teacher: ${F}`)}finally{m(!1)}}},M=(e==null?void 0:e.role)==="system_admin";return n?s.jsx(Bi,{title:"Teachers"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Teachers"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage faculty members and staff."})]}),s.jsxs(R,{onClick:N,className:"shadow-md shadow-blue-500/20",children:[s.jsx(Fe,{size:18,className:"mr-2"}),"Add Teacher"]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-4 flex flex-col sm:flex-row gap-4 justify-between items-center",children:[s.jsxs("div",{className:"relative w-full sm:w-96",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search teachers...",value:i,onChange:T=>o(T.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm transition-all"})]}),s.jsxs(R,{variant:"secondary",size:"sm",className:"text-slate-600 border border-border bg-white",children:[s.jsx(Tl,{size:16,className:"mr-2"})," Filter"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(T=>s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border p-6 flex flex-col hover:shadow-lg transition-shadow duration-300 group",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-slate-700 to-slate-900 flex items-center justify-center text-white font-bold text-lg overflow-hidden ring-2 ring-white shadow-sm",children:T.avatar?s.jsx("img",{src:T.avatar,alt:T.name,className:"w-full h-full object-cover"}):T.name.charAt(0)}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"font-semibold text-slate-900 group-hover:text-blue-600 transition-colors",children:T.name}),s.jsx("p",{className:"text-xs text-slate-500 font-mono",children:T.id})]})]}),s.jsx(_t,{variant:T.status==="active"?"success":"neutral",children:T.status})]}),s.jsxs("div",{className:"space-y-3 flex-grow",children:[M&&T.school_name&&s.jsxs("div",{className:"flex items-center text-xs text-blue-600 bg-blue-50 p-1.5 rounded-md",children:[s.jsx(Ti,{size:12,className:"mr-1.5"}),T.school_name]}),s.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-slate-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 font-medium mr-2",children:"Subject:"}),s.jsx("span",{className:"font-semibold text-slate-800",children:T.subject})]}),s.jsxs("div",{className:"flex items-center text-xs font-medium text-slate-600",children:[T.shift==="Afternoon"?s.jsx(Ko,{size:12,className:"mr-1 text-purple-500"}):s.jsx(Yo,{size:12,className:"mr-1 text-orange-500"}),T.shift||"Morning"]})]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600 px-2",children:[s.jsx(xn,{size:14,className:"text-slate-400 mr-3"}),s.jsx("span",{className:"truncate",children:T.email})]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600 px-2",children:[s.jsx(Ho,{size:14,className:"text-slate-400 mr-3"}),s.jsx("span",{children:T.phone})]})]}),s.jsxs("div",{className:"pt-4 border-t border-border mt-5 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-medium",children:"Salary"}),s.jsx("p",{className:"text-sm font-bold text-slate-900",children:$e(T.salary)})]}),s.jsxs("div",{className:"flex gap-1",children:[T.user_id?s.jsx("div",{className:"p-2 text-green-500",title:"Account Linked",children:s.jsx(l3,{size:16})}):s.jsx("button",{onClick:()=>k(T),className:"p-2 text-slate-400 hover:text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"Create Login",children:s.jsx(FE,{size:16})}),s.jsx("button",{onClick:()=>C(T),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:s.jsx(md,{size:16})}),s.jsx("button",{onClick:()=>_(T),className:"p-2 text-slate-400 hover:text-amber-600 hover:bg-amber-50 rounded-md transition-colors",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>A(T),className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-md transition-colors",children:s.jsx(Te,{size:16})})]})]})]},T.id))}),w.length===0&&s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-border p-12 text-center",children:s.jsx("p",{className:"text-slate-500",children:"No teachers found matching your criteria."})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:x?"Edit Teacher":"Add New Faculty",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var T;return(T=v.current)==null?void 0:T.requestSubmit()},loading:y,children:x?"Save Changes":"Add Teacher"})]}),children:s.jsx(IM,{ref:v,teacher:x,onSubmit:O})}),s.jsx(he,{isOpen:p,onClose:()=>b(!1),title:"Create Teacher Login",children:x&&s.jsx(LM,{name:x.name,email:x.email,role:"teacher",schoolId:x.school_id,onClose:()=>b(!1),onSuccess:S})}),x&&s.jsxs(he,{isOpen:u,onClose:()=>h(!1),title:"Faculty Profile",children:[s.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s.jsx("div",{className:"h-24 w-24 rounded-full bg-slate-100 border-4 border-white shadow-lg flex items-center justify-center text-3xl font-bold text-slate-400 overflow-hidden mb-3",children:x.avatar?s.jsx("img",{src:x.avatar,alt:x.name,className:"w-full h-full object-cover"}):x.name.charAt(0)}),s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:x.name}),s.jsxs("p",{className:"text-slate-500 font-medium",children:[x.subject," Department"]}),x.school_name&&s.jsx("p",{className:"text-sm text-blue-600 mt-1 font-medium",children:x.school_name}),s.jsx("div",{className:"mt-2",children:s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border bg-slate-50 text-slate-600 border-slate-200",children:[x.shift==="Afternoon"?s.jsx(Ko,{size:12,className:"mr-1"}):s.jsx(Yo,{size:12,className:"mr-1"}),x.shift||"Morning"," Shift"]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100",children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Contact"}),s.jsx("p",{className:"text-sm mt-1 truncate",title:x.email,children:x.email}),s.jsx("p",{className:"text-sm",children:x.phone})]}),s.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border border-slate-100",children:[s.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Details"}),s.jsxs("p",{className:"text-sm mt-1",children:["Joined: ",x.joinDate]}),s.jsxs("p",{className:"text-sm",children:["DOB: ",x.dob]})]})]}),s.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100 flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Monthly Base Salary"}),s.jsx("span",{className:"text-lg font-bold text-blue-800",children:$e(x.salary)})]})]})]}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:"Delete Teacher",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:P,loading:y,children:"Delete Faculty"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete ",s.jsx("strong",{children:x==null?void 0:x.name}),"? This will remove them from all assigned classes and payroll records."]})})]})},Kw=j.forwardRef(({student:e,onSubmit:t},r)=>{var C;const{profile:n}=fe(),[a,i]=j.useState([]),[o,l]=j.useState([]),[c,u]=j.useState([]),[h,d]=j.useState({name:"",email:"",class:"",section:"",rollNumber:"",phone:"",enrollmentDate:new Date().toISOString().split("T")[0],dob:"",status:"active",grade:"",user_id:null,parent_name:"",parent_email:"",parent_phone:"",student_role:"",shift:"Morning",school_id:(n==null?void 0:n.school_id)||"",category_id:"",student_house:""}),[f,p]=j.useState(null),[b,x]=j.useState([]),[g,y]=j.useState([]),[m,v]=j.useState([]),S=()=>Math.floor(1e6+Math.random()*9e6).toString(),w=()=>{d(A=>({...A,rollNumber:S()}))};j.useEffect(()=>{(async()=>{if(!(n!=null&&n.school_id)&&(n==null?void 0:n.role)!=="system_admin")return;let k=D.from("classes").select("name");(n==null?void 0:n.role)!=="system_admin"&&(k=k.eq("school_id",n==null?void 0:n.school_id));const{data:E}=await k;if(E){const M=E.map(F=>{const $=F.name.replace("Class ","").split("-");return $.length>=2?{grade:$[0],section:$[1]}:null}).filter(F=>F!==null);i(M);const T=Array.from(new Set(M.map(F=>F.grade))).sort((F,q)=>{const $=["KG1","KG2","KG3","1","2","3","4","5","6","7","8","9","10","11","12"],U=$.indexOf(F),X=$.indexOf(q);return U!==-1&&X!==-1?U-X:F.localeCompare(q)});if(l(T),!e&&T.length>0&&!h.class){const F=T[0],q=M.filter($=>$.grade===F).map($=>$.section).sort();d($=>({...$,class:F,section:q[0]||"",grade:F.startsWith("KG")?F:`Grade ${F}`}))}}const{data:O}=await D.rpc("get_unlinked_users",{role_name:"student"});x(O||[]);const{data:P}=await D.from("student_categories").select("id, name").order("name");if(P&&y(P),(n==null?void 0:n.role)==="system_admin"){const{data:M}=await D.from("schools").select("id, name").eq("is_active",!0).order("name");M&&v(M)}})()},[n,e]),j.useEffect(()=>{if(h.class){const A=a.filter(k=>k.grade===h.class).map(k=>k.section).sort();u(A),!A.includes(h.section)&&A.length>0?d(k=>({...k,section:A[0]})):A.length===0&&d(k=>({...k,section:""}))}else u([])},[h.class,a]),j.useEffect(()=>{e?(d({name:e.name,email:e.email,class:e.class,section:e.section,rollNumber:e.rollNumber,phone:e.phone,enrollmentDate:e.enrollmentDate,dob:e.dob,status:e.status,grade:e.grade,user_id:e.user_id||null,parent_name:e.parent_name||"",parent_email:e.parent_email||"",parent_phone:e.parent_phone||"",student_role:e.student_role||"",shift:e.shift||"Morning",school_id:e.school_id||(n==null?void 0:n.school_id)||"",category_id:e.category_id||"",student_house:e.student_house||""}),p(null)):h.rollNumber||d(A=>({...A,rollNumber:S()}))},[e,n]);const N=A=>{const{name:k,value:E}=A.target;d(O=>{const P={[k]:E==="null"?null:E};return k==="class"&&(P.grade=E.startsWith("KG")?E:`Grade ${E}`),{...O,...P}})},_=A=>{A.preventDefault(),t({formData:{...h,id:e==null?void 0:e.id},imageFile:f})};return s.jsxs("form",{ref:r,onSubmit:_,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Profile Picture"}),s.jsx(nx,{onFileChange:p,initialPreviewUrl:(C=e==null?void 0:e.avatar)!=null&&C.startsWith("blob:")?e.avatar:null})]}),s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider border-b pb-1",children:"Student Information"}),(n==null?void 0:n.role)==="system_admin"&&s.jsxs("div",{className:"space-y-2 bg-blue-50 p-3 rounded-md border border-blue-100",children:[s.jsx(B,{htmlFor:"school_id",className:"text-blue-800",children:"Assign School"}),s.jsxs(le,{id:"school_id",name:"school_id",value:h.school_id,onChange:N,required:!0,children:[s.jsx("option",{value:"",children:"Select School"}),m.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]}),s.jsx("p",{className:"text-xs text-blue-600",children:"This student will belong to the selected school."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"name",children:"Full Name"}),s.jsx(J,{id:"name",name:"name",value:h.name,onChange:N,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",name:"email",type:"email",value:h.email,onChange:N,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"class",children:"Class"}),o.length>0?s.jsxs(le,{id:"class",name:"class",value:h.class,onChange:N,required:!0,children:[s.jsx("option",{value:"",children:"Select Class"}),o.map(A=>s.jsx("option",{value:A,children:A},A))]}):s.jsxs("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-700 flex items-center",children:[s.jsx(jn,{size:12,className:"mr-1"})," No classes found. Please create classes first."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"section",children:"Section"}),s.jsxs(le,{id:"section",name:"section",value:h.section,onChange:N,required:!0,disabled:!h.class||c.length===0,children:[s.jsx("option",{value:"",children:"Select Section"}),c.map(A=>s.jsx("option",{value:A,children:A},A))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"rollNumber",children:"Roll Number (Auto)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{id:"rollNumber",name:"rollNumber",value:h.rollNumber,onChange:N,required:!0,className:"bg-gray-50"}),s.jsx("button",{type:"button",onClick:w,className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-md border border-gray-200",title:"Regenerate Roll Number",children:s.jsx(Qm,{size:18})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"phone",children:"Phone"}),s.jsx(J,{id:"phone",name:"phone",type:"tel",value:h.phone,onChange:N})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"dob",children:"Date of Birth"}),s.jsx(J,{id:"dob",name:"dob",type:"date",value:h.dob,onChange:N,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"student_role",children:"Student Role"}),s.jsx(J,{id:"student_role",name:"student_role",value:h.student_role,onChange:N,placeholder:"e.g. Class Monitor"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"shift",children:"Shift"}),s.jsxs(le,{id:"shift",name:"shift",value:h.shift,onChange:N,children:[s.jsx("option",{value:"Morning",children:"Morning"}),s.jsx("option",{value:"Afternoon",children:"Afternoon"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:h.status,onChange:N,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"inactive",children:"Inactive"}),s.jsx("option",{value:"alumni",children:"Alumni"}),s.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"category_id",children:"Category"}),s.jsxs(le,{id:"category_id",name:"category_id",value:h.category_id,onChange:N,children:[s.jsx("option",{value:"",children:"Select Category"}),g.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]}),s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider border-b pb-1 pt-4",children:"Parent Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"parent_name",children:"Parent Name"}),s.jsx(J,{id:"parent_name",name:"parent_name",value:h.parent_name,onChange:N})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"parent_email",children:"Parent Email"}),s.jsx(J,{id:"parent_email",name:"parent_email",type:"email",value:h.parent_email,onChange:N})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"parent_phone",children:"Parent Phone"}),s.jsx(J,{id:"parent_phone",name:"parent_phone",type:"tel",value:h.parent_phone,onChange:N})]})]}),s.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider border-b pb-1 pt-4",children:"System Access"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"user_id",children:"Link to User Account"}),s.jsxs(le,{id:"user_id",name:"user_id",value:h.user_id||"null",onChange:N,children:[s.jsx("option",{value:"null",children:"-- Not Linked --"}),e&&e.user_id&&s.jsx("option",{value:e.user_id,children:"Current User"}),b.map(A=>s.jsx("option",{value:A.id,children:A.email},A.id))]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Link this student profile to a login account."})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});Kw.displayName="StudentForm";const FM=({student:e,isOpen:t,onClose:r})=>{const[n,a]=j.useState("profile"),[i,o]=j.useState(!1),[l,c]=j.useState([]),[u,h]=j.useState([]),[d,f]=j.useState({present:0,absent:0,late:0,total:0});j.useEffect(()=>{e&&t&&p()},[e,t]);const p=async()=>{if(e){o(!0);try{const[m,v,S]=await Promise.all([D.from("fees").select("*").eq("student_id",e.id).order("due_date",{ascending:!1}),D.from("grades").select("*, exams(name)").eq("student_id",e.id).order("date",{ascending:!1}),D.from("attendance").select("status").eq("student_id",e.id)]);if(m.data&&c(m.data),v.data&&h(v.data.map(w=>{var N;return{...w,examName:((N=w.exams)==null?void 0:N.name)||"Unknown Exam"}})),S.data){const w=S.data.reduce((N,_)=>(N[_.status]=(N[_.status]||0)+1,N.total++,N),{present:0,absent:0,late:0,total:0});f(w)}}catch(m){console.error("Error fetching student details:",m)}finally{o(!1)}}};if(!e)return null;const b=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center space-y-3",children:[s.jsx("div",{className:"h-32 w-32 rounded-full bg-slate-100 border-4 border-white shadow-lg flex items-center justify-center text-4xl font-bold text-slate-400 overflow-hidden",children:e.avatar?s.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):e.name.charAt(0)}),s.jsx(_t,{variant:e.status==="active"?"success":"neutral",className:"text-sm px-3 py-1",children:e.status.toUpperCase()})]}),s.jsxs("div",{className:"flex-grow grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Full Name"}),s.jsx("p",{className:"text-lg font-medium text-slate-900",children:e.name})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Admission No"}),s.jsx("p",{className:"text-base text-slate-900 font-mono",children:e.id})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Class & Section"}),s.jsxs("p",{className:"text-base text-slate-900",children:[e.class," - ",e.section]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Roll Number"}),s.jsx("p",{className:"text-base text-slate-900",children:e.rollNumber})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Date of Birth"}),s.jsx("p",{className:"text-base text-slate-900",children:De(e.dob)})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Gender"}),s.jsx("p",{className:"text-base text-slate-900",children:"N/A"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Category"}),s.jsx("p",{className:"text-base text-slate-900",children:e.category_id||"General"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Admission Date"}),s.jsx("p",{className:"text-base text-slate-900",children:De(e.enrollmentDate)})]})]})]}),s.jsxs("div",{className:"border-t border-slate-100 pt-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center",children:[s.jsx(qt,{size:20,className:"mr-2 text-blue-600"})," Parent / Guardian Details"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 bg-slate-50 p-4 rounded-lg border border-slate-200",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Father/Guardian Name"}),s.jsx("p",{className:"text-base font-medium text-slate-900",children:e.parent_name||"N/A"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Phone Number"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Ho,{size:16,className:"text-slate-400"}),s.jsx("p",{className:"text-base text-slate-900",children:e.parent_phone||"N/A"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Email Address"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(xn,{size:16,className:"text-slate-400"}),s.jsx("p",{className:"text-base text-slate-900",children:e.parent_email||"N/A"})]})]})]})]})]}),x=()=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100 text-center",children:[s.jsx("p",{className:"text-xs text-green-600 uppercase font-bold",children:"Paid"}),s.jsx("p",{className:"text-xl font-bold text-green-700",children:l.filter(m=>m.status==="paid").length})]}),s.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100 text-center",children:[s.jsx("p",{className:"text-xs text-red-600 uppercase font-bold",children:"Unpaid"}),s.jsx("p",{className:"text-xl font-bold text-red-700",children:l.filter(m=>m.status==="unpaid").length})]}),s.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100 text-center",children:[s.jsx("p",{className:"text-xs text-orange-600 uppercase font-bold",children:"Overdue"}),s.jsx("p",{className:"text-xl font-bold text-orange-700",children:l.filter(m=>m.status==="overdue").length})]})]}),s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Description"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Due Date"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Amount"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Status"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[l.map(m=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:m.description}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:De(m.due_date)}),s.jsx("td",{className:"px-4 py-3 text-sm font-bold text-slate-900",children:$e(m.amount)}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsx(_t,{variant:m.status==="paid"?"success":m.status==="overdue"?"danger":"warning",children:m.status})})]},m.id)),l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-6 text-center text-slate-500",children:"No fee records found."})})]})]})})]}),g=()=>s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Exam"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Subject"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Score"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Grade"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"GPA"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-slate-200",children:[u.map(m=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-900",children:m.examName}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:m.subject}),s.jsx("td",{className:"px-4 py-3 text-sm font-bold text-slate-900",children:m.marks_obtained}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-bold ${m.grade.startsWith("A")?"bg-green-100 text-green-800":m.grade.startsWith("B")?"bg-blue-100 text-blue-800":m.grade.startsWith("C")?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:m.grade})}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:m.gpa})]},m.id)),u.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-6 text-center text-slate-500",children:"No exam records found."})})]})]})})}),y=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:d.present}),s.jsx("p",{className:"text-xs text-slate-500 uppercase mt-1",children:"Present"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-red-600",children:d.absent}),s.jsx("p",{className:"text-xs text-slate-500 uppercase mt-1",children:"Absent"})]}),s.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 shadow-sm text-center",children:[s.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:d.late}),s.jsx("p",{className:"text-xs text-slate-500 uppercase mt-1",children:"Late"})]})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-100 p-4 rounded-lg flex items-center justify-between",children:[s.jsx("span",{className:"font-semibold text-blue-900",children:"Overall Attendance Rate"}),s.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:[d.total>0?Math.round(d.present/d.total*100):0,"%"]})]})]});return s.jsxs(he,{isOpen:t,onClose:r,title:"Student Profile",size:"3xl",children:[s.jsxs("div",{className:"flex border-b border-slate-200 mb-6",children:[s.jsxs("button",{onClick:()=>a("profile"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${n==="profile"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(qt,{size:16,className:"inline mr-2"})," Profile"]}),s.jsxs("button",{onClick:()=>a("fees"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${n==="fees"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx($t,{size:16,className:"inline mr-2"})," Fees"]}),s.jsxs("button",{onClick:()=>a("exams"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${n==="exams"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(Jr,{size:16,className:"inline mr-2"})," Exam Results"]}),s.jsxs("button",{onClick:()=>a("attendance"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${n==="attendance"?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(wr,{size:16,className:"inline mr-2"})," Attendance"]})]}),i?s.jsxs("div",{className:"space-y-4",children:[s.jsx(je,{className:"h-32 w-full"}),s.jsx(je,{className:"h-12 w-full"}),s.jsx(je,{className:"h-12 w-full"})]}):s.jsxs("div",{className:"min-h-[300px]",children:[n==="profile"&&b(),n==="fees"&&x(),n==="exams"&&g(),n==="attendance"&&y()]})]})},Re=({title:e,headers:t,rowCount:r=5})=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx(je,{className:"h-8 w-48 mb-2"}),s.jsx(je,{className:"h-4 w-64"})]}),s.jsx(je,{className:"h-10 w-36"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsx(je,{className:"h-10 w-full"})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsx("tr",{children:t.map(n=>s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n},n))})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:r}).map((n,a)=>s.jsx("tr",{children:t.map(i=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(je,{className:"h-6 w-full"})},i))},a))})]})})})]}),Eg=e=>{var t;return{id:e.id,created_at:e.created_at,name:e.name,email:e.email,class:e.class,section:e.section,rollNumber:e.roll_number,phone:e.phone,enrollmentDate:e.enrollment_date,issuedDate:e.issued_date,expiryDate:e.expiry_date,dob:e.dob,status:e.status,avatar:e.avatar,grade:e.grade,user_id:e.user_id,parent_name:e.parent_name,parent_email:e.parent_email,parent_phone:e.parent_phone,student_role:e.student_role,shift:e.shift,school_id:e.school_id,school_name:(t=e.schools)==null?void 0:t.name,student_house:e.student_house,category_id:e.category_id}},xge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(!1),[d,f]=j.useState(!1),[p,b]=j.useState(!1),[x,g]=j.useState(null),[y,m]=j.useState(!1),v=j.useRef(null),S=(e==null?void 0:e.role)==="system_admin",w=["system_admin","admin","principal"].includes((e==null?void 0:e.role)||""),N=["system_admin","admin","principal","teacher"].includes((e==null?void 0:e.role)||""),_=async()=>{if(e){a(!0);try{let $=D.from("students").select("*, schools(name)").in("status",["active","inactive"]).order("created_at",{ascending:!1});e.role!=="system_admin"&&e.school_id&&($=$.eq("school_id",e.school_id));const{data:U,error:X}=await $;if(X)throw new Error(X.message);r(U.map(Eg))}catch($){const U=($==null?void 0:$.message)||(typeof $=="object"?JSON.stringify($):String($));I.error(`Failed to fetch students: ${U}`)}finally{a(!1)}}};j.useEffect(()=>{_()},[e]);const C=t.filter($=>$.name.toLowerCase().includes(i.toLowerCase())||$.email.toLowerCase().includes(i.toLowerCase())||$.rollNumber.includes(i)||$.class.toLowerCase().includes(i.toLowerCase())||$.school_name&&$.school_name.toLowerCase().includes(i.toLowerCase())),A=()=>{g(null),c(!0)},k=$=>{g($),c(!0)},E=$=>{g($),h(!0)},O=$=>{g($),f(!0)},P=$=>{if($.user_id){I.error("This student already has a login account.");return}g($),b(!0)},M=async($,U)=>{const X=$.name.split(".").pop(),K=`${U}-${Date.now()}.${X}`,{error:z}=await D.storage.from("avatars").upload(K,$);if(z)return I.error(`Avatar upload failed: ${z.message}`),null;const{data:H}=D.storage.from("avatars").getPublicUrl(K);return H.publicUrl},T=async({formData:$,imageFile:U})=>{m(!0);try{const X=(e==null?void 0:e.role)==="system_admin"?$.school_id:e==null?void 0:e.school_id;if(!X)throw new Error("School ID is missing. Please refresh the page and try again.");const K=$.enrollmentDate,z=K,H=new Date(K);H.setFullYear(H.getFullYear()+4);const Q={name:$.name,email:$.email,class:$.class,section:$.section,roll_number:$.rollNumber,phone:$.phone,enrollment_date:K,issued_date:z,expiry_date:H.toISOString().split("T")[0],dob:$.dob,status:$.status,grade:$.grade,user_id:$.user_id,parent_name:$.parent_name,parent_email:$.parent_email,parent_phone:$.parent_phone,student_role:$.student_role,shift:$.shift,school_id:X,student_house:$.student_house,category_id:$.category_id||null,avatar:x==null?void 0:x.avatar},se=$.id||`temp-${Date.now()}`;if(U){const ue=await M(U,se);ue&&(Q.avatar=ue)}if($.id){const{data:ue,error:ye}=await D.from("students").update(Q).eq("id",$.id).select("*, schools(name)").single();if(ye)throw new Error(ye.message);const me=Eg(ue);["alumni","suspended"].includes(me.status)?(r(L=>L.filter(W=>W.id!==$.id)),I.success(`Student updated and moved to ${me.status} list.`)):(r(L=>L.map(W=>W.id===$.id?me:W)),I.success("Student updated successfully!"))}else{const{data:ue,error:ye}=await D.from("students").insert(Q).select("*, schools(name)").single();if(ye)throw new Error(ye.message);const me=Eg(ue);r(L=>[me,...L]),I.success("Student added successfully!")}c(!1),g(null)}catch(X){I.error(`Failed to save student: ${X.message}`)}finally{m(!1)}},F=async()=>{if(x){m(!0);try{const{error:$}=await D.from("students").delete().eq("id",x.id);if($)throw new Error($.message);r(U=>U.filter(X=>X.id!==x.id)),I.success("Student deleted successfully!"),f(!1),g(null)}catch($){I.error(`Failed to delete student: ${$.message}`)}finally{m(!1)}}},q=()=>{const U="data:text/csv;charset=utf-8,"+["ID","Name","Email","Class","Section","Roll Number","Phone","Status","Shift","School"].join(",")+`
`+t.map(z=>`"${z.id}","${z.name}","${z.email}","${z.class}","${z.section}","${z.rollNumber}","${z.phone}","${z.status}","${z.shift||"Morning"}","${z.school_name||""}"`).join(`
`),X=encodeURI(U),K=document.createElement("a");K.setAttribute("href",X),K.setAttribute("download","students.csv"),document.body.appendChild(K),K.click(),document.body.removeChild(K)};return n?s.jsx(Re,{title:"Students",headers:["Student","Class","Contact","Shift","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Students"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage active student records."})]}),s.jsxs("div",{className:"flex gap-3",children:[w&&s.jsxs(R,{variant:"secondary",onClick:q,className:"border border-border",children:[s.jsx(Oa,{size:18,className:"mr-2"}),"Export"]}),w&&s.jsxs(R,{onClick:A,className:"shadow-md shadow-blue-500/20",children:[s.jsx(Fe,{size:18,className:"mr-2"}),"Add Student"]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-border overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-border flex flex-col sm:flex-row gap-4 justify-between items-center bg-slate-50/50",children:[s.jsxs("div",{className:"relative w-full sm:w-96",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search students...",value:i,onChange:$=>o($.target.value),className:"w-full pl-10 pr-4 py-2 bg-white border border-border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm transition-all"})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(R,{variant:"secondary",size:"sm",className:"text-slate-600 border border-border bg-white",children:[s.jsx(Tl,{size:16,className:"mr-2"})," Filter"]})})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-border",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Student Name"}),S&&s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"School"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden md:table-cell",children:"Class Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden lg:table-cell",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Shift"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),N&&s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-border",children:C.map($=>s.jsxs("tr",{className:"hover:bg-slate-50/80 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-600 font-bold overflow-hidden shrink-0",children:$.avatar?s.jsx("img",{src:$.avatar,alt:$.name,className:"w-full h-full object-cover"}):$.name.charAt(0)}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900",children:$.name}),s.jsx("div",{className:"text-xs text-slate-500 font-mono",children:$.id})]})]})}),S&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center text-sm text-slate-700",children:[s.jsx(Ti,{size:14,className:"mr-1.5 text-slate-400"}),$.school_name||"N/A"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Class ",$.class,"-",$.section]}),s.jsxs("span",{className:"text-xs text-slate-500",children:["Roll No: ",$.rollNumber]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex items-center text-xs text-slate-600",children:[s.jsx(xn,{size:12,className:"mr-1.5 text-slate-400"}),$.email]}),s.jsxs("div",{className:"flex items-center text-xs text-slate-600",children:[s.jsx(Ho,{size:12,className:"mr-1.5 text-slate-400"}),$.phone]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center text-sm text-slate-700",children:[$.shift==="Afternoon"?s.jsx(Ko,{size:14,className:"mr-1.5 text-purple-500"}):s.jsx(Yo,{size:14,className:"mr-1.5 text-orange-500"}),$.shift||"Morning"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(_t,{variant:$.status==="active"?"success":"neutral",children:$.status.charAt(0).toUpperCase()+$.status.slice(1)})}),N&&s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[w&&!$.user_id&&s.jsx("button",{onClick:()=>P($),className:"p-1.5 text-slate-500 hover:text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"Create Login",children:s.jsx(FE,{size:16})}),s.jsx("button",{onClick:()=>E($),className:"p-1.5 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"View Details",children:s.jsx(md,{size:16})}),w&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>k($),className:"p-1.5 text-slate-500 hover:text-amber-600 hover:bg-amber-50 rounded-md transition-colors",title:"Edit",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>O($),className:"p-1.5 text-slate-500 hover:text-rose-600 hover:bg-rose-50 rounded-md transition-colors",title:"Delete",children:s.jsx(Te,{size:16})})]})]})})]},$.id))})]})}),C.length===0&&s.jsxs("div",{className:"p-12 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 mb-4",children:s.jsx(Me,{className:"h-8 w-8 text-slate-400"})}),s.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No students found"}),s.jsx("p",{className:"text-slate-500 mt-1 max-w-sm mx-auto",children:"We couldn't find any active students matching your search criteria."}),w&&s.jsx(R,{onClick:A,className:"mt-6",variant:"secondary",children:"Add New Student"})]})]}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:x?"Edit Student Profile":"New Student Admission",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var $;return($=v.current)==null?void 0:$.requestSubmit()},loading:y,children:x?"Save Changes":"Admit Student"})]}),children:s.jsx(Kw,{ref:v,student:x,onSubmit:T})}),s.jsx(he,{isOpen:p,onClose:()=>b(!1),title:"Create Student Login",children:x&&s.jsx(LM,{name:x.name,email:x.email,role:"student",schoolId:x.school_id,onClose:()=>b(!1),onSuccess:_})}),s.jsx(FM,{isOpen:u,onClose:()=>h(!1),student:x}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:"Confirm Deletion",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:F,loading:y,children:"Delete Student"})]}),children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full text-red-600 shrink-0",children:s.jsx(Te,{size:24})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:"Are you absolutely sure?"}),s.jsxs("p",{className:"text-slate-500 mt-1 text-sm",children:["This action will permanently delete the student record for ",s.jsx("strong",{children:x==null?void 0:x.name}),". This cannot be undone and will remove all associated grades and attendance records."]})]})]})})]})},zM=async(e,t,r,n,a,i)=>{try{if(!n||!a||!i){const{data:{user:o}}=await D.auth.getUser();if(o&&(n=n||o.id,!a||!i)){const{data:l}=await D.from("profiles").select("name, school_id").eq("id",o.id).single();l&&(a=a||l.name,i=i||l.school_id)}}await D.from("audit_logs").insert({action:e,module:t,details:r,user_id:n,user_name:a,school_id:i})}catch(o){console.error("Failed to log audit:",o)}},gge=async(e,t,r,n,a)=>{try{await D.from("user_logs").insert({user_id:e,user_name:t,role:r,status:n,school_id:a,user_agent:navigator.userAgent})}catch(i){console.error("Failed to log user login:",i)}},yge=()=>{const e=Fs(),t=j.useRef(null),[r,n]=j.useState(!1),a=async(o,l)=>{const c=o.name.split(".").pop(),u=`${l}-${Date.now()}.${c}`,{error:h}=await D.storage.from("avatars").upload(u,o);if(h)return I.error(`Avatar upload failed: ${h.message}`),null;const{data:d}=D.storage.from("avatars").getPublicUrl(u);return d.publicUrl},i=async({formData:o,imageFile:l})=>{n(!0);try{const c=o.enrollmentDate,u=c,h=new Date(c);h.setFullYear(h.getFullYear()+4);const d={name:o.name,email:o.email,class:o.class,section:o.section,roll_number:o.rollNumber,phone:o.phone,enrollment_date:c,issued_date:u,expiry_date:h.toISOString().split("T")[0],dob:o.dob,status:o.status,grade:o.grade,user_id:o.user_id,parent_name:o.parent_name,parent_email:o.parent_email,parent_phone:o.parent_phone,student_role:o.student_role,shift:o.shift,school_id:o.school_id,student_house:o.student_house,category_id:o.category_id||null,avatar:void 0},f=o.id||`temp-${Date.now()}`;if(l){const x=await a(l,f);x&&(d.avatar=x)}const{data:p,error:b}=await D.from("students").insert(d).select().single();if(b)throw new Error(b.message);await zM("Admit Student","Student Information",`Admitted new student: ${d.name} (Class ${d.class}-${d.section})`,void 0,void 0,d.school_id),I.success("Student admitted successfully!"),e("/students")}catch(c){const u=(c==null?void 0:c.message)||(typeof c=="object"?JSON.stringify(c):String(c));I.error(`Failed to admit student: ${u}`)}finally{n(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(R,{variant:"secondary",onClick:()=>e("/students"),className:"p-2 h-10 w-10 rounded-full",children:s.jsx(K5,{size:20})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Student Admission"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Register a new student into the system"})]})]}),s.jsxs(R,{onClick:()=>{var o;return(o=t.current)==null?void 0:o.requestSubmit()},loading:r,children:[s.jsx(Di,{size:20,className:"mr-2"}),"Submit Admission"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:s.jsx(Kw,{ref:t,onSubmit:i})})]})},Ui=({icon:e=Me,title:t,description:r,actionLabel:n,onAction:a})=>s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center bg-white rounded-xl border border-dashed border-slate-300",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center mb-4",children:s.jsx(e,{className:"h-8 w-8 text-slate-400"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-1",children:t}),s.jsx("p",{className:"text-sm text-slate-500 max-w-sm mb-6",children:r}),n&&a&&s.jsx(R,{onClick:a,variant:"secondary",children:n})]}),vge=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,i]=j.useState(""),[o,l]=j.useState(null),c=async()=>{n(!0);try{const{data:f,error:p}=await D.from("students").select("*").in("status",["inactive","alumni","suspended"]).order("name");if(p)throw p;t(f.map(b=>({id:b.id,name:b.name,email:b.email,class:b.class,section:b.section,rollNumber:b.roll_number,phone:b.phone,enrollmentDate:b.enrollment_date,issuedDate:b.issued_date,expiryDate:b.expiry_date,dob:b.dob,status:b.status,grade:b.grade,avatar:b.avatar,user_id:b.user_id})))}catch(f){I.error(`Failed to load students: ${f.message}`)}finally{n(!1)}};j.useEffect(()=>{c()},[]);const u=async f=>{l(f);try{const{error:p}=await D.from("students").update({status:"active"}).eq("id",f);if(p)throw p;I.success("Student restored to active status"),t(b=>b.filter(x=>x.id!==f))}catch(p){I.error(`Failed to restore: ${p.message}`)}finally{l(null)}},h=async f=>{if(confirm("Are you sure? This will permanently delete the student record and cannot be undone.")){l(f);try{const{error:p}=await D.from("students").delete().eq("id",f);if(p)throw p;I.success("Student permanently deleted"),t(b=>b.filter(x=>x.id!==f))}catch(p){I.error(`Failed to delete: ${p.message}`)}finally{l(null)}}},d=e.filter(f=>f.name.toLowerCase().includes(a.toLowerCase())||f.rollNumber.includes(a));return r?s.jsx(Re,{title:"Disabled Students",headers:["Name","Class","Reason/Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Disabled Students"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage inactive, alumni, or suspended student records"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by name or roll number...",value:a,onChange:f=>i(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:d.map(f=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 font-bold text-sm overflow-hidden",children:f.avatar?s.jsx("img",{src:f.avatar,className:"w-full h-full object-cover"}):f.name.charAt(0)}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:f.name}),s.jsx("div",{className:"text-xs text-slate-500",children:f.email})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600",children:["Class ",f.class,"-",f.section," (Roll: ",f.rollNumber,")"]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(_t,{variant:"danger",className:"capitalize",children:f.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(R,{size:"sm",variant:"secondary",onClick:()=>u(f.id),disabled:o===f.id,className:"text-green-600 hover:text-green-700 hover:bg-green-50 border-green-200",children:[s.jsx(Qm,{size:16,className:`mr-1 ${o===f.id?"animate-spin":""}`})," Restore"]}),s.jsx(R,{size:"sm",variant:"ghost",onClick:()=>h(f.id),disabled:o===f.id,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:s.jsx(Te,{size:16})})]})})]},f.id))})]}),d.length===0&&s.jsx(Ui,{icon:_3,title:"No disabled students found",description:"All students are currently active."})]})]})},bge=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,i]=j.useState(new Set),[o,l]=j.useState("all"),[c,u]=j.useState(!1);j.useEffect(()=>{h()},[]);const h=async()=>{n(!0);try{const{data:g,error:y}=await D.from("students").select("*").order("class").order("name");if(y)throw y;t(g.map(m=>({id:m.id,name:m.name,class:m.class,section:m.section,rollNumber:m.roll_number,status:m.status})))}catch{I.error("Failed to load students")}finally{n(!1)}},d=e.filter(g=>o==="all"||g.class===o),f=()=>{a.size===d.length?i(new Set):i(new Set(d.map(g=>g.id)))},p=g=>{const y=new Set(a);y.has(g)?y.delete(g):y.add(g),i(y)},b=async()=>{if(a.size!==0&&confirm(`Are you sure you want to PERMANENTLY DELETE ${a.size} students? This action cannot be undone.`)){u(!0);try{const{error:g}=await D.from("students").delete().in("id",Array.from(a));if(g)throw g;I.success(`Successfully deleted ${a.size} students.`),t(y=>y.filter(m=>!a.has(m.id))),i(new Set)}catch(g){I.error(`Delete failed: ${g.message}`)}finally{u(!1)}}},x=Array.from(new Set(e.map(g=>g.class))).sort();return r?s.jsx(Re,{title:"Bulk Delete",headers:["Select","Name","Class","Status"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bulk Delete Students"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Permanently remove multiple student records"})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"bg-red-50 text-red-700 px-4 py-2 rounded-lg flex items-center text-sm font-medium border border-red-100",children:[s.jsx(dd,{size:16,className:"mr-2"}),"Warning: Actions are irreversible"]}),s.jsxs(R,{variant:"danger",onClick:b,disabled:a.size===0||c,loading:c,children:[s.jsx(Te,{size:18,className:"mr-2"}),"Delete ",a.size>0?`(${a.size})`:""]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex items-center gap-4",children:[s.jsxs("div",{className:"flex-grow max-w-xs",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:"Filter by Class"}),s.jsxs(le,{value:o,onChange:g=>{l(g.target.value),i(new Set)},children:[s.jsx("option",{value:"all",children:"All Classes"}),x.map(g=>s.jsxs("option",{value:g,children:["Class ",g]},g))]})]}),s.jsxs("div",{className:"flex-grow text-right text-sm text-slate-500 pt-5",children:["Showing ",d.length," students"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left w-16",children:s.jsx("button",{onClick:f,className:"text-slate-500 hover:text-slate-700",children:d.length>0&&a.size===d.length?s.jsx(qy,{size:20}):s.jsx(mN,{size:20})})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[d.map(g=>s.jsxs("tr",{className:`hover:bg-slate-50 cursor-pointer ${a.has(g.id)?"bg-blue-50":""}`,onClick:()=>p(g.id),children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:`text-slate-400 ${a.has(g.id)?"text-blue-600":""}`,children:a.has(g.id)?s.jsx(qy,{size:20}):s.jsx(mN,{size:20})})}),s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:g.name}),s.jsxs("td",{className:"px-6 py-4 text-slate-600",children:["Class ",g.class,"-",g.section," (Roll: ",g.rollNumber,")"]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${g.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:g.status})})]},g.id)),d.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No students found."})})]})]})})]})},jge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[u,h]=j.useState(""),[d,f]=j.useState(!1);j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:y,error:m}=await D.from("student_categories").select("*").eq("school_id",e.school_id).order("name");m?I.error("Failed to load categories"):r(y||[]),a(!1)},b=y=>{c(y||null),h((y==null?void 0:y.name)||""),o(!0)},x=async y=>{y.preventDefault(),f(!0);try{const m={name:u,school_id:e==null?void 0:e.school_id};if(l){const{error:v}=await D.from("student_categories").update({name:u}).eq("id",l.id);if(v)throw v}else{const{error:v}=await D.from("student_categories").insert(m);if(v)throw v}I.success("Category saved successfully"),o(!1),p()}catch(m){I.error(m.message)}finally{f(!1)}},g=async y=>{if(!confirm("Are you sure you want to delete this category?"))return;const{error:m}=await D.from("student_categories").delete().eq("id",y);m?I.error(m.message):(I.success("Category deleted"),r(v=>v.filter(S=>S.id!==y)))};return n?s.jsx(Re,{title:"Student Categories",headers:["Category Name","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Student Categories"}),s.jsx("p",{className:"text-slate-500",children:"Manage student classifications (e.g., General, Scholarship)"})]}),s.jsxs(R,{onClick:()=>b(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Category"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden max-w-3xl",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase w-full",children:"Category Name"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase w-32",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[t.map(y=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900 flex items-center gap-2",children:[s.jsx(w3,{size:16,className:"text-blue-500"}),y.name]}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(y),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(y.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},y.id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:"px-6 py-8 text-center text-slate-500",children:"No categories found."})})]})]})}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Category":"Add Category",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:x,loading:d,children:"Save"})]}),children:s.jsx("form",{onSubmit:x,className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Category Name"}),s.jsx(J,{value:u,onChange:y=>h(y.target.value),placeholder:"e.g. General, Sibling, Staff Child",required:!0})]})})})]})},wge=()=>{const[e,t]=j.useState(!1),[r,n]=j.useState([]),[a,i]=j.useState(""),[o,l]=j.useState(""),[c,u]=j.useState(""),[h,d]=j.useState(""),[f,p]=j.useState(new Set),[b,x]=j.useState(!1),[g,y]=j.useState([]),[m,v]=j.useState([]),[S,w]=j.useState([]),N=["KG1","KG2","KG3","1","2","3","4","5","6","7","8","9","10","11","12","Graduated"];j.useEffect(()=>{(async()=>{const{data:P}=await D.from("classes").select("name").order("name");if(P){const M=P.map(F=>{const $=F.name.replace("Class ","").split("-");return $.length>=2?{grade:$[0],section:$[1]}:null}).filter(F=>F!==null);y(M);const T=Array.from(new Set(M.map(F=>F.grade))).sort((F,q)=>{const $=N.indexOf(F),U=N.indexOf(q);return $!==-1&&U!==-1?$-U:F.localeCompare(q)});v(T)}})()},[]),j.useEffect(()=>{if(a){const O=g.filter(M=>M.grade===a).map(M=>M.section).sort();w(O),O.length>0?l(O[0]):l("");const P=N.indexOf(a);P!==-1&&P<N.length-1?u(N[P+1]):u("")}else w([]),l(""),u("")},[a,g]),j.useEffect(()=>{c&&c!=="Graduated"?d(o):c==="Graduated"&&d("")},[c,o]);const _=async()=>{if(!(!a||!o)){t(!0);try{const{data:O,error:P}=await D.from("students").select("*").eq("class",a).eq("section",o).eq("status","active").order("name");if(P)throw P;const M=O.map(T=>({id:T.id,name:T.name,rollNumber:T.roll_number,class:T.class,section:T.section,status:T.status}));n(M),p(new Set(M.map(T=>T.id)))}catch(O){I.error(`Failed to load students: ${O.message}`)}finally{t(!1)}}};j.useEffect(()=>{_()},[a,o]);const C=O=>{const P=new Set(f);P.has(O)?P.delete(O):P.add(O),p(P)},A=()=>{f.size===r.length?p(new Set):p(new Set(r.map(O=>O.id)))},k=async()=>{if(f.size===0){I.error("Please select at least one student.");return}if(!c||c!=="Graduated"&&!h){I.error("Please select a target class and section.");return}if(confirm(`Promote ${f.size} students from Class ${a}-${o} to ${c==="Graduated"?"Graduated":`Class ${c}-${h}`}?`)){x(!0);try{const O={class:c,section:h,grade:c==="Graduated"?"Graduated":c.startsWith("KG")?c:`Grade ${c}`};c==="Graduated"&&(O.status="alumni",O.section="");const{error:P}=await D.from("students").update(O).in("id",Array.from(f));if(P)throw P;I.success("Students promoted successfully!"),_(),p(new Set)}catch(O){I.error(`Promotion failed: ${O.message}`)}finally{x(!1)}}},E=Array.from(new Set(g.map(O=>O.section))).sort();return s.jsxs("div",{className:"space-y-6 max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg text-blue-600",children:s.jsx(Vt,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Promote Students"}),s.jsx("p",{className:"text-slate-500",children:"Move students to the next academic session or class."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-blue-500"}),s.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs mr-2",children:"1"}),"Select Current Class"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Class"}),s.jsxs(le,{value:a,onChange:O=>i(O.target.value),children:[s.jsx("option",{value:"",children:"Select"}),m.map(O=>s.jsx("option",{value:O,children:O},O))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Section"}),s.jsxs(le,{value:o,onChange:O=>l(O.target.value),disabled:!a,children:[s.jsx("option",{value:"",children:"Select"}),S.map(O=>s.jsx("option",{value:O,children:O},O))]})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),s.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 text-green-600 flex items-center justify-center text-xs mr-2",children:"2"}),"Promote To"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Next Class"}),s.jsxs(le,{value:c,onChange:O=>u(O.target.value),children:[s.jsx("option",{value:"",children:"Select"}),N.map(O=>s.jsx("option",{value:O,children:O},O))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Next Section"}),s.jsxs(le,{value:h,onChange:O=>d(O.target.value),disabled:c==="Graduated",children:[s.jsx("option",{value:"",children:"Select"}),E.map(O=>s.jsx("option",{value:O,children:O},O))]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden min-h-[300px]",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 flex justify-between items-center bg-slate-50",children:[s.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center",children:[s.jsx(Tl,{size:18,className:"mr-2 text-slate-500"}),"Student List"]}),s.jsxs("div",{className:"text-sm text-slate-500",children:["Selected: ",s.jsx("span",{className:"font-bold text-slate-900",children:f.size})," / ",r.length]})]}),e?s.jsx("div",{className:"p-6",children:s.jsx(Re,{title:"",headers:["Roll No","Name","Current Status"]})}):r.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-white sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left w-16 bg-slate-50",children:s.jsx("input",{type:"checkbox",checked:f.size===r.length&&r.length>0,onChange:A,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase bg-slate-50",children:"Roll No"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase bg-slate-50",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase bg-slate-50",children:"Current Status"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:r.map(O=>s.jsxs("tr",{className:`hover:bg-slate-50 ${f.has(O.id)?"bg-blue-50/30":""}`,children:[s.jsx("td",{className:"px-6 py-3",children:s.jsx("input",{type:"checkbox",checked:f.has(O.id),onChange:()=>C(O.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-3 text-sm text-slate-600 font-mono",children:O.rollNumber}),s.jsx("td",{className:"px-6 py-3 text-sm font-medium text-slate-900",children:O.name}),s.jsx("td",{className:"px-6 py-3",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})})]},O.id))})]})}),s.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:s.jsxs(R,{onClick:k,disabled:b||f.size===0,loading:b,className:"bg-green-600 hover:bg-green-700 text-white",children:["Promote Selected Students ",s.jsx(Hm,{size:16,className:"ml-2"})]})})]}):s.jsx("div",{className:"text-center py-16",children:a&&o?s.jsxs(s.Fragment,{children:[s.jsx(dd,{className:"h-10 w-10 text-yellow-500 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"No Students Found"}),s.jsxs("p",{className:"text-slate-500",children:["There are no active students in Class ",a,"-",o,"."]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Vt,{className:"h-10 w-10 text-slate-300 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"Select Class"}),s.jsx("p",{className:"text-slate-500",children:"Please select a class and section to view students."})]})})]})]})},Nge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[u,h]=j.useState(""),[d,f]=j.useState(!1);j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:y,error:m}=await D.from("sections").select("*").eq("school_id",e.school_id).order("name");m?I.error("Failed to load sections"):r(y||[]),a(!1)},b=y=>{c(y||null),h((y==null?void 0:y.name)||""),o(!0)},x=async y=>{y.preventDefault(),f(!0);try{if(l){const{error:m}=await D.from("sections").update({name:u}).eq("id",l.id);if(m)throw m}else{const{error:m}=await D.from("sections").insert({name:u,school_id:e==null?void 0:e.school_id});if(m)throw m}I.success("Section saved successfully"),o(!1),p()}catch(m){I.error(m.message)}finally{f(!1)}},g=async y=>{if(!confirm("Are you sure you want to delete this section?"))return;const{error:m}=await D.from("sections").delete().eq("id",y);m?I.error(m.message):(I.success("Section deleted"),r(v=>v.filter(S=>S.id!==y)))};return n?s.jsx(Re,{title:"Sections",headers:["Section Name","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Sections"}),s.jsx("p",{className:"text-slate-500",children:"Manage class sections (e.g., A, B, Science, Arts)"})]}),s.jsxs(R,{onClick:()=>b(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Section"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden max-w-3xl",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase w-full",children:"Section Name"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase w-32",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[t.map(y=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:y.name}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(y),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(y.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},y.id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:2,className:"px-6 py-8 text-center text-slate-500",children:"No sections found."})})]})]})}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Section":"Add Section",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:x,loading:d,children:"Save"})]}),children:s.jsx("form",{onSubmit:x,className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Section Name"}),s.jsx(J,{value:u,onChange:y=>h(y.target.value),placeholder:"e.g. A, B, Science",required:!0})]})})})]})},Pg=["Mathematics","Physics","Chemistry","Biology","English","History","Geography","Computer Science","Amharic","General Science","Social Studies"],Tg=["KG1","KG2","KG3","1","2","3","4","5","6","7","8","9","10","11","12"],BM=j.forwardRef(({exam:e,onSubmit:t},r)=>{const[n,a]=j.useState({name:"",subject:Pg[0],class:Tg[0],date:new Date().toISOString().split("T")[0],totalMarks:100,passingMarks:40,duration:"120 minutes",status:"upcoming"});j.useEffect(()=>{a(e||{name:"",subject:Pg[0],class:Tg[0],date:new Date().toISOString().split("T")[0],totalMarks:100,passingMarks:40,duration:"120 minutes",status:"upcoming"})},[e]);const i=l=>{const{name:c,value:u,type:h}=l.target;a(d=>({...d,[c]:h==="number"?parseInt(u):u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"name",children:"Exam Name"}),s.jsx(J,{id:"name",name:"name",value:n.name,onChange:i,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"subject",children:"Subject"}),s.jsx(le,{id:"subject",name:"subject",value:n.subject,onChange:i,children:Pg.map(l=>s.jsx("option",{value:l,children:l},l))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"class",children:"Class"}),s.jsx(le,{id:"class",name:"class",value:n.class,onChange:i,children:Tg.map(l=>s.jsx("option",{value:l,children:l},l))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",name:"date",type:"date",value:n.date,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"duration",children:"Duration (e.g., 120 minutes)"}),s.jsx(J,{id:"duration",name:"duration",value:n.duration,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"totalMarks",children:"Total Marks"}),s.jsx(J,{id:"totalMarks",name:"totalMarks",type:"number",value:n.totalMarks,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"passingMarks",children:"Passing Marks"}),s.jsx(J,{id:"passingMarks",name:"passingMarks",type:"number",value:n.passingMarks,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:n.status,onChange:i,children:[s.jsx("option",{value:"upcoming",children:"Upcoming"}),s.jsx("option",{value:"ongoing",children:"Ongoing"}),s.jsx("option",{value:"completed",children:"Completed"})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});BM.displayName="ExamForm";const Cm=G.forwardRef(({student:e,exam:t,schoolName:r,template:n={title:"ADMIT CARD",showPhoto:!0,showSchoolName:!0,showBorder:!0,footerText:"Principal Signature",themeColor:"blue"}},a)=>{const i={blue:"border-blue-900 text-blue-900",red:"border-red-900 text-red-900",green:"border-green-900 text-green-900",black:"border-gray-900 text-gray-900"},o=i[n.themeColor]||i.blue;return n.themeColor==="black"||`${n.themeColor}`,s.jsxs("div",{ref:a,className:`w-[500px] h-[300px] bg-white p-6 relative flex flex-col font-sans text-gray-900 print:break-inside-avoid mb-8 mx-auto ${n.showBorder?`border-2 ${o.split(" ")[0]}`:""}`,children:[s.jsxs("div",{className:`flex items-center border-b-2 ${o.split(" ")[0]} pb-3 mb-3`,children:[s.jsx("div",{className:"w-16",children:s.jsx(nr,{})}),s.jsxs("div",{className:"flex-1 text-center",children:[n.showSchoolName&&s.jsx("h1",{className:"text-xl font-bold uppercase tracking-wider",children:r}),s.jsx("h2",{className:"text-sm font-semibold text-white inline-block px-3 py-0.5 mt-1 rounded-sm uppercase",style:{backgroundColor:n.themeColor==="black"?"#111827":void 0,filter:n.themeColor!=="black"?"brightness(0.8)":void 0},children:s.jsx("span",{className:n.themeColor==="blue"?"bg-blue-900":n.themeColor==="red"?"bg-red-900":n.themeColor==="green"?"bg-green-900":"",children:n.title})})]}),s.jsx("div",{className:"w-16 flex justify-end",children:n.showPhoto&&s.jsx("div",{className:"w-16 h-20 border border-gray-300 bg-gray-50 flex items-center justify-center text-xs text-gray-400 overflow-hidden",children:e.avatar?s.jsx("img",{src:e.avatar,alt:"Photo",className:"w-full h-full object-cover"}):"PHOTO"})})]}),s.jsxs("div",{className:"mb-4 text-center",children:[s.jsx("h3",{className:`text-lg font-bold uppercase ${o.split(" ")[1]}`,children:t.name}),s.jsxs("p",{className:"text-sm font-medium text-gray-600",children:[t.date," | ",t.duration]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm flex-grow",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"font-bold w-24",children:"Name:"}),s.jsx("span",{className:"border-b border-gray-400 flex-1 truncate",children:e.name})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"font-bold w-24",children:"Roll No:"}),s.jsx("span",{className:"border-b border-gray-400 flex-1",children:e.rollNumber})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"font-bold w-24",children:"Class:"}),s.jsxs("span",{className:"border-b border-gray-400 flex-1",children:[e.class," - ",e.section]})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"font-bold w-24",children:"Subject:"}),s.jsx("span",{className:"border-b border-gray-400 flex-1 truncate",children:t.subject})]})]}),s.jsxs("div",{className:"mt-auto pt-4 flex justify-between items-end",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-32 border-b border-gray-400 mb-1"}),s.jsx("p",{className:"text-xs font-bold text-gray-500",children:"Student Signature"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-32 border-b border-gray-400 mb-1"}),s.jsx("p",{className:"text-xs font-bold text-gray-500",children:n.footerText})]})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-5 pointer-events-none z-0",children:s.jsx(nr,{className:"scale-[5]"})})]})});Cm.displayName="AdmitCard";const km=G.forwardRef(({student:e,exam:t,grades:r,schoolName:n,schoolAddress:a,schoolPhone:i,schoolEmail:o,schoolLogo:l,academicYear:c},u)=>{const h=r.reduce((g,y)=>g+y.marks_obtained,0),d=r.reduce((g,y)=>g+y.total_marks,0),f=d>0?h/d*100:0,p=r.length>0?r.reduce((g,y)=>g+y.gpa,0)/r.length:0,b=()=>r.some(g=>g.grade==="F")?"FAIL":f>=40?"PASS":"FAIL",x=g=>g>=3.8?"Outstanding Performance!":g>=3.5?"Excellent work, keep it up.":g>=3?"Very Good, consistent effort.":g>=2.5?"Good, but room for improvement.":g>=2?"Satisfactory, needs more focus.":"Needs serious improvement.";return s.jsxs("div",{ref:u,className:"w-[210mm] min-h-[297mm] bg-white p-10 font-sans text-slate-900 mx-auto relative print:break-inside-avoid border border-slate-200",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-[0.04] z-0",children:l?s.jsx("img",{src:l,className:"w-96 h-96 object-contain grayscale"}):s.jsx(nr,{className:"scale-[8]"})}),s.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-start border-b-4 border-double border-blue-900 pb-6 mb-6",children:[s.jsx("div",{className:"w-28 flex items-center justify-center",children:l?s.jsx("img",{src:l,alt:"Logo",className:"w-24 h-24 object-contain"}):s.jsx(nr,{className:"scale-[2.5]"})}),s.jsxs("div",{className:"flex-1 text-center px-4",children:[s.jsx("h1",{className:"text-3xl font-extrabold uppercase tracking-wide text-blue-900",children:n}),a&&s.jsx("p",{className:"text-sm text-slate-600 mt-1 font-medium",children:a}),s.jsxs("div",{className:"flex justify-center gap-4 text-xs text-slate-500 mt-1",children:[i&&s.jsxs("span",{children:["Ph: ",i]}),o&&s.jsxs("span",{children:["Email: ",o]})]}),s.jsx("div",{className:"mt-4 inline-block bg-blue-900 text-white px-8 py-1.5 text-lg font-bold uppercase rounded-full shadow-sm tracking-wider",children:"Progress Report"})]}),s.jsx("div",{className:"w-28 flex justify-end",children:s.jsx("div",{className:"w-24 h-28 bg-slate-50 border border-slate-300 flex items-center justify-center text-xs text-slate-400 overflow-hidden shadow-sm",children:e.avatar?s.jsx("img",{src:e.avatar,className:"w-full h-full object-cover"}):"STUDENT PHOTO"})})]}),s.jsx("div",{className:"bg-slate-50 border border-slate-200 p-4 rounded-lg mb-6 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[s.jsxs("div",{className:"flex border-b border-slate-200 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Student Name:"}),s.jsx("span",{className:"font-bold text-slate-900 flex-1",children:e.name})]}),s.jsxs("div",{className:"flex border-b border-slate-200 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Admission No:"}),s.jsx("span",{className:"font-semibold text-slate-900 flex-1",children:e.id})]}),s.jsxs("div",{className:"flex border-b border-slate-200 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Class & Section:"}),s.jsxs("span",{className:"font-semibold text-slate-900 flex-1",children:[e.class," - ",e.section]})]}),s.jsxs("div",{className:"flex border-b border-slate-200 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Roll Number:"}),s.jsx("span",{className:"font-semibold text-slate-900 flex-1",children:e.rollNumber})]}),s.jsxs("div",{className:"flex border-b border-slate-200 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Exam Name:"}),s.jsx("span",{className:"font-semibold text-slate-900 flex-1",children:t.name})]}),s.jsxs("div",{className:"flex border-b border-slate-200 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Academic Year:"}),s.jsx("span",{className:"font-semibold text-slate-900 flex-1",children:c})]}),e.parent_name&&s.jsxs("div",{className:"flex border-b border-slate-200 pb-1 col-span-2",children:[s.jsx("span",{className:"font-bold text-slate-500 w-32",children:"Parent/Guardian:"}),s.jsx("span",{className:"font-semibold text-slate-900 flex-1",children:e.parent_name})]})]})}),s.jsxs("div",{className:"mb-6 flex-grow",children:[s.jsx("h3",{className:"text-sm font-bold text-blue-900 uppercase mb-2 border-l-4 border-blue-600 pl-2",children:"Scholastic Areas"}),s.jsxs("table",{className:"w-full border-collapse text-sm shadow-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-blue-900 text-white",children:[s.jsx("th",{className:"py-3 px-4 text-left border border-blue-800 w-1/3",children:"Subject"}),s.jsx("th",{className:"py-3 px-4 text-center border border-blue-800",children:"Max Marks"}),s.jsx("th",{className:"py-3 px-4 text-center border border-blue-800",children:"Marks Obt."}),s.jsx("th",{className:"py-3 px-4 text-center border border-blue-800",children:"Grade"}),s.jsx("th",{className:"py-3 px-4 text-center border border-blue-800",children:"GPA"}),s.jsx("th",{className:"py-3 px-4 text-left border border-blue-800",children:"Remarks"})]})}),s.jsxs("tbody",{children:[r.map((g,y)=>s.jsxs("tr",{className:`${y%2===0?"bg-white":"bg-slate-50"}`,children:[s.jsx("td",{className:"py-2.5 px-4 border border-slate-300 font-medium text-slate-800",children:g.subject}),s.jsx("td",{className:"py-2.5 px-4 text-center border border-slate-300 text-slate-600",children:g.total_marks}),s.jsx("td",{className:"py-2.5 px-4 text-center border border-slate-300 font-bold text-slate-900",children:g.marks_obtained}),s.jsx("td",{className:"py-2.5 px-4 text-center border border-slate-300 font-semibold",children:g.grade}),s.jsx("td",{className:"py-2.5 px-4 text-center border border-slate-300",children:g.gpa.toFixed(1)}),s.jsx("td",{className:"py-2.5 px-4 border border-slate-300 text-xs italic text-slate-500",children:g.grade==="A+"?"Outstanding":g.grade==="A"?"Excellent":g.grade==="B+"?"Very Good":g.grade==="B"?"Good":g.grade==="C"?"Satisfactory":"Needs Work"})]},g.id)),s.jsxs("tr",{className:"bg-blue-50 font-bold border-t-2 border-blue-200",children:[s.jsx("td",{className:"py-3 px-4 text-right border border-slate-300 text-blue-900",children:"GRAND TOTAL"}),s.jsx("td",{className:"py-3 px-4 text-center border border-slate-300 text-blue-900",children:d}),s.jsx("td",{className:"py-3 px-4 text-center border border-slate-300 text-blue-900",children:h}),s.jsxs("td",{className:"py-3 px-4 text-center border border-slate-300",colSpan:3,children:["Percentage: ",s.jsxs("span",{className:"text-blue-700",children:[f.toFixed(2),"%"]})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"border border-slate-300 p-4 rounded-lg bg-white shadow-sm",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3 border-b pb-1",children:"Final Result"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Result Status"}),s.jsx("p",{className:`text-lg font-bold ${b()==="PASS"?"text-green-600":"text-red-600"}`,children:b()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500",children:"Overall GPA"}),s.jsx("p",{className:"text-lg font-bold text-blue-600",children:p.toFixed(2)})]})]})]}),s.jsxs("div",{className:"border border-slate-300 p-4 rounded-lg bg-white shadow-sm",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-2 border-b pb-1",children:"Class Teacher's Remarks"}),s.jsxs("p",{className:"text-sm italic text-slate-700 mt-2",children:['"',x(p),'"']})]})]}),s.jsxs("div",{className:"mb-12",children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Grading Scale"}),s.jsxs("div",{className:"flex flex-wrap gap-2 text-[10px] text-slate-600 border-t border-slate-200 pt-2",children:[s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"A+ (90-100%)"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"A (80-89%)"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"B+ (70-79%)"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"B (60-69%)"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"C (40-59%)"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"D (33-39%)"}),s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded",children:"F (Below 33%)"})]})]}),s.jsxs("div",{className:"mt-auto grid grid-cols-3 gap-8 items-end",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-bold text-slate-900 mb-1",children:De(new Date().toISOString())}),s.jsx("div",{className:"border-t border-slate-400 pt-1",children:s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Date of Issue"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"h-10"})," ",s.jsx("div",{className:"border-t border-slate-400 pt-1",children:s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Class Teacher"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"h-10"})," ",s.jsx("div",{className:"border-t border-slate-400 pt-1",children:s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Principal"})})]})]}),s.jsx("div",{className:"text-center mt-6 text-[10px] text-slate-400",children:"This report card is computer generated and valid without a signature if accessed via the student portal."})]})]})});km.displayName="ReportCardTemplate";var UM={exports:{}};(function(e,t){(function(r,n){e.exports=n(j,NE)})(typeof self<"u"?self:gc,function(r,n){return function(){var a={328:function(c,u,h){Object.defineProperty(u,"__esModule",{value:!0}),u.PrintContextConsumer=u.PrintContext=void 0;var d=h(496),f=Object.prototype.hasOwnProperty.call(d,"createContext");u.PrintContext=f?d.createContext({}):null,u.PrintContextConsumer=u.PrintContext?u.PrintContext.Consumer:function(){return null}},428:function(c,u,h){Object.defineProperty(u,"__esModule",{value:!0}),u.ReactToPrint=void 0;var d=h(316),f=h(496),p=h(190),b=h(328),x=h(940),g=function(y){function m(){var v=y.apply(this,d.__spreadArray([],d.__read(arguments),!1))||this;return v.startPrint=function(S){var w=v.props,N=w.onAfterPrint,_=w.onPrintError,C=w.print,A=w.documentTitle;setTimeout(function(){var k,E;if(S.contentWindow)if(S.contentWindow.focus(),C)C(S).then(function(){return N==null?void 0:N()}).then(function(){return v.handleRemoveIframe()}).catch(function(M){_?_("print",M):v.logMessages(["An error was thrown by the specified `print` function"])});else{if(S.contentWindow.print){var O=(E=(k=S.contentDocument)===null||k===void 0?void 0:k.title)!==null&&E!==void 0?E:"",P=S.ownerDocument.title;A&&(S.ownerDocument.title=A,S.contentDocument&&(S.contentDocument.title=A)),S.contentWindow.print(),A&&(S.ownerDocument.title=P,S.contentDocument&&(S.contentDocument.title=O))}else v.logMessages(["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."]);N==null||N(),v.handleRemoveIframe()}else v.logMessages(["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/gregnb/react-to-print/issues/"])},500)},v.triggerPrint=function(S){var w=v.props,N=w.onBeforePrint,_=w.onPrintError;if(N){var C=N();C&&typeof C.then=="function"?C.then(function(){v.startPrint(S)}).catch(function(A){_&&_("onBeforePrint",A)}):v.startPrint(S)}else v.startPrint(S)},v.handlePrint=function(S){var w=v.props,N=w.bodyClass,_=w.content,C=w.copyStyles,A=w.fonts,k=w.pageStyle,E=w.nonce,O=typeof S=="function"?S():null;if(O&&typeof _=="function"&&v.logMessages(['"react-to-print" received a `content` prop and a content param passed the callback return by `useReactToPrint. The `content` prop will be ignored.'],"warning"),O||typeof _!="function"||(O=_()),O!==void 0)if(O!==null){var P=document.createElement("iframe");P.width="".concat(document.documentElement.clientWidth,"px"),P.height="".concat(document.documentElement.clientHeight,"px"),P.style.position="absolute",P.style.top="-".concat(document.documentElement.clientHeight+100,"px"),P.style.left="-".concat(document.documentElement.clientWidth+100,"px"),P.id="printWindow",P.srcdoc="<!DOCTYPE html>";var M=(0,p.findDOMNode)(O);if(M){var T=M.cloneNode(!0),F=T instanceof Text,q=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),$=F?[]:T.querySelectorAll("img"),U=F?[]:T.querySelectorAll("video"),X=A?A.length:0;v.numResourcesToLoad=q.length+$.length+U.length+X,v.resourcesLoaded=[],v.resourcesErrored=[];var K=function(z,H){v.resourcesLoaded.includes(z)?v.logMessages(["Tried to mark a resource that has already been handled",z],"debug"):(H?(v.logMessages(d.__spreadArray(['"react-to-print" was unable to load a resource but will continue attempting to print the page'],d.__read(H),!1)),v.resourcesErrored.push(z)):v.resourcesLoaded.push(z),v.resourcesLoaded.length+v.resourcesErrored.length===v.numResourcesToLoad&&v.triggerPrint(P))};P.onload=function(){var z,H,Q,se;P.onload=null;var ue=P.contentDocument||((H=P.contentWindow)===null||H===void 0?void 0:H.document);if(ue){ue.body.appendChild(T),A&&(!((Q=P.contentDocument)===null||Q===void 0)&&Q.fonts&&(!((se=P.contentWindow)===null||se===void 0)&&se.FontFace)?A.forEach(function(ar){var Ke=new FontFace(ar.family,ar.source,{weight:ar.weight,style:ar.style});P.contentDocument.fonts.add(Ke),Ke.loaded.then(function(){K(Ke)}).catch(function(bt){K(Ke,["Failed loading the font:",Ke,"Load error:",bt])})}):(A.forEach(function(ar){return K(ar)}),v.logMessages(['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'])));var ye=typeof k=="function"?k():k;if(typeof ye!="string")v.logMessages(['"react-to-print" expected a "string" from `pageStyle` but received "'.concat(typeof ye,'". Styles from `pageStyle` will not be applied.')]);else{var me=ue.createElement("style");E&&(me.setAttribute("nonce",E),ue.head.setAttribute("nonce",E)),me.appendChild(ue.createTextNode(ye)),ue.head.appendChild(me)}if(N&&(z=ue.body.classList).add.apply(z,d.__spreadArray([],d.__read(N.split(" ")),!1)),!F){for(var L=F?[]:M.querySelectorAll("canvas"),W=ue.querySelectorAll("canvas"),Y=0;Y<L.length;++Y){var V=L[Y],ee=W[Y].getContext("2d");ee&&ee.drawImage(V,0,0)}var Z=function(ar){var Ke=$[ar],bt=Ke.getAttribute("src");if(bt){var nn=new Image;nn.onload=function(){return K(Ke)},nn.onerror=function(Ia,Jl,Td,_n,Cr){return K(Ke,["Error loading <img>",Ke,"Error",Cr])},nn.src=bt}else K(Ke,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it. The <img> is:',Ke])};for(Y=0;Y<$.length;Y++)Z(Y);var re=function(ar){var Ke=U[ar];Ke.preload="auto";var bt=Ke.getAttribute("poster");if(bt){var nn=new Image;nn.onload=function(){return K(Ke)},nn.onerror=function(Ia,Jl,Td,_n,Cr){return K(Ke,["Error loading video poster",bt,"for video",Ke,"Error:",Cr])},nn.src=bt}else Ke.readyState>=2?K(Ke):(Ke.onloadeddata=function(){return K(Ke)},Ke.onerror=function(Ia,Jl,Td,_n,Cr){return K(Ke,["Error loading video",Ke,"Error",Cr])},Ke.onstalled=function(){return K(Ke,["Loading video stalled, skipping",Ke])})};for(Y=0;Y<U.length;Y++)re(Y);var de="input",Ne=M.querySelectorAll(de),ne=ue.querySelectorAll(de);for(Y=0;Y<Ne.length;Y++)ne[Y].value=Ne[Y].value;var ce="input[type=checkbox],input[type=radio]",Se=M.querySelectorAll(ce),Ie=ue.querySelectorAll(ce);for(Y=0;Y<Se.length;Y++)Ie[Y].checked=Se[Y].checked;var We="select",dt=M.querySelectorAll(We),qe=ue.querySelectorAll(We);for(Y=0;Y<dt.length;Y++)qe[Y].value=dt[Y].value}if(C)for(var Ot=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']"),xr=function(ar,Ke){var bt=Ot[ar];if(bt.tagName.toLowerCase()==="style"){var nn=ue.createElement(bt.tagName),Ia=bt.sheet;if(Ia){var Jl="";try{for(var Td=Ia.cssRules.length,_n=0;_n<Td;++_n)typeof Ia.cssRules[_n].cssText=="string"&&(Jl+="".concat(Ia.cssRules[_n].cssText,`\r
`))}catch{v.logMessages(["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/gregnb/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",bt],"warning")}nn.setAttribute("id","react-to-print-".concat(ar)),E&&nn.setAttribute("nonce",E),nn.appendChild(ue.createTextNode(Jl)),ue.head.appendChild(nn)}}else if(bt.getAttribute("href"))if(bt.hasAttribute("disabled"))v.logMessages(["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",bt],"warning"),K(bt);else{for(var Cr=ue.createElement(bt.tagName),oR=(_n=0,bt.attributes.length);_n<oR;++_n){var sx=bt.attributes[_n];sx&&Cr.setAttribute(sx.nodeName,sx.nodeValue||"")}Cr.onload=function(){return K(Cr)},Cr.onerror=function(lR,ive,ove,lve,cR){return K(Cr,["Failed to load",Cr,"Error:",cR])},E&&Cr.setAttribute("nonce",E),ue.head.appendChild(Cr)}else v.logMessages(["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",bt],"warning"),K(bt)},Pd=(Y=0,Ot.length);Y<Pd;++Y)xr(Y)}v.numResourcesToLoad!==0&&C||v.triggerPrint(P)},v.handleRemoveIframe(!0),document.body.appendChild(P)}else v.logMessages(['"react-to-print" could not locate the DOM node corresponding with the `content` prop'])}else v.logMessages(['There is nothing to print because the "content" prop returned "null". Please ensure "content" is renderable before allowing "react-to-print" to be called.']);else v.logMessages(["To print a functional component ensure it is wrapped with `React.forwardRef`, and ensure the forwarded ref is used. See the README for an example: https://github.com/gregnb/react-to-print#examples"])},v.handleRemoveIframe=function(S){var w=v.props.removeAfterPrint;if(S||w){var N=document.getElementById("printWindow");N&&document.body.removeChild(N)}},v.logMessages=function(S,w){w===void 0&&(w="error"),v.props.suppressErrors||(w==="error"?console.error(S):w==="warning"?console.warn(S):w==="debug"&&console.debug(S))},v}return d.__extends(m,y),m.prototype.handleClick=function(v,S){var w=this,N=this.props,_=N.onBeforeGetContent,C=N.onPrintError;if(_){var A=_();A&&typeof A.then=="function"?A.then(function(){return w.handlePrint(S)}).catch(function(k){C&&C("onBeforeGetContent",k)}):this.handlePrint(S)}else this.handlePrint(S)},m.prototype.render=function(){var v=this.props,S=v.children,w=v.trigger;if(w)return f.cloneElement(w(),{onClick:this.handleClick.bind(this)});if(!b.PrintContext)return this.logMessages(['"react-to-print" requires React ^16.3.0 to be able to use "PrintContext"']),null;var N={handlePrint:this.handleClick.bind(this)};return f.createElement(b.PrintContext.Provider,{value:N},S)},m.defaultProps=x.defaultProps,m}(f.Component);u.ReactToPrint=g},940:function(c,u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultProps=void 0,u.defaultProps={copyStyles:!0,pageStyle:`
        @page {
            /* Remove browser default header (title) and footer (url) */
            margin: 0;
        }
        @media print {
            body {
                /* Tell browsers to print background colors */
                -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
                color-adjust: exact; /* Firefox */
            }
        }
    `,removeAfterPrint:!1,suppressErrors:!1}},892:function(c,u,h){Object.defineProperty(u,"__esModule",{value:!0}),u.useReactToPrint=void 0;var d=h(316),f=h(496),p=h(428),b=h(940),x=h(860),g=Object.prototype.hasOwnProperty.call(f,"useMemo")&&Object.prototype.hasOwnProperty.call(f,"useCallback");u.useReactToPrint=function(y){if(!g)return y.suppressErrors||console.error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"'),function(){throw new Error('"react-to-print" requires React ^16.8.0 to be able to use "useReactToPrint"')};var m=f.useMemo(function(){return new p.ReactToPrint(d.__assign(d.__assign({},b.defaultProps),y))},[y]);return f.useCallback(function(v,S){return(0,x.wrapCallbackWithArgs)(m,m.handleClick,S)(v)},[m])}},860:function(c,u,h){Object.defineProperty(u,"__esModule",{value:!0}),u.wrapCallbackWithArgs=void 0;var d=h(316);u.wrapCallbackWithArgs=function(f,p){for(var b=[],x=2;x<arguments.length;x++)b[x-2]=arguments[x];return function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return p.apply(f,d.__spreadArray(d.__spreadArray([],d.__read(g),!1),d.__read(b),!1))}}},496:function(c){c.exports=r},190:function(c){c.exports=n},316:function(c,u,h){h.r(u),h.d(u,{__addDisposableResource:function(){return ue},__assign:function(){return p},__asyncDelegator:function(){return q},__asyncGenerator:function(){return F},__asyncValues:function(){return $},__await:function(){return T},__awaiter:function(){return N},__classPrivateFieldGet:function(){return H},__classPrivateFieldIn:function(){return se},__classPrivateFieldSet:function(){return Q},__createBinding:function(){return C},__decorate:function(){return x},__disposeResources:function(){return me},__esDecorate:function(){return y},__exportStar:function(){return A},__extends:function(){return f},__generator:function(){return _},__importDefault:function(){return z},__importStar:function(){return K},__makeTemplateObject:function(){return U},__metadata:function(){return w},__param:function(){return g},__propKey:function(){return v},__read:function(){return E},__rest:function(){return b},__runInitializers:function(){return m},__setFunctionName:function(){return S},__spread:function(){return O},__spreadArray:function(){return M},__spreadArrays:function(){return P},__values:function(){return k}});var d=function(L,W){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,V){Y.__proto__=V}||function(Y,V){for(var ee in V)Object.prototype.hasOwnProperty.call(V,ee)&&(Y[ee]=V[ee])},d(L,W)};function f(L,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function Y(){this.constructor=L}d(L,W),L.prototype=W===null?Object.create(W):(Y.prototype=W.prototype,new Y)}var p=function(){return p=Object.assign||function(L){for(var W,Y=1,V=arguments.length;Y<V;Y++)for(var ee in W=arguments[Y])Object.prototype.hasOwnProperty.call(W,ee)&&(L[ee]=W[ee]);return L},p.apply(this,arguments)};function b(L,W){var Y={};for(var V in L)Object.prototype.hasOwnProperty.call(L,V)&&W.indexOf(V)<0&&(Y[V]=L[V]);if(L!=null&&typeof Object.getOwnPropertySymbols=="function"){var ee=0;for(V=Object.getOwnPropertySymbols(L);ee<V.length;ee++)W.indexOf(V[ee])<0&&Object.prototype.propertyIsEnumerable.call(L,V[ee])&&(Y[V[ee]]=L[V[ee]])}return Y}function x(L,W,Y,V){var ee,Z=arguments.length,re=Z<3?W:V===null?V=Object.getOwnPropertyDescriptor(W,Y):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")re=Reflect.decorate(L,W,Y,V);else for(var de=L.length-1;de>=0;de--)(ee=L[de])&&(re=(Z<3?ee(re):Z>3?ee(W,Y,re):ee(W,Y))||re);return Z>3&&re&&Object.defineProperty(W,Y,re),re}function g(L,W){return function(Y,V){W(Y,V,L)}}function y(L,W,Y,V,ee,Z){function re(xr){if(xr!==void 0&&typeof xr!="function")throw new TypeError("Function expected");return xr}for(var de,Ne=V.kind,ne=Ne==="getter"?"get":Ne==="setter"?"set":"value",ce=!W&&L?V.static?L:L.prototype:null,Se=W||(ce?Object.getOwnPropertyDescriptor(ce,V.name):{}),Ie=!1,We=Y.length-1;We>=0;We--){var dt={};for(var qe in V)dt[qe]=qe==="access"?{}:V[qe];for(var qe in V.access)dt.access[qe]=V.access[qe];dt.addInitializer=function(xr){if(Ie)throw new TypeError("Cannot add initializers after decoration has completed");Z.push(re(xr||null))};var Ot=(0,Y[We])(Ne==="accessor"?{get:Se.get,set:Se.set}:Se[ne],dt);if(Ne==="accessor"){if(Ot===void 0)continue;if(Ot===null||typeof Ot!="object")throw new TypeError("Object expected");(de=re(Ot.get))&&(Se.get=de),(de=re(Ot.set))&&(Se.set=de),(de=re(Ot.init))&&ee.unshift(de)}else(de=re(Ot))&&(Ne==="field"?ee.unshift(de):Se[ne]=de)}ce&&Object.defineProperty(ce,V.name,Se),Ie=!0}function m(L,W,Y){for(var V=arguments.length>2,ee=0;ee<W.length;ee++)Y=V?W[ee].call(L,Y):W[ee].call(L);return V?Y:void 0}function v(L){return typeof L=="symbol"?L:"".concat(L)}function S(L,W,Y){return typeof W=="symbol"&&(W=W.description?"[".concat(W.description,"]"):""),Object.defineProperty(L,"name",{configurable:!0,value:Y?"".concat(Y," ",W):W})}function w(L,W){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(L,W)}function N(L,W,Y,V){return new(Y||(Y=Promise))(function(ee,Z){function re(ne){try{Ne(V.next(ne))}catch(ce){Z(ce)}}function de(ne){try{Ne(V.throw(ne))}catch(ce){Z(ce)}}function Ne(ne){var ce;ne.done?ee(ne.value):(ce=ne.value,ce instanceof Y?ce:new Y(function(Se){Se(ce)})).then(re,de)}Ne((V=V.apply(L,W||[])).next())})}function _(L,W){var Y,V,ee,Z,re={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return Z={next:de(0),throw:de(1),return:de(2)},typeof Symbol=="function"&&(Z[Symbol.iterator]=function(){return this}),Z;function de(Ne){return function(ne){return function(ce){if(Y)throw new TypeError("Generator is already executing.");for(;Z&&(Z=0,ce[0]&&(re=0)),re;)try{if(Y=1,V&&(ee=2&ce[0]?V.return:ce[0]?V.throw||((ee=V.return)&&ee.call(V),0):V.next)&&!(ee=ee.call(V,ce[1])).done)return ee;switch(V=0,ee&&(ce=[2&ce[0],ee.value]),ce[0]){case 0:case 1:ee=ce;break;case 4:return re.label++,{value:ce[1],done:!1};case 5:re.label++,V=ce[1],ce=[0];continue;case 7:ce=re.ops.pop(),re.trys.pop();continue;default:if(!((ee=(ee=re.trys).length>0&&ee[ee.length-1])||ce[0]!==6&&ce[0]!==2)){re=0;continue}if(ce[0]===3&&(!ee||ce[1]>ee[0]&&ce[1]<ee[3])){re.label=ce[1];break}if(ce[0]===6&&re.label<ee[1]){re.label=ee[1],ee=ce;break}if(ee&&re.label<ee[2]){re.label=ee[2],re.ops.push(ce);break}ee[2]&&re.ops.pop(),re.trys.pop();continue}ce=W.call(L,re)}catch(Se){ce=[6,Se],V=0}finally{Y=ee=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}([Ne,ne])}}}var C=Object.create?function(L,W,Y,V){V===void 0&&(V=Y);var ee=Object.getOwnPropertyDescriptor(W,Y);ee&&!("get"in ee?!W.__esModule:ee.writable||ee.configurable)||(ee={enumerable:!0,get:function(){return W[Y]}}),Object.defineProperty(L,V,ee)}:function(L,W,Y,V){V===void 0&&(V=Y),L[V]=W[Y]};function A(L,W){for(var Y in L)Y==="default"||Object.prototype.hasOwnProperty.call(W,Y)||C(W,L,Y)}function k(L){var W=typeof Symbol=="function"&&Symbol.iterator,Y=W&&L[W],V=0;if(Y)return Y.call(L);if(L&&typeof L.length=="number")return{next:function(){return L&&V>=L.length&&(L=void 0),{value:L&&L[V++],done:!L}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(L,W){var Y=typeof Symbol=="function"&&L[Symbol.iterator];if(!Y)return L;var V,ee,Z=Y.call(L),re=[];try{for(;(W===void 0||W-- >0)&&!(V=Z.next()).done;)re.push(V.value)}catch(de){ee={error:de}}finally{try{V&&!V.done&&(Y=Z.return)&&Y.call(Z)}finally{if(ee)throw ee.error}}return re}function O(){for(var L=[],W=0;W<arguments.length;W++)L=L.concat(E(arguments[W]));return L}function P(){for(var L=0,W=0,Y=arguments.length;W<Y;W++)L+=arguments[W].length;var V=Array(L),ee=0;for(W=0;W<Y;W++)for(var Z=arguments[W],re=0,de=Z.length;re<de;re++,ee++)V[ee]=Z[re];return V}function M(L,W,Y){if(Y||arguments.length===2)for(var V,ee=0,Z=W.length;ee<Z;ee++)!V&&ee in W||(V||(V=Array.prototype.slice.call(W,0,ee)),V[ee]=W[ee]);return L.concat(V||Array.prototype.slice.call(W))}function T(L){return this instanceof T?(this.v=L,this):new T(L)}function F(L,W,Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var V,ee=Y.apply(L,W||[]),Z=[];return V={},re("next"),re("throw"),re("return"),V[Symbol.asyncIterator]=function(){return this},V;function re(Se){ee[Se]&&(V[Se]=function(Ie){return new Promise(function(We,dt){Z.push([Se,Ie,We,dt])>1||de(Se,Ie)})})}function de(Se,Ie){try{(We=ee[Se](Ie)).value instanceof T?Promise.resolve(We.value.v).then(Ne,ne):ce(Z[0][2],We)}catch(dt){ce(Z[0][3],dt)}var We}function Ne(Se){de("next",Se)}function ne(Se){de("throw",Se)}function ce(Se,Ie){Se(Ie),Z.shift(),Z.length&&de(Z[0][0],Z[0][1])}}function q(L){var W,Y;return W={},V("next"),V("throw",function(ee){throw ee}),V("return"),W[Symbol.iterator]=function(){return this},W;function V(ee,Z){W[ee]=L[ee]?function(re){return(Y=!Y)?{value:T(L[ee](re)),done:!1}:Z?Z(re):re}:Z}}function $(L){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,Y=L[Symbol.asyncIterator];return Y?Y.call(L):(L=k(L),W={},V("next"),V("throw"),V("return"),W[Symbol.asyncIterator]=function(){return this},W);function V(ee){W[ee]=L[ee]&&function(Z){return new Promise(function(re,de){(function(Ne,ne,ce,Se){Promise.resolve(Se).then(function(Ie){Ne({value:Ie,done:ce})},ne)})(re,de,(Z=L[ee](Z)).done,Z.value)})}}}function U(L,W){return Object.defineProperty?Object.defineProperty(L,"raw",{value:W}):L.raw=W,L}var X=Object.create?function(L,W){Object.defineProperty(L,"default",{enumerable:!0,value:W})}:function(L,W){L.default=W};function K(L){if(L&&L.__esModule)return L;var W={};if(L!=null)for(var Y in L)Y!=="default"&&Object.prototype.hasOwnProperty.call(L,Y)&&C(W,L,Y);return X(W,L),W}function z(L){return L&&L.__esModule?L:{default:L}}function H(L,W,Y,V){if(Y==="a"&&!V)throw new TypeError("Private accessor was defined without a getter");if(typeof W=="function"?L!==W||!V:!W.has(L))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?V:Y==="a"?V.call(L):V?V.value:W.get(L)}function Q(L,W,Y,V,ee){if(V==="m")throw new TypeError("Private method is not writable");if(V==="a"&&!ee)throw new TypeError("Private accessor was defined without a setter");if(typeof W=="function"?L!==W||!ee:!W.has(L))throw new TypeError("Cannot write private member to an object whose class did not declare it");return V==="a"?ee.call(L,Y):ee?ee.value=Y:W.set(L,Y),Y}function se(L,W){if(W===null||typeof W!="object"&&typeof W!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof L=="function"?W===L:L.has(W)}function ue(L,W,Y){if(W!=null){if(typeof W!="object"&&typeof W!="function")throw new TypeError("Object expected.");var V;if(Y){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");V=W[Symbol.asyncDispose]}if(V===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");V=W[Symbol.dispose]}if(typeof V!="function")throw new TypeError("Object not disposable.");L.stack.push({value:W,dispose:V,async:Y})}else Y&&L.stack.push({async:!0});return W}var ye=typeof SuppressedError=="function"?SuppressedError:function(L,W,Y){var V=new Error(Y);return V.name="SuppressedError",V.error=L,V.suppressed=W,V};function me(L){function W(Y){L.error=L.hasError?new ye(Y,L.error,"An error was suppressed during disposal."):Y,L.hasError=!0}return function Y(){for(;L.stack.length;){var V=L.stack.pop();try{var ee=V.dispose&&V.dispose.call(V.value);if(V.async)return Promise.resolve(ee).then(Y,function(Z){return W(Z),Y()})}catch(Z){W(Z)}}if(L.hasError)throw L.error}()}u.default={__extends:f,__assign:p,__rest:b,__decorate:x,__param:g,__metadata:w,__awaiter:N,__generator:_,__createBinding:C,__exportStar:A,__values:k,__read:E,__spread:O,__spreadArrays:P,__spreadArray:M,__await:T,__asyncGenerator:F,__asyncDelegator:q,__asyncValues:$,__makeTemplateObject:U,__importStar:K,__importDefault:z,__classPrivateFieldGet:H,__classPrivateFieldSet:Q,__classPrivateFieldIn:se,__addDisposableResource:ue,__disposeResources:me}}},i={};function o(c){var u=i[c];if(u!==void 0)return u.exports;var h=i[c]={exports:{}};return a[c](h,h.exports,o),h.exports}o.d=function(c,u){for(var h in u)o.o(u,h)&&!o.o(c,h)&&Object.defineProperty(c,h,{enumerable:!0,get:u[h]})},o.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},o.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var l={};return function(){var c=l;Object.defineProperty(c,"__esModule",{value:!0}),c.useReactToPrint=c.ReactToPrint=c.PrintContextConsumer=void 0;var u=o(328);Object.defineProperty(c,"PrintContextConsumer",{enumerable:!0,get:function(){return u.PrintContextConsumer}});var h=o(428);Object.defineProperty(c,"ReactToPrint",{enumerable:!0,get:function(){return h.ReactToPrint}});var d=o(892);Object.defineProperty(c,"useReactToPrint",{enumerable:!0,get:function(){return d.useReactToPrint}});var f=o(428);c.default=f.ReactToPrint}(),l}()})})(UM);var Un=UM.exports;const $g=e=>({id:e.id,created_at:e.created_at,name:e.name,subject:e.subject,class:e.class,date:e.date,totalMarks:e.total_marks,passingMarks:e.passing_marks,duration:e.duration,status:e.status}),Zk=e=>({id:e.id,name:e.name,email:e.email,class:e.class,section:e.section,rollNumber:e.roll_number,phone:e.phone,enrollmentDate:e.enrollment_date,issuedDate:e.issued_date,expiryDate:e.expiry_date,dob:e.dob,status:e.status,avatar:e.avatar,grade:e.grade,user_id:e.user_id}),Sge=()=>{const{profile:e,schoolName:t,academicYear:r}=fe(),[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[u,h]=j.useState("all"),[d,f]=j.useState(!1),[p,b]=j.useState(!1),[x,g]=j.useState(null),[y,m]=j.useState(!1),[v,S]=j.useState(!1),[w,N]=j.useState(!1),[_,C]=j.useState([]),[A,k]=j.useState(!1),E=j.useRef(null),[O,P]=j.useState(!1),[M,T]=j.useState([]),[F,q]=j.useState(!1),$=j.useRef(null),U=Fs(),X=j.useRef(null);j.useEffect(()=>{(async()=>{if(e){o(!0);try{let re=D.from("exams").select("*").order("date",{ascending:!1});e.role!=="system_admin"&&e.school_id&&(re=re.eq("school_id",e.school_id));const{data:de,error:Ne}=await re;if(Ne)throw Ne;a(de.map($g))}catch(re){const de=(re==null?void 0:re.message)||(typeof re=="object"?JSON.stringify(re):String(re));I.error(`Failed to fetch exams: ${de}`)}finally{o(!1)}}})()},[e]);const K=n.filter(Z=>{const re=Z.name.toLowerCase().includes(l.toLowerCase())||Z.subject.toLowerCase().includes(l.toLowerCase())||Z.class.toLowerCase().includes(l.toLowerCase()),de=u==="all"||Z.status===u;return re&&de}),z=()=>{g(null),f(!0)},H=Z=>{g(Z),f(!0)},Q=Z=>{g(Z),b(!0)},se=Z=>{g(Z),m(!0)},ue=Z=>{U(`/grades?examId=${Z.id}`)},ye=async Z=>{if(e!=null&&e.school_id){g(Z),N(!0),k(!0);try{const{data:re,error:de}=await D.from("students").select("*").eq("school_id",e.school_id).eq("class",Z.class).eq("status","active").order("name");if(de)throw de;C(re.map(Zk))}catch(re){I.error(`Failed to fetch students: ${re.message}`),N(!1)}finally{k(!1)}}},me=async Z=>{if(e!=null&&e.school_id){g(Z),P(!0),q(!0);try{const{data:re,error:de}=await D.from("students").select("*").eq("school_id",e.school_id).eq("class",Z.class).eq("status","active").order("name");if(de)throw de;const{data:Ne,error:ne}=await D.from("exams").select("id, subject, total_marks").eq("school_id",e.school_id).eq("name",Z.name).eq("class",Z.class);if(ne)throw ne;const ce=Ne.map(qe=>qe.id),Se=Ne.reduce((qe,Ot)=>(qe[Ot.id]=Ot,qe),{}),{data:Ie,error:We}=await D.from("grades").select("*").eq("school_id",e.school_id).in("exam_id",ce);if(We)throw We;const dt=re.map(qe=>{const Ot=Ie.filter(xr=>xr.student_id===qe.id).map(xr=>{var Pd,ar;return{...xr,subject:((Pd=Se[xr.exam_id])==null?void 0:Pd.subject)||"Unknown",total_marks:((ar=Se[xr.exam_id])==null?void 0:ar.total_marks)||100}});return{student:Zk(qe),grades:Ot}});setReportData(dt)}catch(re){I.error(`Failed to generate reports: ${re.message}`),P(!1)}finally{q(!1)}}},L=Un.useReactToPrint({content:()=>E.current,documentTitle:`Admit-Cards-${x==null?void 0:x.name}`}),W=Un.useReactToPrint({content:()=>$.current,documentTitle:`Report-Cards-${x==null?void 0:x.name}`}),Y=async Z=>{S(!0);const re={name:Z.name,subject:Z.subject,class:Z.class,date:Z.date,total_marks:Z.totalMarks,passing_marks:Z.passingMarks,duration:Z.duration,status:Z.status,school_id:e==null?void 0:e.school_id};await I.promise((async()=>{if(Z.id){const{data:de,error:Ne}=await D.from("exams").update(re).eq("id",Z.id).select().single();if(Ne)throw Ne;a(ne=>ne.map(ce=>ce.id===Z.id?$g(de):ce))}else{const{data:de,error:Ne}=await D.from("exams").insert(re).select().single();if(Ne)throw Ne;a(ne=>[$g(de),...ne])}})(),{loading:"Saving exam...",success:"Exam saved successfully!",error:de=>`Failed to save exam: ${de.message}`}),S(!1),f(!1)},V=async()=>{x&&(S(!0),await I.promise((async()=>{const{error:Z}=await D.from("exams").delete().eq("id",x.id);if(Z)throw Z;a(re=>re.filter(de=>de.id!==x.id))})(),{loading:"Deleting exam...",success:"Exam deleted successfully!",error:Z=>`Failed to delete exam: ${Z.message}`}),S(!1),m(!1),g(null))},ee=Z=>{switch(Z){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return i?s.jsx(Bi,{title:"Exams"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Exams"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Schedule and manage examinations"})]}),s.jsxs(R,{onClick:z,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Schedule Exam"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search exams by name, subject, or class...",value:l,onChange:Z=>c(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),s.jsxs("select",{value:u,onChange:Z=>h(Z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"upcoming",children:"Upcoming"}),s.jsx("option",{value:"ongoing",children:"Ongoing"}),s.jsx("option",{value:"completed",children:"Completed"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:K.map(Z=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:Z.name}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Z.id})]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ee(Z.status)}`,children:Z.status})]}),s.jsxs("div",{className:"space-y-3 flex-grow",children:[s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(qn,{size:16,className:"text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Subject: "}),s.jsx("span",{className:"font-medium text-gray-900",children:Z.subject})]})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(wr,{size:16,className:"text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Date: "}),s.jsx("span",{className:"font-medium text-gray-900",children:Z.date})]})]}),s.jsxs("div",{className:"flex items-center text-sm",children:[s.jsx(rn,{size:16,className:"text-gray-400 mr-3"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Duration: "}),s.jsx("span",{className:"font-medium text-gray-900",children:Z.duration})]})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 flex justify-between items-center",children:[s.jsxs("span",{className:"text-gray-500 text-sm",children:["Class ",Z.class]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Marks"}),s.jsx("div",{className:"font-bold text-gray-900",children:Z.totalMarks})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-100 mt-4 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{variant:"secondary",size:"sm",className:"flex-1 text-xs",onClick:()=>ye(Z),children:[s.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Admit Cards"]}),s.jsxs(R,{variant:"secondary",size:"sm",className:"flex-1 text-xs",onClick:()=>me(Z),children:[s.jsx(a3,{className:"h-3 w-3 mr-1"}),"Report Cards"]})]}),s.jsxs(R,{variant:"primary",size:"sm",className:"w-full text-xs",onClick:()=>ue(Z),children:[s.jsx(Jr,{className:"h-3 w-3 mr-1"}),"Enter Grades"]}),s.jsxs("div",{className:"flex justify-end gap-1 mt-1",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>Q(Z),title:"View Details",children:s.jsx(md,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>H(Z),title:"Edit Exam",children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>se(Z),title:"Delete Exam",children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]})]},Z.id))}),K.length===0&&s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No exams found matching your criteria."})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:x?"Edit Exam":"Schedule New Exam",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var Z;return(Z=X.current)==null?void 0:Z.requestSubmit()},loading:v,children:x?"Save Changes":"Schedule Exam"})]}),children:s.jsx(BM,{ref:X,exam:x,onSubmit:Y})}),x&&s.jsx(he,{isOpen:p,onClose:()=>b(!1),title:"Exam Details",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between border-b pb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900",children:x.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[x.subject," - Class ",x.class]})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ee(x.status)}`,children:x.status})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),s.jsx("p",{className:"font-medium",children:x.date})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Duration"}),s.jsx("p",{className:"font-medium",children:x.duration})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Total Marks"}),s.jsx("p",{className:"font-medium",children:x.totalMarks})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Passing Marks"}),s.jsx("p",{className:"font-medium",children:x.passingMarks})]})]}),s.jsxs("div",{className:"pt-4 flex justify-end gap-2",children:[s.jsxs(R,{variant:"secondary",onClick:()=>{b(!1),ye(x)},children:[s.jsx(Mr,{className:"mr-2 h-4 w-4"}),"Admit Cards"]}),s.jsxs(R,{onClick:()=>{b(!1),ue(x)},children:[s.jsx(Jr,{className:"mr-2 h-4 w-4"}),"Enter Grades"]})]})]})}),s.jsx(he,{isOpen:y,onClose:()=>m(!1),title:"Delete Exam",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>m(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:V,loading:v,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the exam ",s.jsxs("strong",{children:['"',x==null?void 0:x.name,'"']}),"? This action cannot be undone."]})}),s.jsx(he,{isOpen:w,onClose:()=>N(!1),title:`Admit Cards - ${x==null?void 0:x.name}`,footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>N(!1),children:"Close"}),s.jsxs(R,{onClick:L,disabled:A||_.length===0,children:[s.jsx(Qr,{className:"mr-2 h-4 w-4"})," Print All"]})]}),children:s.jsx("div",{className:"overflow-y-auto max-h-[60vh] bg-gray-100 p-4 rounded-md",children:A?s.jsx("div",{className:"text-center py-8",children:"Loading students..."}):_.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No students found for Class ",x==null?void 0:x.class,"."]}):s.jsx("div",{ref:E,children:_.map(Z=>x&&s.jsx(Cm,{student:Z,exam:x,schoolName:t},Z.id))})})}),s.jsx(he,{isOpen:O,onClose:()=>P(!1),title:`Report Cards - ${x==null?void 0:x.name}`,footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>P(!1),children:"Close"}),s.jsxs(R,{onClick:W,disabled:F||M.length===0,children:[s.jsx(Qr,{className:"mr-2 h-4 w-4"})," Print All"]})]}),children:s.jsx("div",{className:"overflow-y-auto max-h-[60vh] bg-gray-100 p-4 rounded-md",children:F?s.jsx("div",{className:"text-center py-8",children:"Generating report cards..."}):M.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No data found. Ensure grades are entered for this exam."}):s.jsx("div",{ref:$,className:"print-container",children:M.map((Z,re)=>x&&s.jsx("div",{className:"break-after-page",children:s.jsx(km,{student:Z.student,exam:x,grades:Z.grades,schoolName:t,academicYear:r})},re))})})})]})},qM=j.forwardRef(({grade:e,students:t,exams:r,onSubmit:n},a)=>{const[i,o]=j.useState({studentId:"",examId:"",marksObtained:0}),[l,c]=j.useState(100);j.useEffect(()=>{if(e){o({studentId:e.studentId,examId:e.examId,marksObtained:e.marksObtained});const d=r.find(f=>f.id===e.examId);c(d==null?void 0:d.totalMarks)}else o({studentId:t.length>0?t[0].id:"",examId:r.length>0?r[0].id:"",marksObtained:0}),r.length>0&&c(r[0].totalMarks)},[e,t,r]);const u=d=>{const{name:f,value:p}=d.target,b=d.target.type==="number";if(f==="examId"){const x=r.find(g=>g.id===p);c(x==null?void 0:x.totalMarks)}o(x=>({...x,[f]:b?parseFloat(p):p}))},h=d=>{if(d.preventDefault(),!i.studentId){I.error("Please select a student.");return}if(!i.examId){I.error("Please select an exam.");return}if(l!==void 0&&i.marksObtained>l){I.error(`Marks obtained cannot exceed total marks (${l}).`);return}n({...i,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:a,onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"studentId",children:"Student"}),t.length>0?s.jsx(le,{id:"studentId",name:"studentId",value:i.studentId,onChange:u,required:!0,children:t.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (",d.id,")"]},d.id))}):s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:"No students available. Please add students first."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"examId",children:"Exam"}),r.length>0?s.jsx(le,{id:"examId",name:"examId",value:i.examId,onChange:u,required:!0,children:r.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.subject," (Class ",d.class,")"]},d.id))}):s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:"No exams scheduled. Please schedule an exam first."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"marksObtained",children:"Marks Obtained"}),s.jsxs("div",{className:"relative",children:[s.jsx(J,{id:"marksObtained",name:"marksObtained",type:"number",min:"0",max:l,value:i.marksObtained,onChange:u,required:!0}),l!==void 0&&s.jsxs("span",{className:"absolute inset-y-0 right-4 flex items-center text-sm text-gray-500",children:["/ ",l]})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});qM.displayName="GradeForm";const _ge=({onClose:e,onSuccess:t,initialExamId:r})=>{const{profile:n}=fe(),[a,i]=j.useState([]),[o,l]=j.useState(r||""),[c,u]=j.useState([]),[h,d]=j.useState({}),[f,p]=j.useState({}),[b,x]=j.useState(!0),[g,y]=j.useState(!1),[m,v]=j.useState(!1),[S,w]=j.useState("");j.useEffect(()=>{(async()=>{try{const{data:O,error:P}=await D.from("exams").select("*").neq("status","completed").order("date",{ascending:!1});if(P)throw P;const M=O.map(T=>({id:T.id,name:T.name,subject:T.subject,class:T.class,totalMarks:T.total_marks,passingMarks:T.passing_marks,date:T.date}));i(M)}catch{I.error("Failed to load exams")}finally{x(!1)}})()},[]),j.useEffect(()=>{if(!o){u([]),d({});return}(async()=>{y(!0);try{const O=a.find(X=>X.id===o);if(!O)return;const{data:P,error:M}=await D.from("students").select("*").eq("class",O.class).eq("status","active").order("name");if(M)throw M;const{data:T,error:F}=await D.from("grades").select("id, student_id, marks_obtained").eq("exam_id",o);if(F)throw F;const q=P.map(X=>({id:X.id,name:X.name,rollNumber:X.roll_number,class:X.class,section:X.section,avatar:X.avatar}));u(q);const $={},U={};T.forEach(X=>{$[X.student_id]=X.marks_obtained.toString(),U[X.student_id]=X.id}),d($),p(U)}catch(O){I.error(`Error loading data: ${O.message}`)}finally{y(!1)}})()},[o,a]);const N=(E,O)=>{d(P=>({...P,[E]:O}))},_=(E,O)=>{const P=E/O*100;let M=0,T="F";return P>=90?(M=4,T="A+"):P>=80?(M=3.5,T="A"):P>=70?(M=3,T="B+"):P>=60?(M=2.5,T="B"):P>=50?(M=2,T="C+"):P>=40?(M=1.5,T="C"):P>=33&&(M=1,T="D"),{percentage:parseFloat(P.toFixed(2)),gpa:M,grade:T}},C=async()=>{const E=a.find(M=>M.id===o);if(!E)return;v(!0);const O=[],P=[];Object.entries(h).forEach(([M,T])=>{const F=parseFloat(T);if(isNaN(F)||F>E.totalMarks)return;const{percentage:q,gpa:$,grade:U}=_(F,E.totalMarks),X=f[M],K={student_id:M,exam_id:o,marks_obtained:F,percentage:q,gpa:$,grade:U,date:E.date,school_id:n==null?void 0:n.school_id};X?O.push({...K,id:X}):P.push(K)});try{if(O.length>0){const{error:M}=await D.from("grades").upsert(O);if(M)throw M}if(P.length>0){const{error:M}=await D.from("grades").insert(P);if(M)throw M}I.success(`Successfully saved grades for ${O.length+P.length} students.`),t(),e()}catch(M){I.error(`Failed to save grades: ${M.message}`)}finally{v(!1)}},A=c.filter(E=>E.name.toLowerCase().includes(S.toLowerCase())||E.rollNumber.includes(S)),k=a.find(E=>E.id===o);return s.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Select Exam"}),s.jsxs(le,{value:o,onChange:E=>l(E.target.value),disabled:b,children:[s.jsx("option",{value:"",children:"-- Choose Exam --"}),a.map(E=>s.jsxs("option",{value:E.id,children:[E.name," - ",E.subject," (Class ",E.class,")"]},E.id))]})]}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Search Student"}),s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx(J,{value:S,onChange:E=>w(E.target.value),placeholder:"Name or Roll No...",className:"pl-10"})]})]})]}),s.jsx("div",{className:"flex-grow overflow-hidden border border-slate-200 rounded-lg bg-slate-50 relative",children:o?g?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Bs,{className:"animate-spin text-blue-600",size:32})}):c.length===0?s.jsx("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:s.jsxs("p",{children:["No active students found in Class ",k==null?void 0:k.class,"."]})}):s.jsx("div",{className:"absolute inset-0 overflow-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200 bg-white",children:[s.jsx("thead",{className:"bg-slate-50 sticky top-0 z-10 shadow-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider w-20",children:"Roll No"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Student Name"}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider w-40",children:["Marks (Max: ",k==null?void 0:k.totalMarks,")"]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider w-32",children:"Grade"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:A.map(E=>{const O=parseFloat(h[E.id]||"0"),{grade:P}=_(O,(k==null?void 0:k.totalMarks)||100),M=O>((k==null?void 0:k.totalMarks)||100);return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-3 text-sm text-slate-600 font-mono",children:E.rollNumber}),s.jsx("td",{className:"px-6 py-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-500 mr-3",children:E.avatar?s.jsx("img",{src:E.avatar,className:"w-full h-full object-cover rounded-full"}):E.name.charAt(0)}),s.jsx("span",{className:"text-sm font-medium text-slate-900",children:E.name})]})}),s.jsx("td",{className:"px-6 py-3",children:s.jsx(J,{type:"number",min:"0",max:k==null?void 0:k.totalMarks,value:h[E.id]||"",onChange:T=>N(E.id,T.target.value),className:`h-9 ${M?"border-red-500 focus:ring-red-500":""}`,placeholder:"0"})}),s.jsx("td",{className:"px-6 py-3",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P==="F"?"bg-red-100 text-red-800":P.startsWith("A")?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:h[E.id]?P:"-"})})]},E.id)})})]})}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400",children:[s.jsx(jn,{size:48,className:"mb-4 opacity-50"}),s.jsx("p",{children:"Please select an exam to start entering grades."})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[s.jsx(R,{variant:"secondary",onClick:e,children:"Cancel"}),s.jsxs(R,{onClick:C,loading:m,disabled:!o||c.length===0,children:[s.jsx(Di,{size:18,className:"mr-2"})," Save All Grades"]})]})]})},Dg=e=>({id:e.id,created_at:e.created_at,student_id:e.student_id,exam_id:e.exam_id,marks_obtained:e.marks_obtained,percentage:e.percentage,grade:e.grade,gpa:e.gpa,date:e.date,studentName:"",examName:"",subject:"",total_marks:0}),Cge=e=>({id:e.id,created_at:e.created_at,name:e.name,subject:e.subject,class:e.class,date:e.date,totalMarks:e.total_marks,passingMarks:e.passing_marks,duration:e.duration,status:e.status}),kge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[u,h]=j.useState(""),[d,f]=j.useState(""),[p,b]=j.useState(!1),[x,g]=j.useState(!1),[y,m]=j.useState(null),[v,S]=j.useState(!1),[w,N]=j.useState(!1),[_,C]=B5(),A=_.get("examId"),k=j.useRef(null),E=async()=>{if(e){c(!0);try{let z=D.from("grades").select("*").order("date",{ascending:!1}),H=D.from("students").select("id, name, user_id"),Q=D.from("exams").select("id, name, subject, class, total_marks, passing_marks, date, duration, status");e.role!=="system_admin"&&e.school_id&&(z=z.eq("school_id",e.school_id),H=H.eq("school_id",e.school_id),Q=Q.eq("school_id",e.school_id));const[{data:se,error:ue},{data:ye,error:me},{data:L,error:W}]=await Promise.all([z,H,Q]);if(ue)throw ue;if(me)throw me;if(W)throw W;r((se||[]).map(Dg)),a(ye||[]),o((L||[]).map(Cge)),A&&(f(A),g(!0))}catch(z){const H=(z==null?void 0:z.message)||(typeof z=="object"?JSON.stringify(z):String(z));I.error(`Failed to load data: ${H}`)}finally{c(!1)}}};j.useEffect(()=>{E()},[e]);const O=j.useMemo(()=>t.map(z=>{const H=n.find(se=>se.id===z.student_id),Q=i.find(se=>se.id===z.exam_id);return{...z,studentName:(H==null?void 0:H.name)||z.student_id,examName:(Q==null?void 0:Q.name)||z.exam_id,subject:(Q==null?void 0:Q.subject)||"N/A",total_marks:(Q==null?void 0:Q.totalMarks)||z.total_marks}}),[t,n,i]),P=O.filter(z=>{const H=z.studentName.toLowerCase().includes(u.toLowerCase())||z.subject.toLowerCase().includes(u.toLowerCase())||z.examName.toLowerCase().includes(u.toLowerCase()),Q=d?z.exam_id===d:!0;return H&&Q}),M=z=>{if(m(null),d){const H=d;i.find(se=>se.id===H)&&m({id:"",student_id:"",exam_id:H,marks_obtained:0,percentage:0,grade:"",gpa:0,date:"",studentName:"",examName:"",subject:"",total_marks:0})}b(!0)},T=z=>{m(z),b(!0)},F=z=>{m(z),S(!0)},q=()=>{f(""),C({})},$=async z=>{N(!0),await I.promise((async()=>{const H=i.find(me=>me.id===z.examId);if(!H)throw new Error("Selected exam not found.");const Q=z.marksObtained/H.totalMarks*100,se=Q>=90?4:Q>=80?3.5:Q>=70?3:Q>=60?2.5:Q>=50?2:Q>=40?1.5:0,ue=Q>=90?"A+":Q>=80?"A":Q>=70?"B+":Q>=60?"B":Q>=50?"C+":Q>=40?"C":Q>=33?"D":"F",ye={student_id:z.studentId,exam_id:z.examId,marks_obtained:z.marksObtained,percentage:parseFloat(Q.toFixed(2)),gpa:parseFloat(se.toFixed(2)),grade:ue,date:H.date,school_id:e==null?void 0:e.school_id};if(z.id){const{data:me,error:L}=await D.from("grades").update(ye).eq("id",z.id).select().single();if(L)throw L;r(W=>W.map(Y=>Y.id===z.id?Dg(me):Y))}else{const{data:me,error:L}=await D.from("grades").insert(ye).select().single();if(L)throw L;r(W=>[Dg(me),...W])}})(),{loading:"Saving grade...",success:"Grade saved successfully!",error:H=>`Failed to save grade: ${H.message}`}),N(!1),b(!1)},U=async()=>{y&&(N(!0),await I.promise((async()=>{const{error:z}=await D.from("grades").delete().eq("id",y.id);if(z)throw z;r(H=>H.filter(Q=>Q.id!==y.id))})(),{loading:"Deleting grade...",success:"Grade deleted successfully!",error:z=>`Failed to delete grade: ${z.message}`}),N(!1),S(!1),m(null))},X=z=>z.startsWith("A")?"bg-green-100 text-green-800":z.startsWith("B")?"bg-blue-100 text-blue-800":z.startsWith("C")?"bg-yellow-100 text-yellow-800":z.startsWith("D")?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",K=j.useMemo(()=>{const z=P.length>0?P:O;if(z.length===0)return{averageGPA:"0.00",passRate:"0.0",excellenceRate:"0.0"};const H=(z.reduce((ue,ye)=>ue+ye.gpa,0)/z.length).toFixed(2),Q=(z.filter(ue=>ue.percentage>=40).length/z.length*100).toFixed(1),se=(z.filter(ue=>ue.percentage>=80).length/z.length*100).toFixed(1);return{averageGPA:H,passRate:Q,excellenceRate:se}},[P,O]);return l?s.jsx(Re,{title:"Grades",headers:["Student","Exam","Marks","Grade","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Grades & GPA"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track student academic performance and grades"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{variant:"secondary",onClick:()=>g(!0),className:"bg-white border border-slate-200 text-blue-600 hover:bg-blue-50",children:[s.jsx(Jm,{size:20,className:"mr-2"})," Bulk Entry"]}),s.jsxs(R,{onClick:()=>M(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Grade"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Average GPA ",d?"(Filtered)":""]}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:K.averageGPA})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(ss,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Pass Rate ",d?"(Filtered)":""]}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[K.passRate,"%"]})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(wi,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Excellence ",d?"(Filtered)":""]}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:[K.excellenceRate,"%"]})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(wi,{className:"h-6 w-6 text-purple-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by student name, subject, or exam...",value:u,onChange:z=>h(z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:d,onChange:z=>f(z.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none max-w-xs",children:[s.jsx("option",{value:"",children:"All Exams"}),i.map(z=>s.jsxs("option",{value:z.id,children:[z.name," - ",z.subject]},z.id))]}),d&&s.jsx(R,{variant:"secondary",onClick:q,className:"px-3",children:s.jsx(Zm,{size:16})})]})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Exam"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Marks"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Grade"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[P.map(z=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-purple-500 to-purple-600 flex items-center justify-center text-white font-bold",children:z.studentName.charAt(0)}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:z.studentName}),s.jsx("div",{className:"text-sm text-gray-500",children:z.student_id})]})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:[s.jsx("div",{className:"text-sm text-gray-900",children:z.examName}),s.jsx("div",{className:"text-sm text-gray-500",children:z.subject})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[z.marks_obtained,"/",z.total_marks]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[z.percentage.toFixed(1),"%"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${X(z.grade)}`,children:z.grade})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>T(z),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>F(z),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},z.id)),P.length===0&&s.jsx("tr",{children:s.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:["No grades found. ",d?"Try adding grades for this exam.":""]})})]})]})})}),s.jsx(he,{isOpen:p,onClose:()=>b(!1),title:y?"Edit Grade":"Add New Grade",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var z;return(z=k.current)==null?void 0:z.requestSubmit()},loading:w,children:y?"Save Changes":"Add Grade"})]}),children:s.jsx(qM,{ref:k,grade:y,students:n,exams:i,onSubmit:$})}),s.jsx(he,{isOpen:x,onClose:()=>{g(!1),q()},title:"Bulk Grade Entry",size:"4xl",children:s.jsx(_ge,{initialExamId:d,onClose:()=>{g(!1),q()},onSuccess:()=>{E()}})}),s.jsx(he,{isOpen:v,onClose:()=>S(!1),title:"Delete Grade",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>S(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:U,loading:w,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the grade for ",s.jsx("strong",{children:y==null?void 0:y.studentName})," in ",s.jsx("strong",{children:y==null?void 0:y.subject}),"? This action cannot be undone."]})})]})},Mg=["January","February","March","April","May","June","July","August","September","October","November","December"],VM=j.forwardRef(({payroll:e,teachers:t,onSubmit:r},n)=>{var d;const[a,i]=j.useState({teacherId:((d=t[0])==null?void 0:d.id)||"",month:Mg[new Date().getMonth()],year:new Date().getFullYear(),bonus:0,deductions:0,status:"pending",paidDate:void 0}),[o,l]=j.useState(0);j.useEffect(()=>{if(e)i({teacherId:e.teacherId,month:e.month,year:e.year,bonus:e.bonus,deductions:e.deductions,status:e.status,paidDate:e.paidDate}),l(e.baseSalary);else{const f=t[0];i({teacherId:(f==null?void 0:f.id)||"",month:Mg[new Date().getMonth()],year:new Date().getFullYear(),bonus:0,deductions:0,status:"pending",paidDate:void 0}),l((f==null?void 0:f.salary)||0)}},[e,t]);const c=f=>{const{name:p,value:b,type:x}=f.target;if(p==="teacherId"){const g=t.find(y=>y.id===b);l((g==null?void 0:g.salary)||0)}i(g=>({...g,[p]:x==="number"?parseFloat(b):b}))},u=f=>{f.preventDefault(),r({...a,id:e==null?void 0:e.id})},h=o+a.bonus-a.deductions;return s.jsxs("form",{ref:n,onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"teacherId",children:"Teacher"}),s.jsx(le,{id:"teacherId",name:"teacherId",value:a.teacherId,onChange:c,disabled:!!e,children:t.map(f=>s.jsx("option",{value:f.id,children:f.name},f.id))}),!!e&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cannot change the teacher on an existing payroll record."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"month",children:"Month"}),s.jsx(le,{id:"month",name:"month",value:a.month,onChange:c,children:Mg.map(f=>s.jsx("option",{value:f,children:f},f))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"year",children:"Year"}),s.jsx(J,{id:"year",name:"year",type:"number",value:a.year,onChange:c})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Base Salary"}),s.jsxs("p",{className:"text-lg font-semibold",children:[o.toFixed(2)," Birr"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"bonus",children:"Bonus (Birr)"}),s.jsx(J,{id:"bonus",name:"bonus",type:"number",min:"0",value:a.bonus,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"deductions",children:"Deductions (Birr)"}),s.jsx(J,{id:"deductions",name:"deductions",type:"number",min:"0",value:a.deductions,onChange:c})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg text-right",children:[s.jsx(B,{children:"Net Salary"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[h.toFixed(2)," Birr"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:a.status,onChange:c,children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"paid",children:"Paid"})]})]}),a.status==="paid"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"paidDate",children:"Paid Date"}),s.jsx(J,{id:"paidDate",name:"paidDate",type:"date",value:a.paidDate,onChange:c})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});VM.displayName="PayrollForm";const WM=G.forwardRef(({payroll:e,schoolName:t,schoolAddress:r,schoolLogo:n},a)=>{const i=`PAY-${e.month.substring(0,3).toUpperCase()}-${e.year}-${e.id.substring(0,4)}`,o=e.baseSalary+e.bonus,l=e.deductions;return s.jsxs("div",{ref:a,className:"w-[210mm] bg-white p-10 font-sans text-slate-900 mx-auto border border-gray-200 print:border-none",children:[s.jsxs("div",{className:"text-center border-b-2 border-slate-200 pb-6 mb-8",children:[s.jsx("div",{className:"flex justify-center mb-3",children:n?s.jsx("img",{src:n,alt:"Logo",className:"h-16 w-16 object-contain"}):s.jsx(nr,{className:"scale-150"})}),s.jsx("h1",{className:"text-2xl font-bold uppercase text-slate-900",children:t}),s.jsx("p",{className:"text-sm text-slate-500",children:r}),s.jsxs("h2",{className:"text-lg font-bold text-slate-800 uppercase mt-4 bg-slate-100 inline-block px-6 py-1 rounded-full",children:["Payslip for ",e.month," ",e.year]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-12 gap-y-4 mb-8 text-sm",children:[s.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500",children:"Employee Name:"}),s.jsx("span",{className:"font-semibold text-slate-900",children:e.teacherName})]}),s.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500",children:"Employee ID:"}),s.jsx("span",{className:"font-mono text-slate-900",children:e.teacherId})]}),s.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500",children:"Designation:"}),s.jsx("span",{className:"text-slate-900",children:e.teacherRole||"Teacher"})]}),s.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500",children:"Payslip ID:"}),s.jsx("span",{className:"font-mono text-slate-900",children:i})]}),s.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500",children:"Payment Date:"}),s.jsx("span",{className:"text-slate-900",children:e.paidDate?De(e.paidDate):"Pending"})]}),s.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[s.jsx("span",{className:"font-bold text-slate-500",children:"Status:"}),s.jsx("span",{className:`font-bold uppercase text-xs px-2 py-0.5 rounded ${e.status==="paid"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:e.status})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"bg-slate-100 px-3 py-2 font-bold text-slate-700 uppercase text-xs mb-2",children:"Earnings"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("td",{className:"py-2 text-slate-600",children:"Basic Salary"}),s.jsx("td",{className:"py-2 text-right font-medium",children:$e(e.baseSalary)})]}),s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("td",{className:"py-2 text-slate-600",children:"Bonus / Allowance"}),s.jsx("td",{className:"py-2 text-right font-medium",children:$e(e.bonus)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-3 font-bold text-slate-800",children:"Total Earnings"}),s.jsx("td",{className:"py-3 text-right font-bold text-slate-800",children:$e(o)})]})]})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"bg-slate-100 px-3 py-2 font-bold text-slate-700 uppercase text-xs mb-2",children:"Deductions"}),s.jsx("table",{className:"w-full text-sm",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"border-b border-slate-100",children:[s.jsx("td",{className:"py-2 text-slate-600",children:"Tax / Other"}),s.jsxs("td",{className:"py-2 text-right font-medium text-red-600",children:["-",$e(e.deductions)]})]}),s.jsxs("tr",{className:"border-b border-slate-100 h-9",children:[s.jsx("td",{}),s.jsx("td",{})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"py-3 font-bold text-slate-800",children:"Total Deductions"}),s.jsxs("td",{className:"py-3 text-right font-bold text-red-600",children:["-",$e(l)]})]})]})})]})]}),s.jsxs("div",{className:"bg-slate-50 border border-slate-200 p-4 mb-12 flex justify-between items-center rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Net Salary Payable"}),s.jsx("p",{className:"text-xs text-slate-400 italic",children:"amount in words not implemented"})]}),s.jsx("div",{className:"text-2xl font-bold text-slate-900",children:$e(e.netSalary)})]}),s.jsxs("div",{className:"flex justify-between items-end mt-auto",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-40 border-b border-slate-400 mb-2"}),s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Employee Signature"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-40 border-b border-slate-400 mb-2"}),s.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Director / Principal"})]})]})]})});WM.displayName="Payslip";const Rg=e=>({id:e.id,created_at:e.created_at,teacherId:e.teacher_id,month:e.month,year:e.year,baseSalary:e.base_salary,bonus:e.bonus,deductions:e.deductions,netSalary:e.net_salary,status:e.status,paidDate:e.paid_date,teacherName:""}),Age=()=>{var K,z;const{schoolName:e,schoolAddress:t,schoolLogo:r,profile:n}=fe(),[a,i]=j.useState([]),[o,l]=j.useState([]),[c,u]=j.useState(!0),[h,d]=j.useState(""),[f,p]=j.useState("all"),[b,x]=j.useState(!1),[g,y]=j.useState(!1),[m,v]=j.useState(null),[S,w]=j.useState(!1),[N,_]=j.useState(!1),C=j.useRef(null),A=j.useRef(null),k=Un.useReactToPrint({content:()=>A.current,documentTitle:`Payslip-${m==null?void 0:m.id}`,onBeforeGetContent:()=>{if(!A.current)return I.error("Content not ready for printing"),Promise.reject()}});j.useEffect(()=>{(async()=>{if(n){u(!0);try{let Q=D.from("payrolls").select("*").order("year",{ascending:!1}).order("month",{ascending:!1}),se=D.from("teachers").select("id, name, salary, subject, join_date");n.role!=="system_admin"&&n.school_id&&(Q=Q.eq("school_id",n.school_id),se=se.eq("school_id",n.school_id));const[{data:ue,error:ye},{data:me,error:L}]=await Promise.all([Q,se]);if(ye)throw ye;if(L)throw L;i((ue||[]).map(Rg)),l(me.map(W=>({...W,joinDate:W.join_date}))||[])}catch(Q){const se=(Q==null?void 0:Q.message)||(typeof Q=="object"?JSON.stringify(Q):String(Q));I.error(`Failed to load data: ${se}`)}finally{u(!1)}}})()},[n]);const O=j.useMemo(()=>a.map(H=>{var Q;return{...H,teacherName:((Q=o.find(se=>se.id===H.teacherId))==null?void 0:Q.name)||"Unknown Teacher"}}),[a,o]).filter(H=>{const Q=H.teacherName.toLowerCase().includes(h.toLowerCase())||H.teacherId.toLowerCase().includes(h.toLowerCase())||H.month.toLowerCase().includes(h.toLowerCase()),se=f==="all"||H.status===f;return Q&&se}),P=()=>{v(null),x(!0)},M=H=>{v(H),x(!0)},T=H=>{v(H),y(!0)},F=H=>{v(H),w(!0)},q=async H=>{_(!0),await I.promise((async()=>{const Q=o.find(ue=>ue.id===H.teacherId);if(!Q)throw new Error("Selected teacher not found.");const se={teacher_id:H.teacherId,month:H.month,year:H.year,bonus:H.bonus,deductions:H.deductions,status:H.status,paid_date:H.status==="paid"?H.paidDate||new Date().toISOString().split("T")[0]:null,base_salary:Q.salary,net_salary:Q.salary+H.bonus-H.deductions,school_id:n==null?void 0:n.school_id};if(H.id){const{data:ue,error:ye}=await D.from("payrolls").update(se).eq("id",H.id).select().single();if(ye)throw ye;i(me=>me.map(L=>L.id===H.id?Rg(ue):L))}else{const{data:ue,error:ye}=await D.from("payrolls").insert(se).select().single();if(ye)throw ye;i(me=>[Rg(ue),...me])}})(),{loading:"Saving payroll...",success:"Payroll record saved successfully!",error:Q=>`Failed to save payroll: ${Q.message}`}),_(!1),x(!1)},$=async()=>{m&&(_(!0),await I.promise((async()=>{const{error:H}=await D.from("payrolls").delete().eq("id",m.id);if(H)throw H;i(Q=>Q.filter(se=>se.id!==m.id))})(),{loading:"Deleting payroll record...",success:"Payroll record deleted successfully!",error:H=>`Failed to delete record: ${H.message}`}),_(!1),w(!1),v(null))},U=a.filter(H=>H.status==="paid").reduce((H,Q)=>H+Q.netSalary,0),X=a.filter(H=>H.status==="pending").reduce((H,Q)=>H+Q.netSalary,0);return c?s.jsx(Re,{title:"Payroll",headers:["Teacher","Period","Net Salary","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 tracking-tight",children:"Payroll Management"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage teacher salaries and payments"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{variant:"secondary",className:"border border-slate-200",children:[s.jsx(Oa,{size:18,className:"mr-2"}),"Export"]}),s.jsxs(R,{onClick:P,className:"shadow-md shadow-blue-500/20",children:[s.jsx(Fe,{size:18,className:"mr-2"}),"Generate Payroll"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Paid"}),s.jsx("p",{className:"text-2xl font-bold text-emerald-600 mt-2",children:$e(U)})]}),s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg",children:s.jsx($t,{className:"h-6 w-6 text-emerald-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Pending"}),s.jsx("p",{className:"text-2xl font-bold text-amber-600 mt-2",children:$e(X)})]}),s.jsx("div",{className:"p-3 bg-amber-100 rounded-lg",children:s.jsx($t,{className:"h-6 w-6 text-amber-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"This Month"}),s.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-2",children:$e(U+X)})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx($t,{className:"h-6 w-6 text-blue-600"})})]})})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search by teacher name, ID, or month...",value:h,onChange:H=>d(H.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm transition-all"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:16}),s.jsxs("select",{value:f,onChange:H=>p(H.target.value),className:"pl-10 pr-8 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm bg-white appearance-none",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"pending",children:"Pending"})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Teacher"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden md:table-cell",children:"Period"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Net Salary"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:O.map(H=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:H.teacherName}),s.jsx("div",{className:"text-xs text-slate-500 font-mono",children:H.teacherId})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsxs("div",{className:"text-sm text-slate-900 font-medium",children:[H.month," ",H.year]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-slate-900",children:$e(H.netSalary)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(_t,{variant:H.status==="paid"?"success":H.status==="processing"?"warning":"danger",children:H.status.charAt(0).toUpperCase()+H.status.slice(1)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>T(H),title:"Print Payslip",children:s.jsx(Qr,{className:"h-4 w-4 text-slate-500 hover:text-blue-600"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>M(H),title:"Edit",children:s.jsx(ze,{className:"h-4 w-4 text-slate-500 hover:text-amber-600"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>F(H),title:"Delete",children:s.jsx(Te,{className:"h-4 w-4 text-slate-500 hover:text-rose-600"})})]})})]},H.id))})]})}),O.length===0&&s.jsx(Ui,{icon:$t,title:"No payroll records found",description:"Generate a new payroll record to get started.",actionLabel:"Generate Payroll",onAction:P})]}),s.jsx(he,{isOpen:b,onClose:()=>x(!1),title:m?"Edit Payroll":"Generate Payroll",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var H;return(H=C.current)==null?void 0:H.requestSubmit()},loading:N,children:m?"Save Changes":"Generate"})]}),children:s.jsx(VM,{ref:C,payroll:m,teachers:o,onSubmit:q})}),s.jsx(he,{isOpen:g,onClose:()=>y(!1),title:"Payslip",footer:s.jsxs(R,{onClick:k,children:[s.jsx(Qr,{size:18,className:"mr-2"})," Print Payslip"]}),children:s.jsx("div",{className:"bg-gray-100 p-4 rounded overflow-auto max-h-[60vh]",children:m&&s.jsx("div",{className:"scale-90 origin-top",children:s.jsx(WM,{ref:A,payroll:{...m,teacherRole:((K=o.find(H=>H.id===m.teacherId))==null?void 0:K.subject)+" Teacher",joinDate:(z=o.find(H=>H.id===m.teacherId))==null?void 0:z.joinDate},schoolName:e,schoolAddress:t,schoolLogo:r})})})}),s.jsx(he,{isOpen:S,onClose:()=>w(!1),title:"Delete Payroll Record",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>w(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:$,loading:N,children:"Delete Record"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the payroll record for ",s.jsx("strong",{children:m==null?void 0:m.teacherName})," for ",m==null?void 0:m.month,"? This action cannot be undone."]})})]})},Oge=({classes:e})=>{const t=e.map(r=>({name:r.name.replace("Class ",""),"Average GPA":r.averageGpa,"Student Count":r.studentCount})).slice(0,10);return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Class Performance Distribution"}),s.jsx("div",{style:{width:"100%",height:300},children:s.jsx(Rr,{children:s.jsxs(Ks,{data:t,margin:{top:5,right:20,left:-10,bottom:5},children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name",tick:{fontSize:12}}),s.jsx(pr,{yAxisId:"left",orientation:"left",stroke:"#8884d8",tick:{fontSize:12},domain:[0,4]}),s.jsx(pr,{yAxisId:"right",orientation:"right",stroke:"#82ca9d",tick:{fontSize:12}}),s.jsx(pt,{contentStyle:{backgroundColor:"#ffffff",border:"1px solid #e0e0e0",borderRadius:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},labelStyle:{fontWeight:"bold"}}),s.jsx(Yr,{wrapperStyle:{fontSize:"14px",paddingTop:"20px"}}),s.jsx(At,{yAxisId:"left",dataKey:"Average GPA",fill:"#8884d8",radius:[4,4,0,0]}),s.jsx(At,{yAxisId:"right",dataKey:"Student Count",fill:"#82ca9d",radius:[4,4,0,0]})]})})})]})},bh=["KG1","KG2","KG3","1","2","3","4","5","6","7","8","9","10","11","12"],GM=j.forwardRef(({schoolClass:e,teachers:t,onSubmit:r},n)=>{var m;const{profile:a}=fe(),[i,o]=j.useState(bh[0]),[l,c]=j.useState(""),[u,h]=j.useState(((m=t[0])==null?void 0:m.id)||""),[d,f]=j.useState(30),[p,b]=j.useState(a==null?void 0:a.school_id),[x,g]=j.useState([]);j.useEffect(()=>{(async()=>{const{data:S}=await D.from("sections").select("name").order("name");if(S&&S.length>0){const w=S.map(N=>N.name);g(w),e||c(w[0])}else g(["A","B","C"]),e||c("A")})()},[e]),j.useEffect(()=>{var v;if(e){const w=e.name.replace("Class ","").split("-");w.length>=2?(o(w[0]),c(w[1])):o(bh[0]),h(e.teacher.id),f(e.capacity||30),b(e.school_id||(a==null?void 0:a.school_id))}else o(bh[0]),h(((v=t[0])==null?void 0:v.id)||""),f(30),b(a==null?void 0:a.school_id)},[e,t,a]);const y=v=>{v.preventDefault();const S=`${i}-${l}`;r({name:S,teacher_id:u,capacity:d,id:e==null?void 0:e.id,school_id:p})};return s.jsxs("form",{ref:n,onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"grade",children:"Grade / Class"}),s.jsx(le,{id:"grade",value:i,onChange:v=>o(v.target.value),required:!0,children:bh.map(v=>s.jsx("option",{value:v,children:v},v))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"section",children:"Section"}),x.length>0?s.jsx(le,{id:"section",value:l,onChange:v=>c(v.target.value),required:!0,children:x.map(v=>s.jsx("option",{value:v,children:v},v))}):s.jsx("div",{className:"text-sm text-red-500 mt-2",children:"No sections found. Please add sections in Academics > Sections."})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"teacher_id",children:"Class Teacher"}),t.length>0?s.jsx(le,{id:"teacher_id",value:u,onChange:v=>h(v.target.value),required:!0,children:t.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))}):s.jsx("div",{className:"p-2 bg-red-50 border border-red-200 rounded-md text-red-600 text-xs",children:"No teachers available."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"capacity",children:"Capacity"}),s.jsx(J,{id:"capacity",type:"number",min:"1",value:d,onChange:v=>f(parseInt(v.target.value)),required:!0})]})]}),s.jsx("div",{className:"p-3 bg-blue-50 rounded-md border border-blue-100",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Preview:"})," Class ",i,"-",l]})}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});GM.displayName="ClassForm";const Ege=(e,t)=>{if(t===0)return 0;const r=e/t*100;return r>=90?4:r>=80?3.5:r>=70?3:r>=60?2.5:r>=50?2:r>=40?1.5:0},Pge=()=>{const{profile:e,user:t}=fe(),[r,n]=j.useState([]),[a,i]=j.useState([]),[o,l]=j.useState(!0),[c,u]=j.useState(""),[h,d]=j.useState(!1),[f,p]=j.useState(null),[b,x]=j.useState(!1),[g,y]=j.useState(!1),m=j.useRef(null),v=["system_admin","admin","principal"].includes((e==null?void 0:e.role)||"");j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){l(!0);try{let E=null;if(e.role==="teacher"&&t){const{data:z}=await D.from("teachers").select("id").eq("user_id",t.id).maybeSingle();E=z==null?void 0:z.id}let O=D.from("classes").select("*").eq("school_id",e.school_id);E&&(O=O.eq("teacher_id",E));const[{data:P,error:M},{data:T,error:F},{data:q,error:$},{data:U,error:X}]=await Promise.all([O,D.from("teachers").select("id, name").eq("school_id",e.school_id),D.from("students").select("id, class, section").eq("school_id",e.school_id),D.from("grades").select("student_id, marks_obtained, exams(subject, total_marks)").eq("school_id",e.school_id)]);if(M)throw new Error(M.message);if(F)throw new Error(F.message);if($)throw new Error($.message);if(X)throw new Error(X.message);i(T||[]);const K=(P||[]).map(z=>{const H=(q==null?void 0:q.filter(W=>`${W.class}-${W.section}`===z.name))||[],Q=new Set(H.map(W=>W.id)),se=(U==null?void 0:U.filter(W=>Q.has(W.student_id)))||[],ue=se.reduce((W,Y)=>{var Z;const V=((Z=Y.exams)==null?void 0:Z.total_marks)??100,ee=Ege(Y.marks_obtained,V);return W+ee},0),ye=se.length>0?ue/se.length:0,me=[...new Set(se.map(W=>{var Y;return(Y=W.exams)==null?void 0:Y.subject}).filter(Boolean))],L=T==null?void 0:T.find(W=>W.id===z.teacher_id);return{...z,name:`Class ${z.name}`,studentCount:H.length,averageGpa:ye,subjects:me,teacher:{id:(L==null?void 0:L.id)||"",name:(L==null?void 0:L.name)||"Unassigned"}}});n(K)}catch(E){I.error(`Failed to fetch class data: ${E.message}`)}finally{l(!1)}}})()},[e,t]);const S=r.filter(k=>k.name.toLowerCase().includes(c.toLowerCase())||k.teacher.name.toLowerCase().includes(c.toLowerCase())),w=()=>{p(null),d(!0)},N=k=>{p(k),d(!0)},_=k=>{p(k),x(!0)},C=async k=>{y(!0),await I.promise((async()=>{const E={name:k.name,teacher_id:k.teacher_id||null,capacity:k.capacity,school_id:e==null?void 0:e.school_id};if(k.id){const{data:O,error:P}=await D.from("classes").update(E).eq("id",k.id).select().single();if(P)throw new Error(P.message);n(M=>M.map(T=>{if(T.id===k.id){const F=a.find(q=>q.id===O.teacher_id);return{...T,name:`Class ${O.name}`,teacher:{id:(F==null?void 0:F.id)||O.teacher_id||"",name:(F==null?void 0:F.name)||"Unassigned"},capacity:O.capacity}}return T}))}else{const{data:O,error:P}=await D.from("classes").insert(E).select().single();if(P)throw new Error(P.message);const M=a.find(F=>F.id===O.teacher_id),T={...O,name:`Class ${O.name}`,studentCount:0,averageGpa:0,subjects:[],teacher:{id:(M==null?void 0:M.id)||O.teacher_id||"",name:(M==null?void 0:M.name)||"Unassigned"}};n(F=>[T,...F])}})(),{loading:"Saving class...",success:"Class saved successfully!",error:E=>`Failed to save class: ${E.message||"Unknown error"}`}),y(!1),d(!1)},A=async()=>{f&&(y(!0),await I.promise((async()=>{const{error:k}=await D.from("classes").delete().eq("id",f.id);if(k)throw new Error(k.message);n(E=>E.filter(O=>O.id!==f.id))})(),{loading:"Deleting class...",success:"Class deleted successfully!",error:k=>`Failed to delete class: ${k.message||"Unknown error"}`}),y(!1),x(!1),p(null))};return o?s.jsx(Bi,{title:"Classes"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Classes"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage classes, teachers, and student performance"})]}),v&&s.jsxs(R,{onClick:w,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Add New Class"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by class name or teacher...",value:c,onChange:k=>u(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),s.jsx(Oge,{classes:r}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[S.map(k=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col hover:shadow-lg transition-shadow duration-300",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:k.name}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-500",children:[s.jsx(Xb,{className:"w-4 h-4 text-yellow-400 fill-current"}),s.jsxs("span",{className:"font-semibold text-slate-700",children:[k.averageGpa.toFixed(2)," GPA"]})]})]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600 mb-4",children:[s.jsx(qt,{className:"w-4 h-4 mr-2 text-slate-400"}),s.jsxs("span",{children:["Teacher: ",s.jsx("strong",{children:k.teacher.name})]})]}),s.jsxs("div",{className:"flex items-center text-sm text-slate-600 mb-6",children:[s.jsx(Jr,{className:"w-4 h-4 mr-2 text-slate-400"}),s.jsxs("span",{children:[s.jsxs("strong",{children:[k.studentCount," / ",k.capacity]})," Students"]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-800 mb-3 flex items-center",children:[s.jsx(zs,{className:"w-4 h-4 mr-2 text-slate-400"}),"Subjects"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[k.subjects.map((E,O)=>s.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded-full text-xs font-medium",children:E},O)),k.subjects.length===0&&s.jsx("span",{className:"text-xs text-slate-500",children:"No subjects assigned"})]})]})]}),v&&s.jsxs("div",{className:"pt-4 border-t border-slate-100 mt-auto flex items-center justify-end",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>N(k),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>_(k),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},k.id)),S.length===0&&s.jsxs("div",{className:"col-span-full text-center py-12 text-slate-500",children:[s.jsx("p",{children:"No classes found."}),(e==null?void 0:e.role)==="teacher"&&s.jsx("p",{className:"text-xs mt-1",children:"You are only seeing classes assigned to you."})]})]}),s.jsx(he,{isOpen:h,onClose:()=>d(!1),title:f?"Edit Class":"Add New Class",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var k;return(k=m.current)==null?void 0:k.requestSubmit()},loading:g,disabled:a.length===0,children:f?"Save Changes":"Add Class"})]}),children:s.jsx(GM,{ref:m,schoolClass:f,teachers:a,onSubmit:C})}),s.jsx(he,{isOpen:b,onClose:()=>x(!1),title:"Delete Class",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>x(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:A,loading:g,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete ",s.jsx("strong",{children:f==null?void 0:f.name}),"? This will not delete the students in the class, but it will unassign them. This action cannot be undone."]})})]})},Tge=({onClose:e})=>{const{schoolName:t,academicYear:r}=fe(),[n,a]=j.useState(!1),[i,o]=j.useState([]),[l,c]=j.useState([]),[u,h]=j.useState(""),[d,f]=j.useState(""),[p,b]=j.useState(null),x=j.useRef(null),g=Un.useReactToPrint({content:()=>x.current,documentTitle:`Tabulation-Sheet-${u}-${d}`,pageStyle:`
      @page { size: A4 landscape; margin: 10mm; }
      @media print {
        body { -webkit-print-color-adjust: exact; }
        .no-print { display: none !important; }
      }
    `});j.useEffect(()=>{(async()=>{const{data:v}=await D.from("students").select("class, section").order("class");if(v){const w=Array.from(new Set(v.map(N=>`${N.class}-${N.section}`)));o(w)}const{data:S}=await D.from("exams").select("name").order("name");if(S){const w=Array.from(new Set(S.map(N=>N.name)));c(w)}})()},[]);const y=async()=>{if(!(!u||!d)){a(!0);try{const[m,v]=u.split("-"),{data:S,error:w}=await D.from("students").select("id, name, roll_number").eq("class",m).eq("section",v).eq("status","active").order("name");if(w)throw w;const{data:N,error:_}=await D.from("exams").select("id, subject, total_marks").eq("class",m).eq("name",d);if(_)throw _;if(!N||N.length===0){b({subjects:[],students:[]}),a(!1);return}const C=N.map(M=>M.id),{data:A,error:k}=await D.from("grades").select("student_id, exam_id, marks_obtained, grade").in("exam_id",C);if(k)throw k;const E=N.map(M=>M.subject).sort(),O=N.reduce((M,T)=>(M[T.id]=T,M),{}),P=S.map(M=>{const T={};let F=0,q=0;N.forEach(U=>{const X=A==null?void 0:A.find(K=>K.student_id===M.id&&K.exam_id===U.id);X?(T[U.subject]={marks:X.marks_obtained,grade:X.grade},F+=X.marks_obtained):T[U.subject]={marks:"-",grade:"-"},q+=U.total_marks});const $=q>0?F/q*100:0;return{...M,grades:T,totalObtained:F,totalMax:q,percentage:$.toFixed(1)}});P.sort((M,T)=>parseFloat(T.percentage)-parseFloat(M.percentage)),P.forEach((M,T)=>{M.rank=T+1}),b({subjects:E,students:P})}catch(m){console.error("Error generating sheet:",m)}finally{a(!1)}}};return s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mb-6 no-print",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Select Class"}),s.jsxs(le,{value:u,onChange:m=>h(m.target.value),children:[s.jsx("option",{value:"",children:"-- Choose Class --"}),i.map(m=>s.jsxs("option",{value:m,children:["Class ",m]},m))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Select Exam"}),s.jsxs(le,{value:d,onChange:m=>f(m.target.value),children:[s.jsx("option",{value:"",children:"-- Choose Exam --"}),l.map(m=>s.jsx("option",{value:m,children:m},m))]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{onClick:y,disabled:!u||!d||n,className:"flex-1",children:[n?s.jsx(Bs,{className:"animate-spin mr-2 h-4 w-4"}):s.jsx(Me,{className:"mr-2 h-4 w-4"}),"Generate"]}),s.jsx(R,{variant:"secondary",onClick:g,disabled:!p||p.students.length===0,children:s.jsx(Qr,{className:"h-4 w-4"})})]})]})}),s.jsx("div",{className:"flex-grow overflow-auto bg-gray-100 p-4 rounded-lg border border-gray-200",children:p?s.jsxs("div",{ref:x,className:"bg-white p-8 min-w-max mx-auto shadow-sm",children:[s.jsxs("div",{className:"text-center mb-6 border-b-2 border-gray-800 pb-4",children:[s.jsx("div",{className:"flex justify-center mb-2",children:s.jsx(nr,{})}),s.jsx("h1",{className:"text-2xl font-bold uppercase text-gray-900",children:t}),s.jsx("h2",{className:"text-lg font-semibold text-gray-700 mt-1",children:"Exam Tabulation Sheet"}),s.jsxs("div",{className:"flex justify-center gap-6 text-sm font-medium text-gray-600 mt-2",children:[s.jsxs("span",{children:["Exam: ",d]}),s.jsxs("span",{children:["Class: ",u]}),s.jsxs("span",{children:["Session: ",r]})]})]}),s.jsxs("table",{className:"w-full border-collapse border border-gray-300 text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-gray-300 px-2 py-2 w-10",children:"Rank"}),s.jsx("th",{className:"border border-gray-300 px-2 py-2 w-16",children:"Roll No"}),s.jsx("th",{className:"border border-gray-300 px-2 py-2 text-left",children:"Student Name"}),p.subjects.map(m=>s.jsx("th",{className:"border border-gray-300 px-2 py-2 w-16 text-center",children:m.substring(0,3).toUpperCase()},m)),s.jsx("th",{className:"border border-gray-300 px-2 py-2 w-16 bg-gray-50",children:"Total"}),s.jsx("th",{className:"border border-gray-300 px-2 py-2 w-16 bg-gray-50",children:"%"}),s.jsx("th",{className:"border border-gray-300 px-2 py-2 w-16 bg-gray-50",children:"Result"})]})}),s.jsx("tbody",{children:p.students.map(m=>s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold",children:m.rank}),s.jsx("td",{className:"border border-gray-300 px-2 py-1.5 text-center",children:m.roll_number}),s.jsx("td",{className:"border border-gray-300 px-2 py-1.5 font-medium",children:m.name}),p.subjects.map(v=>{var S;return s.jsx("td",{className:"border border-gray-300 px-2 py-1.5 text-center",children:((S=m.grades[v])==null?void 0:S.marks)||"-"},v)}),s.jsx("td",{className:"border border-gray-300 px-2 py-1.5 text-center font-bold bg-gray-50",children:m.totalObtained}),s.jsx("td",{className:"border border-gray-300 px-2 py-1.5 text-center bg-gray-50",children:m.percentage}),s.jsx("td",{className:`border border-gray-300 px-2 py-1.5 text-center font-bold ${parseFloat(m.percentage)>=40?"text-green-700":"text-red-700"}`,children:parseFloat(m.percentage)>=40?"PASS":"FAIL"})]},m.id))})]}),s.jsxs("div",{className:"mt-12 flex justify-between text-sm font-medium text-gray-600 pt-8",children:[s.jsx("div",{className:"text-center w-40 border-t border-gray-400 pt-2",children:"Class Teacher"}),s.jsx("div",{className:"text-center w-40 border-t border-gray-400 pt-2",children:"Exam Controller"}),s.jsx("div",{className:"text-center w-40 border-t border-gray-400 pt-2",children:"Principal"})]})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[s.jsx(jn,{size:48,className:"mb-4 opacity-50"}),s.jsx("p",{children:"Select a class and exam to generate the tabulation sheet."})]})})]})},$ge=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,i]=j.useState(""),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[h,d]=j.useState(null),[f,p]=j.useState(null),{schoolName:b,schoolAddress:x,schoolPhone:g,schoolEmail:y,schoolLogo:m,academicYear:v}=fe(),S=j.useRef(null);j.useEffect(()=>{(async()=>{n(!0);try{const{data:O,error:P}=await D.from("grades").select(`
            *,
            students ( id, name ),
            exams ( id, name, subject, total_marks )
          `).order("date",{ascending:!1}).limit(500);if(P)throw P;const M=(O||[]).map(T=>{var F,q,$,U;return{id:T.id,created_at:T.created_at,student_id:T.student_id,exam_id:T.exam_id,marks_obtained:T.marks_obtained,percentage:T.percentage,grade:T.grade,gpa:T.gpa,date:T.date,studentName:((F=T.students)==null?void 0:F.name)||"Unknown Student",examName:((q=T.exams)==null?void 0:q.name)||"Unknown Exam",subject:(($=T.exams)==null?void 0:$.subject)||"Unknown Subject",total_marks:((U=T.exams)==null?void 0:U.total_marks)||100}});t(M)}catch(O){const P=(O==null?void 0:O.message)||(typeof O=="object"?JSON.stringify(O):String(O));I.error(`Failed to load results: ${P}`)}finally{n(!1)}})()},[]);const w=e.filter(E=>E.studentName.toLowerCase().includes(a.toLowerCase())||E.subject.toLowerCase().includes(a.toLowerCase())||E.examName.toLowerCase().includes(a.toLowerCase())),N=j.useMemo(()=>{if(e.length===0)return{passRate:"0.0",topStudent:{name:"N/A",score:0},highestScore:"0.0",examsPublished:0,averageGpa:"0.00"};const O=e.filter(q=>q.gpa>1.5).length/e.length*100,P=e.reduce((q,$)=>$.percentage>q.percentage?$:q,e[0]),M={name:P.studentName,score:P.percentage},T=new Set(e.map(q=>q.exam_id)).size,F=e.reduce((q,$)=>q+$.gpa,0)/e.length;return{passRate:O.toFixed(1),topStudent:M,highestScore:M.score.toFixed(1),examsPublished:T,averageGpa:F.toFixed(2)}},[e]),_=E=>E.startsWith("A")?"bg-green-100 text-green-800":E.startsWith("B")?"bg-blue-100 text-blue-800":E.startsWith("C")?"bg-yellow-100 text-yellow-800":E.startsWith("D")?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800",C=async E=>{d(E),p(null),l(!0);const O=I.loading("Generating report card...");try{const[P,M,T]=await Promise.all([D.from("students").select("*").eq("id",E.student_id).single(),D.from("exams").select("*").eq("id",E.exam_id).single(),D.from("grades").select("*, exams(name, total_marks, subject)").eq("student_id",E.student_id)]);if(P.error)throw P.error;if(M.error)throw M.error;const F=M.data.name,q=(T.data||[]).map(X=>{var K,z,H;return{...X,subject:((K=X.exams)==null?void 0:K.subject)||"Unknown",examName:((z=X.exams)==null?void 0:z.name)||"Unknown",total_marks:((H=X.exams)==null?void 0:H.total_marks)||100}}).filter(X=>X.examName===F),$={id:P.data.id,name:P.data.name,email:P.data.email,class:P.data.class,section:P.data.section,rollNumber:P.data.roll_number,phone:P.data.phone,enrollmentDate:P.data.enrollment_date,issuedDate:P.data.issued_date,expiryDate:P.data.expiry_date,dob:P.data.dob,status:P.data.status,grade:P.data.grade,avatar:P.data.avatar,parent_name:P.data.parent_name,parent_email:P.data.parent_email,parent_phone:P.data.parent_phone},U={id:M.data.id,name:M.data.name,subject:M.data.subject,class:M.data.class,date:M.data.date,totalMarks:M.data.total_marks,passingMarks:M.data.passing_marks,duration:M.data.duration,status:M.data.status};p({student:$,exam:U,grades:q}),I.dismiss(O)}catch(P){console.error("Error loading report details:",P),I.error("Failed to load report details"),I.dismiss(O),l(!1)}},A=()=>{const O="data:text/csv;charset=utf-8,"+["Student","Exam","Subject","Score","Total","Percentage","Grade","GPA","Date"].join(",")+`
`+e.map(T=>`"${T.studentName}","${T.examName}","${T.subject}","${T.marks_obtained}","${T.total_marks}","${T.percentage}","${T.grade}","${T.gpa}","${T.date}"`).join(`
`),P=encodeURI(O),M=document.createElement("a");M.setAttribute("href",P),M.setAttribute("download","exam_results.csv"),document.body.appendChild(M),M.click(),document.body.removeChild(M),I.success("Results exported successfully!")},k=Un.useReactToPrint({content:()=>S.current,documentTitle:`Report-Card-${h==null?void 0:h.studentName}`,onBeforeGetContent:()=>{if(!S.current)return I.error("Content not ready for printing"),Promise.reject()}});return r?s.jsx(Re,{title:"Results",headers:["Student","Exam","Score","Grade","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Results"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"View and manage student exam results."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{onClick:()=>u(!0),variant:"secondary",className:"bg-white border border-slate-200 text-blue-600 hover:bg-blue-50",children:[s.jsx(j3,{size:20,className:"mr-2"}),"Tabulation Sheet"]}),s.jsxs(R,{onClick:A,variant:"secondary",children:[s.jsx(Oa,{size:20,className:"mr-2"}),"Export All"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Overall Pass Rate"}),s.jsxs("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:[N.passRate,"%"]})]}),s.jsx("div",{className:"p-3 rounded-lg bg-green-100",children:s.jsx(S3,{className:"h-6 w-6 text-green-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Highest Score"}),s.jsxs("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:[N.highestScore,"%"]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1 truncate",children:N.topStudent.name})]}),s.jsx("div",{className:"p-3 rounded-lg bg-yellow-100",children:s.jsx(Xb,{className:"h-6 w-6 text-yellow-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Exams Published"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:N.examsPublished})]}),s.jsx("div",{className:"p-3 rounded-lg bg-blue-100",children:s.jsx(wi,{className:"h-6 w-6 text-blue-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm p-5 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Average GPA"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900 mt-1",children:N.averageGpa})]}),s.jsx("div",{className:"p-3 rounded-lg bg-purple-100",children:s.jsx(X5,{className:"h-6 w-6 text-purple-600"})})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by student name or subject...",value:a,onChange:E=>i(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm"})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Exam"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Score"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Grade"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:w.map(E=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"font-medium text-slate-900",children:E.studentName}),s.jsx("div",{className:"text-xs text-slate-500 font-mono",children:E.student_id})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"font-medium text-slate-900",children:E.examName}),s.jsx("div",{className:"text-xs text-slate-500",children:E.subject})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"font-medium text-slate-900",children:[E.marks_obtained," / ",E.total_marks]}),s.jsxs("div",{className:"text-xs text-slate-500",children:[E.percentage.toFixed(1),"%"]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${_(E.grade)}`,children:E.grade})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsx("button",{onClick:()=>C(E),className:"text-blue-600 hover:text-blue-800 font-medium",children:"View Report"})})]},E.id))})]})}),w.length===0&&s.jsx("div",{className:"p-12 text-center",children:s.jsx("p",{className:"text-slate-500",children:"No results found for your search."})})]}),s.jsx(he,{isOpen:c,onClose:()=>u(!1),title:"Exam Tabulation Sheet",size:"full",children:s.jsx(Tge,{onClose:()=>u(!1)})}),h&&s.jsx(he,{isOpen:o,onClose:()=>l(!1),title:"Student Report Card",footer:s.jsxs(R,{onClick:k,disabled:!f,children:[s.jsx(Qr,{className:"mr-2 h-4 w-4"})," Print Report Card"]}),children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"border border-slate-200 rounded-md overflow-hidden bg-slate-50 p-4 flex justify-center",children:f?s.jsx("div",{className:"scale-[0.6] origin-top",children:s.jsx(km,{student:f.student,exam:f.exam,grades:f.grades,schoolName:b,schoolAddress:x,schoolPhone:g,schoolEmail:y,schoolLogo:m,academicYear:v})}):s.jsxs("div",{className:"text-center p-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500",children:"Generating report card..."})]})}),s.jsx("div",{style:{display:"none"},children:f&&s.jsx(km,{ref:S,student:f.student,exam:f.exam,grades:f.grades,schoolName:b,schoolAddress:x,schoolPhone:g,schoolEmail:y,schoolLogo:m,academicYear:v})})]})})]})},Dge=()=>s.jsx("div",{className:"flex items-end h-8 space-x-px",children:[...Array(50)].map((e,t)=>s.jsx("div",{className:"bg-white",style:{width:"1.5px",height:`${Math.random()*70+30}%`}},t))}),Mge=e=>{if(!e)return"000000";let t=0;for(let n=0;n<e.length;n++){const a=e.charCodeAt(n);t=(t<<5)-t+a,t|=0}const r=Math.abs(t)%1e6;return String(r).padStart(6,"0")},Hw=G.forwardRef(({person:e,type:t,schoolName:r,schoolLogo:n},a)=>{const i=t==="Student",o=e,l=Mge(e.id),c={student:{bg:"bg-[#1a233c]",panelBg:"bg-orange-500",accentText:"text-orange-500",avatarText:"text-[#1a233c]"},teacher:{bg:"bg-gray-800",panelBg:"bg-teal-600",accentText:"text-teal-500",avatarText:"text-gray-800"}},u=i?c.student:c.teacher;return s.jsxs("div",{ref:a,className:`w-[512px] h-[300px] ${u.bg} rounded-2xl shadow-lg flex font-sans overflow-hidden`,children:[s.jsxs("div",{className:`w-2/5 ${u.panelBg} p-5 flex flex-col justify-between items-center relative`,children:[s.jsx("div",{className:`absolute top-0 right-0 h-full w-16 ${u.panelBg} transform -skew-x-12 -translate-x-8`}),s.jsxs("div",{className:"relative z-10 self-start flex items-center gap-2 text-white",children:[s.jsx("div",{className:"bg-white/20 p-1.5 rounded-md",children:n?s.jsx("img",{src:n,alt:"Logo",className:"h-8 w-8 object-contain"}):s.jsx(nr,{className:"!text-white"})}),s.jsx("div",{children:s.jsx("h1",{className:"font-bold text-xs leading-tight uppercase",style:{maxWidth:"100px"},children:r})})]}),s.jsx("div",{className:"relative z-10 w-32 h-32 rounded-full border-4 border-white bg-gray-200 flex items-center justify-center overflow-hidden",children:e.avatar?s.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):s.jsx("span",{className:`text-6xl font-bold ${u.avatarText} uppercase`,children:e.name.charAt(0)})}),s.jsx("div",{className:"relative z-10 h-8 text-center"})]}),s.jsxs("div",{className:"w-3/5 p-5 flex flex-col text-white",children:[s.jsx("div",{className:"text-right",children:s.jsx("p",{className:`font-bold text-lg ${u.accentText} tracking-widest`,children:i?"STUDENT":"TEACHER"})}),s.jsxs("div",{className:"flex-grow flex flex-col justify-center mt-2",children:[s.jsx("h2",{className:"text-3xl font-extrabold leading-tight uppercase",children:e.name.split(" ")[0]}),s.jsx("h2",{className:"text-3xl font-extrabold leading-tight uppercase",children:e.name.split(" ").slice(1).join(" ")}),s.jsxs("div",{className:"mt-6 space-y-2 text-sm",children:[s.jsxs("div",{className:"grid grid-cols-3",children:[s.jsx("p",{className:"font-semibold text-gray-300 col-span-1",children:"ID No."}),s.jsx("p",{className:"font-medium col-span-2",children:l})]}),s.jsxs("div",{className:"grid grid-cols-3",children:[s.jsx("p",{className:"font-semibold text-gray-300 col-span-1",children:i?"Class":"Subject"}),s.jsx("p",{className:"font-medium col-span-2",children:i?`${o.class}-${o.section}`:e.subject})]}),s.jsxs("div",{className:"grid grid-cols-3",children:[s.jsx("p",{className:"font-semibold text-gray-300 col-span-1",children:"D.O.B."}),s.jsx("p",{className:"font-medium col-span-2",children:e.dob})]})]})]}),s.jsxs("div",{className:"mt-auto flex justify-between items-end",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:[s.jsxs("p",{children:["Issued: ",e.issuedDate]}),s.jsxs("p",{children:["Expires: ",e.expiryDate]})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx(Dge,{}),s.jsx("p",{className:"text-[8px] tracking-widest text-gray-400 mt-1",children:l})]})]})]})]})});Hw.displayName="IdCard";const Rge=e=>({id:e.id,created_at:e.created_at,name:e.name,email:e.email,class:e.class,section:e.section,rollNumber:e.roll_number,phone:e.phone,enrollmentDate:e.enrollment_date,issuedDate:e.issued_date,expiryDate:e.expiry_date,dob:e.dob,status:e.status,avatar:e.avatar,grade:e.grade,user_id:e.user_id}),Ige=e=>({id:e.id,created_at:e.created_at,name:e.name,email:e.email,subject:e.subject,phone:e.phone,joinDate:e.join_date,issuedDate:e.issued_date,expiryDate:e.expiry_date,dob:e.dob,salary:e.salary,status:e.status,avatar:e.avatar,user_id:e.user_id}),KM=G.forwardRef(({people:e,type:t,schoolName:r,schoolLogo:n},a)=>s.jsx("div",{ref:a,children:s.jsx("div",{className:"print-grid-container",children:e.map(i=>s.jsx("div",{className:"print-card-wrapper",children:s.jsx(Hw,{person:i,type:t,schoolName:r,schoolLogo:n})},i.id))})}));KM.displayName="PrintableGrid";const Lge=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState("students"),[c,u]=j.useState(""),[h,d]=j.useState(null),{schoolName:f,schoolLogo:p,profile:b}=fe();j.useEffect(()=>{(async()=>{if(b){i(!0);try{let A=D.from("students").select("*"),k=D.from("teachers").select("*");b.role!=="system_admin"&&b.school_id&&(A=A.eq("school_id",b.school_id),k=k.eq("school_id",b.school_id));const[{data:E,error:O},{data:P,error:M}]=await Promise.all([A,k]);if(O)throw O;if(M)throw M;const T=(E||[]).map(Rge),F=(P||[]).map(Ige);t(T),n(F),d((o==="students"?T:F)[0]||null)}catch(A){const k=(A==null?void 0:A.message)||(typeof A=="object"?JSON.stringify(A):String(A));I.error(`Failed to load data: ${k}`),console.error("Error fetching ID card data:",A)}finally{i(!1)}}})()},[b,o]);const g=(o==="students"?e:r).filter(C=>C.name.toLowerCase().includes(c.toLowerCase())||C.id.toLowerCase().includes(c.toLowerCase())),y=j.useRef(null),m=j.useRef(null),v=Un.useReactToPrint({content:()=>y.current,documentTitle:`${h==null?void 0:h.name}-ID-Card`||"ID-Card",onBeforeGetContent:()=>{if(!y.current)return I.error("Content not ready for printing"),Promise.reject()}}),S=Un.useReactToPrint({content:()=>m.current,documentTitle:`${o}-ID-Cards-All`,pageStyle:"@page { size: A4 portrait; margin: 1cm; }",onBeforeGetContent:()=>{if(!m.current)return I.error("Content not ready for printing"),Promise.reject()}}),w=C=>{d(C)},N=C=>{l(C),u("");const A=C==="students"?e[0]:r[0];d(A||null)},_=o==="students"?"orange":"teal";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"ID Card Generator"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Create and print ID cards for students and teachers."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-12rem)]",children:[s.jsxs("div",{className:"lg:col-span-1 bg-white rounded-lg shadow-sm border border-slate-200 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200",children:[s.jsxs("div",{className:"flex border-b border-slate-200",children:[s.jsxs("button",{onClick:()=>N("students"),className:`flex-1 py-2.5 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${o==="students"?"border-b-2 border-orange-600 text-orange-700":"text-slate-500 hover:text-orange-600"}`,children:[s.jsx(Vt,{size:16})," Students"]}),s.jsxs("button",{onClick:()=>N("teachers"),className:`flex-1 py-2.5 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${o==="teachers"?"border-b-2 border-teal-600 text-teal-700":"text-slate-500 hover:text-teal-600"}`,children:[s.jsx(qt,{size:16})," Teachers"]})]}),s.jsxs("div",{className:"relative mt-4",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:`Search ${o}...`,value:c,onChange:C=>u(C.target.value),className:`w-full pl-10 pr-4 py-2 border bg-slate-50 border-slate-200 rounded-lg focus:ring-2 focus:border-transparent outline-none text-sm ${_==="orange"?"focus:ring-orange-500":"focus:ring-teal-500"}`})]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto scrollbar-thin scrollbar-thumb-slate-200",children:a?s.jsx("div",{className:"p-4 space-y-2",children:[...Array(5)].map((C,A)=>s.jsx(je,{className:"h-14 w-full"},A))}):s.jsxs(s.Fragment,{children:[g.map(C=>s.jsxs("div",{onClick:()=>w(C),className:`flex items-center p-4 cursor-pointer border-l-4 transition-colors ${(h==null?void 0:h.id)===C.id?_==="orange"?"bg-orange-50 border-orange-600":"bg-teal-50 border-teal-600":"border-transparent hover:bg-slate-50"}`,children:[s.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-white font-bold uppercase transition-colors overflow-hidden ${(h==null?void 0:h.id)===C.id?_==="orange"?"bg-orange-600":"bg-teal-600":"bg-slate-400"}`,children:C.avatar?s.jsx("img",{src:C.avatar,alt:C.name,className:"w-full h-full object-cover"}):C.name.charAt(0)}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"font-medium text-slate-900",children:C.name}),s.jsx("p",{className:"text-sm text-slate-500",children:C.id})]})]},C.id)),g.length===0&&s.jsx("div",{className:"p-8 text-center text-slate-500",children:s.jsxs("p",{children:["No ",o," found."]})})]})})]}),s.jsx("div",{className:"lg:col-span-2 bg-slate-50 rounded-lg flex flex-col items-center justify-center p-6 border border-slate-200",children:a?s.jsx(je,{className:"w-[512px] h-[300px]"}):h?s.jsxs("div",{className:"w-full flex flex-col items-center",children:[s.jsx(Hw,{ref:y,person:h,type:o==="students"?"Student":"Teacher",schoolName:f,schoolLogo:p}),s.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4 w-full max-w-sm",children:[s.jsxs("button",{onClick:v,className:`flex-1 flex items-center justify-center px-6 py-3 text-white rounded-lg transition-colors shadow-sm ${_==="orange"?"bg-orange-600 hover:bg-orange-700":"bg-teal-600 hover:bg-teal-700"}`,children:[s.jsx(Qr,{size:20,className:"mr-2"})," Print Card"]}),s.jsxs("button",{onClick:S,className:`flex-1 flex items-center justify-center px-6 py-3 rounded-lg transition-colors shadow-sm ${_==="orange"?"bg-orange-200 text-orange-800 hover:bg-orange-300":"bg-teal-200 text-teal-800 hover:bg-teal-300"}`,children:[s.jsx(Qr,{size:20,className:"mr-2"})," Print All"]})]})]}):s.jsxs("div",{className:"text-center text-slate-500",children:[s.jsx(Vb,{size:48,className:"mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-slate-900",children:"ID Card Preview"}),s.jsxs("p",{children:["No ",o," available to display."]})]})})]}),s.jsx("div",{style:{display:"none"},children:s.jsx(KM,{ref:m,people:g,type:o==="students"?"Student":"Teacher",schoolName:f,schoolLogo:p})})]})},HM=j.forwardRef(({course:e,teachers:t,departments:r,onSubmit:n},a)=>{var u,h;const[i,o]=j.useState({name:"",code:"",teacherId:((u=t[0])==null?void 0:u.id)||"",departmentId:((h=r[0])==null?void 0:h.id)||"",credits:3});j.useEffect(()=>{var d,f;o(e?{name:e.name,code:e.code,teacherId:e.teacherId,departmentId:e.departmentId,credits:e.credits}:{name:"",code:"",teacherId:((d=t[0])==null?void 0:d.id)||"",departmentId:((f=r[0])==null?void 0:f.id)||"",credits:3})},[e,t,r]);const l=d=>{const{name:f,value:p,type:b}=d.target;o(x=>({...x,[f]:b==="number"?parseInt(p):p}))},c=d=>{d.preventDefault(),n({...i,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:a,onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"name",children:"Course Name"}),s.jsx(J,{id:"name",name:"name",value:i.name,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"code",children:"Course Code"}),s.jsx(J,{id:"code",name:"code",value:i.code,onChange:l,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"teacherId",children:"Teacher"}),s.jsx(le,{id:"teacherId",name:"teacherId",value:i.teacherId,onChange:l,children:t.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"departmentId",children:"Department"}),s.jsx(le,{id:"departmentId",name:"departmentId",value:i.departmentId,onChange:l,children:r.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"credits",children:"Credits"}),s.jsx(J,{id:"credits",name:"credits",type:"number",min:"1",max:"5",value:i.credits,onChange:l,required:!0})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});HM.displayName="CourseForm";const Ig=e=>({id:e.id,created_at:e.created_at,name:e.name,code:e.code,teacherId:e.teacher_id,credits:e.credits,departmentId:e.department_id,teacherName:"",departmentName:""}),Fge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[u,h]=j.useState(""),[d,f]=j.useState(!1),[p,b]=j.useState(null),[x,g]=j.useState(!1),[y,m]=j.useState(!1),v=j.useRef(null),S=["system_admin","admin","principal"].includes((e==null?void 0:e.role)||"");j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){c(!0);try{const[{data:P,error:M},{data:T,error:F},{data:q,error:$}]=await Promise.all([D.from("courses").select("*").eq("school_id",e.school_id).order("name"),D.from("teachers").select("id, name").eq("school_id",e.school_id),D.from("departments").select("id, name").eq("school_id",e.school_id)]);if(M)throw M;if(F)throw F;if($)throw $;r((P||[]).map(Ig)),a(T||[]),o(q||[])}catch(P){I.error(`Failed to load data: ${P.message}`)}finally{c(!1)}}})()},[e]);const N=j.useMemo(()=>t.map(O=>{var P,M;return{...O,teacherName:((P=n.find(T=>T.id===O.teacherId))==null?void 0:P.name)||"N/A",departmentName:((M=i.find(T=>T.id===O.departmentId))==null?void 0:M.name)||"N/A"}}),[t,n,i]).filter(O=>O.name.toLowerCase().includes(u.toLowerCase())||O.code.toLowerCase().includes(u.toLowerCase())||O.teacherName.toLowerCase().includes(u.toLowerCase())),_=()=>{b(null),f(!0)},C=O=>{b(O),f(!0)},A=O=>{b(O),g(!0)},k=async O=>{m(!0),await I.promise((async()=>{const P={name:O.name,code:O.code,teacher_id:O.teacherId||null,department_id:O.departmentId||null,credits:O.credits,school_id:e==null?void 0:e.school_id};if(O.id){const{data:M,error:T}=await D.from("courses").update(P).eq("id",O.id).select().single();if(T)throw T;r(F=>F.map(q=>q.id===O.id?Ig(M):q))}else{const{data:M,error:T}=await D.from("courses").insert(P).select().single();if(T)throw T;r(F=>[Ig(M),...F])}})(),{loading:"Saving course...",success:"Course saved successfully!",error:P=>`Failed to save course: ${P.message}`}),m(!1),f(!1)},E=async()=>{p&&(m(!0),await I.promise((async()=>{const{error:O}=await D.from("courses").delete().eq("id",p.id);if(O)throw O;r(P=>P.filter(M=>M.id!==p.id))})(),{loading:"Deleting course...",success:"Course deleted successfully!",error:O=>`Failed to delete course: ${O.message}`}),m(!1),g(!1),b(null))};return l?s.jsx(Re,{title:"Courses",headers:["Course","Teacher","Department","Credits","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Courses"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic courses and curriculum"})]}),S&&s.jsxs(R,{onClick:_,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Add Course"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search courses by name, code, or teacher...",value:u,onChange:O=>h(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Teacher"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Department"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Credits"}),S&&s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(O=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(zs,{size:20,className:"text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.name}),s.jsx("div",{className:"text-sm text-gray-500",children:O.code})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{size:16,className:"text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-900",children:O.teacherName})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Q5,{size:16,className:"text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-900",children:O.departmentName})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xb,{size:16,className:"text-yellow-400 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:O.credits})]})}),S&&s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>C(O),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>A(O),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},O.id))})]})})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:p?"Edit Course":"Add New Course",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var O;return(O=v.current)==null?void 0:O.requestSubmit()},loading:y,children:p?"Save Changes":"Add Course"})]}),children:s.jsx(HM,{ref:v,course:p,teachers:n,departments:i,onSubmit:k})}),s.jsx(he,{isOpen:x,onClose:()=>g(!1),title:"Delete Course",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:E,loading:y,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete ",s.jsx("strong",{children:p==null?void 0:p.name}),"? This action cannot be undone."]})})]})},YM=j.forwardRef(({department:e,teachers:t,onSubmit:r},n)=>{var c;const[a,i]=j.useState({name:"",headOfDepartmentId:((c=t[0])==null?void 0:c.id)||"",description:""});j.useEffect(()=>{var u;i(e?{name:e.name,headOfDepartmentId:e.headOfDepartmentId,description:e.description}:{name:"",headOfDepartmentId:((u=t[0])==null?void 0:u.id)||"",description:""})},[e,t]);const o=u=>{const{name:h,value:d}=u.target;i(f=>({...f,[h]:d}))},l=u=>{u.preventDefault(),r({...a,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:n,onSubmit:l,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"name",children:"Department Name"}),s.jsx(J,{id:"name",name:"name",value:a.name,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"headOfDepartmentId",children:"Head of Department (HOD)"}),s.jsx(le,{id:"headOfDepartmentId",name:"headOfDepartmentId",value:a.headOfDepartmentId,onChange:o,disabled:t.length===0,children:t.length>0?t.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id)):s.jsx("option",{children:"No teachers available"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"description",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:a.description,onChange:o,rows:3,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});YM.displayName="DepartmentForm";const Lg=(e,t)=>{var r,n,a;return{id:e.id,created_at:e.created_at,name:e.name,headOfDepartmentId:e.head_of_department_id,headOfDepartmentName:((r=t.find(i=>i.id===e.head_of_department_id))==null?void 0:r.name)||"N/A",description:e.description,courseCount:((a=(n=e.courses)==null?void 0:n[0])==null?void 0:a.count)||0}},zge=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState(""),[c,u]=j.useState(!1),[h,d]=j.useState(null),[f,p]=j.useState(!1),[b,x]=j.useState(!1),g=j.useRef(null);j.useEffect(()=>{(async()=>{i(!0);try{const[{data:C,error:A},{data:k,error:E}]=await Promise.all([D.from("departments").select("*, courses(count)"),D.from("teachers").select("id, name")]);if(A)throw new Error(`Departments fetch failed: ${A.message}`);if(E)throw new Error(`Teachers fetch failed: ${E.message}`);const O=k||[];n(O);const P=(C||[]).map(M=>Lg(M,O));t(P)}catch(C){const A=(C==null?void 0:C.message)||(typeof C=="object"?JSON.stringify(C):String(C));I.error(`Failed to load data: ${A}`),console.error("Error fetching departments data:",C)}finally{i(!1)}})()},[]);const y=e.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())||_.headOfDepartmentName.toLowerCase().includes(o.toLowerCase())),m=()=>{if(r.length===0){I.error("Please add at least one teacher before creating a department.");return}d(null),u(!0)},v=_=>{d(_),u(!0)},S=_=>{d(_),p(!0)},w=async _=>{x(!0),await I.promise((async()=>{const C={name:_.name,head_of_department_id:_.headOfDepartmentId||null,description:_.description};if(_.id){const{data:A,error:k}=await D.from("departments").update(C).eq("id",_.id).select("*, courses(count)").single();if(k)throw k;const E=Lg(A,r);t(O=>O.map(P=>P.id===_.id?E:P))}else{const{data:A,error:k}=await D.from("departments").insert(C).select("*, courses(count)").single();if(k)throw k;const E=Lg(A,r);t(O=>[E,...O])}})(),{loading:"Saving department...",success:"Department saved successfully!",error:C=>`Failed to save department: ${C.message}`}),x(!1),u(!1)},N=async()=>{h&&(x(!0),await I.promise((async()=>{const{error:_}=await D.from("departments").delete().eq("id",h.id);if(_)throw _;t(C=>C.filter(A=>A.id!==h.id))})(),{loading:"Deleting department...",success:"Department deleted successfully!",error:_=>`Failed to delete department: ${_.message}`}),x(!1),p(!1),d(null))};return a?s.jsx(Bi,{title:"Departments"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Departments"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic departments"})]}),s.jsxs(R,{onClick:m,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Add Department"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search departments by name or HOD...",value:o,onChange:_=>l(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(_=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col",children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-12 w-12 rounded-lg bg-purple-100 flex items-center justify-center",children:s.jsx(Ti,{size:24,className:"text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:_.name}),s.jsx("p",{className:"text-sm text-gray-500",children:_.id})]})]})}),s.jsx("p",{className:"text-sm text-gray-600 flex-grow mb-4",children:_.description}),s.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{size:14,className:"text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-500",children:"HOD:"}),s.jsx("span",{className:"font-medium text-gray-800 ml-2",children:_.headOfDepartmentName})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(qn,{size:14,className:"text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-500",children:"Courses:"}),s.jsx("span",{className:"font-medium text-gray-800 ml-2",children:_.courseCount})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-100 mt-auto flex items-center justify-end",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>v(_),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>S(_),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},_.id))}),s.jsx(he,{isOpen:c,onClose:()=>u(!1),title:h?"Edit Department":"Add New Department",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var _;return(_=g.current)==null?void 0:_.requestSubmit()},loading:b,disabled:r.length===0,children:h?"Save Changes":"Add Department"})]}),children:s.jsx(YM,{ref:g,department:h,teachers:r,onSubmit:w})}),s.jsx(he,{isOpen:f,onClose:()=>p(!1),title:"Delete Department",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:N,loading:b,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete ",s.jsx("strong",{children:h==null?void 0:h.name}),"? This action cannot be undone."]})})]})},Fg=["Fiction","Science","History","Biography","Fantasy","Mystery","Technology","Art"],XM=j.forwardRef(({book:e,onSubmit:t},r)=>{const[n,a]=j.useState({title:"",author:"",isbn:"",genre:Fg[0],quantity:1});j.useEffect(()=>{a(e?{title:e.title,author:e.author,isbn:e.isbn,genre:e.genre,quantity:e.quantity}:{title:"",author:"",isbn:"",genre:Fg[0],quantity:1})},[e]);const i=l=>{const{name:c,value:u,type:h}=l.target;a(d=>({...d,[c]:h==="number"?parseInt(u):u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"title",children:"Book Title"}),s.jsx(J,{id:"title",name:"title",value:n.title,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"author",children:"Author"}),s.jsx(J,{id:"author",name:"author",value:n.author,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"isbn",children:"ISBN"}),s.jsx(J,{id:"isbn",name:"isbn",value:n.isbn,onChange:i,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"genre",children:"Genre"}),s.jsx(le,{id:"genre",name:"genre",value:n.genre,onChange:i,children:Fg.map(l=>s.jsx("option",{value:l,children:l},l))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"quantity",children:"Quantity"}),s.jsx(J,{id:"quantity",name:"quantity",type:"number",min:"0",value:n.quantity,onChange:i,required:!0})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});XM.displayName="BookForm";const Bge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState(!1),[p,b]=j.useState(!1),x=j.useRef(null);j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){a(!0);try{const{data:_,error:C}=await D.from("library_books").select("*").eq("school_id",e.school_id).order("title");if(C)throw C;r(_)}catch(_){const C=(_==null?void 0:_.message)||(typeof _=="object"?JSON.stringify(_):String(_));I.error(`Failed to fetch books: ${C}`)}finally{a(!1)}}})()},[e]);const g=t.filter(N=>N.title.toLowerCase().includes(i.toLowerCase())||N.author.toLowerCase().includes(i.toLowerCase())||N.isbn.includes(i)),y=()=>{h(null),c(!0)},m=N=>{h(N),c(!0)},v=N=>{h(N),f(!0)},S=async N=>{b(!0),await I.promise((async()=>{const _={...N,available:N.quantity,status:N.quantity>0?"available":"unavailable",school_id:e==null?void 0:e.school_id};if(N.id){const{data:C,error:A}=await D.from("library_books").update(_).eq("id",N.id).select().single();if(A)throw A;r(k=>k.map(E=>E.id===N.id?C:E))}else{const{data:C,error:A}=await D.from("library_books").insert(_).select().single();if(A)throw A;r(k=>[C,...k])}})(),{loading:"Saving book...",success:"Book saved successfully!",error:_=>`Failed to save book: ${_.message}`}),b(!1),c(!1)},w=async()=>{u&&(b(!0),await I.promise((async()=>{const{error:N}=await D.from("library_books").delete().eq("id",u.id);if(N)throw N;r(_=>_.filter(C=>C.id!==u.id))})(),{loading:"Deleting book...",success:"Book deleted successfully!",error:N=>`Failed to delete book: ${N.message}`}),b(!1),f(!1),h(null))};return n?s.jsx(Re,{title:"Library",headers:["Book","Author","Genre","Availability","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Library"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage library books and inventory"})]}),s.jsxs(R,{onClick:y,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Add Book"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search books by title, author, or ISBN...",value:i,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Book"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Author"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",children:"Genre"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Availability"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(N=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"h-10 w-10 rounded-lg bg-yellow-100 flex items-center justify-center",children:s.jsx(zs,{size:20,className:"text-yellow-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title}),s.jsx("div",{className:"text-sm text-gray-500",children:N.isbn})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{size:16,className:"text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-900",children:N.author})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell",children:s.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:N.genre})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm text-gray-900",children:[N.available," / ",N.quantity]}),s.jsx("span",{className:`text-xs font-semibold ${N.status==="available"?"text-green-600":"text-red-600"}`,children:N.status})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>m(N),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>v(N),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},N.id))})]})})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Book":"Add New Book",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var N;return(N=x.current)==null?void 0:N.requestSubmit()},loading:p,children:u?"Save Changes":"Add Book"})]}),children:s.jsx(XM,{ref:x,book:u,onSubmit:S})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:"Delete Book",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:w,loading:p,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete ",s.jsx("strong",{children:u==null?void 0:u.title}),"? This action cannot be undone."]})})]})},JM=j.forwardRef(({room:e,students:t,onSubmit:r},n)=>{const[a,i]=j.useState({roomNumber:"",building:"North Wing",capacity:2,occupants:[],status:"available"});j.useEffect(()=>{i(e||{roomNumber:"",building:"North Wing",capacity:2,occupants:[],status:"available"})},[e]);const o=u=>{const{name:h,value:d,type:f}=u.target;i(p=>({...p,[h]:f==="number"?parseInt(d):d}))},l=u=>{const h=Array.from(u.target.selectedOptions,d=>d.value);i(d=>({...d,occupants:h}))},c=u=>{u.preventDefault(),r({...a,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:n,onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"roomNumber",children:"Room Number"}),s.jsx(J,{id:"roomNumber",name:"roomNumber",value:a.roomNumber,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"building",children:"Building"}),s.jsxs(le,{id:"building",name:"building",value:a.building,onChange:o,children:[s.jsx("option",{children:"North Wing"}),s.jsx("option",{children:"South Wing"}),s.jsx("option",{children:"East Wing"}),s.jsx("option",{children:"West Wing"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"capacity",children:"Capacity"}),s.jsx(J,{id:"capacity",name:"capacity",type:"number",min:"1",max:"4",value:a.capacity,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:a.status,onChange:o,children:[s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"full",children:"Full"}),s.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"occupants",children:"Occupants"}),s.jsx(le,{id:"occupants",name:"occupants",value:a.occupants,onChange:l,multiple:!0,className:"h-32",children:t.map(u=>s.jsx("option",{value:u.id,children:u.name},u.id))}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Hold Ctrl/Cmd to select multiple students."})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});JM.displayName="HostelRoomForm";const zg=e=>({id:e.id,created_at:e.created_at,roomNumber:e.room_number,building:e.building,capacity:e.capacity,occupants:e.occupants,status:e.status}),Uge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[u,h]=j.useState(!1),[d,f]=j.useState(null),[p,b]=j.useState(!1),[x,g]=j.useState(!1),y=j.useRef(null);j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){o(!0);try{const[{data:E,error:O},{data:P,error:M}]=await Promise.all([D.from("hostel_rooms").select("*").eq("school_id",e.school_id).order("room_number"),D.from("students").select("id, name").eq("school_id",e.school_id)]);if(O)throw O;if(M)throw M;r(E.map(zg)||[]),a(P||[])}catch(E){const O=(E==null?void 0:E.message)||(typeof E=="object"?JSON.stringify(E):String(E));I.error(`Failed to load data: ${O}`)}finally{o(!1)}}})()},[e]);const m=t.filter(k=>k.roomNumber.toLowerCase().includes(l.toLowerCase())||k.building.toLowerCase().includes(l.toLowerCase())),v=()=>{f(null),h(!0)},S=k=>{f(k),h(!0)},w=k=>{f(k),b(!0)},N=async k=>{g(!0);const E={room_number:k.roomNumber,building:k.building,capacity:k.capacity,occupants:k.occupants,status:k.status,school_id:e==null?void 0:e.school_id};await I.promise((async()=>{if(k.id){const{data:O,error:P}=await D.from("hostel_rooms").update(E).eq("id",k.id).select().single();if(P)throw P;r(M=>M.map(T=>T.id===k.id?zg(O):T))}else{const{data:O,error:P}=await D.from("hostel_rooms").insert(E).select().single();if(P)throw P;r(M=>[zg(O),...M])}})(),{loading:"Saving room...",success:"Room saved successfully!",error:O=>`Failed to save room: ${O.message}`}),g(!1),h(!1)},_=async()=>{d&&(g(!0),await I.promise((async()=>{const{error:k}=await D.from("hostel_rooms").delete().eq("id",d.id);if(k)throw k;r(E=>E.filter(O=>O.id!==d.id))})(),{loading:"Deleting room...",success:"Room deleted successfully!",error:k=>`Failed to delete room: ${k.message}`}),g(!1),b(!1),f(null))},C=k=>{switch(k){case"available":return"bg-green-100 text-green-800";case"full":return"bg-red-100 text-red-800";case"maintenance":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},A=k=>!k||k.length===0?"No occupants":k.map(E=>{var O;return((O=n.find(P=>P.id===E))==null?void 0:O.name)||E}).join(", ");return i?s.jsx(Bi,{title:"Hostel"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Hostel Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage hostel rooms and occupants"})]}),s.jsxs(R,{onClick:v,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Add Room"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by room number or building...",value:l,onChange:k=>c(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(k=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:["Room ",k.roomNumber]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(k.status)}`,children:k.status})]}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:k.building}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-4",children:[s.jsx(Vt,{size:16,className:"mr-2"}),"Occupancy: ",k.occupants.length," / ",k.capacity]}),s.jsxs("div",{className:"flex-grow mb-4",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-500 mb-2",children:"Occupants"}),s.jsx("div",{className:"text-sm text-gray-800",children:A(k.occupants)})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-100 mt-auto flex items-center justify-end",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>S(k),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>w(k),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},k.id))}),s.jsx(he,{isOpen:u,onClose:()=>h(!1),title:d?"Edit Room":"Add New Room",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var k;return(k=y.current)==null?void 0:k.requestSubmit()},loading:x,children:d?"Save Changes":"Add Room"})]}),children:s.jsx(JM,{ref:y,room:d,students:n,onSubmit:N})}),s.jsx(he,{isOpen:p,onClose:()=>b(!1),title:"Delete Room",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>b(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:_,loading:x,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete room ",s.jsx("strong",{children:d==null?void 0:d.roomNumber}),"? This action cannot be undone."]})})]})},QM=j.forwardRef(({vehicle:e,onSubmit:t},r)=>{const[n,a]=j.useState({vehicleNumber:"",driverName:"",route:"",capacity:20,studentCount:15});j.useEffect(()=>{a(e||{vehicleNumber:"",driverName:"",route:"",capacity:20,studentCount:15})},[e]);const i=l=>{const{name:c,value:u,type:h}=l.target;a(d=>({...d,[c]:h==="number"?parseInt(u):u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"vehicleNumber",children:"Vehicle Number"}),s.jsx(J,{id:"vehicleNumber",name:"vehicleNumber",value:n.vehicleNumber,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"driverName",children:"Driver Name"}),s.jsx(J,{id:"driverName",name:"driverName",value:n.driverName,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"route",children:"Route"}),s.jsx("textarea",{id:"route",name:"route",value:n.route,onChange:i,rows:3,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"capacity",children:"Capacity"}),s.jsx(J,{id:"capacity",name:"capacity",type:"number",min:"1",value:n.capacity,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"studentCount",children:"Student Count"}),s.jsx(J,{id:"studentCount",name:"studentCount",type:"number",min:"0",value:n.studentCount,onChange:i,required:!0})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});QM.displayName="VehicleForm";const Bg=e=>({id:e.id,created_at:e.created_at,vehicleNumber:e.vehicle_number,driverName:e.driver_name,route:e.route,capacity:e.capacity,studentCount:e.student_count}),qge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState(!1),[p,b]=j.useState(!1),x=j.useRef(null);j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){a(!0);try{const{data:_,error:C}=await D.from("transport_vehicles").select("*").eq("school_id",e.school_id).order("vehicle_number");if(C)throw C;r(_.map(Bg))}catch(_){const C=(_==null?void 0:_.message)||(typeof _=="object"?JSON.stringify(_):String(_));I.error(`Failed to fetch vehicles: ${C}`)}finally{a(!1)}}})()},[e]);const g=t.filter(N=>N.vehicleNumber.toLowerCase().includes(i.toLowerCase())||N.driverName.toLowerCase().includes(i.toLowerCase())||N.route.toLowerCase().includes(i.toLowerCase())),y=()=>{h(null),c(!0)},m=N=>{h(N),c(!0)},v=N=>{h(N),f(!0)},S=async N=>{b(!0);const _={vehicle_number:N.vehicleNumber,driver_name:N.driverName,route:N.route,capacity:N.capacity,student_count:N.studentCount,school_id:e==null?void 0:e.school_id};await I.promise((async()=>{if(N.id){const{data:C,error:A}=await D.from("transport_vehicles").update(_).eq("id",N.id).select().single();if(A)throw A;r(k=>k.map(E=>E.id===N.id?Bg(C):E))}else{const{data:C,error:A}=await D.from("transport_vehicles").insert(_).select().single();if(A)throw A;r(k=>[Bg(C),...k])}})(),{loading:"Saving vehicle...",success:"Vehicle saved successfully!",error:C=>`Failed to save vehicle: ${C.message}`}),b(!1),c(!1)},w=async()=>{u&&(b(!0),await I.promise((async()=>{const{error:N}=await D.from("transport_vehicles").delete().eq("id",u.id);if(N)throw N;r(_=>_.filter(C=>C.id!==u.id))})(),{loading:"Deleting vehicle...",success:"Vehicle deleted successfully!",error:N=>`Failed to delete vehicle: ${N.message}`}),b(!1),f(!1),h(null))};return n?s.jsx(Re,{title:"Transport",headers:["Vehicle","Driver","Route","Occupancy","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Transport"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage school transportation fleet"})]}),s.jsxs(R,{onClick:y,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Add Vehicle"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by vehicle number, driver, or route...",value:i,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden md:table-cell",children:"Driver"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase hidden lg:table-cell",children:"Route"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Occupancy"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(N=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Pl,{size:18,className:"text-gray-500 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.vehicleNumber}),s.jsx("div",{className:"text-sm text-gray-500",children:N.id})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[s.jsx(qt,{size:14,className:"mr-2 text-gray-400"}),N.driverName]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell text-sm text-gray-700 truncate max-w-sm",children:N.route}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[N.studentCount," / ",N.capacity]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>m(N),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>v(N),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},N.id))})]})})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Vehicle":"Add New Vehicle",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var N;return(N=x.current)==null?void 0:N.requestSubmit()},loading:p,children:u?"Save Changes":"Add Vehicle"})]}),children:s.jsx(QM,{ref:x,vehicle:u,onSubmit:S})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:"Delete Vehicle",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:w,loading:p,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete vehicle ",s.jsx("strong",{children:u==null?void 0:u.vehicleNumber}),"? This action cannot be undone."]})})]})},ZM=j.forwardRef(({event:e,onSubmit:t},r)=>{const[n,a]=j.useState({title:"",date:new Date().toISOString().split("T")[0],time:"10:00",location:"",description:"",type:"academic"});j.useEffect(()=>{a(e||{title:"",date:new Date().toISOString().split("T")[0],time:"10:00",location:"",description:"",type:"academic"})},[e]);const i=l=>{const{name:c,value:u}=l.target;a(h=>({...h,[c]:u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"title",children:"Event Title"}),s.jsx(J,{id:"title",name:"title",value:n.title,onChange:i,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",name:"date",type:"date",value:n.date,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"time",children:"Time"}),s.jsx(J,{id:"time",name:"time",type:"time",value:n.time,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"location",children:"Location"}),s.jsx(J,{id:"location",name:"location",value:n.location,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"type",children:"Type"}),s.jsxs(le,{id:"type",name:"type",value:n.type,onChange:i,children:[s.jsx("option",{value:"academic",children:"Academic"}),s.jsx("option",{value:"sports",children:"Sports"}),s.jsx("option",{value:"cultural",children:"Cultural"}),s.jsx("option",{value:"other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"description",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:i,rows:4,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});ZM.displayName="EventForm";const Vge=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,i]=j.useState(""),[o,l]=j.useState(!1),[c,u]=j.useState(null),[h,d]=j.useState(!1),[f,p]=j.useState(!1),{createNotification:b,profile:x}=fe(),g=j.useRef(null),y=["system_admin","admin","principal","teacher"].includes((x==null?void 0:x.role)||"");j.useEffect(()=>{(async()=>{n(!0);try{const{data:k,error:E}=await D.from("events").select("*").order("date",{ascending:!1});if(E)throw E;t(k)}catch(k){I.error(`Failed to fetch events: ${k.message}`)}finally{n(!1)}})()},[]);const m=e.filter(A=>A.title.toLowerCase().includes(a.toLowerCase())||A.location.toLowerCase().includes(a.toLowerCase())),v=()=>{u(null),l(!0)},S=A=>{u(A),l(!0)},w=A=>{u(A),d(!0)},N=async A=>{p(!0),await I.promise((async()=>{if(A.id){const{data:k,error:E}=await D.from("events").update(A).eq("id",A.id).select().single();if(E)throw E;t(O=>O.map(P=>P.id===A.id?k:P))}else{const{data:k,error:E}=await D.from("events").insert(A).select().single();if(E)throw E;t(P=>[k,...P]);const{data:O}=await D.from("profiles").select("id");if(O){const P=O.map(M=>({user_id:M.id,title:`New Event: ${A.title}`,message:`An event has been scheduled on ${A.date} at ${A.location}.`,type:"event",link_to:"/events"}));await Promise.all(P.map(M=>b(M)))}}})(),{loading:"Saving event...",success:"Event saved successfully!",error:k=>`Failed to save event: ${k.message}`}),p(!1),l(!1)},_=async()=>{c&&(p(!0),await I.promise((async()=>{const{error:A}=await D.from("events").delete().eq("id",c.id);if(A)throw A;t(k=>k.filter(E=>E.id!==c.id))})(),{loading:"Deleting event...",success:"Event deleted successfully!",error:A=>`Failed to delete event: ${A.message}`}),p(!1),d(!1),u(null))},C=A=>{switch(A){case"academic":return"bg-blue-100 text-blue-800";case"sports":return"bg-green-100 text-green-800";case"cultural":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return r?s.jsx(Bi,{title:"Events"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Events"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage school events and activities"})]}),y&&s.jsxs(R,{onClick:v,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Create Event"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search events by title or location...",value:a,onChange:A=>i(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(A=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg flex-grow pr-2",children:A.title}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(A.type)}`,children:A.type})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(wr,{size:14,className:"mr-2 text-gray-400"})," ",A.date]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(rn,{size:14,className:"mr-2 text-gray-400"})," ",A.time]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(BE,{size:14,className:"mr-2 text-gray-400"})," ",A.location]})]}),s.jsxs("p",{className:"text-sm text-gray-500 flex-grow mb-4",children:[A.description.substring(0,100),"..."]}),y&&s.jsxs("div",{className:"pt-4 border-t border-gray-100 mt-auto flex items-center justify-end",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>S(A),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>w(A),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]},A.id))}),s.jsx(he,{isOpen:o,onClose:()=>l(!1),title:c?"Edit Event":"Create New Event",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var A;return(A=g.current)==null?void 0:A.requestSubmit()},loading:f,children:c?"Save Changes":"Create Event"})]}),children:s.jsx(ZM,{ref:g,event:c,onSubmit:N})}),s.jsx(he,{isOpen:h,onClose:()=>d(!1),title:"Delete Event",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:_,loading:f,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the event ",s.jsxs("strong",{children:['"',c==null?void 0:c.title,'"']}),"? This action cannot be undone."]})})]})},eR=j.forwardRef(({notice:e,onSubmit:t},r)=>{const[n,a]=j.useState({title:"",content:"",date:new Date().toISOString().split("T")[0],audience:"all"});j.useEffect(()=>{a(e?{title:e.title,content:e.content,date:e.date,audience:e.audience}:{title:"",content:"",date:new Date().toISOString().split("T")[0],audience:"all"})},[e]);const i=l=>{const{name:c,value:u}=l.target;a(h=>({...h,[c]:u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"title",children:"Title"}),s.jsx(J,{id:"title",name:"title",value:n.title,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"content",children:"Content"}),s.jsx("textarea",{id:"content",name:"content",value:n.content,onChange:i,rows:6,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",name:"date",type:"date",value:n.date,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"audience",children:"Audience"}),s.jsxs(le,{id:"audience",name:"audience",value:n.audience,onChange:i,children:[s.jsx("option",{value:"all",children:"All"}),s.jsx("option",{value:"students",children:"Students"}),s.jsx("option",{value:"teachers",children:"Teachers"})]})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});eR.displayName="NoticeForm";const Wge=()=>{const{profile:e,createNotification:t}=fe(),[r,n]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState(""),[c,u]=j.useState(!1),[h,d]=j.useState(null),[f,p]=j.useState(!1),[b,x]=j.useState(!1),g=j.useRef(null),y=["system_admin","admin","principal","teacher"].includes((e==null?void 0:e.role)||"");j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){i(!0);try{const{data:A,error:k}=await D.from("notices").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});if(k)throw k;n(A)}catch(A){I.error(`Failed to fetch notices: ${A.message}`)}finally{i(!1)}}})()},[e]);const m=r.filter(C=>C.title.toLowerCase().includes(o.toLowerCase())),v=()=>{d(null),u(!0)},S=C=>{d(C),u(!0)},w=C=>{d(C),p(!0)},N=async C=>{x(!0),await I.promise((async()=>{const A={...C,author_name:(e==null?void 0:e.name)||"Admin",school_id:e==null?void 0:e.school_id};if(C.id){const{data:k,error:E}=await D.from("notices").update(A).eq("id",C.id).select().single();if(E)throw E;n(O=>O.map(P=>P.id===C.id?k:P))}else{const{data:k,error:E}=await D.from("notices").insert(A).select().single();if(E)throw E;n(O=>[k,...O])}})(),{loading:"Saving notice...",success:"Notice saved successfully!",error:A=>`Failed to save notice: ${A.message}`}),x(!1),u(!1)},_=async()=>{h&&(x(!0),await I.promise((async()=>{const{error:C}=await D.from("notices").delete().eq("id",h.id);if(C)throw C;n(A=>A.filter(k=>k.id!==h.id))})(),{loading:"Deleting notice...",success:"Notice deleted successfully!",error:C=>`Failed to delete notice: ${C.message}`}),x(!1),p(!1),d(null))};return a?s.jsx(Bi,{title:"Noticeboard"}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Noticeboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage school announcements and notices"})]}),y&&s.jsxs(R,{onClick:v,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Post Notice"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search notices by title...",value:o,onChange:C=>l(C.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),s.jsxs("div",{className:"space-y-4",children:[m.map(C=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:C.title}),y&&s.jsxs("div",{className:"flex items-center",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>S(C),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>w(C),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(qt,{size:12,className:"mr-1"}),C.authorName]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(wr,{size:12,className:"mr-1"}),C.date]}),s.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-blue-100 text-blue-800",children:["For: ",C.audience]})]}),s.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:C.content})]},C.id)),m.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"No notices found."})]}),s.jsx(he,{isOpen:c,onClose:()=>u(!1),title:h?"Edit Notice":"Post New Notice",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>u(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var C;return(C=g.current)==null?void 0:C.requestSubmit()},loading:b,children:h?"Save Changes":"Post Notice"})]}),children:s.jsx(eR,{ref:g,notice:h,onSubmit:N})}),s.jsx(he,{isOpen:f,onClose:()=>p(!1),title:"Delete Notice",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>p(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:_,loading:b,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the notice ",s.jsxs("strong",{children:['"',h==null?void 0:h.title,'"']}),"? This action cannot be undone."]})})]})},Ug=["January","February","March","April","May","June","July","August","September","October","November","December"],tR=j.forwardRef(({fee:e,students:t,onSubmit:r},n)=>{const{schoolFee:a}=fe(),i=Ug[new Date().getMonth()],o=new Date().getFullYear(),[l,c]=j.useState({student_id:"",description:`Tuition Fee - ${i} ${o}`,amount:a,due_date:new Date().toISOString().split("T")[0],status:"unpaid",payment_date:void 0,month:i});j.useEffect(()=>{e||c(d=>({...d,amount:a}))},[a,e]),j.useEffect(()=>{c(e?{student_id:e.student_id,description:e.description,amount:e.amount,due_date:e.due_date,status:e.status,payment_date:e.payment_date,month:e.month||Ug[new Date(e.due_date).getMonth()]}:{student_id:t.length>0?t[0].id:"",description:`Tuition Fee - ${i} ${o}`,amount:a,due_date:new Date().toISOString().split("T")[0],status:"unpaid",payment_date:void 0,month:i})},[e,t,a,i,o]);const u=d=>{const{name:f,value:p,type:b}=d.target;c(x=>{const g={...x,[f]:b==="number"?parseFloat(p):p};return f==="month"&&!e&&(g.description=`Tuition Fee - ${p} ${o}`),g})},h=d=>{if(d.preventDefault(),!l.student_id){I.error("Please select a student from the list.");return}if(l.amount<=0){I.error("Amount must be greater than 0.");return}r({...l,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:n,onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"student_id",children:"Student"}),t.length>0?s.jsx(le,{id:"student_id",name:"student_id",value:l.student_id,onChange:u,required:!0,disabled:!!e,children:t.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (",d.id,")"]},d.id))}):s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm flex items-center",children:s.jsx("span",{children:"No students found. Please add students in the Student module first."})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"month",children:"Month"}),s.jsx(le,{id:"month",name:"month",value:l.month,onChange:u,children:Ug.map(d=>s.jsx("option",{value:d,children:d},d))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"description",children:"Description"}),s.jsx(J,{id:"description",name:"description",value:l.description,onChange:u,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"amount",children:"Amount (Birr)"}),s.jsx(J,{id:"amount",name:"amount",type:"number",min:"0",value:l.amount,onChange:u,required:!0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Base Fee: ",a," Birr"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"due_date",children:"Due Date"}),s.jsx(J,{id:"due_date",name:"due_date",type:"date",value:l.due_date,onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:l.status,onChange:u,children:[s.jsx("option",{value:"unpaid",children:"Unpaid"}),s.jsx("option",{value:"paid",children:"Paid"}),s.jsx("option",{value:"overdue",children:"Overdue"})]})]}),l.status==="paid"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"payment_date",children:"Payment Date"}),s.jsx(J,{id:"payment_date",name:"payment_date",type:"date",value:l.payment_date,onChange:u})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});tR.displayName="FeeForm";const jh=["January","February","March","April","May","June","July","August","September","October","November","December"],Gge=({onClose:e,onSuccess:t})=>{const{schoolFee:r,profile:n}=fe(),[a,i]=j.useState(!1),[o,l]=j.useState("single"),[c,u]=j.useState("all"),[h,d]=j.useState(jh[new Date().getMonth()]),[f,p]=j.useState(new Date().getFullYear()),[b,x]=j.useState(r),[g,y]=j.useState(""),[m,v]=j.useState([]),[S,w]=j.useState(null),[N,_]=j.useState([]),[C,A]=j.useState("tuition");j.useEffect(()=>{x(r)},[r]),j.useEffect(()=>{(async()=>{if(!(n!=null&&n.school_id))return;const{data:M}=await D.from("classes").select("name").eq("school_id",n.school_id).order("name");M&&v(M.map(F=>F.name));const{data:T}=await D.from("fee_masters").select("*").eq("school_id",n.school_id).order("name");T&&_(T)})();const O=new Date,P=new Date(O.getFullYear(),O.getMonth()+1,5);y(P.toISOString().split("T")[0])},[n]),j.useEffect(()=>{if(C==="tuition")x(r);else{const E=N.find(O=>O.id===C);E&&(x(E.amount),E.due_date&&y(E.due_date))}},[C,r,N]),j.useEffect(()=>{(async()=>{if(!(n!=null&&n.school_id))return;let O=D.from("students").select("id",{count:"exact",head:!0}).eq("status","active").eq("school_id",n.school_id);if(c!=="all"){const M=c.split("-");M.length>=1&&(O=O.eq("class",M[0])),M.length>=2&&(O=O.eq("section",M[1]))}const{count:P}=await O;w(P)})()},[c,n]);const k=async()=>{if(!(n!=null&&n.school_id)){I.error("School context missing.");return}i(!0);try{let E=D.from("students").select("id, name, class, section").eq("status","active").eq("school_id",n.school_id);if(c!=="all"){const K=c.split("-");K.length>=1&&(E=E.eq("class",K[0])),K.length>=2&&(E=E.eq("section",K[1]))}const{data:O,error:P}=await E;if(P)throw P;if(!O||O.length===0){I.error("No active students found for the selected criteria."),i(!1);return}const M=[];let T=0;const F=K=>{if(C==="tuition")return`Tuition Fee - ${K} ${f}`;const z=N.find(H=>H.id===C);return`${(z==null?void 0:z.name)||"Fee"} - ${K} ${f}`},q=[];o==="single"?q.push(F(h)):jh.forEach(K=>q.push(F(K)));const{data:$}=await D.from("fees").select("student_id, description").eq("school_id",n.school_id).in("student_id",O.map(K=>K.id)).in("description",q),U=new Set($==null?void 0:$.map(K=>`${K.student_id}-${K.description}`));if(o==="single"?O.forEach(K=>{const z=F(h),H=`${K.id}-${z}`;U.has(H)?T++:M.push({student_id:K.id,description:z,amount:b,due_date:g,status:"unpaid",month:h,school_id:n.school_id})}):O.forEach(K=>{jh.forEach((z,H)=>{const Q=F(z),se=`${K.id}-${Q}`;if(U.has(se))T++;else{const ue=new Date(f,H,5).toISOString().split("T")[0];M.push({student_id:K.id,description:Q,amount:b,due_date:ue,status:"unpaid",month:z,school_id:n.school_id})}})}),M.length===0){I.success(`No new fees to generate. ${T} records already exist.`),i(!1);return}const X=100;for(let K=0;K<M.length;K+=X){const z=M.slice(K,K+X),{error:H}=await D.from("fees").insert(z);if(H)throw H}I.success(`Generated ${M.length} fees. Skipped ${T} duplicates.`),t(),e()}catch(E){I.error(`Error generating fees: ${E.message}`)}finally{i(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(jn,{className:"h-5 w-5 text-blue-600 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"Fee Generation Wizard"}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Generate fees for ",S!==null?s.jsx("strong",{children:S}):"all"," active students. Duplicates will be automatically skipped."]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Fee Type"}),s.jsxs(le,{value:C,onChange:E=>A(E.target.value),children:[s.jsx("option",{value:"tuition",children:"Base Tuition Fee"}),N.map(E=>s.jsxs("option",{value:E.id,children:[E.name," (",E.amount,")"]},E.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Target Class"}),s.jsxs(le,{value:c,onChange:E=>u(E.target.value),children:[s.jsx("option",{value:"all",children:"All Classes"}),m.map(E=>s.jsx("option",{value:E,children:E},E))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Generation Type"}),s.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[s.jsx("button",{type:"button",onClick:()=>l("single"),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${o==="single"?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Single Month"}),s.jsx("button",{type:"button",onClick:()=>l("year"),className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${o==="year"?"bg-white shadow-sm text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Full Year"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Academic Year"}),s.jsx(J,{type:"number",value:f,onChange:E=>p(parseInt(E.target.value))})]}),o==="single"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Month"}),s.jsx(le,{value:h,onChange:E=>d(E.target.value),children:jh.map(E=>s.jsx("option",{value:E,children:E},E))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Amount (Birr)"}),s.jsx(J,{type:"number",value:b,onChange:E=>x(parseFloat(E.target.value))})]}),o==="single"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Due Date"}),s.jsx(J,{type:"date",value:g,onChange:E=>y(E.target.value)})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(R,{variant:"secondary",onClick:e,children:"Cancel"}),s.jsx(R,{onClick:k,loading:a,children:o==="single"?"Generate Fees":"Generate Full Year"})]})]})},rR=G.forwardRef(({fee:e,schoolName:t,schoolAddress:r,schoolPhone:n,schoolEmail:a,schoolLogo:i},o)=>{const l=e.id.substring(0,8).toUpperCase();return s.jsxs("div",{ref:o,className:"w-[210mm] bg-white p-8 font-sans text-slate-900 mx-auto border border-gray-200 print:border-none",children:[s.jsxs("div",{className:"flex justify-between items-start border-b-2 border-slate-800 pb-6 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[i?s.jsx("img",{src:i,alt:"Logo",className:"h-20 w-20 object-contain"}):s.jsx(nr,{className:"scale-[2]"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold uppercase text-slate-900",children:t}),s.jsx("p",{className:"text-sm text-slate-600 max-w-xs",children:r}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[n&&s.jsxs("span",{children:["Ph: ",n," "]}),a&&s.jsxs("span",{children:["| Email: ",a]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 uppercase tracking-widest",children:"Fee Receipt"}),s.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Receipt No: ",s.jsxs("span",{className:"font-mono font-bold text-slate-900",children:["#",l]})]}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Date: ",s.jsx("span",{className:"font-medium text-slate-900",children:De(new Date().toISOString())})]}),s.jsx("div",{className:`mt-2 inline-block px-3 py-1 rounded border-2 font-bold uppercase text-xs ${e.status==="paid"?"border-green-600 text-green-700":"border-red-600 text-red-700"}`,children:e.status})]})]}),s.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-8 border border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-sm",children:[s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"w-32 font-bold text-slate-500",children:"Student Name:"}),s.jsx("span",{className:"font-semibold text-slate-900",children:e.studentName})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"w-32 font-bold text-slate-500",children:"Admission No:"}),s.jsx("span",{className:"font-mono text-slate-900",children:e.student_id})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"w-32 font-bold text-slate-500",children:"Class:"}),s.jsx("span",{className:"text-slate-900",children:e.class?`${e.class}-${e.section}`:"N/A"})]}),s.jsxs("div",{className:"flex",children:[s.jsx("span",{className:"w-32 font-bold text-slate-500",children:"Roll Number:"}),s.jsx("span",{className:"text-slate-900",children:e.rollNumber||"N/A"})]})]})}),s.jsxs("table",{className:"w-full mb-8 border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-800 text-white text-sm uppercase",children:[s.jsx("th",{className:"py-3 px-4 text-left rounded-tl-md",children:"Description"}),s.jsx("th",{className:"py-3 px-4 text-left",children:"Due Date"}),s.jsx("th",{className:"py-3 px-4 text-left",children:"Payment Date"}),s.jsx("th",{className:"py-3 px-4 text-right rounded-tr-md",children:"Amount"})]})}),s.jsxs("tbody",{className:"text-sm",children:[s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("td",{className:"py-4 px-4 font-medium",children:e.description}),s.jsx("td",{className:"py-4 px-4 text-slate-600",children:De(e.due_date)}),s.jsx("td",{className:"py-4 px-4 text-slate-600",children:e.payment_date?De(e.payment_date):"-"}),s.jsx("td",{className:"py-4 px-4 text-right font-bold",children:$e(e.amount)})]}),s.jsxs("tr",{className:"border-b border-slate-100 h-8",children:[s.jsx("td",{}),s.jsx("td",{}),s.jsx("td",{}),s.jsx("td",{})]}),s.jsxs("tr",{className:"border-b border-slate-100 h-8",children:[s.jsx("td",{}),s.jsx("td",{}),s.jsx("td",{}),s.jsx("td",{})]})]}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"bg-slate-50",children:[s.jsx("td",{colSpan:3,className:"py-3 px-4 text-right font-bold text-slate-600 uppercase",children:"Total Amount"}),s.jsx("td",{className:"py-3 px-4 text-right font-bold text-xl text-slate-900",children:$e(e.amount)})]})})]}),s.jsxs("div",{className:"mt-16 flex justify-between items-end",children:[s.jsxs("div",{className:"text-xs text-slate-500 max-w-sm",children:[s.jsx("p",{className:"font-bold mb-1",children:"Terms & Conditions:"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[s.jsx("li",{children:"Fees once paid are not refundable."}),s.jsx("li",{children:"This is a computer generated receipt."})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-48 border-b border-slate-400 mb-2"}),s.jsx("p",{className:"text-sm font-bold text-slate-600 uppercase",children:"Cashier Signature"})]})]}),s.jsxs("div",{className:"mt-8 text-center text-[10px] text-slate-400 border-t border-slate-100 pt-2",children:["Generated by ",t," Management System"]})]})});rR.displayName="FeeReceipt";const Kge=async(e,t)=>{const r=new Date().toISOString().split("T")[0],{error:n}=await D.from("fees").update({status:"paid",payment_date:r,description:`Paid via Chapa (Ref: ${t})`}).eq("id",e);if(n)throw n;return!0},Hge=({fee:e,onClose:t,onSuccess:r,studentEmail:n,studentName:a})=>{const[i,o]=j.useState(!1),[l,c]=j.useState("select"),u=async h=>{o(!0),c("processing");try{const d=`TX-${e.id}-${Date.now()}`;console.log(`Processing ${h} payment for ${$e(e.amount)}...`),await new Promise(f=>setTimeout(f,2e3)),await Kge(e.id,d),c("success"),I.success("Payment successful!"),setTimeout(()=>{r(),t()},2e3)}catch(d){I.error(`Payment failed: ${d.message}`),c("select")}finally{o(!1)}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-slate-500",children:"Fee Description"}),s.jsx("span",{className:"font-medium text-slate-900",children:e.description})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-slate-500",children:"Student"}),s.jsx("span",{className:"font-medium text-slate-900",children:a})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-200 mt-2",children:[s.jsx("span",{className:"font-bold text-slate-700",children:"Total Amount"}),s.jsx("span",{className:"font-bold text-xl text-blue-600",children:$e(e.amount)})]})]}),l==="select"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm font-medium text-slate-700",children:"Select Payment Method:"}),s.jsxs("button",{onClick:()=>u("chapa"),className:"w-full flex items-center justify-between p-4 border border-slate-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:s.jsx(LE,{size:20})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-bold text-slate-900",children:"Chapa"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Pay with local bank cards"})]})]}),s.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-slate-300 group-hover:border-green-500"})]}),s.jsxs("button",{onClick:()=>u("telebirr"),className:"w-full flex items-center justify-between p-4 border border-slate-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:s.jsx(y3,{size:20})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"font-bold text-slate-900",children:"Telebirr"}),s.jsx("p",{className:"text-xs text-slate-500",children:"Pay using mobile money"})]})]}),s.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-slate-300 group-hover:border-blue-500"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-slate-400 mt-4",children:[s.jsx(Hb,{size:12}),s.jsx("span",{children:"Secure payment processing"})]})]}),l==="processing"&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(Bs,{className:"h-12 w-12 text-blue-600 animate-spin mb-4"}),s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Processing Payment..."}),s.jsx("p",{className:"text-sm text-slate-500 text-center max-w-xs mt-2",children:"Please wait while we confirm your transaction. Do not close this window."})]}),l==="success"&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[s.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4 animate-bounce",children:s.jsx(fd,{size:32})}),s.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Payment Successful!"}),s.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Your receipt has been generated."})]})]})},Yge=({fee:e,studentName:t,onClose:r,onSuccess:n})=>{const[a,i]=j.useState(!1),[o,l]=j.useState(new Date().toISOString().split("T")[0]),[c,u]=j.useState("Cash"),[h,d]=j.useState(""),f=async p=>{p.preventDefault(),i(!0);try{const{error:b}=await D.from("fees").update({status:"paid",payment_date:o,payment_mode:c,remarks:h,description:e.description}).eq("id",e.id);if(b)throw b;await zM("Collect Fee","Fees Collection",`Collected ${$e(e.amount)} from ${t} via ${c}`,void 0,void 0,e.school_id),I.success("Payment recorded successfully!"),n(),r()}catch(b){I.error(`Failed to record payment: ${b.message}`)}finally{i(!1)}};return s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsx("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 block",children:"Student"}),s.jsx("span",{className:"font-semibold text-slate-900",children:t})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-slate-500 block",children:"Fee Type"}),s.jsx("span",{className:"font-semibold text-slate-900",children:e.description})]}),s.jsxs("div",{className:"col-span-2 border-t border-slate-200 pt-2 mt-2",children:[s.jsx("span",{className:"text-slate-500 block",children:"Amount Due"}),s.jsx("span",{className:"font-bold text-xl text-blue-600",children:$e(e.amount)})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Payment Date"}),s.jsx(J,{type:"date",value:o,onChange:p=>l(p.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Payment Mode"}),s.jsxs(le,{value:c,onChange:p=>u(p.target.value),children:[s.jsx("option",{value:"Cash",children:"Cash"}),s.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),s.jsx("option",{value:"Cheque",children:"Cheque"}),s.jsx("option",{value:"Mobile Money",children:"Mobile Money (Telebirr/CBE)"}),s.jsx("option",{value:"Other",children:"Other"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Remarks / Reference No."}),s.jsx(J,{value:h,onChange:p=>d(p.target.value),placeholder:"e.g. Receipt #1234 or Transaction ID"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(R,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),s.jsx(R,{type:"submit",loading:a,className:"bg-green-600 hover:bg-green-700",children:"Confirm Payment"})]})]})},Xge=()=>{var V,ee,Z,re,de,Ne;const{schoolName:e,schoolAddress:t,schoolPhone:r,schoolEmail:n,schoolLogo:a,profile:i,user:o,createNotification:l}=fe(),[c,u]=j.useState([]),[h,d]=j.useState([]),[f,p]=j.useState(!0),[b,x]=j.useState(""),[g,y]=j.useState(!1),[m,v]=j.useState(!1),[S,w]=j.useState(!1),[N,_]=j.useState(!1),[C,A]=j.useState(!1),[k,E]=j.useState(null),[O,P]=j.useState(!1),[M,T]=j.useState(!1),F=j.useRef(null),q=j.useRef(null),$=["system_admin","admin","principal","cashier"].includes((i==null?void 0:i.role)||""),U=["student","parent"].includes((i==null?void 0:i.role)||""),X=Un.useReactToPrint({content:()=>q.current,documentTitle:`Receipt-${k==null?void 0:k.id}`,onBeforeGetContent:()=>{if(!q.current)return I.error("Content not ready for printing"),Promise.reject()}}),K=async()=>{if(i){p(!0);try{let ne=D.from("fees").select("*").order("due_date",{ascending:!0}),ce=D.from("students").select("*");if(i.role!=="system_admin"&&i.school_id&&(ne=ne.eq("school_id",i.school_id),ce=ce.eq("school_id",i.school_id)),i.role==="student"&&o){const{data:qe}=await D.from("students").select("id").eq("user_id",o.id).single();qe&&(ne=ne.eq("student_id",qe.id))}else if(i.role==="parent"&&(o!=null&&o.email)){const{data:qe}=await D.from("students").select("id").eq("parent_email",o.email);if(qe&&qe.length>0){const Ot=qe.map(xr=>xr.id);ne=ne.in("student_id",Ot)}}const[{data:Se,error:Ie},{data:We,error:dt}]=await Promise.all([ne,ce]);if(Ie)throw Ie;if(dt)throw dt;u(Se||[]),d(We.map(qe=>({id:qe.id,name:qe.name,rollNumber:qe.roll_number,class:qe.class,section:qe.section}))||[])}catch(ne){I.error(`Failed to load data: ${ne.message}`)}finally{p(!1)}}};j.useEffect(()=>{K()},[i]);const H=j.useMemo(()=>c.map(ne=>{var ce;return{...ne,studentName:((ce=h.find(Se=>Se.id===ne.student_id))==null?void 0:ce.name)||"Unknown Student"}}),[c,h]).filter(ne=>ne.studentName.toLowerCase().includes(b.toLowerCase())||ne.description.toLowerCase().includes(b.toLowerCase())),Q=()=>{E(null),y(!0)},se=ne=>{E(ne),y(!0)},ue=ne=>{E(ne),w(!0)},ye=ne=>{E(ne),_(!0)},me=ne=>{E(ne),A(!0)},L=ne=>{E(ne),P(!0)},W=async ne=>{T(!0),await I.promise((async()=>{const ce={student_id:ne.student_id,description:ne.description,amount:ne.amount,due_date:ne.due_date,status:ne.status,payment_date:ne.status==="paid"?ne.payment_date||new Date().toISOString().split("T")[0]:null,month:ne.month,school_id:i==null?void 0:i.school_id};if(ne.id){const{data:Se,error:Ie}=await D.from("fees").update(ce).eq("id",ne.id).select().single();if(Ie)throw Ie;u(We=>We.map(dt=>dt.id===ne.id?Se:dt))}else{const{data:Se,error:Ie}=await D.from("fees").insert(ce).select().single();if(Ie)throw Ie;u(We=>[Se,...We])}})(),{loading:"Saving fee record...",success:"Fee record saved successfully!",error:ce=>`Failed to save record: ${ce.message}`}),T(!1),y(!1)},Y=async()=>{k&&(T(!0),await I.promise((async()=>{const{error:ne}=await D.from("fees").delete().eq("id",k.id);if(ne)throw ne;u(ce=>ce.filter(Se=>Se.id!==k.id))})(),{loading:"Deleting fee record...",success:"Fee record deleted successfully!",error:ne=>`Failed to delete record: ${ne.message}`}),T(!1),P(!1),E(null))};return f?s.jsx(Re,{title:"Fees",headers:["Student","Details","Amount","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 tracking-tight",children:"Fees Management"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Track and manage student fee payments"})]}),$&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{onClick:()=>v(!0),variant:"secondary",className:"border border-slate-200 bg-white text-blue-600 hover:bg-blue-50",children:[s.jsx(Jm,{size:18,className:"mr-2"}),"Generate Fees"]}),s.jsxs(R,{onClick:Q,className:"shadow-md shadow-blue-500/20",children:[s.jsx(Fe,{size:18,className:"mr-2"}),"Add Fee Record"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search by student name or description...",value:b,onChange:ne=>x(ne.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm transition-all"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden md:table-cell",children:"Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:H.map(ne=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:ne.studentName}),s.jsx("div",{className:"text-xs text-slate-500 font-mono",children:ne.student_id})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:[s.jsx("div",{className:"text-sm text-slate-900 font-medium",children:ne.description}),s.jsxs("div",{className:"text-xs text-slate-500",children:[ne.month,"  Due: ",De(ne.due_date)]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-slate-900",children:$e(ne.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(_t,{variant:ne.status==="paid"?"success":ne.status==="overdue"?"danger":"warning",children:ne.status.charAt(0).toUpperCase()+ne.status.slice(1)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-1 items-center",children:[$&&ne.status!=="paid"&&s.jsxs(R,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-xs px-2 h-8 mr-2",onClick:()=>me(ne),children:[s.jsx($t,{size:14,className:"mr-1"})," Collect"]}),U&&ne.status!=="paid"&&s.jsxs(R,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-xs px-2 h-8 mr-2",onClick:()=>ye(ne),children:[s.jsx(LE,{size:14,className:"mr-1"})," Pay"]}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>ue(ne),title:"Print Receipt",children:s.jsx(Qr,{className:"h-4 w-4 text-slate-500 hover:text-blue-600"})}),$&&s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>se(ne),title:"Edit",children:s.jsx(ze,{className:"h-4 w-4 text-slate-500 hover:text-amber-600"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>L(ne),title:"Delete",children:s.jsx(Te,{className:"h-4 w-4 text-slate-500 hover:text-rose-600"})})]})]})})]},ne.id))})]})}),H.length===0&&s.jsx(Ui,{icon:$t,title:"No fee records found",description:$?"Try adjusting your search or add a new fee record.":"You have no fee records to display.",actionLabel:$?"Add Fee Record":void 0,onAction:$?Q:void 0})]}),s.jsx(he,{isOpen:g,onClose:()=>y(!1),title:k?"Edit Fee Record":"Add New Fee Record",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var ne;return(ne=F.current)==null?void 0:ne.requestSubmit()},loading:M,children:k?"Save Changes":"Add Record"})]}),children:s.jsx(tR,{ref:F,fee:k,students:h,onSubmit:W})}),s.jsx(he,{isOpen:C,onClose:()=>A(!1),title:"Collect Payment",children:k&&s.jsx(Yge,{fee:k,studentName:((V=h.find(ne=>ne.id===k.student_id))==null?void 0:V.name)||"Student",onClose:()=>A(!1),onSuccess:K})}),s.jsx(he,{isOpen:m,onClose:()=>v(!1),title:"Generate Tuition Fees",children:s.jsx(Gge,{onClose:()=>v(!1),onSuccess:()=>{K()}})}),s.jsx(he,{isOpen:S,onClose:()=>w(!1),title:"Fee Receipt",footer:s.jsxs(R,{onClick:X,children:[s.jsx(Qr,{size:18,className:"mr-2"})," Print Receipt"]}),children:s.jsx("div",{className:"bg-gray-100 p-4 rounded overflow-auto max-h-[60vh]",children:k&&s.jsx("div",{className:"scale-90 origin-top",children:s.jsx(rR,{ref:q,fee:{...k,studentName:(ee=h.find(ne=>ne.id===k.student_id))==null?void 0:ee.name,class:(Z=h.find(ne=>ne.id===k.student_id))==null?void 0:Z.class,section:(re=h.find(ne=>ne.id===k.student_id))==null?void 0:re.section,rollNumber:(de=h.find(ne=>ne.id===k.student_id))==null?void 0:de.rollNumber},schoolName:e,schoolAddress:t,schoolPhone:r,schoolEmail:n,schoolLogo:a})})})}),s.jsx(he,{isOpen:N,onClose:()=>_(!1),title:"Pay Online",children:k&&s.jsx(Hge,{fee:k,studentName:((Ne=h.find(ne=>ne.id===k.student_id))==null?void 0:Ne.name)||"Student",studentEmail:(o==null?void 0:o.email)||"",onClose:()=>_(!1),onSuccess:K})}),s.jsx(he,{isOpen:O,onClose:()=>P(!1),title:"Delete Fee Record",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>P(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:Y,loading:M,children:"Delete Record"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the fee record for ",s.jsx("strong",{children:k==null?void 0:k.studentName}),"? This action cannot be undone."]})})]})},Jge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState("all"),[u,h]=j.useState([]);j.useEffect(()=>{d()},[e]);const d=async()=>{if(e){a(!0);try{let x=D.from("fees").select(`
          id, amount, due_date, description, status, student_id,
          students (name, class, section)
        `).neq("status","paid").order("due_date",{ascending:!0});e.role!=="system_admin"&&e.school_id&&(x=x.eq("school_id",e.school_id));const{data:g,error:y}=await x;if(y)throw y;const m=g.map(S=>{var w,N,_;return{id:S.id,student_id:S.student_id,student_name:((w=S.students)==null?void 0:w.name)||"Unknown",class:((N=S.students)==null?void 0:N.class)||"N/A",section:((_=S.students)==null?void 0:_.section)||"",description:S.description,amount:S.amount,due_date:S.due_date,status:S.status}});r(m);const v=Array.from(new Set(m.map(S=>S.class))).sort();h(v)}catch(x){I.error(`Failed to load due fees: ${x.message}`)}finally{a(!1)}}},f=t.filter(x=>{const g=x.student_name.toLowerCase().includes(i.toLowerCase())||x.description.toLowerCase().includes(i.toLowerCase()),y=l==="all"||x.class===l;return g&&y}),p=f.reduce((x,g)=>x+g.amount,0),b=()=>{const g="data:text/csv;charset=utf-8,"+["Student","Class","Description","Due Date","Amount","Status"].join(",")+`
`+f.map(v=>`"${v.student_name}","${v.class}-${v.section}","${v.description}","${v.due_date}","${v.amount}","${v.status}"`).join(`
`),y=encodeURI(g),m=document.createElement("a");m.setAttribute("href",y),m.setAttribute("download","due_fees_report.csv"),document.body.appendChild(m),m.click(),document.body.removeChild(m)};return n?s.jsx(Re,{title:"Due Fees Report",headers:["Student","Class","Description","Due Date","Amount","Status"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Due Fees Report"}),s.jsx("p",{className:"text-slate-500",children:"Track outstanding payments and overdue fees"})]}),s.jsxs(R,{variant:"secondary",onClick:b,children:[s.jsx(Oa,{size:20,className:"mr-2"})," Export Report"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Outstanding"}),s.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:$e(p)})]}),s.jsx("div",{className:"p-3 bg-red-100 rounded-lg text-red-600",children:s.jsx($t,{size:24})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Overdue Records"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:f.filter(x=>x.status==="overdue").length})]}),s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg text-orange-600",children:s.jsx(jn,{size:24})})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search student or fee description...",value:i,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tl,{className:"text-slate-400",size:20}),s.jsxs("select",{value:l,onChange:x=>c(x.target.value),className:"border border-slate-300 rounded-lg px-3 py-2 outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"All Classes"}),u.map(x=>s.jsxs("option",{value:x,children:["Class ",x]},x))]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[f.map(x=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:x.student_name}),s.jsxs("td",{className:"px-6 py-4 text-slate-600",children:[x.class,"-",x.section]}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:x.description}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(x.due_date)}),s.jsx("td",{className:"px-6 py-4 font-bold text-slate-900",children:$e(x.amount)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(_t,{variant:x.status==="overdue"?"danger":"warning",className:"capitalize",children:x.status})})]},x.id)),f.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"No due fees found."})})]})]})})]})},nR=j.forwardRef(({record:e,students:t,classes:r,onSubmit:n},a)=>{var u,h;const[i,o]=j.useState({studentId:((u=t[0])==null?void 0:u.id)||"",date:new Date().toISOString().split("T")[0],status:"present",class:((h=r[0])==null?void 0:h.name)||"",session:"Morning"});j.useEffect(()=>{var d,f;o(e?{studentId:e.studentId,date:e.date,status:e.status,class:e.class,session:e.session||"Morning"}:{studentId:((d=t[0])==null?void 0:d.id)||"",date:new Date().toISOString().split("T")[0],status:"present",class:((f=r[0])==null?void 0:f.name)||"",session:"Morning"})},[e,t,r]);const l=d=>{const{name:f,value:p}=d.target;o(b=>({...b,[f]:p}))},c=d=>{d.preventDefault(),n({...i,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:a,onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"studentId",children:"Student"}),s.jsx(le,{id:"studentId",name:"studentId",value:i.studentId,onChange:l,children:t.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (",d.id,")"]},d.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",name:"date",type:"date",value:i.date,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"session",children:"Session"}),s.jsxs(le,{id:"session",name:"session",value:i.session,onChange:l,children:[s.jsx("option",{value:"Morning",children:"Morning"}),s.jsx("option",{value:"Afternoon",children:"Afternoon"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"status",children:"Status"}),s.jsxs(le,{id:"status",name:"status",value:i.status,onChange:l,children:[s.jsx("option",{value:"present",children:"Present"}),s.jsx("option",{value:"absent",children:"Absent"}),s.jsx("option",{value:"late",children:"Late"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"class",children:"Class"}),s.jsx(le,{id:"class",name:"class",value:i.class,onChange:l,children:r.map(d=>s.jsx("option",{value:d.name,children:d.name},d.id))})]})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});nR.displayName="AttendanceForm";const Qge=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[u,h]=j.useState(""),[d,f]=j.useState(!1),[p,b]=j.useState(null),[x,g]=j.useState(!1),[y,m]=j.useState(!1),v=j.useRef(null),S=["system_admin","admin","principal","teacher"].includes((e==null?void 0:e.role)||"");j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){c(!0);try{const[{data:M,error:T},{data:F,error:q},{data:$,error:U}]=await Promise.all([D.from("attendance").select("*").eq("school_id",e.school_id).order("date",{ascending:!1}),D.from("students").select("id, name").eq("school_id",e.school_id),D.from("classes").select("id, name").eq("school_id",e.school_id)]);if(T)throw T;if(q)throw q;if(U)throw U;r(M||[]),a(F||[]),o($.map(X=>({...X,name:`Class ${X.name}`}))||[])}catch(M){I.error(`Failed to load data: ${M.message}`)}finally{c(!1)}}})()},[e]);const N=j.useMemo(()=>t.map(P=>{var M;return{...P,studentName:((M=n.find(T=>T.id===P.studentId))==null?void 0:M.name)||"Unknown Student"}}),[t,n]).filter(P=>P.studentName.toLowerCase().includes(u.toLowerCase())),_=()=>{b(null),f(!0)},C=P=>{b(P),f(!0)},A=P=>{b(P),g(!0)},k=async P=>{m(!0),await I.promise((async()=>{const M={student_id:P.studentId,date:P.date,status:P.status,class:P.class,session:P.session,school_id:e==null?void 0:e.school_id};if(P.id){const{data:T,error:F}=await D.from("attendance").update(M).eq("id",P.id).select().single();if(F)throw F;r(q=>q.map($=>$.id===P.id?T:$))}else{const{data:T,error:F}=await D.from("attendance").insert(M).select().single();if(F)throw F;r(q=>[T,...q])}})(),{loading:"Saving attendance...",success:"Attendance saved successfully!",error:M=>`Failed to save attendance: ${M.message}`}),m(!1),f(!1)},E=async()=>{p&&(m(!0),await I.promise((async()=>{const{error:P}=await D.from("attendance").delete().eq("id",p.id);if(P)throw P;r(M=>M.filter(T=>T.id!==p.id))})(),{loading:"Deleting record...",success:"Record deleted successfully!",error:P=>`Failed to delete record: ${P.message}`}),m(!1),g(!1),b(null))},O=P=>{switch(P){case"present":return"bg-green-100 text-green-800";case"absent":return"bg-red-100 text-red-800";case"late":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return l?s.jsx(Re,{title:"Attendance",headers:["Student","Class","Date","Session","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Attendance"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Track student daily attendance"})]}),S&&s.jsxs(R,{onClick:_,children:[s.jsx(Fe,{size:20,className:"mr-2"}),"Mark Attendance"]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by student name...",value:u,onChange:P=>h(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",defaultValue:new Date().toISOString().split("T")[0],className:"border border-gray-300 rounded-lg px-3 py-2"}),s.jsxs(R,{variant:"secondary",children:[s.jsx(Tl,{className:"mr-2 h-4 w-4"}),"Filter"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",children:"Class"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Session"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.studentName}),s.jsx("div",{className:"text-sm text-gray-500",children:P.studentId})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell text-sm text-gray-700",children:P.class}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:P.date}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:s.jsxs("div",{className:"flex items-center gap-1",children:[P.session==="Afternoon"?s.jsx(Ko,{size:14,className:"text-purple-500"}):s.jsx(Yo,{size:14,className:"text-orange-500"}),P.session||"Morning"]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${O(P.status)}`,children:P.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:S&&s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>C(P),children:s.jsx(ze,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>A(P),children:s.jsx(Te,{className:"h-4 w-4 text-red-500"})})]})})]},P.id))})]})})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:p?"Edit Attendance":"Mark Attendance",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var P;return(P=v.current)==null?void 0:P.requestSubmit()},loading:y,children:p?"Save Changes":"Save Record"})]}),children:s.jsx(nR,{ref:v,record:p,students:n,classes:i,onSubmit:k})}),s.jsx(he,{isOpen:x,onClose:()=>g(!1),title:"Delete Attendance Record",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>g(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:E,loading:y,children:"Delete"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the attendance record for ",s.jsx("strong",{children:p==null?void 0:p.studentName}),"? This action cannot be undone."]})})]})},Zge=[{icon:Jr,title:"Student Management",description:"Manage student profiles, academic records, and personal information."},{icon:Vt,title:"Teacher Management",description:"Oversee teacher profiles, subjects, schedules, and contact details."},{icon:i3,title:"Parent Management",description:"Engage with parents, manage communication, and share progress."},{icon:$i,title:"Attendance",description:"Track daily student attendance with easy-to-use registers and reports."},{icon:Mr,title:"Examination",description:"Schedule exams, manage grades, and publish results seamlessly."},{icon:Z5,title:"Timetable",description:"Create and manage class schedules for students and teachers."},{icon:xd,title:"Library",description:"Catalog books, manage borrowing, and track library inventory."},{icon:Pl,title:"Transport",description:"Manage bus routes, vehicle details, and student transport assignments."},{icon:Wb,title:"Hostel",description:"Oversee hostel rooms, occupancy, and resident information."},{icon:zE,title:"Accounting",description:"Handle fees, payroll, incomes, and expenses with integrated financial tools."},{icon:hd,title:"Events",description:"Organize and announce school events, holidays, and functions."},{icon:pd,title:"Reports",description:"Generate insightful reports on academics, finance, and administration."}],eA=["text-blue-500","text-green-500","text-purple-500","text-yellow-500","text-red-500","text-indigo-500","text-pink-500","text-sky-500","text-emerald-500","text-rose-500","text-cyan-500","text-orange-500"],eye=({icon:e,title:t,description:r,color:n})=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 flex flex-col items-start hover:shadow-lg hover:-translate-y-1 transition-all duration-300",children:[s.jsx("div",{className:"p-3 rounded-lg mb-4",style:{backgroundColor:`${n.replace("text-","bg-")}1A`},children:s.jsx(e,{className:`h-8 w-8 ${n}`})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t}),s.jsx("p",{className:"text-sm text-gray-600 flex-grow",children:r})]}),tye=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:s.jsx(v3,{className:"h-8 w-8 text-yellow-500"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"System Features"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"A comprehensive overview of the School Management System's capabilities."})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Zge.map((e,t)=>s.jsx(eye,{icon:e.icon,title:e.title,description:e.description,color:eA[t%eA.length]},e.title))})]}),rye=({onClose:e})=>{const[t,r]=j.useState(""),[n,a]=j.useState(""),[i,o]=j.useState(!1),l=async c=>{if(c.preventDefault(),t!==n){I.error("Passwords do not match");return}if(t.length<6){I.error("Password must be at least 6 characters");return}o(!0);try{const{error:u}=await D.auth.updateUser({password:t});if(u)throw u;I.success("Password updated successfully"),e()}catch(u){I.error(u.message)}finally{o(!1)}};return s.jsxs("form",{onSubmit:l,className:"space-y-4",children:[s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-md flex items-start gap-2",children:[s.jsx(Ni,{className:"h-5 w-5 text-yellow-600 shrink-0 mt-0.5"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"Ensure you choose a strong password that you haven't used before."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"New Password"}),s.jsx(J,{type:"password",value:t,onChange:c=>r(c.target.value),placeholder:"",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Confirm Password"}),s.jsx(J,{type:"password",value:n,onChange:c=>a(c.target.value),placeholder:"",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(R,{type:"button",variant:"secondary",onClick:e,children:"Cancel"}),s.jsx(R,{type:"submit",loading:i,children:"Update Password"})]})]})},nye=()=>{const{schoolName:e,schoolFee:t,academicYear:r,schoolLogo:n,updateSetting:a,profile:i}=fe(),[o,l]=j.useState(!1),[c,u]=j.useState(e),[h,d]=j.useState(!1),[f,p]=j.useState(r),[b,x]=j.useState(t),[g,y]=j.useState(!1),[m,v]=j.useState(!1);j.useEffect(()=>{u(e)},[e]),j.useEffect(()=>{p(r)},[r]),j.useEffect(()=>{x(t)},[t]);const S=async()=>{await a("school_name",c),l(!1)},w=async()=>{await a("academic_year",f),d(!1)},N=async()=>{await a("school_fee",b),y(!0),setTimeout(()=>y(!1),2e3)},_=async A=>{if(!(!A||!(i!=null&&i.school_id)))try{const k=A.name.split(".").pop(),E=`school-logos/${i.school_id}-${Date.now()}.${k}`,{error:O}=await D.storage.from("avatars").upload(E,A);if(O)throw O;const{data:P}=D.storage.from("avatars").getPublicUrl(E),{error:M}=await D.from("schools").update({logo_url:P.publicUrl}).eq("id",i.school_id);if(M)throw M;I.success("School logo updated! Refresh to see changes.")}catch(k){I.error(`Failed to update logo: ${k.message}`)}},C=()=>{i!=null&&i.school_id&&(navigator.clipboard.writeText(i.school_id),I.success("School ID copied to clipboard"))};return s.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx($l,{className:"h-10 w-10 text-gray-500"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Settings"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage your account and application settings"})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx(Kb,{className:"mr-3 h-5 w-5 text-blue-600"}),"General Settings"]})}),s.jsxs("div",{className:"p-6 space-y-4 divide-y",children:[s.jsxs("div",{className:"flex justify-between items-center pb-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-700",children:"School ID"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Unique identifier for your institution"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 px-3 py-2 rounded-md border border-slate-200",children:[s.jsx("code",{className:"text-sm text-slate-700 font-mono",children:(i==null?void 0:i.school_id)||"Not Assigned"}),(i==null?void 0:i.school_id)&&s.jsx("button",{onClick:C,className:"text-slate-400 hover:text-blue-600 transition-colors",title:"Copy ID",children:s.jsx(n3,{size:14})})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"schoolName",className:"font-medium text-gray-700",children:"School Name"}),o?s.jsx(J,{id:"schoolName",type:"text",value:c,onChange:A=>u(A.target.value),className:"mt-1"}):s.jsx("p",{className:"text-sm text-gray-500",children:e})]}),o?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{variant:"secondary",onClick:()=>{l(!1),u(e)},children:"Cancel"}),s.jsx(R,{onClick:S,children:"Save"})]}):s.jsx(R,{variant:"secondary",onClick:()=>l(!0),children:"Edit"})]}),s.jsx("div",{className:"flex justify-between items-start pt-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"font-medium text-gray-700",children:"School Logo"}),s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Upload your school's official logo."}),s.jsx(nx,{onFileChange:_,initialPreviewUrl:n})]})}),s.jsxs("div",{className:"flex justify-between items-center pt-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"academicYear",className:"font-medium text-gray-700",children:"Academic Year"}),h?s.jsx(J,{id:"academicYear",type:"text",value:f,onChange:A=>p(A.target.value),className:"mt-1",placeholder:"e.g., 2024-2025"}):s.jsx("p",{className:"text-sm text-gray-500",children:r})]}),h?s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{variant:"secondary",onClick:()=>{d(!1),p(r)},children:"Cancel"}),s.jsx(R,{onClick:w,children:"Save"})]}):s.jsx(R,{variant:"secondary",onClick:()=>d(!0),children:"Change"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx(zE,{className:"mr-3 h-5 w-5 text-green-600"}),"Fee Settings"]})}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"schoolFee",className:"font-medium text-gray-700",children:"Base Tuition Fee (Birr)"}),s.jsx("p",{className:"text-sm text-gray-500",children:"This fee will be applied as the base tuition for all students."})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{id:"schoolFee",type:"number",value:b,onChange:A=>x(Number(A.target.value)),className:"w-32 text-right"}),s.jsx(R,{onClick:N,disabled:g,children:g?"Saved!":"Save"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx(Uy,{className:"mr-3 h-5 w-5 text-yellow-600"}),"Notifications"]})}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Email Notifications"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Receive important updates via email."})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",value:"",className:"sr-only peer",defaultChecked:!0}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[s.jsx(Ni,{className:"mr-3 h-5 w-5 text-red-600"}),"Security"]})}),s.jsx("div",{className:"p-6 space-y-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-700",children:"Password"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Update your account password."})]}),s.jsx(R,{variant:"secondary",onClick:()=>v(!0),children:"Change Password"})]})})]}),s.jsx(he,{isOpen:m,onClose:()=>v(!1),title:"Change Password",size:"sm",children:s.jsx(rye,{onClose:()=>v(!1)})})]})},qg=["donations","grants","rentals","fundraising","other"],sR=j.forwardRef(({income:e,onSubmit:t},r)=>{const[n,a]=j.useState({title:"",category:qg[0],amount:0,date:new Date().toISOString().split("T")[0],description:""});j.useEffect(()=>{a(e||{title:"",category:qg[0],amount:0,date:new Date().toISOString().split("T")[0],description:""})},[e]);const i=l=>{const{name:c,value:u,type:h}=l.target;a(d=>({...d,[c]:h==="number"?parseFloat(u):u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"title",children:"Title"}),s.jsx(J,{id:"title",name:"title",value:n.title,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"category",children:"Category"}),s.jsx(le,{id:"category",name:"category",value:n.category,onChange:i,children:qg.map(l=>s.jsx("option",{value:l,className:"capitalize",children:l},l))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"amount",children:"Amount (Birr)"}),s.jsx(J,{id:"amount",name:"amount",type:"number",min:"0",value:n.amount,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",name:"date",type:"date",value:n.date,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"description",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:i,rows:3,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});sR.displayName="IncomeForm";const sye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState(!1),[p,b]=j.useState(!1),x=j.useRef(null);j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){a(!0);try{const{data:C,error:A}=await D.from("incomes").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});if(A)throw A;r(C)}catch(C){const A=(C==null?void 0:C.message)||(typeof C=="object"?JSON.stringify(C):String(C));I.error(`Failed to fetch incomes: ${A}`)}finally{a(!1)}}})()},[e]);const g=t.filter(_=>_.title.toLowerCase().includes(i.toLowerCase())||_.category.toLowerCase().includes(i.toLowerCase())),y=()=>{h(null),c(!0)},m=_=>{h(_),c(!0)},v=_=>{h(_),f(!0)},S=async _=>{b(!0),await I.promise((async()=>{const C={..._,school_id:e==null?void 0:e.school_id};if(_.id){const{data:A,error:k}=await D.from("incomes").update(C).eq("id",_.id).select().single();if(k)throw k;r(E=>E.map(O=>O.id===_.id?A:O))}else{const{data:A,error:k}=await D.from("incomes").insert(C).select().single();if(k)throw k;r(E=>[A,...E])}})(),{loading:"Saving income...",success:"Income saved successfully!",error:C=>`Failed to save income: ${C.message}`}),b(!1),c(!1)},w=async()=>{u&&(b(!0),await I.promise((async()=>{const{error:_}=await D.from("incomes").delete().eq("id",u.id);if(_)throw _;r(C=>C.filter(A=>A.id!==u.id))})(),{loading:"Deleting income...",success:"Income deleted successfully!",error:_=>`Failed to delete income: ${_.message}`}),b(!1),f(!1),h(null))},N=j.useMemo(()=>g.reduce((_,C)=>_+C.amount,0),[g]);return n?s.jsx(Re,{title:"Other Incomes",headers:["Title","Category","Amount","Date","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 tracking-tight",children:"Other Incomes"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Track and manage non-fee related income"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{variant:"secondary",className:"border border-slate-200",children:[s.jsx(Oa,{size:18,className:"mr-2"}),"Export"]}),s.jsxs(R,{onClick:y,className:"shadow-md shadow-blue-500/20",children:[s.jsx(Fe,{size:18,className:"mr-2"}),"Add Income"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Income (Filtered)"}),s.jsx("p",{className:"text-3xl font-bold text-emerald-600 mt-2",children:$e(N)})]}),s.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg",children:s.jsx(ss,{className:"h-6 w-6 text-emerald-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search by title or category...",value:i,onChange:_=>o(_.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm transition-all"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Title"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden md:table-cell",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden lg:table-cell",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:g.map(_=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:_.title}),s.jsx("div",{className:"text-xs text-slate-500 font-mono",children:_.id})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsx(_t,{variant:"neutral",className:"capitalize",children:_.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-emerald-600",children:$e(_.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell text-sm text-slate-700",children:De(_.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>m(_),title:"Edit",children:s.jsx(ze,{className:"h-4 w-4 text-slate-500 hover:text-amber-600"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>v(_),title:"Delete",children:s.jsx(Te,{className:"h-4 w-4 text-slate-500 hover:text-rose-600"})})]})})]},_.id))})]})}),g.length===0&&s.jsx(Ui,{icon:ss,title:"No income records found",description:"Add a new income record to track revenue.",actionLabel:"Add Income",onAction:y})]}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Income":"Add New Income",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var _;return(_=x.current)==null?void 0:_.requestSubmit()},loading:p,children:u?"Save Changes":"Add Income"})]}),children:s.jsx(sR,{ref:x,income:u,onSubmit:S})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:"Delete Income",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:w,loading:p,children:"Delete Record"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the income record ",s.jsxs("strong",{children:['"',u==null?void 0:u.title,'"']}),"? This action cannot be undone."]})})]})},Vg=["salaries","utilities","maintenance","supplies","technology","other"],aR=j.forwardRef(({expense:e,onSubmit:t},r)=>{const[n,a]=j.useState({title:"",category:Vg[0],amount:0,date:new Date().toISOString().split("T")[0],description:""});j.useEffect(()=>{a(e||{title:"",category:Vg[0],amount:0,date:new Date().toISOString().split("T")[0],description:""})},[e]);const i=l=>{const{name:c,value:u,type:h}=l.target;a(d=>({...d,[c]:h==="number"?parseFloat(u):u}))},o=l=>{l.preventDefault(),t({...n,id:e==null?void 0:e.id})};return s.jsxs("form",{ref:r,onSubmit:o,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"title",children:"Title"}),s.jsx(J,{id:"title",name:"title",value:n.title,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"category",children:"Category"}),s.jsx(le,{id:"category",name:"category",value:n.category,onChange:i,children:Vg.map(l=>s.jsx("option",{value:l,className:"capitalize",children:l},l))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"amount",children:"Amount (Birr)"}),s.jsx(J,{id:"amount",name:"amount",type:"number",min:"0",value:n.amount,onChange:i,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",name:"date",type:"date",value:n.date,onChange:i,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"description",children:"Description"}),s.jsx("textarea",{id:"description",name:"description",value:n.description,onChange:i,rows:3,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm"})]}),s.jsx("button",{type:"submit",className:"hidden",children:"Submit"})]})});aR.displayName="ExpenseForm";const aye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState(!1),[p,b]=j.useState(!1);j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){a(!0);try{const{data:_,error:C}=await D.from("expenses").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});if(C)throw C;r(_)}catch(_){const C=(_==null?void 0:_.message)||(typeof _=="object"?JSON.stringify(_):String(_));I.error(`Failed to fetch expenses: ${C}`)}finally{a(!1)}}})()},[e]);const x=t.filter(N=>N.title.toLowerCase().includes(i.toLowerCase())||N.category.toLowerCase().includes(i.toLowerCase())),g=()=>{h(null),c(!0)},y=N=>{h(N),c(!0)},m=N=>{h(N),f(!0)},v=async N=>{b(!0),await I.promise((async()=>{const _={...N,school_id:e==null?void 0:e.school_id};if(N.id){const{data:C,error:A}=await D.from("expenses").update(_).eq("id",N.id).select().single();if(A)throw A;r(k=>k.map(E=>E.id===N.id?C:E))}else{const{data:C,error:A}=await D.from("expenses").insert(_).select().single();if(A)throw A;r(k=>[C,...k])}})(),{loading:"Saving expense...",success:"Expense saved successfully!",error:_=>`Failed to save expense: ${_.message}`}),b(!1),c(!1)},S=async()=>{u&&(b(!0),await I.promise((async()=>{const{error:N}=await D.from("expenses").delete().eq("id",u.id);if(N)throw N;r(_=>_.filter(C=>C.id!==u.id))})(),{loading:"Deleting expense...",success:"Expense deleted successfully!",error:N=>`Failed to delete expense: ${N.message}`}),b(!1),f(!1),h(null))},w=j.useMemo(()=>x.reduce((N,_)=>N+_.amount,0),[x]);return n?s.jsx(Re,{title:"Expenses",headers:["Title","Category","Amount","Date","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 tracking-tight",children:"Expenses"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Track and manage all school expenses"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{variant:"secondary",className:"border border-slate-200",children:[s.jsx(Oa,{size:18,className:"mr-2"}),"Export"]}),s.jsxs(R,{onClick:g,className:"shadow-md shadow-blue-500/20",children:[s.jsx(Fe,{size:18,className:"mr-2"}),"Add Expense"]})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Total Expenses (Filtered)"}),s.jsx("p",{className:"text-3xl font-bold text-rose-600 mt-2",children:$e(w)})]}),s.jsx("div",{className:"p-3 bg-rose-100 rounded-lg",children:s.jsx(Xo,{className:"h-6 w-6 text-rose-600"})})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search by title or category...",value:i,onChange:N=>o(N.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none text-sm transition-all"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-card border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Title"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden md:table-cell",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider hidden lg:table-cell",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:x.map(N=>s.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:N.title}),s.jsx("div",{className:"text-xs text-slate-500 font-mono",children:N.id})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden md:table-cell",children:s.jsx(_t,{variant:"neutral",className:"capitalize",children:N.category})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-rose-600",children:$e(N.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap hidden lg:table-cell text-sm text-slate-700",children:De(N.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>y(N),title:"Edit",children:s.jsx(ze,{className:"h-4 w-4 text-slate-500 hover:text-amber-600"})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>m(N),title:"Delete",children:s.jsx(Te,{className:"h-4 w-4 text-slate-500 hover:text-rose-600"})})]})})]},N.id))})]})}),x.length===0&&s.jsx(Ui,{icon:Xo,title:"No expenses found",description:"Add a new expense record to track spending.",actionLabel:"Add Expense",onAction:g})]}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Expense":"Add New Expense",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:()=>{var N;return(N=formRef.current)==null?void 0:N.requestSubmit()},loading:p,children:u?"Save Changes":"Add Expense"})]}),children:s.jsx(aR,{ref:formRef,expense:u,onSubmit:v})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:"Delete Expense",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{variant:"danger",onClick:S,loading:p,children:"Delete Record"})]}),children:s.jsxs("p",{children:["Are you sure you want to delete the expense ",s.jsxs("strong",{children:['"',u==null?void 0:u.title,'"']}),"? This action cannot be undone."]})})]})},iye=({data:e})=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-border h-full",children:[s.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Financial Summary"}),s.jsx("div",{style:{width:"100%",height:300},children:s.jsx(Rr,{children:s.jsxs(Ks,{data:e,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Sn,{strokeDasharray:"3 3",horizontal:!1}),s.jsx(_r,{type:"number",tickFormatter:t=>`${(t/1e3).toFixed(0)}k`}),s.jsx(pr,{type:"category",dataKey:"name",width:80}),s.jsx(pt,{formatter:t=>`${t.toLocaleString()} Birr`}),s.jsx(At,{dataKey:"value",radius:[0,4,4,0],children:e.map((t,r)=>s.jsx(At,{fill:t.fill},`cell-${r}`))})]})})})]}),tA=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ff7c7c","#60a5fa"],oye=({data:e})=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200 h-full",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Student Distribution by Class"}),s.jsx("div",{style:{width:"100%",height:300},children:s.jsx(Rr,{children:s.jsxs(Gw,{children:[s.jsx(Wn,{data:e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,fill:"#8884d8",paddingAngle:5,dataKey:"value",children:e.map((t,r)=>s.jsx(Gl,{fill:tA[r%tA.length]},`cell-${r}`))}),s.jsx(pt,{contentStyle:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #e2e8f0"},itemStyle:{color:"#1e293b"}}),s.jsx(Yr,{})]})})})]}),rA=()=>{const{profile:e}=fe(),[t,r]=j.useState(null),[n,a]=j.useState(!0);j.useEffect(()=>{(async()=>{if(e!=null&&e.school_id){a(!0);try{const l=e.school_id,[c,u,h,d,f,p,b,x,g,y]=await Promise.all([D.from("students").select("*",{count:"exact"}).eq("school_id",l),D.from("teachers").select("*",{count:"exact"}).eq("school_id",l),D.from("grades").select("gpa").eq("school_id",l),D.from("classes").select("name").eq("school_id",l),D.from("fees").select("amount").eq("status","paid").eq("school_id",l),D.from("payrolls").select("net_salary").eq("status","paid").eq("school_id",l),D.from("incomes").select("amount").eq("school_id",l),D.from("expenses").select("amount").eq("school_id",l),D.from("library_books").select("quantity, available").eq("school_id",l),D.from("hostel_rooms").select("capacity, occupants, status").eq("school_id",l)]),m=c.data||[],v=u.data||[],S=h.data||[],w=d.data||[],N=f.data||[],_=p.data||[],C=b.data||[],A=x.data||[],k=g.data||[],E=y.data||[],O=c.count||0,P=u.count||0,M=N.reduce((Q,se)=>Q+se.amount,0),T=C.reduce((Q,se)=>Q+se.amount,0),F=M+T,q=_.reduce((Q,se)=>Q+se.net_salary,0),$=A.reduce((Q,se)=>Q+se.amount,0),U=q+$,X=F-U,K=[{name:"Fees",value:M,fill:"#3b82f6"},{name:"Other Income",value:T,fill:"#84cc16"},{name:"Payroll",value:q,fill:"#ef4444"},{name:"Other Expenses",value:$,fill:"#f97316"}],z=w.map(Q=>({name:`Class ${Q.name}`,value:m.filter(se=>`${se.class}-${se.section}`===Q.name).length})).filter(Q=>Q.value>0),H=[{module:"Students",total:O,metric1:`Active: ${m.filter(Q=>Q.status==="active").length}`,metric2:`Avg. GPA: ${(S.length>0?S.reduce((Q,se)=>Q+se.gpa,0)/S.length:0).toFixed(2)}`},{module:"Teachers",total:P,metric1:`Active: ${v.filter(Q=>Q.status==="active").length}`,metric2:`Avg. Salary: ${(v.length>0?v.reduce((Q,se)=>Q+se.salary,0)/v.length:0).toFixed(0)}`},{module:"Library",total:k.reduce((Q,se)=>Q+se.quantity,0),metric1:`Available: ${k.reduce((Q,se)=>Q+se.available,0)}`,metric2:`Titles: ${k.length}`},{module:"Hostel",total:E.length,metric1:`Available Rooms: ${E.filter(Q=>Q.status==="available").length}`,metric2:`Occupancy: ${(E.reduce((Q,se)=>Q+se.occupants.length,0)/(E.reduce((Q,se)=>Q+se.capacity,0)||1)*100).toFixed(0)}%`}];r({totalRevenue:F,totalCosts:U,netIncome:X,studentCount:O,financialChartData:K,classDistribution:z,summaryTable:H})}catch(l){I.error(`Failed to load report data: ${l.message}`)}finally{a(!1)}}})()},[e]);const i=(t==null?void 0:t.netIncome)>=0?"text-emerald-600":"text-rose-600";return n||!t?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((o,l)=>s.jsx(je,{className:"h-32 w-full"},l))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[s.jsx(je,{className:"lg:col-span-3 h-80 w-full"}),s.jsx(je,{className:"lg:col-span-2 h-80 w-full"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Pr,{title:"Total Revenue",value:$e(t.totalRevenue),icon:ss,iconBgColor:"bg-green-500",trend:"+12% this year",trendDirection:"up"}),s.jsx(Pr,{title:"Total Costs",value:$e(t.totalCosts),icon:Xo,iconBgColor:"bg-red-500",trend:"+5% this year",trendDirection:"up"}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-5 border border-slate-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500",children:"Net Income"}),s.jsx("p",{className:`text-3xl font-bold mt-1 ${i}`,children:$e(t.netIncome)})]}),s.jsx("div",{className:`p-3 rounded-lg ${t.netIncome>=0?"bg-green-100":"bg-red-100"}`,children:s.jsx($t,{className:`h-6 w-6 ${i}`})})]})}),s.jsx(Pr,{title:"Total Students",value:t.studentCount.toString(),icon:Vt,iconBgColor:"bg-blue-500",trend:"+5% this year",trendDirection:"up"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"lg:col-span-3",children:s.jsx(iye,{data:t.financialChartData})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsx(oye,{data:t.classDistribution})})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[s.jsx("div",{className:"p-4 border-b border-slate-200 bg-slate-50",children:s.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider",children:"System Summary"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Module"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Items"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Metric 1"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Metric 2"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:t.summaryTable.map(o=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:o.module}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:o.total}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:o.metric1}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-700",children:o.metric2})]},o.module))})]})})]})]})},nA=["#0088FE","#00C49F","#FFBB28","#FF8042"],lye=()=>{const{profile:e}=fe(),[t,r]=j.useState(null),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("students").select("*").eq("school_id",e.school_id);if(o){const l=o.reduce((d,f)=>(d[f.status]=(d[f.status]||0)+1,d),{}),c=Object.keys(l).map(d=>({name:d,value:l[d]})),u=o.reduce((d,f)=>{const p=`Class ${f.class}`;return d[p]=(d[p]||0)+1,d},{}),h=Object.keys(u).map(d=>({name:d,value:u[d]}));r({statusData:c,classData:h})}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Student Status Distribution"}),s.jsx("div",{className:"h-80",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Gw,{children:[s.jsx(Wn,{data:t==null?void 0:t.statusData,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:!0,children:t==null?void 0:t.statusData.map((i,o)=>s.jsx(Gl,{fill:nA[o%nA.length]},`cell-${o}`))}),s.jsx(pt,{}),s.jsx(Yr,{})]})})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Enrollment by Class"}),s.jsx("div",{className:"h-80",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:t==null?void 0:t.classData,children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name"}),s.jsx(pr,{}),s.jsx(pt,{}),s.jsx(At,{dataKey:"value",fill:"#3b82f6",radius:[4,4,0,0]})]})})})]})]})},cye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const[o,l,c,u]=await Promise.all([D.from("fees").select("amount, due_date").eq("status","paid").eq("school_id",e.school_id),D.from("incomes").select("amount, date").eq("school_id",e.school_id),D.from("expenses").select("amount, date").eq("school_id",e.school_id),D.from("payrolls").select("net_salary, paid_date").eq("status","paid").eq("school_id",e.school_id)]),h={},d=(x,g)=>{x==null||x.forEach(y=>{const v=new Date(y[g]).toLocaleString("default",{month:"short"});h[v]||(h[v]={name:v,income:0,expense:0}),h[v].income+=y.amount})},f=(x,g,y)=>{x==null||x.forEach(m=>{const S=new Date(m[y]).toLocaleString("default",{month:"short"});h[S]||(h[S]={name:S,income:0,expense:0}),h[S].expense+=m[g]})};d(o.data||[],"due_date"),d(l.data||[],"date"),f(c.data||[],"amount","date"),f(u.data||[],"net_salary","paid_date");const b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(x=>h[x]||{name:x,income:0,expense:0});r(b),a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Monthly Financial Overview"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:t,children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name"}),s.jsx(pr,{}),s.jsx(pt,{formatter:i=>$e(i)}),s.jsx(Yr,{}),s.jsx(At,{dataKey:"income",name:"Income",fill:"#10b981",radius:[4,4,0,0]}),s.jsx(At,{dataKey:"expense",name:"Expense",fill:"#ef4444",radius:[4,4,0,0]})]})})})]})},uye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("attendance").select("date, status").eq("school_id",e.school_id);if(o){const l={};o.forEach(u=>{const h=u.date;l[h]||(l[h]={date:h,present:0,total:0}),l[h].total++,u.status==="present"&&l[h].present++});const c=Object.values(l).map(u=>({date:u.date,rate:Math.round(u.present/u.total*100)})).sort((u,h)=>new Date(u.date).getTime()-new Date(h.date).getTime()).slice(-30);r(c)}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Daily Attendance Rate (Last 30 Days)"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(RM,{data:t,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorRate",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"date",tickFormatter:i=>new Date(i).toLocaleDateString(void 0,{month:"short",day:"numeric"})}),s.jsx(pr,{domain:[0,100]}),s.jsx(pt,{labelFormatter:i=>new Date(i).toLocaleDateString(),formatter:i=>`${i}%`}),s.jsx(Gs,{type:"monotone",dataKey:"rate",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorRate)"})]})})})]})},dye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("grades").select("gpa, exams(name)").eq("school_id",e.school_id);if(o){const l={};o.forEach(u=>{var d;const h=((d=u.exams)==null?void 0:d.name)||"Unknown";l[h]||(l[h]={name:h,totalGpa:0,count:0}),l[h].totalGpa+=u.gpa,l[h].count++});const c=Object.values(l).map(u=>({name:u.name,avgGpa:parseFloat((u.totalGpa/u.count).toFixed(2))}));r(c)}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Average GPA by Exam"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:t,children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name"}),s.jsx(pr,{domain:[0,4]}),s.jsx(pt,{}),s.jsx(At,{dataKey:"avgGpa",fill:"#f59e0b",radius:[4,4,0,0],name:"Average GPA"})]})})})]})},sA=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],hye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("teachers").select("subject").eq("school_id",e.school_id);if(o){const l=o.reduce((u,h)=>(u[h.subject]=(u[h.subject]||0)+1,u),{}),c=Object.keys(l).map(u=>({name:u,value:l[u]}));r(c)}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Teacher Distribution by Subject"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Gw,{children:[s.jsx(Wn,{data:t,cx:"50%",cy:"50%",outerRadius:100,fill:"#8884d8",dataKey:"value",label:!0,children:t.map((i,o)=>s.jsx(Gl,{fill:sA[o%sA.length]},`cell-${o}`))}),s.jsx(pt,{}),s.jsx(Yr,{})]})})})]})},fye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("library_books").select("genre, quantity").eq("school_id",e.school_id);if(o){const l={};o.forEach(u=>{l[u.genre]||(l[u.genre]=0),l[u.genre]+=u.quantity});const c=Object.keys(l).map(u=>({name:u,count:l[u]}));r(c)}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Book Collection by Genre"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:t,layout:"vertical",margin:{left:20},children:[s.jsx(Sn,{strokeDasharray:"3 3",horizontal:!1}),s.jsx(_r,{type:"number"}),s.jsx(pr,{dataKey:"name",type:"category",width:100}),s.jsx(pt,{}),s.jsx(At,{dataKey:"count",fill:"#ec4899",radius:[0,4,4,0],name:"Book Count"})]})})})]})},mye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("inventory_items").select("category, quantity, unit_price").eq("school_id",e.school_id);if(o){const l={};o.forEach(u=>{l[u.category]||(l[u.category]=0),l[u.category]+=u.quantity*u.unit_price});const c=Object.keys(l).map(u=>({name:u,value:l[u]}));r(c)}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Inventory Value by Category"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:t,children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name"}),s.jsx(pr,{}),s.jsx(pt,{formatter:i=>$e(i)}),s.jsx(At,{dataKey:"value",fill:"#6366f1",radius:[4,4,0,0],name:"Total Value"})]})})})]})},pye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:o}=await D.from("transport_vehicles").select("vehicle_number, capacity, student_count").eq("school_id",e.school_id);if(o){const l=o.map(c=>({name:c.vehicle_number,capacity:c.capacity,occupied:c.student_count}));r(l)}a(!1)})()},[e]),n?s.jsx(je,{className:"h-96 w-full"}):s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Vehicle Capacity vs Occupancy"}),s.jsx("div",{className:"h-96",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:t,children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name"}),s.jsx(pr,{}),s.jsx(pt,{}),s.jsx(Yr,{}),s.jsx(At,{dataKey:"capacity",fill:"#94a3b8",name:"Total Capacity"}),s.jsx(At,{dataKey:"occupied",fill:"#0ea5e9",name:"Occupied Seats"})]})})})]})},xye=[{id:"overview",label:"Overview",icon:Ea},{id:"students",label:"Students",icon:Vt},{id:"finance",label:"Finance",icon:$t},{id:"attendance",label:"Attendance",icon:$i},{id:"exams",label:"Examinations",icon:Mr},{id:"hr",label:"Human Resource",icon:Vt},{id:"library",label:"Library",icon:qn},{id:"inventory",label:"Inventory",icon:Ym},{id:"transport",label:"Transport",icon:Pl}],gye=()=>{const[e,t]=j.useState("overview"),[r,n]=j.useState(!1),a=()=>{switch(e){case"overview":return s.jsx(rA,{});case"students":return s.jsx(lye,{});case"finance":return s.jsx(cye,{});case"attendance":return s.jsx(uye,{});case"exams":return s.jsx(dye,{});case"hr":return s.jsx(hye,{});case"library":return s.jsx(fye,{});case"inventory":return s.jsx(mye,{});case"transport":return s.jsx(pye,{});default:return s.jsx(rA,{})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 flex items-center gap-3",children:[s.jsx(pd,{className:"text-blue-600"})," Reports & Analytics"]}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Comprehensive insights into school performance."})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-2",children:s.jsx("div",{className:"flex overflow-x-auto pb-2 sm:pb-0 scrollbar-thin scrollbar-thumb-slate-200 gap-1",children:xye.map(i=>{const o=i.icon,l=e===i.id;return s.jsxs("button",{onClick:()=>t(i.id),className:`flex items-center px-4 py-2.5 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${l?"bg-blue-50 text-blue-700 shadow-sm":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[s.jsx(o,{size:16,className:`mr-2 ${l?"text-blue-600":"text-slate-400"}`}),i.label]},i.id)})})}),s.jsx("div",{className:"animate-in fade-in duration-300",children:a()})]})},yye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState("");j.useEffect(()=>{(async()=>{if(!(!(e!=null&&e.school_id)&&(e==null?void 0:e.role)!=="system_admin")){a(!0);try{let u=D.from("user_logs").select("*").order("login_time",{ascending:!1}).limit(100);e.role!=="system_admin"&&(u=u.eq("school_id",e.school_id));const{data:h,error:d}=await u;if(d)throw d;r(h||[])}catch{I.error("Failed to load logs")}finally{a(!1)}}})()},[e]);const l=t.filter(c=>(c.user_name||"").toLowerCase().includes(i.toLowerCase())||(c.role||"").toLowerCase().includes(i.toLowerCase()));return n?s.jsx(Re,{title:"User Logs",headers:["User","Role","Time","Status"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg text-blue-600",children:s.jsx(Yb,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"User Logs"}),s.jsx("p",{className:"text-slate-500",children:"Track user login activity (Last 100 records)"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search logs...",value:i,onChange:c=>o(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Role"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[l.map(c=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-6 py-4 flex items-center gap-2 font-medium text-slate-900",children:[s.jsx(qt,{size:16,className:"text-slate-400"})," ",c.user_name||"Unknown"]}),s.jsx("td",{className:"px-6 py-4 text-slate-600 capitalize",children:c.role}),s.jsxs("td",{className:"px-6 py-4 text-slate-600 flex items-center gap-2",children:[s.jsx(rn,{size:14,className:"text-slate-400"})," ",new Date(c.login_time).toLocaleString()]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${c.status==="Success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:c.status})})]},c.id)),l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No logs found."})})]})]})})]})},vye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState("");j.useEffect(()=>{(async()=>{if(!(!(e!=null&&e.school_id)&&(e==null?void 0:e.role)!=="system_admin")){a(!0);try{let u=D.from("audit_logs").select("*").order("created_at",{ascending:!1}).limit(100);e.role!=="system_admin"&&(u=u.eq("school_id",e.school_id));const{data:h,error:d}=await u;if(d)throw d;r(h||[])}catch{I.error("Failed to load audit trail")}finally{a(!1)}}})()},[e]);const l=t.filter(c=>{var u;return c.action.toLowerCase().includes(i.toLowerCase())||c.module.toLowerCase().includes(i.toLowerCase())||((u=c.user_name)==null?void 0:u.toLowerCase().includes(i.toLowerCase()))});return n?s.jsx(Re,{title:"Audit Trail",headers:["Action","Module","User","Details","Timestamp"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg text-orange-600",children:s.jsx(ME,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Audit Trail"}),s.jsx("p",{className:"text-slate-500",children:"Log of system modifications (Last 100 actions)"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative max-w-md",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search actions...",value:i,onChange:c=>o(c.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Action"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Module"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"User"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Timestamp"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[l.map(c=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:c.action}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded text-xs font-medium text-slate-600",children:c.module})}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:c.user_name||"System"}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm max-w-xs truncate",title:c.details,children:c.details}),s.jsx("td",{className:"px-6 py-4 text-slate-500 text-xs",children:new Date(c.created_at).toLocaleString()})]},c.id)),l.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No activity recorded."})})]})]})})]})},aA=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],iA=()=>{const{profile:e}=fe(),t=os(),[r,n]=j.useState("class"),[a,i]=j.useState(""),[o,l]=j.useState([]),[c,u]=j.useState([]),[h,d]=j.useState([]),[f,p]=j.useState([]),[b,x]=j.useState(!1),[g,y]=j.useState(!1),[m,v]=j.useState(null),[S,w]=j.useState({day_of_week:"Monday",subject_id:"",teacher_id:"",class_id:"",start_time:"09:00",end_time:"10:00"}),N=["system_admin","admin","principal"].includes((e==null?void 0:e.role)||"");j.useEffect(()=>{t.pathname==="/teachers-timetable"?n("teacher"):n("class")},[t.pathname]),j.useEffect(()=>{(async()=>{if(!e)return;let P=D.from("classes").select("id, name"),M=D.from("teachers").select("id, name"),T=D.from("courses").select("id, name");e.role!=="system_admin"&&e.school_id&&(P=P.eq("school_id",e.school_id),M=M.eq("school_id",e.school_id),T=T.eq("school_id",e.school_id));const[F,q,$]=await Promise.all([P,M,T]);F.data&&l(F.data.map(U=>({...U,name:`Class ${U.name}`}))),q.data&&u(q.data),$.data&&d($.data),r==="class"&&F.data&&F.data.length>0?i(F.data[0].id):r==="teacher"&&q.data&&q.data.length>0&&i(q.data[0].id)})()},[r,e]),j.useEffect(()=>{a&&_()},[a,r]);const _=async()=>{if(!e)return;x(!0);let O=D.from("timetables").select(`
        id, day_of_week, start_time, end_time, class_id, teacher_id, subject_id,
        courses(name),
        teachers(name),
        classes(name)
      `);e.role!=="system_admin"&&e.school_id&&(O=O.eq("school_id",e.school_id)),r==="class"?O=O.eq("class_id",a):O=O.eq("teacher_id",a);const{data:P,error:M}=await O;if(M)I.error("Failed to load timetable");else{const T=P.map(F=>{var q,$,U;return{id:F.id,day_of_week:F.day_of_week,start_time:F.start_time.slice(0,5),end_time:F.end_time.slice(0,5),subject_name:((q=F.courses)==null?void 0:q.name)||"N/A",teacher_name:(($=F.teachers)==null?void 0:$.name)||"N/A",class_name:(U=F.classes)!=null&&U.name?`Class ${F.classes.name}`:"N/A",subject_id:F.subject_id,teacher_id:F.teacher_id,class_id:F.class_id}});p(T)}x(!1)},C=O=>{O?(v(O),w({day_of_week:O.day_of_week,subject_id:O.subject_id||"",teacher_id:O.teacher_id||"",class_id:O.class_id||"",start_time:O.start_time,end_time:O.end_time})):(v(null),w({day_of_week:"Monday",subject_id:"",teacher_id:r==="teacher"?a:"",class_id:r==="class"?a:"",start_time:"09:00",end_time:"10:00"})),y(!0)},A=async()=>{const O={...S,class_id:S.class_id||(r==="class"?a:""),teacher_id:S.teacher_id||(r==="teacher"?a:""),school_id:e==null?void 0:e.school_id};if(!O.class_id||!O.teacher_id||!O.subject_id){I.error("Please fill all fields.");return}try{if(m){const{error:P}=await D.from("timetables").update(O).eq("id",m.id);if(P)throw P;I.success("Timetable updated")}else{const{error:P}=await D.from("timetables").insert(O);if(P)throw P;I.success("Added to timetable")}y(!1),_()}catch(P){I.error(P.message)}},k=async O=>{if(confirm("Are you sure you want to delete this entry?"))try{const{error:P}=await D.from("timetables").delete().eq("id",O);if(P)throw P;I.success("Entry removed"),p(M=>M.filter(T=>T.id!==O))}catch(P){I.error(P.message)}},E=O=>{n(O),O==="class"&&o.length>0&&i(o[0].id),O==="teacher"&&c.length>0&&i(c[0].id)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Timetable"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage weekly schedules"})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-1 flex",children:[s.jsx("button",{onClick:()=>E("class"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${r==="class"?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-50"}`,children:"Class View"}),s.jsx("button",{onClick:()=>E("teacher"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${r==="teacher"?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-50"}`,children:"Teacher View"})]}),s.jsx(le,{value:a,onChange:O=>i(O.target.value),className:"w-48",children:r==="class"?o.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id)):c.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))}),N&&s.jsxs(R,{onClick:()=>C(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Schedule"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:aA.map(O=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col h-full",children:[s.jsx("div",{className:"p-3 border-b border-slate-100 bg-slate-50 rounded-t-xl",children:s.jsx("h3",{className:"font-semibold text-slate-700 text-center",children:O})}),s.jsxs("div",{className:"p-3 space-y-3 flex-grow",children:[f.filter(P=>P.day_of_week===O).sort((P,M)=>P.start_time.localeCompare(M.start_time)).map(P=>s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100 relative group hover:shadow-sm transition-shadow",children:[s.jsxs("div",{className:"flex items-center text-xs font-medium text-blue-600 mb-1",children:[s.jsx(rn,{size:12,className:"mr-1"}),P.start_time," - ",P.end_time]}),s.jsx("p",{className:"font-bold text-slate-800 text-sm",children:P.subject_name}),r==="class"?s.jsxs("div",{className:"flex items-center text-xs text-slate-500 mt-1",children:[s.jsx(qt,{size:12,className:"mr-1"})," ",P.teacher_name]}):s.jsxs("div",{className:"flex items-center text-xs text-slate-500 mt-1",children:[s.jsx(qn,{size:12,className:"mr-1"})," ",P.class_name]}),N&&s.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/80 rounded-md p-0.5 shadow-sm",children:[s.jsx("button",{onClick:()=>C(P),className:"text-slate-500 hover:text-blue-600 p-0.5",children:s.jsx(ze,{size:12})}),s.jsx("button",{onClick:()=>k(P.id),className:"text-slate-500 hover:text-red-600 p-0.5",children:s.jsx(Te,{size:12})})]})]},P.id)),f.filter(P=>P.day_of_week===O).length===0&&s.jsx("div",{className:"text-center py-8 text-slate-400 text-xs italic",children:"No classes"})]})]},O))}),s.jsx(he,{isOpen:g,onClose:()=>y(!1),title:m?"Edit Timetable Entry":"Add Timetable Entry",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>y(!1),children:"Cancel"}),s.jsx(R,{onClick:A,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Day"}),s.jsx(le,{value:S.day_of_week,onChange:O=>w({...S,day_of_week:O.target.value}),children:aA.map(O=>s.jsx("option",{value:O,children:O},O))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subject"}),s.jsxs(le,{value:S.subject_id,onChange:O=>w({...S,subject_id:O.target.value}),children:[s.jsx("option",{value:"",children:"Select Subject"}),h.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class"}),s.jsxs(le,{value:S.class_id,onChange:O=>w({...S,class_id:O.target.value}),disabled:r==="class"&&!m,children:[s.jsx("option",{value:"",children:"Select Class"}),o.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Teacher"}),s.jsxs(le,{value:S.teacher_id,onChange:O=>w({...S,teacher_id:O.target.value}),disabled:r==="teacher"&&!m,children:[s.jsx("option",{value:"",children:"Select Teacher"}),c.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Start Time"}),s.jsx(J,{type:"time",value:S.start_time,onChange:O=>w({...S,start_time:O.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"End Time"}),s.jsx(J,{type:"time",value:S.end_time,onChange:O=>w({...S,end_time:O.target.value})})]})]})]})})]})},oA=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState({name:"",category:"Stationery",quantity:0,unit_price:0,supplier:"",purchase_date:new Date().toISOString().split("T")[0]});j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:m,error:v}=await D.from("inventory_items").select("*").eq("school_id",e.school_id).order("name");v?I.error("Failed to load inventory"):r(m||[]),a(!1)},b=async()=>{try{const m={...d,school_id:e==null?void 0:e.school_id};if(u){const{error:v}=await D.from("inventory_items").update(m).eq("id",u.id);if(v)throw v}else{const{error:v}=await D.from("inventory_items").insert(m);if(v)throw v}I.success(u?"Item updated":"Item added"),c(!1),p()}catch(m){I.error(m.message)}},x=async m=>{if(!confirm("Are you sure?"))return;const{error:v}=await D.from("inventory_items").delete().eq("id",m);v?I.error(v.message):(I.success("Item deleted"),r(S=>S.filter(w=>w.id!==m)))},g=m=>{h(m||null),f(m?{name:m.name,category:m.category,quantity:m.quantity,unit_price:m.unit_price,supplier:m.supplier,purchase_date:m.purchase_date}:{name:"",category:"Stationery",quantity:0,unit_price:0,supplier:"",purchase_date:new Date().toISOString().split("T")[0]}),c(!0)},y=t.filter(m=>m.name.toLowerCase().includes(i.toLowerCase()));return n?s.jsx(Re,{title:"Inventory",headers:["Item","Category","Stock","Value","Supplier","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Inventory"}),s.jsx("p",{className:"text-slate-500",children:"Manage school assets and stock"})]}),s.jsxs(R,{onClick:()=>g(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Item"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search items...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Item Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Category"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Unit Price"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Supplier"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(m=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:m.name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.category}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${m.quantity<10?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:m.quantity})}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:$e(m.unit_price)}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.supplier}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(m),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>x(m.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},m.id))})]})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Item":"Add Item",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:b,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Name"}),s.jsx(J,{value:d.name,onChange:m=>f({...d,name:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Category"}),s.jsxs(le,{value:d.category,onChange:m=>f({...d,category:m.target.value}),children:[s.jsx("option",{children:"Stationery"}),s.jsx("option",{children:"Furniture"}),s.jsx("option",{children:"Electronics"}),s.jsx("option",{children:"Sports"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Quantity"}),s.jsx(J,{type:"number",value:d.quantity,onChange:m=>f({...d,quantity:parseInt(m.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Unit Price"}),s.jsx(J,{type:"number",value:d.unit_price,onChange:m=>f({...d,unit_price:parseFloat(m.target.value)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Supplier"}),s.jsx(J,{value:d.supplier,onChange:m=>f({...d,supplier:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Purchase Date"}),s.jsx(J,{type:"date",value:d.purchase_date,onChange:m=>f({...d,purchase_date:m.target.value})})]})]})})]})},bye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[u,h]=j.useState(!1),[d,f]=j.useState(null),[p,b]=j.useState({item_id:"",issued_to:"",quantity:1,issue_date:new Date().toISOString().split("T")[0],status:"issued"});j.useEffect(()=>{x()},[e]);const x=async()=>{var w;if(e!=null&&e.school_id){o(!0);try{const[N,_]=await Promise.all([D.from("inventory_issues").select("*, inventory_items(name)").eq("school_id",e.school_id).order("issue_date",{ascending:!1}),D.from("inventory_items").select("id, name, quantity").eq("school_id",e.school_id).gt("quantity",0)]);if(N.error)throw N.error;if(_.error)throw _.error;a(_.data||[]),r(((w=N.data)==null?void 0:w.map(C=>{var A;return{...C,item_name:((A=C.inventory_items)==null?void 0:A.name)||"Unknown Item"}}))||[])}catch(N){I.error(`Failed to load data: ${N.message}`)}finally{o(!1)}}},g=w=>{var N;f(null),b({item_id:((N=n[0])==null?void 0:N.id)||"",issued_to:"",quantity:1,issue_date:new Date().toISOString().split("T")[0],status:"issued"}),h(!0)},y=async()=>{try{const w={...p,school_id:e==null?void 0:e.school_id};if(d){const{error:N}=await D.from("inventory_issues").update(w).eq("id",d.id);if(N)throw N}else{const N=n.find(C=>C.id===p.item_id);if(N&&N.quantity<p.quantity){I.error(`Insufficient stock. Only ${N.quantity} available.`);return}const{error:_}=await D.from("inventory_issues").insert(w);if(_)throw _;await D.rpc("decrement_inventory_stock",{item_id:p.item_id,qty:p.quantity})}I.success(d?"Record updated":"Item issued successfully"),h(!1),x()}catch(w){I.error(w.message)}},m=async w=>{try{const{error:N}=await D.from("inventory_issues").update({status:"returned",return_date:new Date().toISOString().split("T")[0]}).eq("id",w.id);if(N)throw N;await D.rpc("increment_inventory_stock",{item_id:w.item_id,qty:w.quantity}),I.success("Item marked as returned"),x()}catch(N){I.error(N.message)}},v=async w=>{if(confirm("Are you sure?"))try{const{error:N}=await D.from("inventory_issues").delete().eq("id",w);if(N)throw N;I.success("Record deleted"),r(_=>_.filter(C=>C.id!==w))}catch(N){I.error(N.message)}},S=t.filter(w=>w.item_name.toLowerCase().includes(l.toLowerCase())||w.issued_to.toLowerCase().includes(l.toLowerCase()));return i?s.jsx(Re,{title:"Inventory Issue",headers:["Item","Issued To","Quantity","Date","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Issue Items"}),s.jsx("p",{className:"text-slate-500",children:"Distribute inventory to staff or students"})]}),s.jsxs(R,{onClick:()=>g(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Issue Item"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search by item or person...",value:l,onChange:w=>c(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Item"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Issued To"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Quantity"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:S.map(w=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:w.item_name}),s.jsxs("td",{className:"px-6 py-4 text-slate-600 flex items-center gap-2",children:[s.jsx(qt,{size:14,className:"text-slate-400"})," ",w.issued_to]}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:w.quantity}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(w.issue_date)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(_t,{variant:w.status==="returned"?"success":w.status==="consumed"?"neutral":"warning",className:"capitalize",children:w.status})}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[w.status==="issued"&&s.jsxs(R,{variant:"secondary",size:"sm",onClick:()=>m(w),children:[s.jsx(qE,{size:14,className:"mr-1"})," Return"]}),s.jsx("button",{onClick:()=>v(w.id),className:"text-slate-400 hover:text-red-600 p-1",children:s.jsx(Te,{size:16})})]})]},w.id))})]}),S.length===0&&s.jsx(Ui,{title:"No records found",description:"No items have been issued yet.",icon:Ym})]}),s.jsx(he,{isOpen:u,onClose:()=>h(!1),title:d?"Edit Record":"Issue Item",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>h(!1),children:"Cancel"}),s.jsx(R,{onClick:y,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Item"}),s.jsx(le,{value:p.item_id,onChange:w=>b({...p,item_id:w.target.value}),disabled:!!d,children:n.map(w=>s.jsxs("option",{value:w.id,children:[w.name," (",w.quantity," in stock)"]},w.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Issued To (Name/ID)"}),s.jsx(J,{value:p.issued_to,onChange:w=>b({...p,issued_to:w.target.value}),placeholder:"e.g. John Doe"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Quantity"}),s.jsx(J,{type:"number",min:"1",value:p.quantity,onChange:w=>b({...p,quantity:parseInt(w.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:p.issue_date,onChange:w=>b({...p,issue_date:w.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:p.status,onChange:w=>b({...p,status:w.target.value}),children:[s.jsx("option",{value:"issued",children:"Issued (Returnable)"}),s.jsx("option",{value:"consumed",children:"Consumed (Non-returnable)"}),s.jsx("option",{value:"returned",children:"Returned"})]})]})]})})]})},jye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[u,h]=j.useState([]),[d,f]=j.useState([]),[p,b]=j.useState({book_id:"",student_id:"",issue_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]});j.useEffect(()=>{x(),g()},[e]);const x=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:w,error:N}=await D.from("library_issues").select(`
        id, book_id, student_id, issue_date, due_date, return_date, status,
        library_books(title),
        students(name)
      `).eq("school_id",e.school_id).order("issue_date",{ascending:!1});N?I.error("Failed to load records"):r(w.map(_=>{var C,A;return{id:_.id,book_id:_.book_id,student_id:_.student_id,book_title:((C=_.library_books)==null?void 0:C.title)||"Unknown",student_name:((A=_.students)==null?void 0:A.name)||"Unknown",issue_date:_.issue_date,due_date:_.due_date,return_date:_.return_date,status:_.status}})),a(!1)},g=async()=>{if(!(e!=null&&e.school_id))return;const{data:w}=await D.from("library_books").select("id, title").eq("school_id",e.school_id).eq("status","available"),{data:N}=await D.from("students").select("id, name").eq("school_id",e.school_id);w&&h(w),N&&f(N)},y=w=>{var N,_;w?(c(w),b({book_id:w.book_id,student_id:w.student_id,issue_date:w.issue_date,due_date:w.due_date})):(c(null),b({book_id:((N=u[0])==null?void 0:N.id)||"",student_id:((_=d[0])==null?void 0:_.id)||"",issue_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+7*24*60*60*1e3).toISOString().split("T")[0]})),o(!0)},m=async()=>{try{const w={...p,school_id:e==null?void 0:e.school_id};if(l){const{error:N}=await D.from("library_issues").update({issue_date:p.issue_date,due_date:p.due_date}).eq("id",l.id);if(N)throw N;I.success("Record updated")}else{const{error:N}=await D.from("library_issues").insert(w);if(N)throw N;await D.rpc("decrement_book_count",{book_id:p.book_id}),I.success("Book issued successfully")}o(!1),x()}catch(w){I.error(w.message)}},v=async w=>{try{const{error:N}=await D.from("library_issues").update({status:"returned",return_date:new Date().toISOString().split("T")[0]}).eq("id",w);if(N)throw N;I.success("Book returned"),x()}catch(N){I.error(N.message)}},S=async w=>{if(confirm("Are you sure?"))try{const{error:N}=await D.from("library_issues").delete().eq("id",w);if(N)throw N;I.success("Record deleted"),x()}catch(N){I.error(N.message)}};return n?s.jsx(Re,{title:"Issue / Return",headers:["Book","Student","Issue Date","Due Date","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Library Circulation"}),s.jsx("p",{className:"text-slate-500",children:"Manage book issues and returns"})]}),s.jsxs(R,{onClick:()=>y(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Issue Book"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Book"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Issue Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Due Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Action"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(w=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:w.book_title}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:w.student_name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(w.issue_date)}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(w.due_date)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${w.status==="returned"?"bg-green-100 text-green-700":w.status==="overdue"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:w.status})}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[w.status==="issued"&&s.jsxs(R,{variant:"secondary",size:"sm",onClick:()=>v(w.id),children:[s.jsx(qE,{size:14,className:"mr-1"})," Return"]}),s.jsx("button",{onClick:()=>y(w),className:"text-slate-500 hover:text-blue-600 p-1",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>S(w.id),className:"text-slate-500 hover:text-red-600 p-1",children:s.jsx(Te,{size:16})})]})]},w.id))})]})}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Issue Record":"Issue Book",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:m,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Book"}),s.jsxs(le,{value:p.book_id,onChange:w=>b({...p,book_id:w.target.value}),disabled:!!l,children:[s.jsx("option",{value:"",children:"Select Book"}),u.map(w=>s.jsx("option",{value:w.id,children:w.title},w.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Student"}),s.jsxs(le,{value:p.student_id,onChange:w=>b({...p,student_id:w.target.value}),disabled:!!l,children:[s.jsx("option",{value:"",children:"Select Student"}),d.map(w=>s.jsx("option",{value:w.id,children:w.name},w.id))]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Issue Date"}),s.jsx(J,{type:"date",value:p.issue_date,onChange:w=>b({...p,issue_date:w.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Due Date"}),s.jsx(J,{type:"date",value:p.due_date,onChange:w=>b({...p,due_date:w.target.value})})]})]})]})})]})},wye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState([]),[u,h]=j.useState(null),[d,f]=j.useState({teacher_id:"",type:"Sick Leave",start_date:"",end_date:"",reason:""});j.useEffect(()=>{p(),b()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:v,error:S}=await D.from("leaves").select("*, teachers(name)").eq("school_id",e.school_id).order("created_at",{ascending:!1});S?I.error("Failed to load leaves"):r(v.map(w=>{var N;return{id:w.id,teacher_id:w.teacher_id,teacher_name:((N=w.teachers)==null?void 0:N.name)||"Unknown",type:w.type,start_date:w.start_date,end_date:w.end_date,reason:w.reason,status:w.status}})),a(!1)},b=async()=>{if(!(e!=null&&e.school_id))return;const{data:v}=await D.from("teachers").select("id, name").eq("school_id",e.school_id);v&&c(v)},x=async(v,S)=>{const{error:w}=await D.from("leaves").update({status:S}).eq("id",v);w?I.error("Update failed"):(I.success(`Leave ${S}`),p())},g=v=>{var S;v?(h(v),f({teacher_id:v.teacher_id,type:v.type,start_date:v.start_date,end_date:v.end_date,reason:v.reason})):(h(null),f({teacher_id:((S=l[0])==null?void 0:S.id)||"",type:"Sick Leave",start_date:new Date().toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],reason:""})),o(!0)},y=async()=>{try{const v={...d,school_id:e==null?void 0:e.school_id};if(u){const{error:S}=await D.from("leaves").update(v).eq("id",u.id);if(S)throw S;I.success("Leave updated")}else{const{error:S}=await D.from("leaves").insert({...v,status:"pending"});if(S)throw S;I.success("Leave applied")}o(!1),p()}catch(v){I.error(v.message)}},m=async v=>{if(!confirm("Are you sure you want to delete this request?"))return;const{error:S}=await D.from("leaves").delete().eq("id",v);S?I.error(S.message):(I.success("Request deleted"),r(w=>w.filter(N=>N.id!==v)))};return n?s.jsx(Re,{title:"Leave Management",headers:["Teacher","Type","Dates","Reason","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Leave Management"}),s.jsx("p",{className:"text-slate-500",children:"Review and approve staff leave requests"})]}),s.jsx(R,{onClick:()=>g(),children:"Apply Leave"})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Teacher"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Dates"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Reason"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:t.map(v=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:v.teacher_name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:v.type}),s.jsxs("td",{className:"px-6 py-4 text-slate-600 text-sm",children:[De(v.start_date)," - ",De(v.end_date)]}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm max-w-xs truncate",children:v.reason}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold flex items-center w-fit gap-1 ${v.status==="approved"?"bg-green-100 text-green-700":v.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:[v.status==="pending"&&s.jsx(rn,{size:12}),v.status]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsx("div",{className:"flex justify-end gap-2",children:v.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>x(v.id,"approved"),className:"text-green-600 hover:bg-green-50 p-1 rounded",title:"Approve",children:s.jsx(fd,{size:18})}),s.jsx("button",{onClick:()=>x(v.id,"rejected"),className:"text-red-600 hover:bg-red-50 p-1 rounded",title:"Reject",children:s.jsx(k3,{size:18})}),s.jsx("button",{onClick:()=>g(v),className:"text-slate-500 hover:text-blue-600 p-1 rounded",title:"Edit",children:s.jsx(ze,{size:18})}),s.jsx("button",{onClick:()=>m(v.id),className:"text-slate-500 hover:text-red-600 p-1 rounded",title:"Delete",children:s.jsx(Te,{size:18})})]})})})]},v.id))})]})}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:u?"Edit Leave Request":"Apply for Leave",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:y,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Teacher"}),s.jsxs(le,{value:d.teacher_id,onChange:v=>f({...d,teacher_id:v.target.value}),disabled:!!u,children:[s.jsx("option",{value:"",children:"Select Teacher"}),l.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Type"}),s.jsxs(le,{value:d.type,onChange:v=>f({...d,type:v.target.value}),children:[s.jsx("option",{children:"Sick Leave"}),s.jsx("option",{children:"Casual Leave"}),s.jsx("option",{children:"Maternity Leave"}),s.jsx("option",{children:"Unpaid Leave"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Start Date"}),s.jsx(J,{type:"date",value:d.start_date,onChange:v=>f({...d,start_date:v.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"End Date"}),s.jsx(J,{type:"date",value:d.end_date,onChange:v=>f({...d,end_date:v.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Reason"}),s.jsx(J,{value:d.reason,onChange:v=>f({...d,reason:v.target.value})})]})]})})]})},Nye=()=>{const{profile:e,schoolName:t}=fe(),[r,n]=j.useState([]),[a,i]=j.useState(""),[o,l]=j.useState("Completion"),c=j.useRef(null);j.useEffect(()=>{(async()=>{if(!(e!=null&&e.school_id))return;const{data:f}=await D.from("students").select("id, name, class, section").eq("school_id",e.school_id).order("name");f&&n(f)})()},[e]);const u=Un.useReactToPrint({content:()=>c.current,documentTitle:"Certificate"}),h=r.find(d=>d.id===a);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Certificates"}),s.jsx("p",{className:"text-slate-500",children:"Generate and print student certificates"})]}),s.jsxs(R,{onClick:u,disabled:!a,children:[s.jsx(Qr,{size:20,className:"mr-2"})," Print Certificate"]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Select Student"}),s.jsxs(le,{value:a,onChange:d=>i(d.target.value),children:[s.jsx("option",{value:"",children:"-- Select --"}),r.map(d=>s.jsxs("option",{value:d.id,children:[d.name," (Class ",d.class,"-",d.section,")"]},d.id))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Certificate Type"}),s.jsxs(le,{value:o,onChange:d=>l(d.target.value),children:[s.jsx("option",{children:"Certificate of Completion"}),s.jsx("option",{children:"Certificate of Excellence"}),s.jsx("option",{children:"Character Certificate"})]})]})]}),h?s.jsx("div",{className:"border-2 border-dashed border-slate-300 p-8 bg-slate-50 flex justify-center",children:s.jsxs("div",{ref:c,className:"w-[800px] h-[600px] bg-white border-[10px] border-double border-blue-900 p-12 flex flex-col items-center text-center relative print:break-inside-avoid",children:[s.jsx("div",{className:"absolute top-8 left-8 opacity-10",children:s.jsx(nr,{className:"scale-[2]"})}),s.jsx("div",{className:"absolute bottom-8 right-8 opacity-10",children:s.jsx(nr,{className:"scale-[2]"})}),s.jsx(nr,{className:"scale-150 mb-6"}),s.jsx("h1",{className:"text-4xl font-serif font-bold text-blue-900 uppercase tracking-widest mb-2",children:t}),s.jsx("p",{className:"text-slate-500 italic mb-12",children:"Excellence in Education"}),s.jsx("h2",{className:"text-3xl font-serif font-bold text-yellow-600 mb-8 uppercase border-b-2 border-yellow-600 pb-2 px-8",children:o}),s.jsx("p",{className:"text-lg text-slate-700 mb-4",children:"This is to certify that"}),s.jsx("h3",{className:"text-4xl font-script font-bold text-slate-900 mb-4 italic",children:h.name}),s.jsxs("p",{className:"text-lg text-slate-700 mb-8 max-w-lg",children:["has successfully completed the academic requirements for ",s.jsxs("strong",{children:["Class ",h.class]})," during the academic year."]}),s.jsxs("div",{className:"mt-auto flex justify-between w-full px-12",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-lg font-bold text-slate-900",children:new Date().toLocaleDateString()}),s.jsx("div",{className:"w-40 h-px bg-slate-900 mt-1"}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Date"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"h-8"})," ",s.jsx("div",{className:"w-40 h-px bg-slate-900 mt-1"}),s.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Principal Signature"})]})]})]})}):s.jsxs("div",{className:"text-center py-12 text-slate-400",children:[s.jsx(wi,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select a student to preview the certificate"})]})]})]})},Sye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[u,h]=j.useState(new Date().toISOString().split("T")[0]),[d,f]=j.useState(!1),[p,b]=j.useState(null),[x,g]=j.useState(!1),[y,m]=j.useState({teacher_id:"",date:new Date().toISOString().split("T")[0],status:"present",remarks:""});j.useEffect(()=>{v()},[u,e]);const v=async()=>{if(e!=null&&e.school_id){o(!0);try{const[k,E]=await Promise.all([D.from("staff_attendance").select("*").eq("date",u).eq("school_id",e.school_id),D.from("teachers").select("id, name").eq("school_id",e.school_id)]);if(k.error)throw k.error;if(E.error)throw E.error;a(E.data||[]);const O=(k.data||[]).map(P=>{var M,T;return{...P,teacher_name:((T=(M=E.data)==null?void 0:M.find(F=>F.id===P.teacher_id))==null?void 0:T.name)||"Unknown"}});r(O)}catch(k){I.error(`Failed to load data: ${k.message}`)}finally{o(!1)}}},S=()=>{var k;b(null),m({teacher_id:((k=n[0])==null?void 0:k.id)||"",date:u,status:"present",remarks:""}),f(!0)},w=k=>{b(k),m({teacher_id:k.teacher_id,date:k.date,status:k.status,remarks:k.remarks||""}),f(!0)},N=async k=>{if(confirm("Are you sure you want to delete this record?"))try{const{error:E}=await D.from("staff_attendance").delete().eq("id",k);if(E)throw E;I.success("Record deleted"),r(O=>O.filter(P=>P.id!==k))}catch(E){I.error(E.message)}},_=async k=>{k.preventDefault(),g(!0);try{const E={...y,school_id:e==null?void 0:e.school_id};if(p){const{error:O}=await D.from("staff_attendance").update(E).eq("id",p.id);if(O)throw O}else{const{error:O}=await D.from("staff_attendance").insert(E);if(O)throw O}I.success("Attendance saved"),f(!1),v()}catch(E){I.error(E.message)}finally{g(!1)}},C=k=>{switch(k){case"present":return"bg-green-100 text-green-800";case"absent":return"bg-red-100 text-red-800";case"late":return"bg-yellow-100 text-yellow-800";case"leave":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},A=t.filter(k=>k.teacher_name.toLowerCase().includes(l.toLowerCase()));return i?s.jsx(Re,{title:"Staff Attendance",headers:["Teacher","Date","Status","Remarks","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Staff Attendance"}),s.jsx("p",{className:"text-slate-500",children:"Track daily attendance for teachers and staff"})]}),s.jsxs(R,{onClick:S,children:[s.jsx(Fe,{size:20,className:"mr-2"})," Mark Attendance"]})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search staff...",value:l,onChange:k=>c(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wr,{className:"text-slate-400",size:20}),s.jsx("input",{type:"date",value:u,onChange:k=>h(k.target.value),className:"border border-slate-300 rounded-lg px-3 py-2"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Staff Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Remarks"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[A.map(k=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:k.teacher_name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(k.date)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold capitalize ${C(k.status)}`,children:k.status})}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm",children:k.remarks||"-"}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>w(k),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>N(k.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})})]},k.id)),A.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"No attendance records found for this date."})})]})]})}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:p?"Edit Attendance":"Mark Attendance",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{onClick:_,loading:x,children:"Save"})]}),children:s.jsxs("form",{onSubmit:_,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Staff Member"}),s.jsx(le,{value:y.teacher_id,onChange:k=>m({...y,teacher_id:k.target.value}),disabled:!!p,children:n.map(k=>s.jsx("option",{value:k.id,children:k.name},k.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:y.date,onChange:k=>m({...y,date:k.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:y.status,onChange:k=>m({...y,status:k.target.value}),children:[s.jsx("option",{value:"present",children:"Present"}),s.jsx("option",{value:"absent",children:"Absent"}),s.jsx("option",{value:"late",children:"Late"}),s.jsx("option",{value:"leave",children:"On Leave"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Remarks"}),s.jsx(J,{value:y.remarks,onChange:k=>m({...y,remarks:k.target.value}),placeholder:"Optional remarks..."})]})]})})]})},_ye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[u,h]=j.useState({name:"",description:"",subjects:""});j.useEffect(()=>{d()},[e]);const d=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:x,error:g}=await D.from("subject_groups").select("*").eq("school_id",e.school_id).order("name");g?I.error("Failed to load subject groups"):r(x||[]),a(!1)},f=x=>{c(x||null),h({name:(x==null?void 0:x.name)||"",description:(x==null?void 0:x.description)||"",subjects:(x==null?void 0:x.subjects.join(", "))||""}),o(!0)},p=async()=>{const x=u.subjects.split(",").map(y=>y.trim()).filter(y=>y),g={name:u.name,description:u.description,subjects:x,school_id:e==null?void 0:e.school_id};try{if(l){const{error:y}=await D.from("subject_groups").update(g).eq("id",l.id);if(y)throw y}else{const{error:y}=await D.from("subject_groups").insert(g);if(y)throw y}I.success("Subject Group saved"),o(!1),d()}catch(y){I.error(y.message)}},b=async x=>{if(!confirm("Are you sure you want to delete this group?"))return;const{error:g}=await D.from("subject_groups").delete().eq("id",x);g?I.error(g.message):(I.success("Group deleted"),d())};return n?s.jsx(Re,{title:"Subject Groups",headers:["Group Name","Subjects","Description","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Subject Groups"}),s.jsx("p",{className:"text-slate-500",children:"Manage academic streams and subject combinations"})]}),s.jsxs(R,{onClick:()=>f(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Group"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(x=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg text-purple-600",children:s.jsx(Jm,{size:24})}),s.jsx("h3",{className:"font-bold text-lg text-slate-900",children:x.name})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>f(x),className:"p-1.5 text-slate-400 hover:text-blue-600",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>b(x.id),className:"p-1.5 text-slate-400 hover:text-red-600",children:s.jsx(Te,{size:16})})]})]}),s.jsx("p",{className:"text-sm text-slate-500 mb-4",children:x.description||"No description provided."}),s.jsxs("div",{className:"mt-auto",children:[s.jsxs("h4",{className:"text-xs font-semibold text-slate-500 uppercase mb-2 flex items-center",children:[s.jsx(qn,{size:12,className:"mr-1"})," Subjects"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:x.subjects.map((g,y)=>s.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs rounded-md font-medium",children:g},y))})]})]},x.id)),t.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-slate-500",children:"No subject groups found. Add one to get started."})]}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Group":"Add Subject Group",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:p,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Group Name"}),s.jsx(J,{value:u.name,onChange:x=>h({...u,name:x.target.value}),placeholder:"e.g. Science Stream"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subjects (comma separated)"}),s.jsx(J,{value:u.subjects,onChange:x=>h({...u,subjects:x.target.value}),placeholder:"Physics, Chemistry, Biology"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Description"}),s.jsx(J,{value:u.description,onChange:x=>h({...u,description:x.target.value})})]})]})})]})},Cye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[u,h]=j.useState({name:"",amount:0,due_date:"",description:""});j.useEffect(()=>{d()},[e]);const d=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:x,error:g}=await D.from("fee_masters").select("*").eq("school_id",e.school_id).order("name");g?I.error("Failed to load fees master"):r(x||[]),a(!1)},f=x=>{c(x||null),h({name:(x==null?void 0:x.name)||"",amount:(x==null?void 0:x.amount)||0,due_date:(x==null?void 0:x.due_date)||"",description:(x==null?void 0:x.description)||""}),o(!0)},p=async()=>{try{const x={...u,school_id:e==null?void 0:e.school_id};if(l){const{error:g}=await D.from("fee_masters").update(x).eq("id",l.id);if(g)throw g}else{const{error:g}=await D.from("fee_masters").insert(x);if(g)throw g}I.success("Fee structure saved"),o(!1),d()}catch(x){I.error(x.message)}},b=async x=>{if(!confirm("Delete this fee structure?"))return;const{error:g}=await D.from("fee_masters").delete().eq("id",x);g?I.error(g.message):(I.success("Deleted successfully"),d())};return n?s.jsx(Re,{title:"Fees Master",headers:["Fee Name","Amount","Due Date","Description","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Fees Master"}),s.jsx("p",{className:"text-slate-500",children:"Define standard fee structures and types"})]}),s.jsxs(R,{onClick:()=>f(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Fee Type"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fee Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Default Due Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[t.map(x=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:x.name}),s.jsx("td",{className:"px-6 py-4 font-bold text-slate-900",children:$e(x.amount)}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:x.due_date?De(x.due_date):"N/A"}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm",children:x.description}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>f(x),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(x.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},x.id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-500",children:"No fee structures defined."})})]})]})}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Fee Type":"Add Fee Type",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:p,children:"Save"})]}),children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Fee Name"}),s.jsx(J,{value:u.name,onChange:x=>h({...u,name:x.target.value}),placeholder:"e.g. Tuition Fee - Grade 10"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Amount"}),s.jsx(J,{type:"number",value:u.amount,onChange:x=>h({...u,amount:parseFloat(x.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Default Due Date"}),s.jsx(J,{type:"date",value:u.due_date,onChange:x=>h({...u,due_date:x.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Description"}),s.jsx(J,{value:u.description,onChange:x=>h({...u,description:x.target.value})})]})]})})]})},iR=G.forwardRef(({student:e,groupedGrades:t,schoolName:r,academicYear:n},a)=>{const i=Object.values(t).flat(),o=i.reduce((h,d)=>h+d.marks_obtained,0),l=i.reduce((h,d)=>h+d.total_marks,0),c=l>0?o/l*100:0,u=i.length>0?i.reduce((h,d)=>h+d.gpa,0)/i.length:0;return s.jsxs("div",{ref:a,className:"w-[210mm] min-h-[297mm] bg-white p-12 font-serif text-slate-900 mx-auto relative print:break-inside-avoid",children:[s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-[0.03] z-0",children:s.jsx(nr,{className:"scale-[8]"})}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"text-center border-b-4 border-double border-slate-800 pb-6 mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(nr,{className:"scale-150"})}),s.jsx("h1",{className:"text-3xl font-bold uppercase tracking-widest text-slate-900",children:r}),s.jsx("p",{className:"text-slate-600 italic mt-1",children:"Excellence in Education"}),s.jsx("div",{className:"mt-4 inline-block bg-slate-900 text-white px-6 py-1 text-lg font-bold uppercase tracking-wider",children:"Official Academic Transcript"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8 text-sm",children:[s.jsx("div",{children:s.jsx("table",{className:"w-full",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"font-bold py-1 w-32",children:"Student Name:"}),s.jsx("td",{className:"border-b border-slate-300",children:e.name})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"font-bold py-1",children:"Student ID:"}),s.jsx("td",{className:"border-b border-slate-300",children:e.id})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"font-bold py-1",children:"Date of Birth:"}),s.jsx("td",{className:"border-b border-slate-300",children:De(e.dob)})]})]})})}),s.jsx("div",{children:s.jsx("table",{className:"w-full",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"font-bold py-1 w-32",children:"Class / Grade:"}),s.jsxs("td",{className:"border-b border-slate-300",children:[e.class," - ",e.section]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"font-bold py-1",children:"Academic Year:"}),s.jsx("td",{className:"border-b border-slate-300",children:n})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"font-bold py-1",children:"Issue Date:"}),s.jsx("td",{className:"border-b border-slate-300",children:new Date().toLocaleDateString()})]})]})})})]}),s.jsx("div",{className:"space-y-8",children:Object.entries(t).map(([h,d])=>{const f=d.reduce((b,x)=>b+x.marks_obtained,0),p=d.reduce((b,x)=>b+x.total_marks,0);return d.length>0&&d.reduce((b,x)=>b+x.percentage,0)/d.length,s.jsxs("div",{className:"break-inside-avoid",children:[s.jsxs("div",{className:"flex justify-between items-end mb-2 border-b border-slate-400 pb-1",children:[s.jsx("h3",{className:"text-lg font-bold uppercase text-slate-800",children:h}),s.jsxs("span",{className:"text-xs font-medium text-slate-500",children:["Exam Summary: ",f,"/",p," (",(f/p*100).toFixed(1),"%)"]})]}),s.jsxs("table",{className:"w-full border-collapse text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-100 border-b border-slate-300",children:[s.jsx("th",{className:"py-2 px-3 text-left font-bold w-1/3",children:"Subject"}),s.jsx("th",{className:"py-2 px-3 text-center font-bold",children:"Marks"}),s.jsx("th",{className:"py-2 px-3 text-center font-bold",children:"Total"}),s.jsx("th",{className:"py-2 px-3 text-center font-bold",children:"Grade"}),s.jsx("th",{className:"py-2 px-3 text-center font-bold",children:"Points (GPA)"})]})}),s.jsx("tbody",{children:d.map(b=>s.jsxs("tr",{className:"border-b border-slate-200",children:[s.jsx("td",{className:"py-2 px-3",children:b.subject}),s.jsx("td",{className:"py-2 px-3 text-center",children:b.marks_obtained}),s.jsx("td",{className:"py-2 px-3 text-center text-slate-500",children:b.total_marks}),s.jsx("td",{className:"py-2 px-3 text-center font-bold",children:b.grade}),s.jsx("td",{className:"py-2 px-3 text-center",children:b.gpa.toFixed(2)})]},b.id))})]})]},h)})}),s.jsxs("div",{className:"mt-12 border-t-2 border-slate-800 pt-6 break-inside-avoid",children:[s.jsx("h3",{className:"text-lg font-bold uppercase mb-4",children:"Cumulative Performance"}),s.jsx("div",{className:"bg-slate-50 border border-slate-200 p-4 rounded-sm",children:s.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Total Marks"}),s.jsxs("p",{className:"text-xl font-bold",children:[o," / ",l]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Overall Percentage"}),s.jsxs("p",{className:"text-xl font-bold",children:[c.toFixed(2),"%"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"CGPA"}),s.jsx("p",{className:"text-xl font-bold",children:u.toFixed(2)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold",children:"Final Result"}),s.jsx("p",{className:`text-xl font-bold ${c>=40?"text-green-700":"text-red-700"}`,children:c>=40?"PASSED":"FAILED"})]})]})})]}),s.jsxs("div",{className:"mt-8 text-xs text-slate-500 break-inside-avoid",children:[s.jsx("p",{className:"font-bold mb-1",children:"Grading Scale:"}),s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsx("span",{children:"A+ (90-100%) : 4.0"}),s.jsx("span",{children:"A (80-89%) : 3.5"}),s.jsx("span",{children:"B+ (70-79%) : 3.0"}),s.jsx("span",{children:"B (60-69%) : 2.5"}),s.jsx("span",{children:"C+ (50-59%) : 2.0"}),s.jsx("span",{children:"C (40-49%) : 1.5"}),s.jsx("span",{children:"D (33-39%) : 1.0"}),s.jsx("span",{children:"F (0-32%) : 0.0"})]})]}),s.jsxs("div",{className:"mt-16 grid grid-cols-2 gap-20 break-inside-avoid",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-slate-400 mb-2 h-12"}),s.jsx("p",{className:"font-bold text-sm",children:"Class Teacher Signature"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"border-b border-slate-400 mb-2 h-12"}),s.jsx("p",{className:"font-bold text-sm",children:"Principal Signature & Seal"})]})]})]})]})});iR.displayName="StudentTranscriptTemplate";const kye=()=>{const{schoolName:e,academicYear:t}=fe(),[r,n]=j.useState([]),[a,i]=j.useState(""),[o,l]=j.useState([]),[c,u]=j.useState(!0),[h,d]=j.useState(!1),[f,p]=j.useState(""),b=j.useRef(null);j.useEffect(()=>{(async()=>{u(!0);try{const{data:S,error:w}=await D.from("students").select("*").order("name");if(w)throw w;n(S.map(N=>({id:N.id,name:N.name,email:N.email,class:N.class,section:N.section,rollNumber:N.roll_number,phone:N.phone,enrollmentDate:N.enrollment_date,issuedDate:N.issued_date,expiryDate:N.expiry_date,dob:N.dob,status:N.status,grade:N.grade,avatar:N.avatar})))}catch{I.error("Failed to load students")}finally{u(!1)}})()},[]),j.useEffect(()=>{if(!a){l([]);return}(async()=>{d(!0);try{const{data:S,error:w}=await D.from("grades").select(`
            *,
            exams ( name, total_marks )
          `).eq("student_id",a).order("date",{ascending:!0});if(w)throw w;const N=S.map(_=>{var C,A,k;return{id:_.id,student_id:_.student_id,exam_id:_.exam_id,marks_obtained:_.marks_obtained,percentage:_.percentage,grade:_.grade,gpa:_.gpa,date:_.date,subject:_.subject||"Unknown",examName:((C=_.exams)==null?void 0:C.name)||"Unknown Exam",total_marks:((A=_.exams)==null?void 0:A.total_marks)||100,studentName:"",examNameRaw:(k=_.exams)==null?void 0:k.name}});l(N)}catch{I.error("Failed to load grades")}finally{d(!1)}})()},[a]);const x=Un.useReactToPrint({content:()=>b.current,documentTitle:`Transcript-${a}`,onBeforeGetContent:()=>{if(!b.current)return I.error("Content not ready for printing"),Promise.reject()}}),g=r.filter(v=>v.name.toLowerCase().includes(f.toLowerCase())||v.rollNumber.includes(f)),y=r.find(v=>v.id===a),m=j.useMemo(()=>{const v={};return o.forEach(S=>{v[S.examName]||(v[S.examName]=[]),v[S.examName].push(S)}),v},[o]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Student Transcript"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Generate cumulative academic reports and transcripts"})]}),s.jsxs(R,{onClick:x,disabled:!y||o.length===0,children:[s.jsx(Qr,{size:20,className:"mr-2"})," Print Transcript"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl shadow-sm border border-slate-200 flex flex-col h-[calc(100vh-12rem)]",children:[s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search student...",value:f,onChange:v=>p(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]})}),s.jsx("div",{className:"flex-grow overflow-y-auto scrollbar-thin",children:c?s.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(v=>s.jsx(je,{className:"h-12 w-full"},v))}):s.jsxs("div",{className:"divide-y divide-slate-100",children:[g.map(v=>s.jsxs("button",{onClick:()=>i(v.id),className:`w-full text-left p-3 hover:bg-slate-50 transition-colors flex items-center gap-3 ${a===v.id?"bg-blue-50 border-l-4 border-blue-600":"border-l-4 border-transparent"}`,children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 flex items-center justify-center text-slate-600 font-bold text-sm overflow-hidden shrink-0",children:v.avatar?s.jsx("img",{src:v.avatar,alt:v.name,className:"w-full h-full object-cover"}):v.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:`text-sm font-medium ${a===v.id?"text-blue-700":"text-slate-900"}`,children:v.name}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Class ",v.class,"-",v.section]})]})]},v.id)),g.length===0&&s.jsx("div",{className:"p-8 text-center text-slate-500 text-sm",children:"No students found"})]})})]}),s.jsx("div",{className:"lg:col-span-3 bg-slate-50 rounded-xl border border-slate-200 overflow-hidden flex flex-col",children:y?h?s.jsx("div",{className:"flex-grow flex items-center justify-center p-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500",children:"Generating transcript..."})]})}):o.length>0?s.jsx("div",{className:"flex-grow overflow-auto p-8 bg-slate-100/50",children:s.jsx("div",{className:"shadow-lg mx-auto max-w-[210mm]",children:s.jsx(iR,{ref:b,student:y,groupedGrades:m,schoolName:e,academicYear:t})})}):s.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Mr,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"No Grades Found"}),s.jsx("p",{className:"text-slate-500 max-w-md mt-1",children:"This student does not have any recorded grades yet. Add grades in the Examinations module to generate a transcript."})]}):s.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Jr,{className:"h-8 w-8 text-blue-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Select a Student"}),s.jsx("p",{className:"text-slate-500 max-w-md mt-1",children:"Select a student from the list to view and print their academic transcript."})]})})]})]})},Aye=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,i]=j.useState([]),[o,l]=j.useState(""),[c,u]=j.useState("");j.useEffect(()=>{(async()=>{n(!0);try{const{data:p,error:b}=await D.from("exams").select("*").order("date",{ascending:!0});if(b)throw b;const x=p.map(y=>({id:y.id,name:y.name,subject:y.subject,class:y.class,date:y.date,duration:y.duration,totalMarks:y.total_marks,passingMarks:y.passing_marks,status:y.status}));t(x);const g=Array.from(new Set(x.map(y=>y.class))).sort();i(g),g.length>0&&!o&&l(g[0])}catch{I.error("Failed to load exam schedule")}finally{n(!1)}})()},[]);const d=e.filter(f=>{const p=o?f.class===o:!0,b=f.name.toLowerCase().includes(c.toLowerCase())||f.subject.toLowerCase().includes(c.toLowerCase());return p&&b}).reduce((f,p)=>(f[p.name]||(f[p.name]=[]),f[p.name].push(p),f),{});return r?s.jsx(Re,{title:"Exam Schedule",headers:["Date","Time","Subject","Duration","Room"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Exam Schedule"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"View dates and timings for upcoming examinations"})]})}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search subjects or exams...",value:c,onChange:f=>u(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"})]}),s.jsx("div",{className:"w-full sm:w-48",children:s.jsxs(le,{value:o,onChange:f=>l(f.target.value),children:[s.jsx("option",{value:"",children:"All Classes"}),a.map(f=>s.jsxs("option",{value:f,children:["Class ",f]},f))]})})]}),s.jsxs("div",{className:"space-y-8",children:[Object.entries(d).map(([f,p])=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[s.jsxs("div",{className:"bg-slate-50 px-6 py-4 border-b border-slate-200 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-800",children:f}),s.jsxs("span",{className:"text-sm text-slate-500 bg-white px-3 py-1 rounded-full border border-slate-200",children:["Class ",o||"All"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Subject"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Duration"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Marks"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:p.map(b=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-slate-900",children:b.subject}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600 flex items-center gap-2",children:[s.jsx(wr,{size:16,className:"text-slate-400"}),De(b.date)]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rn,{size:16,className:"text-slate-400"}),b.duration]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-slate-600",children:["Min: ",b.passingMarks," / Max: ",b.totalMarks]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold capitalize ${b.status==="completed"?"bg-gray-100 text-gray-700":b.status==="ongoing"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:b.status})})]},b.id))})]})})]},f)),Object.keys(d).length===0&&s.jsx("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200 border-dashed",children:s.jsx("p",{className:"text-slate-500",children:"No exams scheduled for the selected criteria."})})]})]})},Oye=()=>{const{schoolName:e}=fe(),[t,r]=j.useState(!0),[n,a]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(""),[u,h]=j.useState({title:"ADMIT CARD",showPhoto:!0,showSchoolName:!0,showBorder:!0,footerText:"Principal Signature",themeColor:"blue"}),d=j.useRef(null);j.useEffect(()=>{(async()=>{r(!0);try{const{data:g}=await D.from("exams").select("*").order("date",{ascending:!1});g&&(a(g.map(y=>({id:y.id,name:y.name,subject:y.subject,class:y.class,date:y.date,duration:y.duration,totalMarks:y.total_marks,passingMarks:y.passing_marks,status:y.status}))),g.length>0&&c(g[0].id))}catch{I.error("Failed to load exams")}finally{r(!1)}})()},[]),j.useEffect(()=>{if(!l)return;(async()=>{const g=n.find(m=>m.id===l);if(!g)return;const{data:y}=await D.from("students").select("*").eq("class",g.class).eq("status","active").limit(5);y&&o(y.map(m=>({id:m.id,name:m.name,email:m.email,class:m.class,section:m.section,rollNumber:m.roll_number,phone:m.phone,enrollmentDate:m.enrollment_date,issuedDate:m.issued_date,expiryDate:m.expiry_date,dob:m.dob,status:m.status,grade:m.grade,avatar:m.avatar})))})()},[l,n]);const f=Un.useReactToPrint({content:()=>d.current,documentTitle:"Admit Cards",onBeforeGetContent:()=>{if(!d.current)return I.error("Content not ready for printing"),Promise.reject()}}),p=n.find(x=>x.id===l),b=i[0];return t?s.jsx("div",{className:"p-8",children:s.jsx(je,{className:"h-96 w-full"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"Design Admit Card"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Customize and generate admit cards for examinations"})]}),s.jsxs(R,{onClick:f,disabled:!p||i.length===0,children:[s.jsx(Qr,{size:20,className:"mr-2"})," Generate & Print"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1 space-y-6",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center",children:[s.jsx($l,{size:20,className:"mr-2 text-slate-500"})," Configuration"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Select Exam"}),s.jsx(le,{value:l,onChange:x=>c(x.target.value),children:n.map(x=>s.jsxs("option",{value:x.id,children:[x.name," - ",x.subject," (Class ",x.class,")"]},x.id))})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center",children:[s.jsx(N3,{size:16,className:"mr-2"})," Content"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{className:"text-xs",children:"Header Title"}),s.jsx(J,{value:u.title,onChange:x=>h({...u,title:x.target.value})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{className:"text-xs",children:"Footer Text"}),s.jsx(J,{value:u.footerText,onChange:x=>h({...u,footerText:x.target.value})})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center",children:[s.jsx(f3,{size:16,className:"mr-2"})," Layout"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.showSchoolName,onChange:x=>h({...u,showSchoolName:x.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Show School Name"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.showPhoto,onChange:x=>h({...u,showPhoto:x.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Show Student Photo"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.showBorder,onChange:x=>h({...u,showBorder:x.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-600",children:"Show Border"})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[s.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center",children:[s.jsx(h3,{size:16,className:"mr-2"})," Theme"]}),s.jsx("div",{className:"flex gap-3",children:["blue","red","green","black"].map(x=>s.jsx("button",{onClick:()=>h({...u,themeColor:x}),className:`w-8 h-8 rounded-full border-2 transition-all ${u.themeColor===x?"border-slate-900 scale-110":"border-transparent hover:scale-105"}`,style:{backgroundColor:x},title:x.charAt(0).toUpperCase()+x.slice(1)},x))})]})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsx("div",{className:"bg-slate-100 rounded-xl border border-slate-200 p-8 flex items-center justify-center min-h-[600px] overflow-auto",children:p&&b?s.jsx("div",{className:"scale-90 origin-top",children:s.jsx(Cm,{student:b,exam:p,schoolName:e,template:u})}):s.jsxs("div",{className:"text-center text-slate-400",children:[s.jsx(o3,{size:48,className:"mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an exam to preview admit card"})]})})})]}),s.jsx("div",{style:{display:"none"},children:s.jsx("div",{ref:d,className:"print-container",children:p&&i.map(x=>s.jsx("div",{className:"break-after-page p-4",children:s.jsx(Cm,{student:x,exam:p,schoolName:e,template:u})},x.id))})})]})},Eye=()=>{const e=Fs(),[t,r]=j.useState([]),[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(""),[u,h]=j.useState({}),[d,f]=j.useState(!1);j.useEffect(()=>{(async()=>{o(!0);try{const[y,m]=await Promise.all([D.from("classes").select("*").order("name"),D.from("teachers").select("id, name").order("name")]);if(y.error)throw y.error;if(m.error)throw m.error;a(m.data||[]);const v={},S=(y.data||[]).map(w=>{var _;w.teacher_id?v[w.id]=w.teacher_id:v[w.id]="";const N=(_=m.data)==null?void 0:_.find(C=>C.id===w.teacher_id);return{...w,name:w.name.startsWith("Class ")?w.name:`Class ${w.name}`,teacher:{id:(N==null?void 0:N.id)||"",name:(N==null?void 0:N.name)||"Unassigned"}}});h(v),r(S)}catch(y){I.error(`Failed to load data: ${y.message}`)}finally{o(!1)}})()},[]);const p=(g,y)=>{h(m=>({...m,[g]:y}))},b=async g=>{const y=u[g],m=y===""?null:y;f(!0);try{const{error:v}=await D.from("classes").update({teacher_id:m}).eq("id",g);if(v)throw v;const S=n.find(w=>w.id===y);r(w=>w.map(N=>N.id===g?{...N,teacher:{id:(S==null?void 0:S.id)||"",name:(S==null?void 0:S.name)||"Unassigned"}}:N)),I.success(m?"Teacher assigned successfully":"Teacher unassigned successfully")}catch(v){I.error(`Failed to update assignment: ${v.message}`)}finally{f(!1)}},x=t.filter(g=>g.name.toLowerCase().includes(l.toLowerCase()));return i?s.jsx(Re,{title:"Assign Class Teacher",headers:["Class Name","Current Teacher","Assign New Teacher","Action"]}):t.length===0?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Assign Class Teacher"}),s.jsx("p",{className:"text-slate-500",children:"Manage class teacher allocations"})]})}),s.jsx(Ui,{icon:qn,title:"No Classes Found",description:"You need to create classes before you can assign teachers to them.",actionLabel:"Go to Classes",onAction:()=>e("/classes")})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Assign Class Teacher"}),s.jsx("p",{className:"text-slate-500",children:"Manage class teacher allocations"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search classes...",value:l,onChange:g=>c(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Current Teacher"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Assign New Teacher"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[x.map(g=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:g.name}),s.jsxs("td",{className:"px-6 py-4 text-slate-600 flex items-center gap-2",children:[s.jsx(Vt,{size:16,className:"text-slate-400"}),g.teacher.name]}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(le,{value:u[g.id]||"",onChange:y=>p(g.id,y.target.value),className:"w-full max-w-xs",children:[s.jsx("option",{value:"",children:"-- Unassigned --"}),n.map(y=>s.jsx("option",{value:y.id,children:y.name},y.id))]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs(R,{size:"sm",onClick:()=>b(g.id),disabled:d||u[g.id]===(g.teacher.id==="N/A"||g.teacher.name==="Unassigned"?"":g.teacher.id),children:[s.jsx(Di,{size:16,className:"mr-1"})," Save"]})})]},g.id)),x.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No classes found matching search."})})]})]})})]})},Pye=({homeworkId:e,studentId:t,onClose:r,onSuccess:n})=>{const[a,i]=j.useState(""),[o,l]=j.useState(null),[c,u]=j.useState(!1),h=f=>{f.target.files&&f.target.files[0]&&l(f.target.files[0])},d=async f=>{f.preventDefault(),u(!0);try{let p="";if(o){const x=o.name.split(".").pop(),g=`homework/${e}/${t}-${Date.now()}.${x}`,{error:y}=await D.storage.from("documents").upload(g,o);if(y)throw y;const{data:m}=D.storage.from("documents").getPublicUrl(g);p=m.publicUrl}const{error:b}=await D.from("homework_submissions").insert({homework_id:e,student_id:t,message:a,file_url:p,status:"submitted"});if(b)throw b;I.success("Homework submitted successfully!"),n(),r()}catch(p){I.error(`Submission failed: ${p.message}`)}finally{u(!1)}};return s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Message / Note"}),s.jsx("textarea",{className:"w-full rounded-md border border-slate-300 p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none",rows:4,placeholder:"Add a note for your teacher...",value:a,onChange:f=>i(f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Attach File"}),s.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:bg-slate-50 transition-colors",children:[o?s.jsxs("div",{className:"flex items-center justify-center text-blue-600",children:[s.jsx(Mr,{className:"mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:o.name})]}):s.jsxs(s.Fragment,{children:[s.jsx(WE,{className:"mx-auto h-10 w-10 text-slate-400 mb-2"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Click to upload assignment file"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"PDF, DOC, JPG supported"})]}),s.jsx("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:h,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),s.jsx(R,{type:"submit",loading:c,children:"Submit Homework"})]})]})},Tye=({homeworkId:e,homeworkTitle:t,onClose:r})=>{const[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(null),[u,h]=j.useState(0),[d,f]=j.useState("");j.useEffect(()=>{p()},[e]);const p=async()=>{o(!0);try{const{data:g,error:y}=await D.from("homework_submissions").select("*, students(name, roll_number)").eq("homework_id",e).order("submitted_at",{ascending:!1});if(y)throw y;a(g.map(m=>{var v,S;return{...m,student_name:((v=m.students)==null?void 0:v.name)||"Unknown",roll_number:((S=m.students)==null?void 0:S.roll_number)||"-"}}))}catch(g){I.error(`Failed to load submissions: ${g.message}`)}finally{o(!1)}},b=g=>{c(g.id),h(g.score||0),f(g.remarks||"")},x=async g=>{try{const{error:y}=await D.from("homework_submissions").update({score:u,remarks:d,status:"evaluated"}).eq("id",g);if(y)throw y;I.success("Evaluation saved"),c(null),p()}catch(y){I.error(y.message)}};return s.jsxs("div",{className:"flex flex-col h-[70vh]",children:[s.jsxs("div",{className:"mb-4 pb-4 border-b border-slate-100 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-slate-800",children:t}),s.jsxs("p",{className:"text-sm text-slate-500",children:[n.length," Submissions"]})]}),s.jsxs("div",{className:"flex gap-2 text-sm",children:[s.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-md",children:["Evaluated: ",n.filter(g=>g.status==="evaluated").length]}),s.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-md",children:["Pending: ",n.filter(g=>g.status==="submitted").length]})]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:i?s.jsxs("div",{className:"space-y-3",children:[s.jsx(je,{className:"h-20 w-full"}),s.jsx(je,{className:"h-20 w-full"}),s.jsx(je,{className:"h-20 w-full"})]}):n.length===0?s.jsxs("div",{className:"text-center py-12 text-slate-500",children:[s.jsx(Mr,{size:48,className:"mx-auto mb-3 opacity-20"}),s.jsx("p",{children:"No submissions yet."})]}):s.jsx("div",{className:"space-y-4",children:n.map(g=>s.jsxs("div",{className:`p-4 rounded-lg border transition-all ${l===g.id?"border-blue-500 bg-blue-50":"border-slate-200 bg-white"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900",children:g.student_name}),s.jsxs("p",{className:"text-xs text-slate-500",children:["Roll No: ",g.roll_number,"  Submitted: ",De(g.submitted_at)]})]}),s.jsx("div",{className:"flex items-center gap-2",children:g.status==="evaluated"?s.jsxs("span",{className:"flex items-center text-xs font-bold text-green-600 bg-green-100 px-2 py-1 rounded",children:[s.jsx(fd,{size:12,className:"mr-1"})," ",g.score,"/100"]}):s.jsxs("span",{className:"flex items-center text-xs font-bold text-orange-600 bg-orange-100 px-2 py-1 rounded",children:[s.jsx(rn,{size:12,className:"mr-1"})," Pending"]})})]}),s.jsxs("div",{className:"bg-slate-50 p-3 rounded text-sm text-slate-700 mb-3 border border-slate-100",children:[g.message||s.jsx("span",{className:"italic text-slate-400",children:"No message provided."}),g.file_url&&s.jsx("div",{className:"mt-2 pt-2 border-t border-slate-200",children:s.jsxs("a",{href:g.file_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-blue-600 hover:underline",children:[s.jsx(Oa,{size:14,className:"mr-1"})," Download Attachment"]})})]}),l===g.id?s.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200 grid grid-cols-1 sm:grid-cols-3 gap-3 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 block mb-1",children:"Marks (0-100)"}),s.jsx(J,{type:"number",min:"0",max:"100",value:u,onChange:y=>h(parseInt(y.target.value)),className:"bg-white"})]}),s.jsxs("div",{className:"sm:col-span-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 block mb-1",children:"Remarks"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{value:d,onChange:y=>f(y.target.value),placeholder:"Good work...",className:"bg-white"}),s.jsx(R,{size:"icon",onClick:()=>x(g.id),className:"bg-green-600 hover:bg-green-700 shrink-0",children:s.jsx(Di,{size:18})})]})]})]}):s.jsxs("div",{className:"flex justify-between items-center mt-2",children:[s.jsx("p",{className:"text-xs text-slate-500 italic",children:g.remarks?`Teacher: "${g.remarks}"`:""}),s.jsx(R,{variant:"secondary",size:"sm",onClick:()=>b(g),children:g.status==="evaluated"?"Edit Grade":"Evaluate"})]})]},g.id))})})]})},$ye=()=>{const{profile:e,user:t}=fe(),[r,n]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState([]),[c,u]=j.useState([]),[h,d]=j.useState(!1),[f,p]=j.useState(null),[b,x]=j.useState(""),[g,y]=j.useState(!1),[m,v]=j.useState(!1),[S,w]=j.useState(null),[N,_]=j.useState({}),[C,A]=j.useState({class:"",subject:"",teacher_id:"",title:"",description:"",due_date:new Date().toISOString().split("T")[0],status:"active"});j.useEffect(()=>{k()},[e]);const k=async()=>{if(e!=null&&e.school_id){i(!0);try{let U="",X=null;if((e==null?void 0:e.role)==="student"&&t){const{data:me}=await D.from("students").select("id, class").eq("user_id",t.id).eq("school_id",e.school_id).single();me&&(U=me.class,X=me.id,w(me.id))}let K=D.from("homework").select("*, teachers(name)").eq("school_id",e.school_id).order("created_at",{ascending:!1});const[z,H,Q]=await Promise.all([K,D.from("classes").select("id, name").eq("school_id",e.school_id),D.from("teachers").select("id, name, user_id, subject").eq("school_id",e.school_id)]);if(z.error)throw z.error;const se=(z.data||[]).map(me=>{var L;return{...me,teacher_name:((L=me.teachers)==null?void 0:L.name)||"Unknown"}}),ue=(e==null?void 0:e.role)==="student"&&U?se.filter(me=>me.class.includes(U)):se;if(n(ue),X){const{data:me}=await D.from("homework_submissions").select("homework_id, status, score").eq("student_id",X),L={};me==null||me.forEach(W=>L[W.homework_id]=W),_(L)}const ye=(H.data||[]).map(me=>({...me,name:me.name.startsWith("Class ")?me.name:`Class ${me.name}`}));l(ye),u(Q.data||[])}catch(U){I.error(`Failed to load data: ${U.message}`)}finally{i(!1)}}},E=U=>{var X;if(p(U||null),U)A({class:U.class,subject:U.subject,teacher_id:U.teacher_id,title:U.title,description:U.description,due_date:U.due_date,status:U.status});else{const K=(e==null?void 0:e.role)==="teacher"?c.find(z=>z.user_id===e.id):null;A({class:((X=o[0])==null?void 0:X.name)||"",subject:(K==null?void 0:K.subject)||"",teacher_id:(K==null?void 0:K.id)||"",title:"",description:"",due_date:new Date().toISOString().split("T")[0],status:"active"})}d(!0)},O=U=>{p(U),y(!0)},P=U=>{p(U),v(!0)},M=async U=>{U.preventDefault();try{const X={...C,school_id:e==null?void 0:e.school_id};if(f){const{error:K}=await D.from("homework").update(X).eq("id",f.id);if(K)throw K}else{const{error:K}=await D.from("homework").insert(X);if(K)throw K}I.success("Homework saved successfully"),d(!1),k()}catch(X){I.error(X.message)}},T=async U=>{if(confirm("Delete this homework assignment?"))try{const{error:X}=await D.from("homework").delete().eq("id",U);if(X)throw X;I.success("Homework deleted"),n(K=>K.filter(z=>z.id!==U))}catch(X){I.error(X.message)}},F=r.filter(U=>U.title.toLowerCase().includes(b.toLowerCase())||U.class.toLowerCase().includes(b.toLowerCase())),q=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="teacher",$=(e==null?void 0:e.role)==="student";return a?s.jsx(Re,{title:"Homework",headers:["Class","Subject","Title","Due Date","Assigned By","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Homework"}),s.jsx("p",{className:"text-slate-500",children:"Manage and track class assignments"})]}),q&&s.jsxs(R,{onClick:()=>E(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Homework"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search homework...",value:b,onChange:U=>x(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[F.map(U=>{const X=N[U.id];return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded uppercase",children:U.class}),s.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[s.jsx(wr,{size:12})," Due: ",De(U.due_date)]})]}),s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1",children:U.title}),s.jsx("p",{className:"text-sm font-medium text-slate-600 mb-3",children:U.subject}),s.jsx("p",{className:"text-sm text-slate-500 flex-grow mb-4 line-clamp-3",children:U.description}),$&&s.jsx("div",{className:"mb-4",children:X?s.jsxs("div",{className:`text-sm px-3 py-2 rounded-md flex items-center gap-2 ${X.status==="evaluated"?"bg-green-50 text-green-700":"bg-blue-50 text-blue-700"}`,children:[s.jsx(qy,{size:16}),X.status==="evaluated"?`Graded: ${X.score}/100`:"Submitted"]}):s.jsxs(R,{size:"sm",className:"w-full bg-slate-900 hover:bg-slate-800",onClick:()=>O(U),children:[s.jsx(GE,{size:14,className:"mr-2"})," Submit Work"]})}),s.jsxs("div",{className:"pt-4 border-t border-slate-100 flex justify-between items-center mt-auto",children:[s.jsxs("span",{className:"text-xs text-slate-400",children:["By: ",U.teacher_name]}),q&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{variant:"secondary",size:"sm",className:"text-xs",onClick:()=>P(U),children:[s.jsx(md,{size:14,className:"mr-1"})," View Submissions"]}),s.jsx("button",{onClick:()=>E(U),className:"text-slate-400 hover:text-blue-600 p-1",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>T(U.id),className:"text-slate-400 hover:text-red-600 p-1",children:s.jsx(Te,{size:16})})]})]})]},U.id)}),F.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-slate-500",children:"No homework assignments found."})]}),s.jsx(he,{isOpen:h,onClose:()=>d(!1),title:f?"Edit Homework":"Add Homework",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>d(!1),children:"Cancel"}),s.jsx(R,{onClick:M,children:"Save"})]}),children:s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class"}),s.jsxs(le,{value:C.class,onChange:U=>A({...C,class:U.target.value}),children:[s.jsx("option",{value:"",children:"Select Class"}),o.map((U,X)=>s.jsx("option",{value:U.name,children:U.name},U.id||X))]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subject"}),s.jsx(J,{value:C.subject,onChange:U=>A({...C,subject:U.target.value}),placeholder:"e.g. Mathematics"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Title"}),s.jsx(J,{value:C.title,onChange:U=>A({...C,title:U.target.value}),placeholder:"Assignment Title"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Description"}),s.jsx("textarea",{value:C.description,onChange:U=>A({...C,description:U.target.value}),className:"w-full rounded-md border border-slate-300 p-2 text-sm",rows:4})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Due Date"}),s.jsx(J,{type:"date",value:C.due_date,onChange:U=>A({...C,due_date:U.target.value})})]}),(e==null?void 0:e.role)==="admin"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Teacher"}),s.jsxs(le,{value:C.teacher_id,onChange:U=>A({...C,teacher_id:U.target.value}),children:[s.jsx("option",{value:"",children:"Select Teacher"}),c.map((U,X)=>s.jsx("option",{value:U.id,children:U.name},U.id||X))]})]})]})]})}),s.jsx(he,{isOpen:g,onClose:()=>y(!1),title:`Submit Homework: ${f==null?void 0:f.title}`,children:f&&S&&s.jsx(Pye,{homeworkId:f.id,studentId:S,onClose:()=>y(!1),onSuccess:k})}),s.jsx(he,{isOpen:m,onClose:()=>v(!1),title:`Evaluations: ${f==null?void 0:f.title}`,size:"3xl",children:f&&s.jsx(Tye,{homeworkId:f.id,homeworkTitle:f.title,onClose:()=>v(!1)})})]})},Dye=()=>{const[e,t]=j.useState([]),[r,n]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState(""),[c,u]=j.useState({}),[h,d]=j.useState(!1);j.useEffect(()=>{(async()=>{i(!0);try{const[g,y]=await Promise.all([D.from("students").select("*").order("name"),D.from("transport_vehicles").select("*")]);if(g.error)throw g.error;if(y.error)throw y.error;const m=(g.data||[]).map(w=>({...w,rollNumber:w.roll_number,transportId:w.transport_id})),v=(y.data||[]).map(w=>({id:w.id,vehicleNumber:w.vehicle_number,route:w.route,capacity:w.capacity}));t(m),n(v);const S={};m.forEach(w=>{w.transportId&&(S[w.id]=w.transportId)}),u(S)}catch(g){I.error(`Failed to load data: ${g.message}`)}finally{i(!1)}})()},[]);const f=(x,g)=>{u(y=>({...y,[x]:g}))},p=async x=>{const g=c[x],y=g===""?null:g;d(!0);try{const{error:m}=await D.from("students").update({transport_id:y}).eq("id",x);if(m)throw m;t(v=>v.map(S=>S.id===x?{...S,transportId:y}:S)),I.success("Transport assigned successfully")}catch(m){I.error(`Failed to assign transport: ${m.message}`)}finally{d(!1)}},b=e.filter(x=>x.name.toLowerCase().includes(o.toLowerCase())||x.rollNumber.includes(o));return a?s.jsx(Re,{title:"Assign Transport",headers:["Student","Class","Current Route","Assign Vehicle","Action"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Assign Transport"}),s.jsx("p",{className:"text-slate-500",children:"Allocate students to bus routes"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search students...",value:o,onChange:x=>l(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Student"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Current Route"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Assign Vehicle"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Action"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[b.map(x=>{const g=r.find(y=>y.id===x.transportId);return s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-6 py-4 font-medium text-slate-900 flex items-center gap-2",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-500",children:x.name.charAt(0)}),x.name]}),s.jsxs("td",{className:"px-6 py-4 text-slate-600",children:[x.class,"-",x.section]}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:g?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(Pl,{size:12,className:"mr-1"})," ",g.route]}):s.jsx("span",{className:"text-slate-400 italic",children:"Not Assigned"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(le,{value:c[x.id]||"",onChange:y=>f(x.id,y.target.value),className:"w-full max-w-xs",children:[s.jsx("option",{value:"",children:"-- No Transport --"}),r.map(y=>s.jsxs("option",{value:y.id,children:[y.vehicleNumber," - ",y.route]},y.id))]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs(R,{size:"sm",onClick:()=>p(x.id),disabled:h||c[x.id]===x.transportId,children:[s.jsx(Di,{size:16,className:"mr-1"})," Save"]})})]},x.id)}),b.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No students found."})})]})]})})]})},Mye=({schoolId:e,schoolName:t,onClose:r})=>{const[n,a]=j.useState(""),[i,o]=j.useState(""),[l,c]=j.useState(""),[u,h]=j.useState(!1),d=async f=>{f.preventDefault(),h(!0);try{const p=Ij("https://cjtmcsehkdvwjgkrjqul.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNqdG1jc2Voa2R2d2pna3JqcXVsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4NzM3OTcsImV4cCI6MjA3NzQ0OTc5N30.K8RlO--akFtbSXYRChekplr9ynNwKaGLxKWREi8MFWM",{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),{data:b,error:x}=await p.auth.signUp({email:n,password:i,options:{data:{full_name:l,role:"admin",school_id:e}}});if(x)throw x;b.user&&(I.success(`Admin user created successfully for ${t}!`),setTimeout(()=>{r()},1500))}catch(p){console.error("Creation error:",p),I.error(`Failed to create admin: ${p.message}`)}finally{h(!1)}};return s.jsxs("form",{onSubmit:d,className:"space-y-5",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full text-blue-600 shrink-0",children:s.jsx(Kb,{size:20})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"Assign School Admin"}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Creating an administrator for ",s.jsx("strong",{children:t}),". They will have full access to manage this school's data."]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"adminName",children:"Full Name"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(qt,{className:"h-4 w-4 text-gray-400"})}),s.jsx(J,{id:"adminName",value:l,onChange:f=>c(f.target.value),className:"pl-10",placeholder:"e.g. Principal Skinner",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"adminEmail",children:"Email Address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(xn,{className:"h-4 w-4 text-gray-400"})}),s.jsx(J,{id:"adminEmail",type:"email",value:n,onChange:f=>a(f.target.value),className:"pl-10",placeholder:"admin@school.com",required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"adminPassword",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ni,{className:"h-4 w-4 text-gray-400"})}),s.jsx(J,{id:"adminPassword",type:"password",value:i,onChange:f=>o(f.target.value),className:"pl-10",placeholder:"",required:!0,minLength:6})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx(R,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),s.jsxs(R,{type:"submit",loading:u,children:[s.jsx(Jb,{size:18,className:"mr-2"}),"Create Admin"]})]})]})},lA=[{key:"dashboard",label:"Dashboard",icon:Ea},{key:"front-office",label:"Front Office",icon:Gb},{key:"student-info",label:"Student Information",icon:Jr},{key:"academics",label:"Academics",icon:qn},{key:"live-classes",label:"Live Classes",icon:yd},{key:"lesson-plan",label:"Lesson Plan",icon:hd},{key:"homework",label:"Homework",icon:zs},{key:"download-center",label:"Download Center",icon:Xm},{key:"hr",label:"Human Resource",icon:Vt},{key:"fees",label:"Fees Collection",icon:$t},{key:"finance",label:"Income & Expenses",icon:ss},{key:"attendance",label:"Attendance",icon:$i},{key:"exams",label:"Examinations",icon:Mr},{key:"online-exams",label:"Online Examinations",icon:UE},{key:"communicate",label:"Communicate",icon:gd},{key:"library",label:"Library",icon:xd},{key:"inventory",label:"Inventory",icon:Ym},{key:"transport",label:"Transport",icon:Pl},{key:"hostel",label:"Hostel",icon:Wb},{key:"certificate",label:"Certificate",icon:Vb},{key:"alumni",label:"Alumni",icon:Jr},{key:"reports",label:"Reports",icon:pd},{key:"settings",label:"System Settings",icon:$l}],Rye=({schoolId:e,schoolName:t,onClose:r})=>{const[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(!1);j.useEffect(()=>{(async()=>{o(!0);const{data:b,error:x}=await D.from("schools").select("features").eq("id",e).single();x?I.error("Failed to load features"):a(b.features||[]),o(!1)})()},[e]);const u=p=>{a(b=>b.includes(p)?b.filter(x=>x!==p):[...b,p])},h=async()=>{c(!0);try{const{error:p}=await D.from("schools").update({features:n}).eq("id",e);if(p)throw p;I.success("School features updated successfully!"),r()}catch(p){I.error(`Failed to update features: ${p.message}`)}finally{c(!1)}},d=()=>{a(lA.map(p=>p.key))},f=()=>{a(["dashboard","settings"])};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full text-blue-600 shrink-0",children:s.jsx(Yb,{size:20})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-blue-800",children:["Manage Features for ",t]}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Enable or disable modules for this school. Disabled modules will be hidden from the school admin's menu."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 text-sm",children:[s.jsx("button",{onClick:d,className:"text-blue-600 hover:underline",children:"Select All"}),s.jsx("span",{className:"text-gray-300",children:"|"}),s.jsx("button",{onClick:f,className:"text-blue-600 hover:underline",children:"Deselect All"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-[400px] overflow-y-auto p-1",children:lA.map(p=>{const b=n.includes(p.key),x=p.icon;return s.jsxs("div",{onClick:()=>u(p.key),className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${b?"bg-blue-50 border-blue-200 shadow-sm":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-md ${b?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-500"}`,children:s.jsx(x,{size:18})}),s.jsx("span",{className:`text-sm font-medium ${b?"text-blue-900":"text-gray-600"}`,children:p.label})]}),s.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center border ${b?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:b&&s.jsx(t3,{size:12,className:"text-white"})})]},p.key)})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-100",children:[s.jsx(R,{variant:"secondary",onClick:r,children:"Cancel"}),s.jsx(R,{onClick:h,loading:l,children:"Save Changes"})]})]})},Iye=()=>{const[e,t]=j.useState([]),[r,n]=j.useState(!0),[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[h,d]=j.useState(null),[f,p]=j.useState(!1),[b,x]=j.useState({name:"",address:"",email:"",phone:"",website:"",subscription_plan:"basic",is_active:!0,logo_url:""}),[g,y]=j.useState(null);j.useEffect(()=>{m()},[]);const m=async()=>{n(!0);const{data:C,error:A}=await D.from("schools").select("*").order("created_at",{ascending:!1});A?I.error("Failed to load schools"):t(C||[]),n(!1)},v=C=>{y(null),C?(d(C),x({name:C.name,address:C.address||"",email:C.email||"",phone:C.phone||"",website:C.website||"",subscription_plan:C.subscription_plan||"basic",is_active:C.is_active,logo_url:C.logo_url})):(d(null),x({name:"",address:"",email:"",phone:"",website:"",subscription_plan:"basic",is_active:!0,logo_url:""})),i(!0)},S=C=>{d(C),l(!0)},w=C=>{d(C),u(!0)},N=async(C,A)=>{const k=C.name.split(".").pop(),E=`school-logos/${A}-${Date.now()}.${k}`,{error:O}=await D.storage.from("avatars").upload(E,C);if(O)return I.error(`Logo upload failed: ${O.message}`),null;const{data:P}=D.storage.from("avatars").getPublicUrl(E);return P.publicUrl},_=async C=>{C.preventDefault(),p(!0);try{let A=b.logo_url;const k=(h==null?void 0:h.id)||`new-${Date.now()}`;if(g){const O=await N(g,k);O&&(A=O)}const E={...b,logo_url:A};if(h){const{error:O}=await D.from("schools").update(E).eq("id",h.id);if(O)throw O;I.success("School updated successfully")}else{const{error:O}=await D.from("schools").insert(E);if(O)throw O;I.success("New school created successfully")}i(!1),m()}catch(A){I.error(A.message)}finally{p(!1)}};return r?s.jsx(Re,{title:"Schools Management",headers:["Name","Contact","Plan","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Schools"}),s.jsx("p",{className:"text-slate-500",children:"Manage multi-tenant school instances"})]}),s.jsxs(R,{onClick:()=>v(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Create School"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(C=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 overflow-hidden",children:C.logo_url?s.jsx("img",{src:C.logo_url,alt:C.name,className:"w-full h-full object-cover"}):s.jsx(Ti,{size:24})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg text-slate-900",children:C.name}),s.jsx(_t,{variant:C.is_active?"success":"danger",children:C.is_active?"Active":"Inactive"})]})]}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>v(C),children:s.jsx(ze,{size:16})})]}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-600 mb-4 flex-grow",children:[C.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xn,{size:14})," ",C.email]}),C.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ho,{size:14})," ",C.phone]}),C.website&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vy,{size:14})," ",C.website]}),s.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[s.jsx("span",{className:"text-xs text-slate-400 uppercase font-bold",children:"Plan:"}),s.jsx("span",{className:"ml-2 font-medium capitalize text-slate-800",children:C.subscription_plan})]})]}),s.jsxs("div",{className:"pt-4 border-t border-slate-100 flex gap-2",children:[s.jsxs(R,{variant:"secondary",className:"flex-1 text-xs",onClick:()=>w(C),children:[s.jsx(Jm,{size:14,className:"mr-2"})," Features"]}),s.jsxs(R,{variant:"secondary",className:"flex-1 text-xs",onClick:()=>S(C),children:[s.jsx(Jb,{size:14,className:"mr-2"})," Admin"]})]})]},C.id))}),s.jsx(he,{isOpen:a,onClose:()=>i(!1),title:h?"Edit School":"Create School",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>i(!1),children:"Cancel"}),s.jsx(R,{onClick:_,loading:f,children:"Save"})]}),children:s.jsxs("form",{onSubmit:_,className:"space-y-4",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsxs("div",{className:"space-y-2 text-center",children:[s.jsx(B,{children:"School Logo"}),s.jsx(nx,{onFileChange:y,initialPreviewUrl:b.logo_url})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"School Name"}),s.jsx(J,{value:b.name,onChange:C=>x({...b,name:C.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Address"}),s.jsx(J,{value:b.address,onChange:C=>x({...b,address:C.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Email"}),s.jsx(J,{type:"email",value:b.email,onChange:C=>x({...b,email:C.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Phone"}),s.jsx(J,{value:b.phone,onChange:C=>x({...b,phone:C.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subscription Plan"}),s.jsxs(le,{value:b.subscription_plan,onChange:C=>x({...b,subscription_plan:C.target.value}),children:[s.jsx("option",{value:"basic",children:"Basic"}),s.jsx("option",{value:"pro",children:"Pro"}),s.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:b.is_active?"true":"false",onChange:C=>x({...b,is_active:C.target.value==="true"}),children:[s.jsx("option",{value:"true",children:"Active"}),s.jsx("option",{value:"false",children:"Inactive"})]})]})]})]})}),s.jsx(he,{isOpen:o,onClose:()=>l(!1),title:"Create School Admin",children:h&&s.jsx(Mye,{schoolId:h.id,schoolName:h.name,onClose:()=>l(!1)})}),s.jsx(he,{isOpen:c,onClose:()=>u(!1),title:"School Features",children:h&&s.jsx(Rye,{schoolId:h.id,schoolName:h.name,onClose:()=>u(!1)})})]})},Lye=()=>{const[e,t]=j.useState({totalSchools:0,activeSchools:0,totalUsers:0,totalRevenue:0}),[r,n]=j.useState([]),[a,i]=j.useState(!0);return j.useEffect(()=>{(async()=>{i(!0);try{const[l,c]=await Promise.all([D.from("schools").select("*",{count:"exact"}),D.from("profiles").select("*",{count:"exact"})]),u=l.data||[];t({totalSchools:l.count||0,activeSchools:u.filter(f=>f.is_active).length,totalUsers:c.count||0,totalRevenue:u.length*1e4});const{data:h,error:d}=await D.rpc("get_school_stats");if(d)console.error("Error fetching role stats:",d);else if(h){const f={};h.forEach(p=>{f[p.school_name]||(f[p.school_name]={name:p.school_name,admin:0,teacher:0,student:0});const b=["admin","teacher","student"].includes(p.role)?p.role:"other";b!=="other"&&(f[p.school_name][b]=p.user_count)}),n(Object.values(f))}}catch(l){console.error("Dashboard error:",l)}finally{i(!1)}})()},[]),a?s.jsx("div",{className:"p-6",children:s.jsx(je,{className:"h-64 w-full"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900",children:"System Overview"}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Super Admin Control Panel"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Pr,{title:"Total Schools",value:e.totalSchools.toString(),icon:Ti,iconBgColor:"bg-blue-500",trend:`${e.activeSchools} Active`,trendDirection:"up"}),s.jsx(Pr,{title:"Total Users",value:e.totalUsers.toString(),icon:Vt,iconBgColor:"bg-purple-500",trend:"System-wide",trendDirection:"up"}),s.jsx(Pr,{title:"System Health",value:"99.9%",icon:ME,iconBgColor:"bg-green-500",trend:"Uptime",trendDirection:"up"}),s.jsx(Pr,{title:"Est. Revenue",value:`$${(e.totalRevenue/1e3).toFixed(1)}k`,icon:$t,iconBgColor:"bg-yellow-500",trend:"Monthly",trendDirection:"up"})]}),s.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"User Distribution by School"}),s.jsx("p",{className:"text-sm text-slate-500",children:"Verify role assignments across tenants"})]}),s.jsx(Hb,{className:"text-blue-600 h-6 w-6"})]}),s.jsx("div",{className:"h-80",children:s.jsx(Rr,{width:"100%",height:"100%",children:s.jsxs(Ks,{data:r,margin:{top:20,right:30,left:20,bottom:5},children:[s.jsx(Sn,{strokeDasharray:"3 3",vertical:!1}),s.jsx(_r,{dataKey:"name"}),s.jsx(pr,{}),s.jsx(pt,{contentStyle:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #e2e8f0"},cursor:{fill:"#f8fafc"}}),s.jsx(Yr,{}),s.jsx(At,{dataKey:"student",name:"Students",stackId:"a",fill:"#3b82f6",radius:[0,0,4,4]}),s.jsx(At,{dataKey:"teacher",name:"Teachers",stackId:"a",fill:"#10b981"}),s.jsx(At,{dataKey:"admin",name:"Admins",stackId:"a",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]})]})},Fye=()=>{const{profile:e,createNotification:t}=fe(),[r,n]=j.useState("individual"),[a,i]=j.useState("student"),[o,l]=j.useState(""),[c,u]=j.useState(""),[h,d]=j.useState(""),[f,p]=j.useState(!1),b=async x=>{if(x.preventDefault(),!!(e!=null&&e.school_id)){p(!0);try{let g=[];if(r==="individual"){const{data:v,error:S}=await D.from("profiles").select("id").eq("email",o).eq("school_id",e.school_id).single();if(S||!v){I.error("Recipient email not found in your school."),p(!1);return}g=[v.id]}else{const{data:v,error:S}=await D.from("profiles").select("id").eq("role",a).eq("school_id",e.school_id);if(S)throw S;g=v.map(w=>w.id)}if(g.length===0){I.error("No recipients found in this group."),p(!1);return}const y=g.map(v=>({user_id:v,title:`New Message: ${c}`,message:h.substring(0,100)+(h.length>100?"...":""),type:"notice",link_to:"/noticeboard"})),m=50;for(let v=0;v<y.length;v+=m){const S=y.slice(v,v+m);await Promise.all(S.map(w=>t(w)))}I.success(`Message sent to ${g.length} recipient(s)!`),u(""),d(""),l("")}catch(g){I.error(`Failed to send message: ${g.message}`)}finally{p(!1)}}};return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg text-blue-600",children:s.jsx(xn,{size:24})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Compose Message"}),s.jsx("p",{className:"text-slate-500",children:"Send internal messages to students and staff"})]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Recipient Type"}),s.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[s.jsxs("button",{type:"button",onClick:()=>n("individual"),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all flex items-center justify-center gap-2 ${r==="individual"?"bg-white shadow-sm text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx(qt,{size:16})," Individual"]}),s.jsxs("button",{type:"button",onClick:()=>n("group"),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all flex items-center justify-center gap-2 ${r==="group"?"bg-white shadow-sm text-blue-600":"text-slate-500 hover:text-slate-700"}`,children:[s.jsx(Vt,{size:16})," Group"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"To"}),r==="individual"?s.jsx(J,{type:"email",placeholder:"recipient@school.com",value:o,onChange:x=>l(x.target.value),required:!0}):s.jsxs(le,{value:a,onChange:x=>i(x.target.value),children:[s.jsx("option",{value:"student",children:"All Students"}),s.jsx("option",{value:"teacher",children:"All Teachers"}),s.jsx("option",{value:"parent",children:"All Parents"}),s.jsx("option",{value:"admin",children:"Administrators"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subject"}),s.jsx(J,{placeholder:"Enter message subject",value:c,onChange:x=>u(x.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Message"}),s.jsx("textarea",{className:"w-full min-h-[200px] rounded-lg border border-slate-300 p-4 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none resize-y",placeholder:"Type your message here...",value:h,onChange:x=>d(x.target.value),required:!0})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[s.jsxs(R,{type:"button",variant:"secondary",className:"text-slate-500",children:[s.jsx(m3,{size:18,className:"mr-2"})," Attach File"]}),s.jsxs(R,{type:"submit",loading:f,className:"px-8",children:[s.jsx(g3,{size:18,className:"mr-2"})," Send Message"]})]})]})})]})},cA=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState({name:"",phone:"",email:"",source:"Google",class:"1",date:new Date().toISOString().split("T")[0],next_follow_up_date:"",status:"active",note:""});j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:m,error:v}=await D.from("admission_enquiries").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});v?I.error("Failed to load enquiries"):r(m||[]),a(!1)},b=m=>{h(m||null),f(m||{name:"",phone:"",email:"",source:"Google",class:"1",date:new Date().toISOString().split("T")[0],next_follow_up_date:"",status:"active",note:""}),c(!0)},x=async m=>{m.preventDefault();try{const v={...d,school_id:e==null?void 0:e.school_id};if(u){const{error:S}=await D.from("admission_enquiries").update(v).eq("id",u.id);if(S)throw S}else{const{error:S}=await D.from("admission_enquiries").insert(v);if(S)throw S}I.success("Enquiry saved"),c(!1),p()}catch(v){I.error(v.message)}},g=async m=>{if(!confirm("Are you sure?"))return;const{error:v}=await D.from("admission_enquiries").delete().eq("id",m);v?I.error(v.message):(I.success("Deleted"),r(S=>S.filter(w=>w.id!==m)))},y=t.filter(m=>m.name.toLowerCase().includes(i.toLowerCase()));return n?s.jsx(Re,{title:"Admission Enquiries",headers:["Name","Phone","Source","Date","Follow Up","Status","Actions"]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative w-72",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search enquiries...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs(R,{onClick:()=>b(),children:[s.jsx(Fe,{size:18,className:"mr-2"})," Add Enquiry"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Source"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Enquiry Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Next Follow Up"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(m=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:m.name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.phone}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.source}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(m.date)}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.next_follow_up_date?De(m.next_follow_up_date):"-"}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(_t,{variant:m.status==="won"?"success":m.status==="lost"?"danger":"neutral",children:m.status})}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(m),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(m.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},m.id))})]})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Enquiry":"Add Enquiry",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:x,children:"Save"})]}),children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Name"}),s.jsx(J,{value:d.name,onChange:m=>f({...d,name:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Phone"}),s.jsx(J,{value:d.phone,onChange:m=>f({...d,phone:m.target.value}),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class"}),s.jsx(J,{value:d.class,onChange:m=>f({...d,class:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Source"}),s.jsxs(le,{value:d.source,onChange:m=>f({...d,source:m.target.value}),children:[s.jsx("option",{children:"Google"}),s.jsx("option",{children:"Friend"}),s.jsx("option",{children:"Advertisement"}),s.jsx("option",{children:"Other"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:d.date,onChange:m=>f({...d,date:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Next Follow Up"}),s.jsx(J,{type:"date",value:d.next_follow_up_date,onChange:m=>f({...d,next_follow_up_date:m.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:d.status,onChange:m=>f({...d,status:m.target.value}),children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"won",children:"Won"}),s.jsx("option",{value:"lost",children:"Lost"}),s.jsx("option",{value:"dead",children:"Dead"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Note"}),s.jsx(J,{value:d.note,onChange:m=>f({...d,note:m.target.value})})]})]})})]})},zye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState({name:"",phone:"",purpose:"",date:new Date().toISOString().split("T")[0],in_time:"",out_time:"",note:""});j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:m,error:v}=await D.from("visitors").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});v?I.error("Failed to load visitors"):r(m||[]),a(!1)},b=m=>{h(m||null),f(m||{name:"",phone:"",purpose:"",date:new Date().toISOString().split("T")[0],in_time:new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),out_time:"",note:""}),c(!0)},x=async m=>{m.preventDefault();try{const v={...d,school_id:e==null?void 0:e.school_id};if(u){const{error:S}=await D.from("visitors").update(v).eq("id",u.id);if(S)throw S}else{const{error:S}=await D.from("visitors").insert(v);if(S)throw S}I.success("Visitor saved"),c(!1),p()}catch(v){I.error(v.message)}},g=async m=>{if(!confirm("Are you sure?"))return;const{error:v}=await D.from("visitors").delete().eq("id",m);v?I.error(v.message):(I.success("Deleted"),r(S=>S.filter(w=>w.id!==m)))},y=t.filter(m=>m.name.toLowerCase().includes(i.toLowerCase()));return n?s.jsx(Re,{title:"Visitor Book",headers:["Name","Phone","Purpose","Date","Time","Actions"]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative w-72",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search visitors...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs(R,{onClick:()=>b(),children:[s.jsx(Fe,{size:18,className:"mr-2"})," Add Visitor"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Purpose"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Time"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(m=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:m.name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.phone}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.purpose}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(m.date)}),s.jsxs("td",{className:"px-6 py-4 text-slate-600 text-sm flex items-center gap-1",children:[s.jsx(rn,{size:12})," ",m.in_time," - ",m.out_time||"..."]}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(m),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(m.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},m.id))})]})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Visitor":"Add Visitor",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:x,children:"Save"})]}),children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Name"}),s.jsx(J,{value:d.name,onChange:m=>f({...d,name:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Phone"}),s.jsx(J,{value:d.phone,onChange:m=>f({...d,phone:m.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Purpose"}),s.jsx(J,{value:d.purpose,onChange:m=>f({...d,purpose:m.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:d.date,onChange:m=>f({...d,date:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"In Time"}),s.jsx(J,{type:"time",value:d.in_time,onChange:m=>f({...d,in_time:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Out Time"}),s.jsx(J,{type:"time",value:d.out_time,onChange:m=>f({...d,out_time:m.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Note"}),s.jsx(J,{value:d.note,onChange:m=>f({...d,note:m.target.value})})]})]})})]})},Bye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState({complaint_by:"",phone:"",date:new Date().toISOString().split("T")[0],description:"",action_taken:"",status:"pending"});j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:m,error:v}=await D.from("complaints").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});v?I.error("Failed to load complaints"):r(m||[]),a(!1)},b=m=>{h(m||null),f(m||{complaint_by:"",phone:"",date:new Date().toISOString().split("T")[0],description:"",action_taken:"",status:"pending"}),c(!0)},x=async m=>{m.preventDefault();try{const v={...d,school_id:e==null?void 0:e.school_id};if(u){const{error:S}=await D.from("complaints").update(v).eq("id",u.id);if(S)throw S}else{const{error:S}=await D.from("complaints").insert(v);if(S)throw S}I.success("Complaint saved"),c(!1),p()}catch(v){I.error(v.message)}},g=async m=>{if(!confirm("Are you sure?"))return;const{error:v}=await D.from("complaints").delete().eq("id",m);v?I.error(v.message):(I.success("Deleted"),r(S=>S.filter(w=>w.id!==m)))},y=t.filter(m=>m.complaint_by.toLowerCase().includes(i.toLowerCase()));return n?s.jsx(Re,{title:"Complaints",headers:["Complainant","Phone","Date","Status","Actions"]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative w-72",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search complaints...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs(R,{onClick:()=>b(),children:[s.jsx(Fe,{size:18,className:"mr-2"})," Add Complaint"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Complainant"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Description"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(m=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:m.complaint_by}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.phone}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(m.date)}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm max-w-xs truncate",children:m.description}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(_t,{variant:m.status==="resolved"?"success":m.status==="in_progress"?"warning":"danger",children:m.status})}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(m),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(m.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},m.id))})]})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Complaint":"Add Complaint",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:x,children:"Save"})]}),children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Complaint By"}),s.jsx(J,{value:d.complaint_by,onChange:m=>f({...d,complaint_by:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Phone"}),s.jsx(J,{value:d.phone,onChange:m=>f({...d,phone:m.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:d.date,onChange:m=>f({...d,date:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Description"}),s.jsx(J,{value:d.description,onChange:m=>f({...d,description:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Action Taken"}),s.jsx(J,{value:d.action_taken,onChange:m=>f({...d,action_taken:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:d.status,onChange:m=>f({...d,status:m.target.value}),children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"resolved",children:"Resolved"})]})]})]})})]})},Uye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(""),[l,c]=j.useState(!1),[u,h]=j.useState(null),[d,f]=j.useState({type:"receive",reference_no:"",to_title:"",from_title:"",address:"",date:new Date().toISOString().split("T")[0],note:""});j.useEffect(()=>{p()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:m,error:v}=await D.from("postal_records").select("*").eq("school_id",e.school_id).order("date",{ascending:!1});v?I.error("Failed to load postal records"):r(m||[]),a(!1)},b=m=>{h(m||null),f(m||{type:"receive",reference_no:"",to_title:"",from_title:"",address:"",date:new Date().toISOString().split("T")[0],note:""}),c(!0)},x=async m=>{m.preventDefault();try{const v={...d,school_id:e==null?void 0:e.school_id};if(u){const{error:S}=await D.from("postal_records").update(v).eq("id",u.id);if(S)throw S}else{const{error:S}=await D.from("postal_records").insert(v);if(S)throw S}I.success("Record saved"),c(!1),p()}catch(v){I.error(v.message)}},g=async m=>{if(!confirm("Are you sure?"))return;const{error:v}=await D.from("postal_records").delete().eq("id",m);v?I.error(v.message):(I.success("Deleted"),r(S=>S.filter(w=>w.id!==m)))},y=t.filter(m=>(m.reference_no||"").toLowerCase().includes(i.toLowerCase())||(m.to_title||"").toLowerCase().includes(i.toLowerCase())||(m.from_title||"").toLowerCase().includes(i.toLowerCase()));return n?s.jsx(Re,{title:"Postal Dispatch & Receive",headers:["Type","Ref No","From / To","Date","Address","Actions"]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"relative w-72",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:18}),s.jsx("input",{type:"text",placeholder:"Search records...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]}),s.jsxs(R,{onClick:()=>b(),children:[s.jsx(Fe,{size:18,className:"mr-2"})," Add Record"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ref No"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"From / To"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Address"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200",children:y.map(m=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs(_t,{variant:m.type==="dispatch"?"info":"success",className:"flex w-fit items-center gap-1 capitalize",children:[m.type==="dispatch"?s.jsx(H5,{size:12}):s.jsx(W5,{size:12}),m.type]})}),s.jsx("td",{className:"px-6 py-4 text-slate-900 font-medium",children:m.reference_no||"-"}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:m.type==="dispatch"?`To: ${m.to_title}`:`From: ${m.from_title}`}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:De(m.date)}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm max-w-xs truncate",children:m.address}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>b(m),children:s.jsx(ze,{size:16})}),s.jsx(R,{variant:"ghost",size:"icon",onClick:()=>g(m.id),children:s.jsx(Te,{size:16,className:"text-red-500"})})]})]},m.id))})]})}),s.jsx(he,{isOpen:l,onClose:()=>c(!1),title:u?"Edit Record":"Add Postal Record",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>c(!1),children:"Cancel"}),s.jsx(R,{onClick:x,children:"Save"})]}),children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Type"}),s.jsxs(le,{value:d.type,onChange:m=>f({...d,type:m.target.value}),children:[s.jsx("option",{value:"receive",children:"Receive"}),s.jsx("option",{value:"dispatch",children:"Dispatch"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:d.date,onChange:m=>f({...d,date:m.target.value}),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Reference No"}),s.jsx(J,{value:d.reference_no,onChange:m=>f({...d,reference_no:m.target.value})})]}),d.type==="dispatch"?s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"To Title"}),s.jsx(J,{value:d.to_title,onChange:m=>f({...d,to_title:m.target.value}),required:!0})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"From Title"}),s.jsx(J,{value:d.from_title,onChange:m=>f({...d,from_title:m.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Address"}),s.jsx(J,{value:d.address,onChange:m=>f({...d,address:m.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Note"}),s.jsx(J,{value:d.note,onChange:m=>f({...d,note:m.target.value})})]})]})})]})},qye=[{id:"enquiry",label:"Admission Enquiry",icon:p3},{id:"visitor",label:"Visitor Book",icon:Vt},{id:"complaint",label:"Complaints",icon:jn},{id:"postal",label:"Postal Dispatch/Receive",icon:xn}],Vye=()=>{const[e,t]=j.useState("enquiry"),r=()=>{switch(e){case"enquiry":return s.jsx(cA,{});case"visitor":return s.jsx(zye,{});case"complaint":return s.jsx(Bye,{});case"postal":return s.jsx(Uye,{});default:return s.jsx(cA,{})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 flex items-center gap-3",children:[s.jsx(Gb,{className:"text-blue-600"})," Front Office"]}),s.jsx("p",{className:"text-slate-500 mt-1",children:"Manage reception, enquiries, and visitors."})]})}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-2",children:s.jsx("div",{className:"flex overflow-x-auto pb-2 sm:pb-0 scrollbar-thin scrollbar-thumb-slate-200 gap-1",children:qye.map(n=>{const a=n.icon,i=e===n.id;return s.jsxs("button",{onClick:()=>t(n.id),className:`flex items-center px-4 py-2.5 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${i?"bg-blue-50 text-blue-700 shadow-sm":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"}`,children:[s.jsx(a,{size:16,className:`mr-2 ${i?"text-blue-600":"text-slate-400"}`}),n.label]},n.id)})})}),s.jsx("div",{className:"animate-in fade-in duration-300",children:r()})]})},Wye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState({title:"",type:"assignment",class:"",upload_date:new Date().toISOString().split("T")[0],description:"",file_url:""}),[u,h]=j.useState(null),d=["system_admin","admin","principal","teacher"].includes((e==null?void 0:e.role)||"");j.useEffect(()=>{f()},[e]);const f=async()=>{if(!(e!=null&&e.school_id))return;a(!0);const{data:g,error:y}=await D.from("contents").select("*").eq("school_id",e.school_id).order("upload_date",{ascending:!1});y?I.error("Failed to load contents"):r(g||[]),a(!1)},p=g=>{g.target.files&&g.target.files[0]&&h(g.target.files[0])},b=async g=>{g.preventDefault();try{let y=l.file_url;if(u){const v=u.name.split(".").pop(),S=`downloads/${e==null?void 0:e.school_id}/${Date.now()}.${v}`,{error:w}=await D.storage.from("documents").upload(S,u);if(w)throw w;const{data:N}=D.storage.from("documents").getPublicUrl(S);y=N.publicUrl}const{error:m}=await D.from("contents").insert({...l,file_url:y,school_id:e==null?void 0:e.school_id});if(m)throw m;I.success("Content uploaded"),o(!1),f()}catch(y){I.error(y.message)}},x=async g=>{if(!confirm("Are you sure?"))return;const{error:y}=await D.from("contents").delete().eq("id",g);y?I.error(y.message):(I.success("Deleted"),r(m=>m.filter(v=>v.id!==g)))};return n?s.jsx(Re,{title:"Download Center",headers:["Title","Type","Class","Date","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Download Center"}),s.jsx("p",{className:"text-slate-500",children:"Assignments, Syllabus, and Study Materials"})]}),d&&s.jsxs(R,{onClick:()=>o(!0),children:[s.jsx(GE,{size:18,className:"mr-2"})," Upload Content"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(g=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:g.type==="assignment"?s.jsx(Mr,{size:24}):s.jsx(zs,{size:24})}),s.jsxs("div",{className:"flex gap-2",children:[g.file_url&&s.jsx("a",{href:g.file_url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-slate-400 hover:text-blue-600 rounded-full hover:bg-blue-50 transition-colors",children:s.jsx(Oa,{size:18})}),d&&s.jsx("button",{onClick:()=>x(g.id),className:"p-2 text-slate-400 hover:text-red-600 rounded-full hover:bg-red-50 transition-colors",children:s.jsx(Te,{size:18})})]})]}),s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1",children:g.title}),s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsx("span",{className:"text-xs font-medium px-2 py-1 bg-slate-100 rounded text-slate-600 capitalize",children:g.type.replace("_"," ")}),g.class&&s.jsxs("span",{className:"text-xs font-medium px-2 py-1 bg-slate-100 rounded text-slate-600",children:["Class ",g.class]})]}),s.jsx("p",{className:"text-sm text-slate-500 mb-4 flex-grow",children:g.description}),s.jsxs("div",{className:"text-xs text-slate-400 pt-4 border-t border-slate-100",children:["Uploaded: ",De(g.upload_date)]})]},g.id)),t.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-slate-500",children:"No content available for download."})]}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:"Upload Content",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:b,children:"Upload"})]}),children:s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Title"}),s.jsx(J,{value:l.title,onChange:g=>c({...l,title:g.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Type"}),s.jsxs(le,{value:l.type,onChange:g=>c({...l,type:g.target.value}),children:[s.jsx("option",{value:"assignment",children:"Assignment"}),s.jsx("option",{value:"syllabus",children:"Syllabus"}),s.jsx("option",{value:"study_material",children:"Study Material"}),s.jsx("option",{value:"other",children:"Other"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class (Optional)"}),s.jsx(J,{value:l.class,onChange:g=>c({...l,class:g.target.value}),placeholder:"e.g. 10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Description"}),s.jsx(J,{value:l.description,onChange:g=>c({...l,description:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"File"}),s.jsx(J,{type:"file",onChange:p,required:!0})]})]})})]})},Gye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState(null),[u,h]=j.useState([]),[d,f]=j.useState({teacher_id:"",class:"9",section:"A",subject:"Mathematics",topic:"",date:new Date().toISOString().split("T")[0],time_from:"09:00",time_to:"10:00",status:"planned"});j.useEffect(()=>{p(),b()},[e]);const p=async()=>{if(!(e!=null&&e.school_id))return;a(!0);let v=D.from("lesson_plans").select("*, teachers(name)").eq("school_id",e.school_id).order("date",{ascending:!1});if((e==null?void 0:e.role)==="teacher"){const{data:N}=await D.from("teachers").select("id").eq("user_id",e.id).single();N&&(v=v.eq("teacher_id",N.id))}const{data:S,error:w}=await v;w?I.error("Failed to load lesson plans"):r(S.map(N=>{var _;return{...N,teacher_name:((_=N.teachers)==null?void 0:_.name)||"Unknown"}})),a(!1)},b=async()=>{if(!(e!=null&&e.school_id))return;const{data:v}=await D.from("teachers").select("id, name").eq("school_id",e.school_id);v&&h(v)},x=v=>{var S;if(c(v||null),v)f({teacher_id:v.teacher_id,class:v.class,section:v.section,subject:v.subject,topic:v.topic,date:v.date,time_from:v.time_from,time_to:v.time_to,status:v.status});else{const w=(e==null?void 0:e.role)==="teacher"?u.find(N=>N.name===e.name):null;f({teacher_id:(w==null?void 0:w.id)||((S=u[0])==null?void 0:S.id)||"",class:"9",section:"A",subject:"Mathematics",topic:"",date:new Date().toISOString().split("T")[0],time_from:"09:00",time_to:"10:00",status:"planned"})}o(!0)},g=async v=>{v.preventDefault();try{const S={...d,school_id:e==null?void 0:e.school_id};if(l){const{error:w}=await D.from("lesson_plans").update(S).eq("id",l.id);if(w)throw w}else{const{error:w}=await D.from("lesson_plans").insert(S);if(w)throw w}I.success("Lesson plan saved"),o(!1),p()}catch(S){I.error(S.message)}},y=async v=>{if(!confirm("Are you sure?"))return;const{error:S}=await D.from("lesson_plans").delete().eq("id",v);S?I.error(S.message):(I.success("Deleted"),r(w=>w.filter(N=>N.id!==v)))},m=async(v,S)=>{const{error:w}=await D.from("lesson_plans").update({status:S}).eq("id",v);w?I.error("Update failed"):(I.success(`Marked as ${S}`),p())};return n?s.jsx(Re,{title:"Lesson Planning",headers:["Date","Class","Subject","Topic","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Lesson Planning"}),s.jsx("p",{className:"text-slate-500",children:"Manage syllabus and daily teaching plans"})]}),s.jsxs(R,{onClick:()=>x(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Lesson Plan"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date & Time"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Subject"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Topic"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Teacher"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[t.map(v=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900",children:De(v.date)}),s.jsxs("div",{className:"text-xs text-slate-500",children:[v.time_from.slice(0,5)," - ",v.time_to.slice(0,5)]})]}),s.jsxs("td",{className:"px-6 py-4 text-slate-600",children:[v.class,"-",v.section]}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:v.subject}),s.jsx("td",{className:"px-6 py-4 font-medium text-slate-800",children:v.topic}),s.jsx("td",{className:"px-6 py-4 text-slate-600 text-sm",children:v.teacher_name}),s.jsx("td",{className:"px-6 py-4",children:s.jsx(_t,{variant:v.status==="completed"?"success":v.status==="postponed"?"danger":"warning",className:"capitalize",children:v.status})}),s.jsxs("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:[v.status!=="completed"&&s.jsx("button",{onClick:()=>m(v.id,"completed"),className:"text-green-600 hover:bg-green-50 p-1 rounded",title:"Mark Complete",children:s.jsx(fd,{size:16})}),s.jsx("button",{onClick:()=>x(v),className:"text-slate-500 hover:text-blue-600 p-1 rounded",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>y(v.id),className:"text-slate-500 hover:text-red-600 p-1 rounded",children:s.jsx(Te,{size:16})})]})]},v.id)),t.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No lesson plans found."})})]})]})}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Lesson Plan":"Add Lesson Plan",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:g,children:"Save"})]}),children:s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Teacher"}),s.jsx(le,{value:d.teacher_id,onChange:v=>f({...d,teacher_id:v.target.value}),disabled:(e==null?void 0:e.role)==="teacher",children:u.map(v=>s.jsx("option",{value:v.id,children:v.name},v.id))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subject"}),s.jsx(J,{value:d.subject,onChange:v=>f({...d,subject:v.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class"}),s.jsx(J,{value:d.class,onChange:v=>f({...d,class:v.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Section"}),s.jsx(J,{value:d.section,onChange:v=>f({...d,section:v.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Topic"}),s.jsx(J,{value:d.topic,onChange:v=>f({...d,topic:v.target.value}),placeholder:"e.g. Algebra - Quadratic Equations"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:d.date,onChange:v=>f({...d,date:v.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"From"}),s.jsx(J,{type:"time",value:d.time_from,onChange:v=>f({...d,time_from:v.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"To"}),s.jsx(J,{type:"time",value:d.time_to,onChange:v=>f({...d,time_to:v.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:d.status,onChange:v=>f({...d,status:v.target.value}),children:[s.jsx("option",{value:"planned",children:"Planned"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"postponed",children:"Postponed"})]})]})]})})]})},Kye=({examId:e,examTitle:t,onClose:r})=>{const[n,a]=j.useState([]),[i,o]=j.useState(!0),[l,c]=j.useState(null),[u,h]=j.useState({question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"a",marks:1});j.useEffect(()=>{d()},[e]);const d=async()=>{o(!0);const{data:g,error:y}=await D.from("online_exam_questions").select("*").eq("exam_id",e).order("created_at",{ascending:!0});y?I.error("Failed to load questions"):a(g||[]),o(!1)},f=async()=>{if(!u.question_text||!u.option_a||!u.option_b){I.error("Question and at least two options are required");return}try{if(l){const{error:g}=await D.from("online_exam_questions").update(u).eq("id",l);if(g)throw g;I.success("Question updated")}else{const{error:g}=await D.from("online_exam_questions").insert({...u,exam_id:e});if(g)throw g;I.success("Question added")}h({question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"a",marks:1}),c(null),d()}catch(g){I.error(g.message)}},p=g=>{c(g.id),h({question_text:g.question_text,option_a:g.option_a,option_b:g.option_b,option_c:g.option_c,option_d:g.option_d,correct_option:g.correct_option,marks:g.marks})},b=async g=>{if(!confirm("Delete this question?"))return;const{error:y}=await D.from("online_exam_questions").delete().eq("id",g);y?I.error("Failed to delete"):(I.success("Question deleted"),a(m=>m.filter(v=>v.id!==g)))},x=()=>{c(null),h({question_text:"",option_a:"",option_b:"",option_c:"",option_d:"",correct_option:"a",marks:1})};return s.jsxs("div",{className:"flex flex-col h-[80vh]",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Questions"}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Exam: ",t]})]}),s.jsxs("div",{className:"bg-blue-50 text-blue-700 px-3 py-1 rounded-full text-sm font-medium",children:["Total Questions: ",n.length]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 flex-grow overflow-hidden",children:[s.jsxs("div",{className:"lg:col-span-1 bg-slate-50 p-4 rounded-xl border border-slate-200 overflow-y-auto",children:[s.jsxs("h3",{className:"font-semibold text-slate-800 mb-4 flex items-center",children:[l?s.jsx(uA,{}):s.jsx(Hye,{}),l?"Edit Question":"Add New Question"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Question Text"}),s.jsx("textarea",{className:"w-full rounded-md border border-slate-300 p-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",rows:3,value:u.question_text,onChange:g=>h({...u,question_text:g.target.value}),placeholder:"Enter question here..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{children:"Option A"}),s.jsx(J,{value:u.option_a,onChange:g=>h({...u,option_a:g.target.value})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{children:"Option B"}),s.jsx(J,{value:u.option_b,onChange:g=>h({...u,option_b:g.target.value})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{children:"Option C"}),s.jsx(J,{value:u.option_c,onChange:g=>h({...u,option_c:g.target.value})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{children:"Option D"}),s.jsx(J,{value:u.option_d,onChange:g=>h({...u,option_d:g.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Correct Option"}),s.jsxs(le,{value:u.correct_option,onChange:g=>h({...u,correct_option:g.target.value}),children:[s.jsx("option",{value:"a",children:"Option A"}),s.jsx("option",{value:"b",children:"Option B"}),s.jsx("option",{value:"c",children:"Option C"}),s.jsx("option",{value:"d",children:"Option D"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Marks"}),s.jsx(J,{type:"number",min:"1",value:u.marks,onChange:g=>h({...u,marks:parseInt(g.target.value)})})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(R,{onClick:f,className:"flex-1",children:[s.jsx(Di,{size:16,className:"mr-2"})," ",l?"Update":"Add"]}),l&&s.jsx(R,{variant:"secondary",onClick:x,children:"Cancel"})]})]})]}),s.jsx("div",{className:"lg:col-span-2 overflow-y-auto pr-2",children:i?s.jsxs("div",{className:"space-y-3",children:[s.jsx(je,{className:"h-24 w-full"}),s.jsx(je,{className:"h-24 w-full"}),s.jsx(je,{className:"h-24 w-full"})]}):n.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400 border-2 border-dashed border-slate-200 rounded-xl",children:[s.jsx(jn,{size:48,className:"mb-2 opacity-50"}),s.jsx("p",{children:"No questions added yet."})]}):s.jsx("div",{className:"space-y-4",children:n.map((g,y)=>s.jsxs("div",{className:`bg-white p-4 rounded-xl border transition-all ${l===g.id?"border-blue-500 ring-1 ring-blue-500":"border-slate-200 hover:shadow-md"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-slate-100 rounded-full flex items-center justify-center text-xs font-bold text-slate-600",children:y+1}),s.jsx("h4",{className:"font-medium text-slate-900",children:g.question_text})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-bold bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded",children:[g.marks," Marks"]}),s.jsx("button",{onClick:()=>p(g),className:"text-slate-400 hover:text-blue-600 p-1",children:s.jsx(uA,{size:16})}),s.jsx("button",{onClick:()=>b(g.id),className:"text-slate-400 hover:text-red-600 p-1",children:s.jsx(Te,{size:16})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 ml-9 text-sm",children:[s.jsx(wh,{label:"A",text:g.option_a,isCorrect:g.correct_option==="a"}),s.jsx(wh,{label:"B",text:g.option_b,isCorrect:g.correct_option==="b"}),g.option_c&&s.jsx(wh,{label:"C",text:g.option_c,isCorrect:g.correct_option==="c"}),g.option_d&&s.jsx(wh,{label:"D",text:g.option_d,isCorrect:g.correct_option==="d"})]})]},g.id))})})]})]})},wh=({label:e,text:t,isCorrect:r})=>s.jsxs("div",{className:`flex items-center gap-2 ${r?"text-green-700 font-medium":"text-slate-500"}`,children:[s.jsx("span",{className:`w-5 h-5 rounded-full flex items-center justify-center text-xs border ${r?"bg-green-100 border-green-300":"bg-white border-slate-200"}`,children:e}),s.jsx("span",{children:t}),r&&s.jsx(fd,{size:14})]}),uA=({size:e})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e||24,height:e||24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Hye=({size:e})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e||24,height:e||24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),s.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),Yye=({examId:e,examTitle:t,durationMinutes:r,studentId:n,onClose:a,onSuccess:i})=>{const[o,l]=j.useState([]),[c,u]=j.useState({}),[h,d]=j.useState(!0),[f,p]=j.useState(!1),[b,x]=j.useState(r*60),[g,y]=j.useState(0);j.useEffect(()=>{(async()=>{d(!0);const{data:C,error:A}=await D.from("online_exam_questions").select("*").eq("exam_id",e);if(A)I.error("Failed to load questions"),a();else{if(!C||C.length===0){I.error("This exam has no questions yet."),a();return}l(C)}d(!1)})()},[e]),j.useEffect(()=>{if(h||f)return;const _=setInterval(()=>{x(C=>C<=1?(clearInterval(_),S(!0),0):C-1)},1e3);return()=>clearInterval(_)},[h,f]);const m=_=>{const C=Math.floor(_/60),A=_%60;return`${C}:${A.toString().padStart(2,"0")}`},v=(_,C)=>{u(A=>({...A,[_]:C}))},S=async(_=!1)=>{if(!_&&!confirm("Are you sure you want to submit your exam?"))return;p(!0);let C=0,A=0,k=0;o.forEach(E=>{k+=E.marks,c[E.id]===E.correct_option&&(C+=E.marks,A++)});try{const{error:E}=await D.from("online_exam_results").insert({exam_id:e,student_id:n,score:C,total_marks:k,correct_answers:A,total_questions:o.length});if(E)throw E;I.success(`Exam submitted! You scored ${C}/${k}`),i(),a()}catch(E){I.error(`Submission failed: ${E.message}`),p(!1)}};if(h)return s.jsx("div",{className:"p-8",children:s.jsx(je,{className:"h-64 w-full"})});const w=o[g],N=g===o.length-1;return s.jsxs("div",{className:"flex flex-col h-[80vh]",children:[s.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-t-xl border-b border-slate-200",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900",children:t}),s.jsxs("p",{className:"text-sm text-slate-500",children:["Question ",g+1," of ",o.length]})]}),s.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg font-mono font-bold text-lg ${b<300?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:[s.jsx(rn,{size:20}),m(b)]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-xl font-medium text-slate-900 mb-2",children:[g+1,". ",w.question_text]}),s.jsxs("span",{className:"text-xs font-semibold bg-gray-100 text-gray-600 px-2 py-1 rounded",children:[w.marks," Marks"]})]}),s.jsx("div",{className:"space-y-3",children:["a","b","c","d"].map(_=>{const C=w[`option_${_}`];if(!C)return null;const A=c[w.id]===_;return s.jsxs("div",{onClick:()=>v(w.id,_),className:`p-4 rounded-lg border-2 cursor-pointer transition-all flex items-center gap-3 ${A?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-blue-300 hover:bg-slate-50"}`,children:[s.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center text-xs font-bold ${A?"bg-blue-500 border-blue-500 text-white":"border-slate-400 text-slate-500"}`,children:_.toUpperCase()}),s.jsx("span",{className:`text-sm ${A?"text-blue-900 font-medium":"text-slate-700"}`,children:C})]},_)})})]})}),s.jsxs("div",{className:"bg-white p-4 border-t border-slate-200 flex justify-between items-center",children:[s.jsxs(R,{variant:"secondary",onClick:()=>y(_=>Math.max(0,_-1)),disabled:g===0,children:[s.jsx(RE,{size:18,className:"mr-1"})," Previous"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"hidden sm:flex gap-1 items-center mr-4",children:o.map((_,C)=>s.jsx("div",{className:`w-2 h-2 rounded-full ${C===g?"bg-blue-600":c[o[C].id]?"bg-green-400":"bg-slate-200"}`},C))}),N?s.jsxs(R,{onClick:()=>S(!1),variant:"primary",className:"bg-green-600 hover:bg-green-700",loading:f,children:[s.jsx(Di,{size:18,className:"mr-2"})," Submit Exam"]}):s.jsxs(R,{onClick:()=>y(_=>Math.min(o.length-1,_+1)),children:["Next ",s.jsx(IE,{size:18,className:"ml-1"})]})]})]})]})},Xye=()=>{const{profile:e,user:t}=fe(),[r,n]=j.useState([]),[a,i]=j.useState(!0),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[h,d]=j.useState(!1),[f,p]=j.useState(null),[b,x]=j.useState(null),[g,y]=j.useState({title:"",class:"9",section:"A",subject:"Mathematics",start_date:new Date().toISOString().slice(0,16),end_date:new Date(Date.now()+864e5).toISOString().slice(0,16),duration_minutes:60,status:"draft"});j.useEffect(()=>{m()},[e]);const m=async()=>{if(e!=null&&e.school_id){i(!0);try{let k=D.from("online_exams").select("*").eq("school_id",e.school_id).order("start_date",{ascending:!1}),E=null;if((e==null?void 0:e.role)==="student"&&t){const{data:T}=await D.from("students").select("id, class, section").eq("user_id",t.id).eq("school_id",e.school_id).single();T&&(E=T.id,x(T.id),k=k.eq("class",T.class).eq("status","published"))}const{data:O,error:P}=await k;if(P)throw P;let M=O||[];if(E&&M.length>0){const{data:T}=await D.from("online_exam_results").select("exam_id, score, total_marks").eq("student_id",E),F=new Map;T==null||T.forEach(q=>F.set(q.exam_id,q)),M=M.map(q=>{const $=F.get(q.id);return{...q,has_taken:!!$,score:$==null?void 0:$.score,total_marks:$==null?void 0:$.total_marks}})}n(M)}catch{I.error("Failed to load online exams")}finally{i(!1)}}},v=k=>{p(k||null),y(k?{title:k.title,class:k.class,section:k.section||"A",subject:k.subject,start_date:new Date(k.start_date).toISOString().slice(0,16),end_date:new Date(k.end_date).toISOString().slice(0,16),duration_minutes:k.duration_minutes,status:k.status}:{title:"",class:"9",section:"A",subject:"Mathematics",start_date:new Date().toISOString().slice(0,16),end_date:new Date(Date.now()+864e5).toISOString().slice(0,16),duration_minutes:60,status:"draft"}),l(!0)},S=k=>{p(k),u(!0)},w=k=>{const E=new Date,O=new Date(k.start_date),P=new Date(k.end_date);if(E<O){I.error(`Exam starts on ${De(k.start_date)}`);return}if(E>P){I.error("Exam has expired");return}p(k),d(!0)},N=async k=>{k.preventDefault();try{const E={...g,school_id:e==null?void 0:e.school_id};if(f){const{error:O}=await D.from("online_exams").update(E).eq("id",f.id);if(O)throw O}else{const{error:O}=await D.from("online_exams").insert(E);if(O)throw O}I.success("Exam saved"),l(!1),m()}catch(E){I.error(E.message)}},_=async k=>{if(!confirm("Are you sure?"))return;const{error:E}=await D.from("online_exams").delete().eq("id",k);E?I.error(E.message):(I.success("Deleted"),n(O=>O.filter(P=>P.id!==k)))},C=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="teacher"||(e==null?void 0:e.role)==="system_admin",A=(e==null?void 0:e.role)==="student";return a?s.jsx(Re,{title:"Online Examinations",headers:["Exam Title","Class","Subject","Date Range","Status","Actions"]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Online Examinations"}),s.jsx("p",{className:"text-slate-500",children:"Manage computer-based tests and quizzes"})]}),C&&s.jsxs(R,{onClick:()=>v(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Create Exam"]})]}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Exam Title"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Class"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Subject"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Date Range"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase",children:"Actions"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[r.map(k=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:k.title}),s.jsxs("td",{className:"px-6 py-4 text-slate-600",children:[k.class,"-",k.section]}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:k.subject}),s.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{children:["From: ",De(k.start_date)]}),s.jsxs("span",{children:["To: ",De(k.end_date)]})]})}),s.jsx("td",{className:"px-6 py-4",children:A&&k.has_taken?s.jsxs(_t,{variant:"success",children:["Completed (",k.score,"/",k.total_marks,")"]}):s.jsx(_t,{variant:k.status==="published"?"success":k.status==="closed"?"danger":"neutral",className:"capitalize",children:k.status})}),s.jsx("td",{className:"px-6 py-4 text-right flex justify-end gap-2",children:C?s.jsxs(s.Fragment,{children:[s.jsxs(R,{variant:"secondary",size:"sm",className:"text-xs",onClick:()=>S(k),children:[s.jsx(c3,{size:14,className:"mr-1"})," Questions"]}),s.jsx("button",{onClick:()=>v(k),className:"text-slate-500 hover:text-blue-600 p-1 rounded",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>_(k.id),className:"text-slate-500 hover:text-red-600 p-1 rounded",children:s.jsx(Te,{size:16})})]}):A?k.has_taken?s.jsxs(R,{variant:"secondary",size:"sm",className:"text-xs",disabled:!0,children:[s.jsx(md,{size:14,className:"mr-1"})," View Result"]}):s.jsxs(R,{size:"sm",className:"bg-green-600 hover:bg-green-700 text-xs",onClick:()=>w(k),children:[s.jsx(x3,{size:14,className:"mr-1"})," Start Exam"]}):null})]},k.id)),r.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500",children:"No online exams found."})})]})]})}),C&&s.jsx(he,{isOpen:o,onClose:()=>l(!1),title:f?"Edit Exam":"Create Online Exam",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>l(!1),children:"Cancel"}),s.jsx(R,{onClick:N,children:"Save"})]}),children:s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Exam Title"}),s.jsx(J,{value:g.title,onChange:k=>y({...g,title:k.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class"}),s.jsx(J,{value:g.class,onChange:k=>y({...g,class:k.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Section"}),s.jsx(J,{value:g.section,onChange:k=>y({...g,section:k.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subject"}),s.jsx(J,{value:g.subject,onChange:k=>y({...g,subject:k.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Start Date & Time"}),s.jsx(J,{type:"datetime-local",value:g.start_date,onChange:k=>y({...g,start_date:k.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"End Date & Time"}),s.jsx(J,{type:"datetime-local",value:g.end_date,onChange:k=>y({...g,end_date:k.target.value})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Duration (Minutes)"}),s.jsx(J,{type:"number",value:g.duration_minutes,onChange:k=>y({...g,duration_minutes:parseInt(k.target.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Status"}),s.jsxs(le,{value:g.status,onChange:k=>y({...g,status:k.target.value}),children:[s.jsx("option",{value:"draft",children:"Draft"}),s.jsx("option",{value:"published",children:"Published"}),s.jsx("option",{value:"closed",children:"Closed"})]})]})]})]})}),C&&s.jsx(he,{isOpen:c,onClose:()=>u(!1),title:"Question Bank",size:"4xl",children:f&&s.jsx(Kye,{examId:f.id,examTitle:f.title,onClose:()=>u(!1)})}),A&&s.jsx(he,{isOpen:h,onClose:()=>d(!1),title:`Exam: ${f==null?void 0:f.title}`,size:"full",children:f&&b&&s.jsx(Yye,{examId:f.id,examTitle:f.title,durationMinutes:f.duration_minutes,studentId:b,onClose:()=>d(!1),onSuccess:()=>{d(!1),m()}})})]})},Jye=()=>{const{profile:e}=fe(),[t,r]=j.useState("list"),[n,a]=j.useState([]),[i,o]=j.useState([]),[l,c]=j.useState(!0),[u,h]=j.useState(""),[d,f]=j.useState(!1),[p,b]=j.useState(null),[x,g]=j.useState({title:"",event_date:"",time:"",location:"",description:""});j.useEffect(()=>{y()},[t,e]);const y=async()=>{if(e!=null&&e.school_id){c(!0);try{if(t==="list"){const{data:N,error:_}=await D.from("students").select("*").eq("school_id",e.school_id).eq("status","alumni").order("name");if(_)throw _;a(N.map(C=>({id:C.id,name:C.name,email:C.email,phone:C.phone,class:C.class,section:C.section,status:C.status})))}else{const{data:N,error:_}=await D.from("alumni_events").select("*").eq("school_id",e.school_id).order("event_date",{ascending:!1});if(_)throw _;o(N||[])}}catch(N){I.error(`Failed to load data: ${N.message}`)}finally{c(!1)}}},m=N=>{b(N||null),g(N||{title:"",event_date:new Date().toISOString().split("T")[0],time:"10:00",location:"",description:""}),f(!0)},v=async N=>{N.preventDefault();try{const _={...x,school_id:e==null?void 0:e.school_id};if(p){const{error:C}=await D.from("alumni_events").update(_).eq("id",p.id);if(C)throw C}else{const{error:C}=await D.from("alumni_events").insert(_);if(C)throw C}I.success("Event saved"),f(!1),y()}catch(_){I.error(_.message)}},S=async N=>{if(!confirm("Delete this event?"))return;const{error:_}=await D.from("alumni_events").delete().eq("id",N);_?I.error(_.message):(I.success("Deleted"),o(C=>C.filter(A=>A.id!==N)))},w=n.filter(N=>N.name.toLowerCase().includes(u.toLowerCase()));return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Alumni Management"}),s.jsx("p",{className:"text-slate-500",children:"Manage former students and events"})]}),s.jsxs("div",{className:"flex bg-white rounded-lg p-1 border border-slate-200",children:[s.jsxs("button",{onClick:()=>r("list"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${t==="list"?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-50"}`,children:[s.jsx(Vt,{size:16,className:"inline mr-2"})," Alumni List"]}),s.jsxs("button",{onClick:()=>r("events"),className:`px-4 py-2 text-sm font-medium rounded-md transition-colors ${t==="events"?"bg-blue-100 text-blue-700":"text-slate-600 hover:bg-slate-50"}`,children:[s.jsx(wr,{size:16,className:"inline mr-2"})," Events"]})]})]}),t==="list"?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(Me,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:20}),s.jsx("input",{type:"text",placeholder:"Search alumni...",value:u,onChange:N=>h(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg"})]})}),l?s.jsx(Re,{title:"Alumni",headers:["Name","Phone","Email","Graduated Class"]}):s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[s.jsx("thead",{className:"bg-slate-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Phone"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Email"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Graduated From"})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200",children:[w.map(N=>s.jsxs("tr",{className:"hover:bg-slate-50",children:[s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:N.name}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:N.phone}),s.jsx("td",{className:"px-6 py-4 text-slate-600",children:N.email}),s.jsxs("td",{className:"px-6 py-4 text-slate-600",children:["Class ",N.class,"-",N.section]})]},N.id)),w.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-500",children:"No alumni records found."})})]})]})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs(R,{onClick:()=>m(),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Add Event"]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.map(N=>s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("h3",{className:"font-bold text-lg text-slate-900",children:N.title}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>m(N),className:"p-1 text-slate-400 hover:text-blue-600",children:s.jsx(ze,{size:16})}),s.jsx("button",{onClick:()=>S(N.id),className:"p-1 text-slate-400 hover:text-red-600",children:s.jsx(Te,{size:16})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-600 mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wr,{size:14})," ",De(N.event_date)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rn,{size:14})," ",N.time]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(BE,{size:14})," ",N.location]})]}),s.jsx("p",{className:"text-sm text-slate-500",children:N.description})]},N.id)),i.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-slate-500",children:"No events scheduled."})]})]}),s.jsx(he,{isOpen:d,onClose:()=>f(!1),title:p?"Edit Event":"Add Alumni Event",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>f(!1),children:"Cancel"}),s.jsx(R,{onClick:v,children:"Save"})]}),children:s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Event Title"}),s.jsx(J,{value:x.title,onChange:N=>g({...x,title:N.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:x.event_date,onChange:N=>g({...x,event_date:N.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Time"}),s.jsx(J,{type:"time",value:x.time,onChange:N=>g({...x,time:N.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Location"}),s.jsx(J,{value:x.location,onChange:N=>g({...x,location:N.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Description"}),s.jsx("textarea",{className:"w-full rounded-md border border-slate-300 p-2 text-sm",rows:3,value:x.description,onChange:N=>g({...x,description:N.target.value})})]})]})})]})},Qye=()=>{const{profile:e}=fe(),[t,r]=j.useState([]),[n,a]=j.useState(!0),[i,o]=j.useState(!1),[l,c]=j.useState([]),[u,h]=j.useState(null),[d,f]=j.useState({title:"",class:"9",section:"A",subject:"Mathematics",date:new Date().toISOString().split("T")[0],start_time:"09:00",end_time:"10:00",meeting_url:"",teacher_id:""});j.useEffect(()=>{p()},[e]);const p=async()=>{if(e!=null&&e.school_id){a(!0),h(null);try{const[y,m]=await Promise.all([D.from("live_classes").select("*, teachers(name)").eq("school_id",e.school_id).order("date",{ascending:!1}),D.from("teachers").select("id, name").eq("school_id",e.school_id)]);if(y.error)throw y.error;if(m.error)throw m.error;r(y.data||[]),c(m.data||[]),m.data&&m.data.length>0&&f(v=>({...v,teacher_id:m.data[0].id}))}catch(y){console.error("Error fetching live classes:",y),y.code==="42P01"?h("The 'live_classes' table does not exist. Please ensure the database migration has been run."):(h(`Failed to load data: ${y.message}`),I.error(`Failed to load data: ${y.message}`))}finally{a(!1)}}},b=async y=>{y.preventDefault();try{const m={...d,school_id:e==null?void 0:e.school_id},{error:v}=await D.from("live_classes").insert(m);if(v)throw v;I.success("Class scheduled"),o(!1),p()}catch(m){I.error(m.message)}},x=async y=>{if(!confirm("Delete this class?"))return;const{error:m}=await D.from("live_classes").delete().eq("id",y);m?I.error(m.message):(I.success("Deleted"),r(v=>v.filter(S=>S.id!==y)))},g=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="teacher";return n?s.jsx(Re,{title:"Live Classes",headers:["Title","Class","Date","Time","Link","Actions"]}):u?s.jsxs("div",{className:"p-8 text-center bg-white rounded-xl border border-red-200",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(dd,{className:"h-8 w-8 text-red-600"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"Configuration Error"}),s.jsx("p",{className:"text-slate-600 mb-4",children:u}),s.jsx(R,{onClick:p,variant:"secondary",children:"Retry"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Live Classes"}),s.jsx("p",{className:"text-slate-500",children:"Schedule and join online classes (Zoom/Meet)"})]}),g&&s.jsxs(R,{onClick:()=>o(!0),children:[s.jsx(Fe,{size:20,className:"mr-2"})," Schedule Class"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.map(y=>{var m;return s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg text-blue-600",children:s.jsx(yd,{size:24})}),g&&s.jsx("button",{onClick:()=>x(y.id),className:"text-slate-400 hover:text-red-600 p-1",children:s.jsx(Te,{size:18})})]}),s.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1",children:y.title}),s.jsxs("p",{className:"text-sm text-slate-600 mb-4",children:[y.subject,"  Class ",y.class,"-",y.section]}),s.jsxs("div",{className:"space-y-2 text-sm text-slate-500 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wr,{size:14})," ",De(y.date)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rn,{size:14})," ",y.start_time.slice(0,5)," - ",y.end_time.slice(0,5)]}),s.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs",children:["By: ",(m=y.teachers)==null?void 0:m.name]})]}),s.jsx("div",{className:"mt-auto",children:s.jsxs("a",{href:y.meeting_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm",children:[s.jsx(s3,{size:16,className:"mr-2"})," Join Class"]})})]},y.id)}),t.length===0&&s.jsx("div",{className:"col-span-full text-center py-12 text-slate-500",children:"No live classes scheduled."})]}),s.jsx(he,{isOpen:i,onClose:()=>o(!1),title:"Schedule Live Class",footer:s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),s.jsx(R,{onClick:b,children:"Schedule"})]}),children:s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class Title"}),s.jsx(J,{value:d.title,onChange:y=>f({...d,title:y.target.value}),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Class"}),s.jsx(J,{value:d.class,onChange:y=>f({...d,class:y.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Section"}),s.jsx(J,{value:d.section,onChange:y=>f({...d,section:y.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Subject"}),s.jsx(J,{value:d.subject,onChange:y=>f({...d,subject:y.target.value})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Date"}),s.jsx(J,{type:"date",value:d.date,onChange:y=>f({...d,date:y.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Start"}),s.jsx(J,{type:"time",value:d.start_time,onChange:y=>f({...d,start_time:y.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"End"}),s.jsx(J,{type:"time",value:d.end_time,onChange:y=>f({...d,end_time:y.target.value})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Meeting URL (Zoom/Meet)"}),s.jsx(J,{value:d.meeting_url,onChange:y=>f({...d,meeting_url:y.target.value}),placeholder:"https://...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{children:"Teacher"}),s.jsx(le,{value:d.teacher_id,onChange:y=>f({...d,teacher_id:y.target.value}),children:l.map(y=>s.jsx("option",{value:y.id,children:y.name},y.id))})]})]})})]})},Zye=()=>{const{user:e,profile:t}=fe(),[r,n]=j.useState(null),[a,i]=j.useState(null),[o,l]=j.useState(!0),[c,u]=j.useState(!1);return j.useEffect(()=>{(async()=>{var d,f;if(!(!e||!t)){l(!0);try{if(t.role==="student"){const{data:p}=await D.from("students").select("*, schools(name)").eq("user_id",e.id).single();p&&n({id:p.id,name:p.name,email:p.email,class:p.class,section:p.section,rollNumber:p.roll_number,phone:p.phone,enrollmentDate:p.enrollment_date,issuedDate:p.issued_date,expiryDate:p.expiry_date,dob:p.dob,status:p.status,grade:p.grade,avatar:p.avatar,parent_name:p.parent_name,parent_email:p.parent_email,parent_phone:p.parent_phone,school_name:(d=p.schools)==null?void 0:d.name})}else if(t.role==="teacher"){const{data:p}=await D.from("teachers").select("*, schools(name)").eq("user_id",e.id).single();p&&i({id:p.id,name:p.name,email:p.email,subject:p.subject,phone:p.phone,joinDate:p.join_date,issuedDate:p.issued_date,expiryDate:p.expiry_date,dob:p.dob,salary:p.salary,status:p.status,avatar:p.avatar,shift:p.shift,school_name:(f=p.schools)==null?void 0:f.name})}}catch(p){console.error("Error fetching profile details:",p)}finally{l(!1)}}})()},[e,t]),o?s.jsx("div",{className:"flex justify-center items-center h-96",children:s.jsx(Bs,{className:"animate-spin text-blue-600",size:48})}):(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="system_admin"||(t==null?void 0:t.role)==="principal"?s.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Profile"}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 flex flex-col items-center text-center",children:[s.jsx("div",{className:"h-32 w-32 rounded-full bg-slate-100 flex items-center justify-center text-4xl font-bold text-slate-500 mb-4 overflow-hidden border-4 border-white shadow-lg",children:t.avatar_url?s.jsx("img",{src:t.avatar_url,alt:t.name,className:"w-full h-full object-cover"}):t.name.charAt(0)}),s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:t.name}),s.jsx(_t,{variant:"info",className:"mt-2 text-sm px-3 py-1 capitalize",children:t.role.replace("_"," ")}),s.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-2 gap-6 w-full text-left max-w-lg",children:[s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Email"}),s.jsxs("p",{className:"text-slate-900 flex items-center gap-2",children:[s.jsx(xn,{size:16})," ",e==null?void 0:e.email]})]}),s.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[s.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"School ID"}),s.jsxs("p",{className:"text-slate-900 flex items-center gap-2",children:[s.jsx(Ti,{size:16})," ",t.school_id||"System"]})]})]})]})]}):r?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"My Profile"}),s.jsx("button",{onClick:()=>u(!0),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:"View Full Academic Record"})]}),s.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 h-32"}),s.jsxs("div",{className:"px-8 pb-8",children:[s.jsxs("div",{className:"relative flex justify-between items-end -mt-12 mb-6",children:[s.jsx("div",{className:"h-24 w-24 rounded-full bg-white p-1 shadow-lg",children:s.jsx("div",{className:"h-full w-full rounded-full bg-slate-200 flex items-center justify-center text-3xl font-bold text-slate-500 overflow-hidden",children:r.avatar?s.jsx("img",{src:r.avatar,className:"w-full h-full object-cover"}):r.name.charAt(0)})}),s.jsx("div",{className:"mb-1",children:s.jsx(_t,{variant:"success",className:"text-sm px-3 py-1",children:"Active Student"})})]}),s.jsx("h2",{className:"text-3xl font-bold text-slate-900",children:r.name}),s.jsx("p",{className:"text-slate-500",children:r.school_name}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-bold text-slate-900 border-b pb-2",children:"Academic Info"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500",children:"Class"}),s.jsxs("p",{className:"font-medium",children:[r.class," - ",r.section]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500",children:"Roll Number"}),s.jsx("p",{className:"font-medium",children:r.rollNumber})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500",children:"Admission No"}),s.jsx("p",{className:"font-medium",children:r.id})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500",children:"Admission Date"}),s.jsx("p",{className:"font-medium",children:De(r.enrollmentDate)})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-bold text-slate-900 border-b pb-2",children:"Personal Info"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(xn,{size:16,className:"text-slate-400"}),s.jsx("span",{children:r.email})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Ho,{size:16,className:"text-slate-400"}),s.jsx("span",{children:r.phone||"N/A"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wr,{size:16,className:"text-slate-400"}),s.jsxs("span",{children:["DOB: ",De(r.dob)]})]})]})]})]})]})]}),s.jsx(FM,{student:r,isOpen:c,onClose:()=>u(!1)})]}):a?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Staff Profile"}),s.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"h-32 w-32 rounded-lg bg-slate-100 flex items-center justify-center text-4xl font-bold text-slate-500 overflow-hidden",children:a.avatar?s.jsx("img",{src:a.avatar,className:"w-full h-full object-cover"}):a.name.charAt(0)})}),s.jsxs("div",{className:"flex-grow space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:a.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs(_t,{variant:"info",children:[a.subject," Teacher"]}),s.jsx("span",{className:"text-slate-400",children:""}),s.jsx("span",{className:"text-slate-600",children:a.school_name})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[s.jsx(xn,{size:16,className:"text-slate-400"})," ",a.email]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[s.jsx(Ho,{size:16,className:"text-slate-400"})," ",a.phone]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[s.jsx(wr,{size:16,className:"text-slate-400"})," Joined: ",De(a.joinDate)]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[s.jsx(J5,{size:16,className:"text-slate-400"})," ID: ",a.id]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[s.jsx(Clock,{size:16,className:"text-slate-400"})," Shift: ",a.shift||"Morning"]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-slate-700",children:[s.jsx(DollarSign,{size:16,className:"text-slate-400"})," Salary: ",$e(a.salary)]})]})]})]})]})})]}):s.jsx("div",{className:"text-center py-12 text-slate-500",children:"Profile not found."})},eve=()=>{const[e,t]=j.useState(""),[r,n]=j.useState(""),[a,i]=j.useState(!1),[o,l]=j.useState(null),[c,u]=j.useState(!navigator.onLine),h=Fs(),{schoolName:d}=fe();j.useEffect(()=>{const p=()=>u(!1),b=()=>u(!0);return window.addEventListener("online",p),window.addEventListener("offline",b),()=>{window.removeEventListener("online",p),window.removeEventListener("offline",b)}},[]);const f=async p=>{if(p.preventDefault(),c){l("You are currently offline. Please check your internet connection.");return}i(!0),l(null);try{const{data:b,error:x}=await D.auth.signInWithPassword({email:e,password:r});if(x)throw x;if(b.session){const{data:g}=await D.from("profiles").select("name, role, school_id").eq("id",b.user.id).single();g&&await gge(b.user.id,g.name,g.role,"Success",g.school_id),h("/")}else l("Login failed. Please check your credentials.")}catch(b){console.error("Login error:",b),b.message==="Failed to fetch"||b.name==="TypeError"?l("Unable to connect to the server. Please check your internet connection or try again later."):b.message==="Invalid login credentials"?l("Invalid email or password. Please try again."):b.message.includes("Email not confirmed")?l("Please verify your email address before logging in."):l(b.message||"An unexpected error occurred during sign in.")}finally{i(!1)}};return s.jsxs("div",{className:"min-h-screen flex font-sans bg-white",children:[s.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24 bg-white",children:s.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[s.jsxs("div",{className:"mb-10",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(nr,{}),s.jsx("span",{className:"text-xl font-bold text-slate-900",children:d})]}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Welcome back"}),s.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Please enter your details to sign in."})]}),c&&s.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-yellow-50 border border-yellow-100 text-sm text-yellow-800 flex items-start gap-2",children:[s.jsx(C3,{className:"h-5 w-5 shrink-0 mt-0.5"}),s.jsx("span",{children:"You are offline. Some features may not work."})]}),o&&s.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-50 border border-red-100 text-sm text-red-600 flex items-start gap-2 animate-in fade-in slide-in-from-top-2",children:[s.jsx(jn,{className:"h-5 w-5 shrink-0 mt-0.5"}),s.jsx("span",{children:o})]}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"email",children:"Email address"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(xn,{className:"h-5 w-5 text-slate-400"})}),s.jsx(J,{id:"email",type:"email",value:e,onChange:p=>t(p.target.value),required:!0,className:"pl-10",placeholder:"Enter your email",autoComplete:"email"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(B,{htmlFor:"password",children:"Password"}),s.jsx(Km,{to:"/forgot-password",tabIndex:-1,className:"text-sm font-medium text-blue-600 hover:text-blue-500",children:"Forgot password?"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ni,{className:"h-5 w-5 text-slate-400"})}),s.jsx(J,{id:"password",type:"password",value:r,onChange:p=>n(p.target.value),required:!0,className:"pl-10",placeholder:"",autoComplete:"current-password"})]})]}),s.jsxs(R,{type:"submit",className:"w-full h-11 text-base",loading:a,disabled:c,children:["Sign in ",s.jsx(Hm,{className:"ml-2 h-4 w-4"})]})]}),s.jsx("p",{className:"mt-8 text-center text-sm text-slate-500",children:"Don't have an account? Contact your school administrator."})]})}),s.jsxs("div",{className:"hidden lg:block relative w-0 flex-1 bg-slate-900",children:[s.jsx("div",{className:"absolute inset-0 h-full w-full bg-gradient-to-br from-blue-600 to-slate-900 opacity-90"}),s.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center p-12 text-white z-10",children:[s.jsxs("div",{className:"max-w-lg text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Streamline Your School Management"}),s.jsx("p",{className:"text-lg text-blue-100 leading-relaxed",children:"Experience a comprehensive platform designed to manage students, teachers, academics, and finances efficiently in one place."})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-64 bg-gradient-to-t from-slate-900 to-transparent opacity-50"})]}),s.jsx("img",{className:"absolute inset-0 h-full w-full object-cover mix-blend-overlay opacity-20",src:"https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80",alt:"School Campus"})]})]})},tve=()=>{const[e,t]=j.useState(""),[r,n]=j.useState(!1),[a,i]=j.useState(null),[o,l]=j.useState(null),{schoolName:c}=fe(),u=async h=>{h.preventDefault(),n(!0),l(null),i(null);try{const{error:d}=await D.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/password-reset`});if(d)throw d;i("Password reset instructions have been sent to your email.")}catch(d){console.error("Reset Password Error:",d),d.message==="Failed to fetch"?l("Unable to connect to the server. Please check your internet connection."):l(d.message||"Failed to send reset link.")}finally{n(!1)}};return s.jsx("div",{className:"min-h-screen bg-secondary flex items-center justify-center p-4 font-sans",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[s.jsxs("div",{className:"flex flex-col items-center mb-6",children:[s.jsxs("div",{className:"flex items-center mb-4 text-primary",children:[s.jsx(nr,{}),s.jsx("span",{className:"ml-2 text-2xl font-bold",children:c})]}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Forgot Password?"}),s.jsx("p",{className:"text-gray-500 mt-1 text-center",children:"Enter your email and we'll send you a reset link."})]}),o&&s.jsxs("div",{className:"bg-red-50 border border-red-100 text-red-700 p-3 rounded-lg mb-4 text-sm flex items-start gap-2",children:[s.jsx(jn,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{children:o})]}),a&&s.jsx("p",{className:"bg-green-100 text-green-700 p-3 rounded-lg mb-4 text-sm",children:a}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(B,{htmlFor:"email",children:"Email Address"}),s.jsx(J,{id:"email",type:"email",value:e,onChange:h=>t(h.target.value),required:!0,placeholder:"you@example.com"})]}),s.jsx(R,{type:"submit",className:"w-full !mt-6",loading:r,children:"Send Reset Link"})]})]}),s.jsxs("p",{className:"text-center text-sm text-gray-600 mt-6",children:["Remember your password?"," ",s.jsx(Km,{to:"/login",className:"font-medium text-blue-600 hover:underline",children:"Sign In"})]})]})})},rve=()=>{const[e,t]=j.useState(""),[r,n]=j.useState(""),[a,i]=j.useState(""),[o,l]=j.useState(!1),[c,u]=j.useState(null),[h,d]=j.useState(null),{schoolName:f}=fe(),p=async b=>{if(b.preventDefault(),l(!0),d(null),u(null),r!==a){d("Passwords do not match."),l(!1);return}try{const[x,g]=await Promise.all([D.from("students").select("id, name").eq("email",e).single(),D.from("teachers").select("id, name").eq("email",e).single()]),y=x.data,m=g.data;if(!y&&!m){d("No record found for this email. Please contact the school administrator to register your profile first."),l(!1);return}const v=y?"student":"teacher",S=y?y.name:m==null?void 0:m.name,{error:w}=await D.auth.signUp({email:e,password:r,options:{data:{role:v,full_name:S},emailRedirectTo:window.location.origin}});if(w)throw w;u("Account activated successfully! Please check your email to confirm.")}catch(x){d(x.message||"An error occurred during activation.")}finally{l(!1)}};return s.jsxs("div",{className:"min-h-screen flex font-sans bg-white",children:[s.jsx("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24 bg-white overflow-y-auto",children:s.jsxs("div",{className:"mx-auto w-full max-w-sm lg:w-96",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[s.jsx(nr,{}),s.jsx("span",{className:"text-xl font-bold text-slate-900",children:f})]}),s.jsx("h2",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Activate Account"}),s.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"Enter your registered email to set up your login."})]}),h&&s.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-red-50 border border-red-100 text-sm text-red-600 flex items-start gap-2",children:[s.jsx(VE,{className:"h-5 w-5 shrink-0"}),s.jsx("span",{children:h})]}),c&&s.jsx("div",{className:"mb-6 p-4 rounded-lg bg-green-50 border border-green-100 text-sm text-green-700 font-medium",children:c}),s.jsxs("form",{onSubmit:p,className:"space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"email",children:"Registered Email"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(xn,{className:"h-5 w-5 text-slate-400"})}),s.jsx(J,{id:"email",type:"email",value:e,onChange:b=>t(b.target.value),required:!0,placeholder:"you@school.edu",className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"password",children:"Create Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ni,{className:"h-5 w-5 text-slate-400"})}),s.jsx(J,{id:"password",type:"password",value:r,onChange:b=>n(b.target.value),required:!0,placeholder:"",className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(B,{htmlFor:"confirmPassword",children:"Confirm Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ni,{className:"h-5 w-5 text-slate-400"})}),s.jsx(J,{id:"confirmPassword",type:"password",value:a,onChange:b=>i(b.target.value),required:!0,placeholder:"",className:"pl-10"})]})]}),s.jsxs(R,{type:"submit",className:"w-full h-11 text-base",loading:o,children:["Activate Account ",s.jsx(Hm,{className:"ml-2 h-4 w-4"})]})]}),s.jsxs("p",{className:"mt-8 text-center text-sm text-slate-600",children:["Already activated?"," ",s.jsx(Km,{to:"/login",className:"font-semibold text-blue-600 hover:text-blue-500",children:"Sign in"})]})]})}),s.jsxs("div",{className:"hidden lg:block relative w-0 flex-1 bg-slate-900",children:[s.jsx("div",{className:"absolute inset-0 h-full w-full bg-gradient-to-bl from-blue-900 to-slate-950 opacity-90"}),s.jsx("div",{className:"absolute inset-0 flex flex-col justify-center items-center p-12 text-white z-10",children:s.jsxs("div",{className:"max-w-lg text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Secure Access"}),s.jsx("p",{className:"text-lg text-blue-100 leading-relaxed",children:"Your account must be pre-registered by the school administration before activation."})]})}),s.jsx("img",{className:"absolute inset-0 h-full w-full object-cover mix-blend-overlay opacity-20",src:"https://images.unsplash.com/photo-1509062522246-3755977927d7?ixlib=rb-4.0.3&auto=format&fit=crop&w=1744&q=80",alt:"Education"})]})]})},hs=["system_admin","admin","principal","teacher","student","parent","cashier"],Nh=["system_admin","admin","principal","teacher","cashier"],ht=["system_admin","admin","principal"],lr=["system_admin","admin","principal","teacher"],eo=["system_admin","admin","principal","cashier"],nve=()=>{const{session:e,loading:t,profile:r}=fe();return t?s.jsx("div",{className:"flex justify-center items-center h-screen bg-slate-50",children:s.jsx(Bs,{className:"animate-spin text-blue-600",size:48})}):e&&(r==null?void 0:r.role)==="system_admin"&&window.location.pathname==="/"?s.jsx(An,{to:"/super-admin"}):s.jsxs(dN,{children:[s.jsx(pe,{path:"/login",element:e?s.jsx(An,{to:"/"}):s.jsx(eve,{})}),s.jsx(pe,{path:"/forgot-password",element:e?s.jsx(An,{to:"/"}):s.jsx(tve,{})}),s.jsx(pe,{path:"/activate",element:e?s.jsx(An,{to:"/"}):s.jsx(rve,{})}),s.jsx(pe,{path:"/*",element:e?s.jsx(Oq,{children:s.jsxs(dN,{children:[s.jsx(pe,{index:!0,element:s.jsx(fge,{})}),s.jsx(pe,{path:"profile",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Zye,{})})}),s.jsx(pe,{path:"super-admin",element:s.jsx(ve,{allowedRoles:["system_admin"],children:s.jsx(Lye,{})})}),s.jsx(pe,{path:"schools",element:s.jsx(ve,{allowedRoles:["system_admin"],children:s.jsx(Iye,{})})}),s.jsx(pe,{path:"front-office",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Vye,{})})}),s.jsx(pe,{path:"download-center",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Wye,{})})}),s.jsx(pe,{path:"noticeboard",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Wge,{})})}),s.jsx(pe,{path:"events",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Vge,{})})}),s.jsx(pe,{path:"live-classes",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Qye,{})})}),s.jsx(pe,{path:"homework",element:s.jsx(ve,{allowedRoles:[...lr,"student","parent"],children:s.jsx($ye,{})})}),s.jsx(pe,{path:"timetable",element:s.jsx(ve,{allowedRoles:[...lr,"student"],children:s.jsx(iA,{})})}),s.jsx(pe,{path:"teachers-timetable",element:s.jsx(ve,{allowedRoles:lr,children:s.jsx(iA,{})})}),s.jsx(pe,{path:"lesson-plan",element:s.jsx(ve,{allowedRoles:lr,children:s.jsx(Gye,{})})}),s.jsx(pe,{path:"courses",element:s.jsx(ve,{allowedRoles:[...lr,"student"],children:s.jsx(Fge,{})})}),s.jsx(pe,{path:"classes",element:s.jsx(ve,{allowedRoles:[...lr,"student"],children:s.jsx(Pge,{})})}),s.jsx(pe,{path:"assign-teacher",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Eye,{})})}),s.jsx(pe,{path:"promote-students",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(wge,{})})}),s.jsx(pe,{path:"subject-groups",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(_ye,{})})}),s.jsx(pe,{path:"sections",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Nge,{})})}),s.jsx(pe,{path:"departments",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(zge,{})})}),s.jsx(pe,{path:"students",element:s.jsx(ve,{allowedRoles:[...lr,"parent","student"],children:s.jsx(xge,{})})}),s.jsx(pe,{path:"students/admission",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(yge,{})})}),s.jsx(pe,{path:"students/disabled",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(vge,{})})}),s.jsx(pe,{path:"students/bulk-delete",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(bge,{})})}),s.jsx(pe,{path:"students/categories",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(jge,{})})}),s.jsx(pe,{path:"alumni",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Jye,{})})}),s.jsx(pe,{path:"teachers",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(pge,{})})}),s.jsx(pe,{path:"staff-attendance",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Sye,{})})}),s.jsx(pe,{path:"payroll",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Age,{})})}),s.jsx(pe,{path:"leaves",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(wye,{})})}),s.jsx(pe,{path:"fees",element:s.jsx(ve,{allowedRoles:[...eo,"student","parent"],children:s.jsx(Xge,{})})}),s.jsx(pe,{path:"fees/search",element:s.jsx(ve,{allowedRoles:eo,children:s.jsx(An,{to:"/fees",replace:!0})})}),s.jsx(pe,{path:"fees/due",element:s.jsx(ve,{allowedRoles:eo,children:s.jsx(Jge,{})})}),s.jsx(pe,{path:"fees/master",element:s.jsx(ve,{allowedRoles:eo,children:s.jsx(Cye,{})})}),s.jsx(pe,{path:"incomes",element:s.jsx(ve,{allowedRoles:eo,children:s.jsx(sye,{})})}),s.jsx(pe,{path:"expenses",element:s.jsx(ve,{allowedRoles:eo,children:s.jsx(aye,{})})}),s.jsx(pe,{path:"attendance",element:s.jsx(ve,{allowedRoles:[...lr,"student","parent"],children:s.jsx(Qge,{})})}),s.jsx(pe,{path:"attendance/date",element:s.jsx(ve,{allowedRoles:lr,children:s.jsx(An,{to:"/attendance",replace:!0})})}),s.jsx(pe,{path:"attendance/approve",element:s.jsx(ve,{allowedRoles:lr,children:s.jsx(An,{to:"/leaves",replace:!0})})}),s.jsx(pe,{path:"exams",element:s.jsx(ve,{allowedRoles:[...lr,"student"],children:s.jsx(Sge,{})})}),s.jsx(pe,{path:"exams/schedule",element:s.jsx(ve,{allowedRoles:[...lr,"student","parent"],children:s.jsx(Aye,{})})}),s.jsx(pe,{path:"exams/admit-card",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Oye,{})})}),s.jsx(pe,{path:"results",element:s.jsx(ve,{allowedRoles:[...lr,"student","parent"],children:s.jsx($ge,{})})}),s.jsx(pe,{path:"grades",element:s.jsx(ve,{allowedRoles:lr,children:s.jsx(kge,{})})}),s.jsx(pe,{path:"transcript",element:s.jsx(ve,{allowedRoles:[...lr,"student"],children:s.jsx(kye,{})})}),s.jsx(pe,{path:"online-exam",element:s.jsx(ve,{allowedRoles:[...lr,"student"],children:s.jsx(Xye,{})})}),s.jsx(pe,{path:"email",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Fye,{})})}),s.jsx(pe,{path:"library",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Bge,{})})}),s.jsx(pe,{path:"library/issue",element:s.jsx(ve,{allowedRoles:Nh,children:s.jsx(jye,{})})}),s.jsx(pe,{path:"inventory",element:s.jsx(ve,{allowedRoles:Nh,children:s.jsx(oA,{})})}),s.jsx(pe,{path:"inventory/add",element:s.jsx(ve,{allowedRoles:Nh,children:s.jsx(oA,{})})}),s.jsx(pe,{path:"inventory/issue",element:s.jsx(ve,{allowedRoles:Nh,children:s.jsx(bye,{})})}),s.jsx(pe,{path:"transport",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(qge,{})})}),s.jsx(pe,{path:"transport/assign",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Dye,{})})}),s.jsx(pe,{path:"hostel",element:s.jsx(ve,{allowedRoles:hs,children:s.jsx(Uge,{})})}),s.jsx(pe,{path:"hostel/room-type",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(An,{to:"/hostel",replace:!0})})}),s.jsx(pe,{path:"id-cards",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Lge,{})})}),s.jsx(pe,{path:"certificates",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(Nye,{})})}),s.jsx(pe,{path:"reports",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(gye,{})})}),s.jsx(pe,{path:"reports/logs",element:s.jsx(ve,{allowedRoles:["system_admin"],children:s.jsx(yye,{})})}),s.jsx(pe,{path:"reports/audit",element:s.jsx(ve,{allowedRoles:["system_admin"],children:s.jsx(vye,{})})}),s.jsx(pe,{path:"settings",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(nye,{})})}),s.jsx(pe,{path:"features",element:s.jsx(ve,{allowedRoles:ht,children:s.jsx(tye,{})})}),s.jsx(pe,{path:"*",element:s.jsx(An,{to:"/"})})]})}):s.jsx(An,{to:"/login"})})]})};function sve(){return s.jsx(R5,{children:s.jsxs(jq,{children:[s.jsx(nve,{}),s.jsx(bq,{position:"bottom-right"})]})})}class ave extends j.Component{constructor(){super(...arguments);Yw(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Uncaught error:",r,n)}render(){var r;return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-slate-200 p-8 max-w-md w-full text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(dd,{className:"h-8 w-8 text-red-600"})}),s.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Something went wrong"}),s.jsx("p",{className:"text-slate-500 mb-6 text-sm",children:"The application encountered an unexpected error. We've logged this issue and are working to fix it."}),s.jsx("div",{className:"bg-slate-50 p-3 rounded-md mb-6 text-left overflow-auto max-h-32",children:s.jsx("code",{className:"text-xs text-red-500 font-mono break-all",children:(r=this.state.error)==null?void 0:r.message})}),s.jsxs(R,{onClick:()=>window.location.reload(),className:"w-full",children:[s.jsx(Qm,{className:"mr-2 h-4 w-4"}),"Reload Application"]})]})}):this.props.children}}SE(document.getElementById("root")).render(s.jsx(j.StrictMode,{children:s.jsx(ave,{children:s.jsx(sve,{})})}));
